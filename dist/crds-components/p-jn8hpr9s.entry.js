import{r as t,h as n,g as i}from"./p-70ddbb99.js";import{L as r,C as e,U as s}from"./p-cd093515.js";var o="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):void 0;function u(t){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var a=10,h=2;function c(t){return function t(n,i){switch(u(n)){case"string":return JSON.stringify(n);case"function":return n.name?"[function ".concat(n.name,"]"):"[function]";case"object":return null===n?"null":function(n,i){if(-1!==i.indexOf(n))return"[Circular]";var r=[].concat(i,[n]),e=function(t){var n=t[String(o)];return"function"==typeof n?n:"function"==typeof t.inspect?t.inspect:void 0}(n);if(void 0!==e){var s=e.call(n);if(s!==n)return"string"==typeof s?s:t(s,r)}else if(Array.isArray(n))return function(n,i){if(0===n.length)return"[]";if(i.length>h)return"[Array]";for(var r=Math.min(a,n.length),e=n.length-r,s=[],o=0;o<r;++o)s.push(t(n[o],i));return 1===e?s.push("... 1 more item"):e>1&&s.push("... ".concat(e," more items")),"["+s.join(", ")+"]"}(n,r);return function(n,i){var r=Object.keys(n);return 0===r.length?"{}":i.length>h?"["+function(t){var n=Object.prototype.toString.call(t).replace(/^\[object /,"").replace(/]$/,"");if("Object"===n&&"function"==typeof t.constructor){var i=t.constructor.name;if("string"==typeof i&&""!==i)return i}return n}(n)+"]":"{ "+r.map((function(r){return r+": "+t(n[r],i)})).join(", ")+" }"}(n,r)}(n,i);default:return String(n)}}(t,[])}function f(t,n){if(!Boolean(t))throw new Error(n)}function l(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.prototype.toString;t.prototype.toJSON=n,t.prototype.inspect=n,o&&(t.prototype[o]=n)}function v(t){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function d(t,n){for(var i,r=/\r\n|[\n\r]/g,e=1,s=n+1;(i=r.exec(t.body))&&i.index<n;)e+=1,s=n+1-(i.index+i[0].length);return{line:e,column:s}}function p(t){return w(t.source,d(t.source,t.start))}function w(t,n){var i=t.locationOffset.column-1,r=y(i)+t.body,e=n.line-1,s=n.line+(t.locationOffset.line-1),o=n.column+(1===n.line?i:0),u="".concat(t.name,":").concat(s,":").concat(o,"\n"),a=r.split(/\r\n|[\n\r]/g),h=a[e];if(h.length>120){for(var c=Math.floor(o/80),f=o%80,l=[],v=0;v<h.length;v+=80)l.push(h.slice(v,v+80));return u+m([["".concat(s),l[0]]].concat(l.slice(1,c+1).map((function(t){return["",t]})),[[" ",y(f-1)+"^"],["",l[c+1]]]))}return u+m([["".concat(s-1),a[e-1]],["".concat(s),h],["",y(o-1)+"^"],["".concat(s+1),a[e+1]]])}function m(t){var n=t.filter((function(t){return void 0!==t[1]})),i=Math.max.apply(Math,n.map((function(t){return t[0].length})));return n.map((function(t){var n,r=t[1];return y(i-(n=t[0]).length)+n+" | "+r})).join("\n")}function y(t){return Array(t+1).join(" ")}function g(t,n,i,r,e,s,o){var u=Array.isArray(n)?0!==n.length?n:void 0:n?[n]:void 0,a=i;if(!a&&u){var h=u[0];a=h&&h.loc&&h.loc.source}var c,f=r;!f&&u&&(f=u.reduce((function(t,n){return n.loc&&t.push(n.loc.start),t}),[])),f&&0===f.length&&(f=void 0),r&&i?c=r.map((function(t){return d(i,t)})):u&&(c=u.reduce((function(t,n){return n.loc&&t.push(d(n.loc.source,n.loc.start)),t}),[]));var l,p=o;if(null==p&&null!=s){var w=s.extensions;"object"==v(l=w)&&null!==l&&(p=w)}Object.defineProperties(this,{message:{value:t,enumerable:!0,writable:!0},locations:{value:c||void 0,enumerable:Boolean(c)},path:{value:e||void 0,enumerable:Boolean(e)},nodes:{value:u||void 0},source:{value:a||void 0},positions:{value:f||void 0},originalError:{value:s},extensions:{value:p||void 0,enumerable:Boolean(p)}}),s&&s.stack?Object.defineProperty(this,"stack",{value:s.stack,writable:!0,configurable:!0}):Error.captureStackTrace?Error.captureStackTrace(this,g):Object.defineProperty(this,"stack",{value:Error().stack,writable:!0,configurable:!0})}function F(t,n,i){return new g("Syntax Error: ".concat(i),void 0,t,[n])}g.prototype=Object.create(Error.prototype,{constructor:{value:g},name:{value:"GraphQLError"},toString:{value:function(){return function(t){var n=t.message;if(t.nodes)for(var i=0,r=t.nodes;i<r.length;i++){var e=r[i];e.loc&&(n+="\n\n"+p(e.loc))}else if(t.source&&t.locations)for(var s=0,o=t.locations;s<o.length;s++)n+="\n\n"+w(t.source,o[s]);return n}(this)}}});var b=Object.freeze({NAME:"Name",DOCUMENT:"Document",OPERATION_DEFINITION:"OperationDefinition",VARIABLE_DEFINITION:"VariableDefinition",SELECTION_SET:"SelectionSet",FIELD:"Field",ARGUMENT:"Argument",FRAGMENT_SPREAD:"FragmentSpread",INLINE_FRAGMENT:"InlineFragment",FRAGMENT_DEFINITION:"FragmentDefinition",VARIABLE:"Variable",INT:"IntValue",FLOAT:"FloatValue",STRING:"StringValue",BOOLEAN:"BooleanValue",NULL:"NullValue",ENUM:"EnumValue",LIST:"ListValue",OBJECT:"ObjectValue",OBJECT_FIELD:"ObjectField",DIRECTIVE:"Directive",NAMED_TYPE:"NamedType",LIST_TYPE:"ListType",NON_NULL_TYPE:"NonNullType",SCHEMA_DEFINITION:"SchemaDefinition",OPERATION_TYPE_DEFINITION:"OperationTypeDefinition",SCALAR_TYPE_DEFINITION:"ScalarTypeDefinition",OBJECT_TYPE_DEFINITION:"ObjectTypeDefinition",FIELD_DEFINITION:"FieldDefinition",INPUT_VALUE_DEFINITION:"InputValueDefinition",INTERFACE_TYPE_DEFINITION:"InterfaceTypeDefinition",UNION_TYPE_DEFINITION:"UnionTypeDefinition",ENUM_TYPE_DEFINITION:"EnumTypeDefinition",ENUM_VALUE_DEFINITION:"EnumValueDefinition",INPUT_OBJECT_TYPE_DEFINITION:"InputObjectTypeDefinition",DIRECTIVE_DEFINITION:"DirectiveDefinition",SCHEMA_EXTENSION:"SchemaExtension",SCALAR_TYPE_EXTENSION:"ScalarTypeExtension",OBJECT_TYPE_EXTENSION:"ObjectTypeExtension",INTERFACE_TYPE_EXTENSION:"InterfaceTypeExtension",UNION_TYPE_EXTENSION:"UnionTypeExtension",ENUM_TYPE_EXTENSION:"EnumTypeExtension",INPUT_OBJECT_TYPE_EXTENSION:"InputObjectTypeExtension"}),E=function(t,n,i){this.body=t,this.name=n||"GraphQL request",this.locationOffset=i||{line:1,column:1},this.locationOffset.line>0||f(0,"line in locationOffset is 1-indexed and must be positive"),this.locationOffset.column>0||f(0,"column in locationOffset is 1-indexed and must be positive")};function S(t){var n=t.split(/\r\n|[\n\r]/g),i=function(t){for(var n=null,i=1;i<t.length;i++){var r=t[i],e=A(r);if(e!==r.length&&(null===n||e<n)&&0===(n=e))break}return null===n?0:n}(n);if(0!==i)for(var r=1;r<n.length;r++)n[r]=n[r].slice(i);for(;n.length>0&&k(n[0]);)n.shift();for(;n.length>0&&k(n[n.length-1]);)n.pop();return n.join("\n")}function A(t){for(var n=0;n<t.length&&(" "===t[n]||"\t"===t[n]);)n++;return n}function k(t){return A(t)===t.length}"function"==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(E.prototype,Symbol.toStringTag,{get:function(){return this.constructor.name}});var C=Object.freeze({SOF:"<SOF>",EOF:"<EOF>",BANG:"!",DOLLAR:"$",AMP:"&",PAREN_L:"(",PAREN_R:")",SPREAD:"...",COLON:":",EQUALS:"=",AT:"@",BRACKET_L:"[",BRACKET_R:"]",BRACE_L:"{",PIPE:"|",BRACE_R:"}",NAME:"Name",INT:"Int",FLOAT:"Float",STRING:"String",BLOCK_STRING:"BlockString",COMMENT:"Comment"});function T(){return this.lastToken=this.token,this.token=this.lookahead()}function I(){var t=this.token;if(t.kind!==C.EOF)do{t=t.next||(t.next=R(this,t))}while(t.kind===C.COMMENT);return t}function x(t,n,i,r,e,s,o){this.kind=t,this.start=n,this.end=i,this.line=r,this.column=e,this.value=o,this.prev=s,this.next=null}function O(t){return isNaN(t)?C.EOF:t<127?JSON.stringify(String.fromCharCode(t)):'"\\u'.concat(("00"+t.toString(16).toUpperCase()).slice(-4),'"')}function R(t,n){var i=t.source,r=i.body,e=r.length,s=function(t,n,i){for(var r=t.length,e=n;e<r;){var s=t.charCodeAt(e);if(9===s||32===s||44===s||65279===s)++e;else if(10===s)++e,++i.line,i.lineStart=e;else{if(13!==s)break;10===t.charCodeAt(e+1)?e+=2:++e,++i.line,i.lineStart=e}}return e}(r,n.end,t),o=t.line,u=1+s-t.lineStart;if(s>=e)return new x(C.EOF,e,e,o,u,n);var a=r.charCodeAt(s);switch(a){case 33:return new x(C.BANG,s,s+1,o,u,n);case 35:return function(t,n,i,r,e){var s,o=t.body,u=n;do{s=o.charCodeAt(++u)}while(!isNaN(s)&&(s>31||9===s));return new x(C.COMMENT,n,u,i,r,e,o.slice(n+1,u))}(i,s,o,u,n);case 36:return new x(C.DOLLAR,s,s+1,o,u,n);case 38:return new x(C.AMP,s,s+1,o,u,n);case 40:return new x(C.PAREN_L,s,s+1,o,u,n);case 41:return new x(C.PAREN_R,s,s+1,o,u,n);case 46:if(46===r.charCodeAt(s+1)&&46===r.charCodeAt(s+2))return new x(C.SPREAD,s,s+3,o,u,n);break;case 58:return new x(C.COLON,s,s+1,o,u,n);case 61:return new x(C.EQUALS,s,s+1,o,u,n);case 64:return new x(C.AT,s,s+1,o,u,n);case 91:return new x(C.BRACKET_L,s,s+1,o,u,n);case 93:return new x(C.BRACKET_R,s,s+1,o,u,n);case 123:return new x(C.BRACE_L,s,s+1,o,u,n);case 124:return new x(C.PIPE,s,s+1,o,u,n);case 125:return new x(C.BRACE_R,s,s+1,o,u,n);case 65:case 66:case 67:case 68:case 69:case 70:case 71:case 72:case 73:case 74:case 75:case 76:case 77:case 78:case 79:case 80:case 81:case 82:case 83:case 84:case 85:case 86:case 87:case 88:case 89:case 90:case 95:case 97:case 98:case 99:case 100:case 101:case 102:case 103:case 104:case 105:case 106:case 107:case 108:case 109:case 110:case 111:case 112:case 113:case 114:case 115:case 116:case 117:case 118:case 119:case 120:case 121:case 122:return function(t,n,i,r,e){for(var s=t.body,o=s.length,u=n+1,a=0;u!==o&&!isNaN(a=s.charCodeAt(u))&&(95===a||a>=48&&a<=57||a>=65&&a<=90||a>=97&&a<=122);)++u;return new x(C.NAME,n,u,i,r,e,s.slice(n,u))}(i,s,o,u,n);case 45:case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return function(t,n,i,r,e,s){var o=t.body,u=i,a=n,h=!1;if(45===u&&(u=o.charCodeAt(++a)),48===u){if((u=o.charCodeAt(++a))>=48&&u<=57)throw F(t,a,"Invalid number, unexpected digit after 0: ".concat(O(u),"."))}else a=D(t,a,u),u=o.charCodeAt(a);return 46===u&&(h=!0,u=o.charCodeAt(++a),a=D(t,a,u),u=o.charCodeAt(a)),69!==u&&101!==u||(h=!0,43!==(u=o.charCodeAt(++a))&&45!==u||(u=o.charCodeAt(++a)),a=D(t,a,u)),new x(h?C.FLOAT:C.INT,n,a,r,e,s,o.slice(n,a))}(i,s,a,o,u,n);case 34:return 34===r.charCodeAt(s+1)&&34===r.charCodeAt(s+2)?function(t,n,i,r,e,s){for(var o=t.body,u=n+3,a=u,h=0,c="";u<o.length&&!isNaN(h=o.charCodeAt(u));){if(34===h&&34===o.charCodeAt(u+1)&&34===o.charCodeAt(u+2))return c+=o.slice(a,u),new x(C.BLOCK_STRING,n,u+3,i,r,e,S(c));if(h<32&&9!==h&&10!==h&&13!==h)throw F(t,u,"Invalid character within String: ".concat(O(h),"."));10===h?(++u,++s.line,s.lineStart=u):13===h?(10===o.charCodeAt(u+1)?u+=2:++u,++s.line,s.lineStart=u):92===h&&34===o.charCodeAt(u+1)&&34===o.charCodeAt(u+2)&&34===o.charCodeAt(u+3)?(c+=o.slice(a,u)+'"""',a=u+=4):++u}throw F(t,u,"Unterminated string.")}(i,s,o,u,n,t):function(t,n,i,r,e){for(var s,o,u,a,h=t.body,c=n+1,f=c,l=0,v="";c<h.length&&!isNaN(l=h.charCodeAt(c))&&10!==l&&13!==l;){if(34===l)return v+=h.slice(f,c),new x(C.STRING,n,c+1,i,r,e,v);if(l<32&&9!==l)throw F(t,c,"Invalid character within String: ".concat(O(l),"."));if(++c,92===l){switch(v+=h.slice(f,c-1),l=h.charCodeAt(c)){case 34:v+='"';break;case 47:v+="/";break;case 92:v+="\\";break;case 98:v+="\b";break;case 102:v+="\f";break;case 110:v+="\n";break;case 114:v+="\r";break;case 116:v+="\t";break;case 117:var d=(s=h.charCodeAt(c+1),o=h.charCodeAt(c+2),u=h.charCodeAt(c+3),a=h.charCodeAt(c+4),N(s)<<12|N(o)<<8|N(u)<<4|N(a));if(d<0){var p=h.slice(c+1,c+5);throw F(t,c,"Invalid character escape sequence: \\u".concat(p,"."))}v+=String.fromCharCode(d),c+=4;break;default:throw F(t,c,"Invalid character escape sequence: \\".concat(String.fromCharCode(l),"."))}f=++c}}throw F(t,c,"Unterminated string.")}(i,s,o,u,n)}throw F(i,s,function(t){return t<32&&9!==t&&10!==t&&13!==t?"Cannot contain the invalid character ".concat(O(t),"."):39===t?"Unexpected single quote character ('), did you mean to use a double quote (\")?":"Cannot parse the unexpected character ".concat(O(t),".")}(a))}function D(t,n,i){var r=t.body,e=n,s=i;if(s>=48&&s<=57){do{s=r.charCodeAt(++e)}while(s>=48&&s<=57);return e}throw F(t,e,"Invalid number, expected digit but got: ".concat(O(s),"."))}function N(t){return t>=48&&t<=57?t-48:t>=65&&t<=70?t-55:t>=97&&t<=102?t-87:-1}l(x,(function(){return{kind:this.kind,value:this.value,line:this.line,column:this.column}}));var j=Object.freeze({QUERY:"QUERY",MUTATION:"MUTATION",SUBSCRIPTION:"SUBSCRIPTION",FIELD:"FIELD",FRAGMENT_DEFINITION:"FRAGMENT_DEFINITION",FRAGMENT_SPREAD:"FRAGMENT_SPREAD",INLINE_FRAGMENT:"INLINE_FRAGMENT",VARIABLE_DEFINITION:"VARIABLE_DEFINITION",SCHEMA:"SCHEMA",SCALAR:"SCALAR",OBJECT:"OBJECT",FIELD_DEFINITION:"FIELD_DEFINITION",ARGUMENT_DEFINITION:"ARGUMENT_DEFINITION",INTERFACE:"INTERFACE",UNION:"UNION",ENUM:"ENUM",ENUM_VALUE:"ENUM_VALUE",INPUT_OBJECT:"INPUT_OBJECT",INPUT_FIELD_DEFINITION:"INPUT_FIELD_DEFINITION"}),_=function(){function t(t,n){var i="string"==typeof t?new E(t):t;i instanceof E||f(0,"Must provide Source. Received: ".concat(c(i))),this._lexer=function(t){var n=new x(C.SOF,0,0,0,0,null);return{source:t,options:void 0,lastToken:n,token:n,line:1,lineStart:0,advance:T,lookahead:I}}(i),this._options=n||{}}var n=t.prototype;return n.parseName=function(){var t=this.expectToken(C.NAME);return{kind:b.NAME,value:t.value,loc:this.loc(t)}},n.parseDocument=function(){var t=this._lexer.token;return{kind:b.DOCUMENT,definitions:this.many(C.SOF,this.parseDefinition,C.EOF),loc:this.loc(t)}},n.parseDefinition=function(){if(this.peek(C.NAME))switch(this._lexer.token.value){case"query":case"mutation":case"subscription":return this.parseOperationDefinition();case"fragment":return this.parseFragmentDefinition();case"schema":case"scalar":case"type":case"interface":case"union":case"enum":case"input":case"directive":return this.parseTypeSystemDefinition();case"extend":return this.parseTypeSystemExtension()}else{if(this.peek(C.BRACE_L))return this.parseOperationDefinition();if(this.peekDescription())return this.parseTypeSystemDefinition()}throw this.unexpected()},n.parseOperationDefinition=function(){var t=this._lexer.token;if(this.peek(C.BRACE_L))return{kind:b.OPERATION_DEFINITION,operation:"query",name:void 0,variableDefinitions:[],directives:[],selectionSet:this.parseSelectionSet(),loc:this.loc(t)};var n,i=this.parseOperationType();return this.peek(C.NAME)&&(n=this.parseName()),{kind:b.OPERATION_DEFINITION,operation:i,name:n,variableDefinitions:this.parseVariableDefinitions(),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet(),loc:this.loc(t)}},n.parseOperationType=function(){var t=this.expectToken(C.NAME);switch(t.value){case"query":return"query";case"mutation":return"mutation";case"subscription":return"subscription"}throw this.unexpected(t)},n.parseVariableDefinitions=function(){return this.optionalMany(C.PAREN_L,this.parseVariableDefinition,C.PAREN_R)},n.parseVariableDefinition=function(){var t=this._lexer.token;return{kind:b.VARIABLE_DEFINITION,variable:this.parseVariable(),type:(this.expectToken(C.COLON),this.parseTypeReference()),defaultValue:this.expectOptionalToken(C.EQUALS)?this.parseValueLiteral(!0):void 0,directives:this.parseDirectives(!0),loc:this.loc(t)}},n.parseVariable=function(){var t=this._lexer.token;return this.expectToken(C.DOLLAR),{kind:b.VARIABLE,name:this.parseName(),loc:this.loc(t)}},n.parseSelectionSet=function(){var t=this._lexer.token;return{kind:b.SELECTION_SET,selections:this.many(C.BRACE_L,this.parseSelection,C.BRACE_R),loc:this.loc(t)}},n.parseSelection=function(){return this.peek(C.SPREAD)?this.parseFragment():this.parseField()},n.parseField=function(){var t,n,i=this._lexer.token,r=this.parseName();return this.expectOptionalToken(C.COLON)?(t=r,n=this.parseName()):n=r,{kind:b.FIELD,alias:t,name:n,arguments:this.parseArguments(!1),directives:this.parseDirectives(!1),selectionSet:this.peek(C.BRACE_L)?this.parseSelectionSet():void 0,loc:this.loc(i)}},n.parseArguments=function(t){return this.optionalMany(C.PAREN_L,t?this.parseConstArgument:this.parseArgument,C.PAREN_R)},n.parseArgument=function(){var t=this._lexer.token,n=this.parseName();return this.expectToken(C.COLON),{kind:b.ARGUMENT,name:n,value:this.parseValueLiteral(!1),loc:this.loc(t)}},n.parseConstArgument=function(){var t=this._lexer.token;return{kind:b.ARGUMENT,name:this.parseName(),value:(this.expectToken(C.COLON),this.parseValueLiteral(!0)),loc:this.loc(t)}},n.parseFragment=function(){var t=this._lexer.token;this.expectToken(C.SPREAD);var n=this.expectOptionalKeyword("on");return!n&&this.peek(C.NAME)?{kind:b.FRAGMENT_SPREAD,name:this.parseFragmentName(),directives:this.parseDirectives(!1),loc:this.loc(t)}:{kind:b.INLINE_FRAGMENT,typeCondition:n?this.parseNamedType():void 0,directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet(),loc:this.loc(t)}},n.parseFragmentDefinition=function(){var t=this._lexer.token;return this.expectKeyword("fragment"),this._options.experimentalFragmentVariables?{kind:b.FRAGMENT_DEFINITION,name:this.parseFragmentName(),variableDefinitions:this.parseVariableDefinitions(),typeCondition:(this.expectKeyword("on"),this.parseNamedType()),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet(),loc:this.loc(t)}:{kind:b.FRAGMENT_DEFINITION,name:this.parseFragmentName(),typeCondition:(this.expectKeyword("on"),this.parseNamedType()),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet(),loc:this.loc(t)}},n.parseFragmentName=function(){if("on"===this._lexer.token.value)throw this.unexpected();return this.parseName()},n.parseValueLiteral=function(t){var n=this._lexer.token;switch(n.kind){case C.BRACKET_L:return this.parseList(t);case C.BRACE_L:return this.parseObject(t);case C.INT:return this._lexer.advance(),{kind:b.INT,value:n.value,loc:this.loc(n)};case C.FLOAT:return this._lexer.advance(),{kind:b.FLOAT,value:n.value,loc:this.loc(n)};case C.STRING:case C.BLOCK_STRING:return this.parseStringLiteral();case C.NAME:return"true"===n.value||"false"===n.value?(this._lexer.advance(),{kind:b.BOOLEAN,value:"true"===n.value,loc:this.loc(n)}):"null"===n.value?(this._lexer.advance(),{kind:b.NULL,loc:this.loc(n)}):(this._lexer.advance(),{kind:b.ENUM,value:n.value,loc:this.loc(n)});case C.DOLLAR:if(!t)return this.parseVariable()}throw this.unexpected()},n.parseStringLiteral=function(){var t=this._lexer.token;return this._lexer.advance(),{kind:b.STRING,value:t.value,block:t.kind===C.BLOCK_STRING,loc:this.loc(t)}},n.parseList=function(t){var n=this,i=this._lexer.token;return{kind:b.LIST,values:this.any(C.BRACKET_L,(function(){return n.parseValueLiteral(t)}),C.BRACKET_R),loc:this.loc(i)}},n.parseObject=function(t){var n=this,i=this._lexer.token;return{kind:b.OBJECT,fields:this.any(C.BRACE_L,(function(){return n.parseObjectField(t)}),C.BRACE_R),loc:this.loc(i)}},n.parseObjectField=function(t){var n=this._lexer.token,i=this.parseName();return this.expectToken(C.COLON),{kind:b.OBJECT_FIELD,name:i,value:this.parseValueLiteral(t),loc:this.loc(n)}},n.parseDirectives=function(t){for(var n=[];this.peek(C.AT);)n.push(this.parseDirective(t));return n},n.parseDirective=function(t){var n=this._lexer.token;return this.expectToken(C.AT),{kind:b.DIRECTIVE,name:this.parseName(),arguments:this.parseArguments(t),loc:this.loc(n)}},n.parseTypeReference=function(){var t,n=this._lexer.token;return this.expectOptionalToken(C.BRACKET_L)?(t=this.parseTypeReference(),this.expectToken(C.BRACKET_R),t={kind:b.LIST_TYPE,type:t,loc:this.loc(n)}):t=this.parseNamedType(),this.expectOptionalToken(C.BANG)?{kind:b.NON_NULL_TYPE,type:t,loc:this.loc(n)}:t},n.parseNamedType=function(){var t=this._lexer.token;return{kind:b.NAMED_TYPE,name:this.parseName(),loc:this.loc(t)}},n.parseTypeSystemDefinition=function(){var t=this.peekDescription()?this._lexer.lookahead():this._lexer.token;if(t.kind===C.NAME)switch(t.value){case"schema":return this.parseSchemaDefinition();case"scalar":return this.parseScalarTypeDefinition();case"type":return this.parseObjectTypeDefinition();case"interface":return this.parseInterfaceTypeDefinition();case"union":return this.parseUnionTypeDefinition();case"enum":return this.parseEnumTypeDefinition();case"input":return this.parseInputObjectTypeDefinition();case"directive":return this.parseDirectiveDefinition()}throw this.unexpected(t)},n.peekDescription=function(){return this.peek(C.STRING)||this.peek(C.BLOCK_STRING)},n.parseDescription=function(){if(this.peekDescription())return this.parseStringLiteral()},n.parseSchemaDefinition=function(){var t=this._lexer.token;this.expectKeyword("schema");var n=this.parseDirectives(!0),i=this.many(C.BRACE_L,this.parseOperationTypeDefinition,C.BRACE_R);return{kind:b.SCHEMA_DEFINITION,directives:n,operationTypes:i,loc:this.loc(t)}},n.parseOperationTypeDefinition=function(){var t=this._lexer.token,n=this.parseOperationType();this.expectToken(C.COLON);var i=this.parseNamedType();return{kind:b.OPERATION_TYPE_DEFINITION,operation:n,type:i,loc:this.loc(t)}},n.parseScalarTypeDefinition=function(){var t=this._lexer.token,n=this.parseDescription();this.expectKeyword("scalar");var i=this.parseName(),r=this.parseDirectives(!0);return{kind:b.SCALAR_TYPE_DEFINITION,description:n,name:i,directives:r,loc:this.loc(t)}},n.parseObjectTypeDefinition=function(){var t=this._lexer.token,n=this.parseDescription();this.expectKeyword("type");var i=this.parseName(),r=this.parseImplementsInterfaces(),e=this.parseDirectives(!0),s=this.parseFieldsDefinition();return{kind:b.OBJECT_TYPE_DEFINITION,description:n,name:i,interfaces:r,directives:e,fields:s,loc:this.loc(t)}},n.parseImplementsInterfaces=function(){var t=[];if(this.expectOptionalKeyword("implements")){this.expectOptionalToken(C.AMP);do{t.push(this.parseNamedType())}while(this.expectOptionalToken(C.AMP)||this._options.allowLegacySDLImplementsInterfaces&&this.peek(C.NAME))}return t},n.parseFieldsDefinition=function(){return this._options.allowLegacySDLEmptyFields&&this.peek(C.BRACE_L)&&this._lexer.lookahead().kind===C.BRACE_R?(this._lexer.advance(),this._lexer.advance(),[]):this.optionalMany(C.BRACE_L,this.parseFieldDefinition,C.BRACE_R)},n.parseFieldDefinition=function(){var t=this._lexer.token,n=this.parseDescription(),i=this.parseName(),r=this.parseArgumentDefs();this.expectToken(C.COLON);var e=this.parseTypeReference(),s=this.parseDirectives(!0);return{kind:b.FIELD_DEFINITION,description:n,name:i,arguments:r,type:e,directives:s,loc:this.loc(t)}},n.parseArgumentDefs=function(){return this.optionalMany(C.PAREN_L,this.parseInputValueDef,C.PAREN_R)},n.parseInputValueDef=function(){var t=this._lexer.token,n=this.parseDescription(),i=this.parseName();this.expectToken(C.COLON);var r,e=this.parseTypeReference();this.expectOptionalToken(C.EQUALS)&&(r=this.parseValueLiteral(!0));var s=this.parseDirectives(!0);return{kind:b.INPUT_VALUE_DEFINITION,description:n,name:i,type:e,defaultValue:r,directives:s,loc:this.loc(t)}},n.parseInterfaceTypeDefinition=function(){var t=this._lexer.token,n=this.parseDescription();this.expectKeyword("interface");var i=this.parseName(),r=this.parseDirectives(!0),e=this.parseFieldsDefinition();return{kind:b.INTERFACE_TYPE_DEFINITION,description:n,name:i,directives:r,fields:e,loc:this.loc(t)}},n.parseUnionTypeDefinition=function(){var t=this._lexer.token,n=this.parseDescription();this.expectKeyword("union");var i=this.parseName(),r=this.parseDirectives(!0),e=this.parseUnionMemberTypes();return{kind:b.UNION_TYPE_DEFINITION,description:n,name:i,directives:r,types:e,loc:this.loc(t)}},n.parseUnionMemberTypes=function(){var t=[];if(this.expectOptionalToken(C.EQUALS)){this.expectOptionalToken(C.PIPE);do{t.push(this.parseNamedType())}while(this.expectOptionalToken(C.PIPE))}return t},n.parseEnumTypeDefinition=function(){var t=this._lexer.token,n=this.parseDescription();this.expectKeyword("enum");var i=this.parseName(),r=this.parseDirectives(!0),e=this.parseEnumValuesDefinition();return{kind:b.ENUM_TYPE_DEFINITION,description:n,name:i,directives:r,values:e,loc:this.loc(t)}},n.parseEnumValuesDefinition=function(){return this.optionalMany(C.BRACE_L,this.parseEnumValueDefinition,C.BRACE_R)},n.parseEnumValueDefinition=function(){var t=this._lexer.token,n=this.parseDescription(),i=this.parseName(),r=this.parseDirectives(!0);return{kind:b.ENUM_VALUE_DEFINITION,description:n,name:i,directives:r,loc:this.loc(t)}},n.parseInputObjectTypeDefinition=function(){var t=this._lexer.token,n=this.parseDescription();this.expectKeyword("input");var i=this.parseName(),r=this.parseDirectives(!0),e=this.parseInputFieldsDefinition();return{kind:b.INPUT_OBJECT_TYPE_DEFINITION,description:n,name:i,directives:r,fields:e,loc:this.loc(t)}},n.parseInputFieldsDefinition=function(){return this.optionalMany(C.BRACE_L,this.parseInputValueDef,C.BRACE_R)},n.parseTypeSystemExtension=function(){var t=this._lexer.lookahead();if(t.kind===C.NAME)switch(t.value){case"schema":return this.parseSchemaExtension();case"scalar":return this.parseScalarTypeExtension();case"type":return this.parseObjectTypeExtension();case"interface":return this.parseInterfaceTypeExtension();case"union":return this.parseUnionTypeExtension();case"enum":return this.parseEnumTypeExtension();case"input":return this.parseInputObjectTypeExtension()}throw this.unexpected(t)},n.parseSchemaExtension=function(){var t=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("schema");var n=this.parseDirectives(!0),i=this.optionalMany(C.BRACE_L,this.parseOperationTypeDefinition,C.BRACE_R);if(0===n.length&&0===i.length)throw this.unexpected();return{kind:b.SCHEMA_EXTENSION,directives:n,operationTypes:i,loc:this.loc(t)}},n.parseScalarTypeExtension=function(){var t=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("scalar");var n=this.parseName(),i=this.parseDirectives(!0);if(0===i.length)throw this.unexpected();return{kind:b.SCALAR_TYPE_EXTENSION,name:n,directives:i,loc:this.loc(t)}},n.parseObjectTypeExtension=function(){var t=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("type");var n=this.parseName(),i=this.parseImplementsInterfaces(),r=this.parseDirectives(!0),e=this.parseFieldsDefinition();if(0===i.length&&0===r.length&&0===e.length)throw this.unexpected();return{kind:b.OBJECT_TYPE_EXTENSION,name:n,interfaces:i,directives:r,fields:e,loc:this.loc(t)}},n.parseInterfaceTypeExtension=function(){var t=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("interface");var n=this.parseName(),i=this.parseDirectives(!0),r=this.parseFieldsDefinition();if(0===i.length&&0===r.length)throw this.unexpected();return{kind:b.INTERFACE_TYPE_EXTENSION,name:n,directives:i,fields:r,loc:this.loc(t)}},n.parseUnionTypeExtension=function(){var t=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("union");var n=this.parseName(),i=this.parseDirectives(!0),r=this.parseUnionMemberTypes();if(0===i.length&&0===r.length)throw this.unexpected();return{kind:b.UNION_TYPE_EXTENSION,name:n,directives:i,types:r,loc:this.loc(t)}},n.parseEnumTypeExtension=function(){var t=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("enum");var n=this.parseName(),i=this.parseDirectives(!0),r=this.parseEnumValuesDefinition();if(0===i.length&&0===r.length)throw this.unexpected();return{kind:b.ENUM_TYPE_EXTENSION,name:n,directives:i,values:r,loc:this.loc(t)}},n.parseInputObjectTypeExtension=function(){var t=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("input");var n=this.parseName(),i=this.parseDirectives(!0),r=this.parseInputFieldsDefinition();if(0===i.length&&0===r.length)throw this.unexpected();return{kind:b.INPUT_OBJECT_TYPE_EXTENSION,name:n,directives:i,fields:r,loc:this.loc(t)}},n.parseDirectiveDefinition=function(){var t=this._lexer.token,n=this.parseDescription();this.expectKeyword("directive"),this.expectToken(C.AT);var i=this.parseName(),r=this.parseArgumentDefs(),e=this.expectOptionalKeyword("repeatable");this.expectKeyword("on");var s=this.parseDirectiveLocations();return{kind:b.DIRECTIVE_DEFINITION,description:n,name:i,arguments:r,repeatable:e,locations:s,loc:this.loc(t)}},n.parseDirectiveLocations=function(){this.expectOptionalToken(C.PIPE);var t=[];do{t.push(this.parseDirectiveLocation())}while(this.expectOptionalToken(C.PIPE));return t},n.parseDirectiveLocation=function(){var t=this._lexer.token,n=this.parseName();if(void 0!==j[n.value])return n;throw this.unexpected(t)},n.loc=function(t){if(!this._options.noLocation)return new P(t,this._lexer.lastToken,this._lexer.source)},n.peek=function(t){return this._lexer.token.kind===t},n.expectToken=function(t){var n=this._lexer.token;if(n.kind===t)return this._lexer.advance(),n;throw F(this._lexer.source,n.start,"Expected ".concat(t,", found ").concat(M(n)))},n.expectOptionalToken=function(t){var n=this._lexer.token;if(n.kind===t)return this._lexer.advance(),n},n.expectKeyword=function(t){var n=this._lexer.token;if(n.kind!==C.NAME||n.value!==t)throw F(this._lexer.source,n.start,'Expected "'.concat(t,'", found ').concat(M(n)));this._lexer.advance()},n.expectOptionalKeyword=function(t){var n=this._lexer.token;return n.kind===C.NAME&&n.value===t&&(this._lexer.advance(),!0)},n.unexpected=function(t){var n=t||this._lexer.token;return F(this._lexer.source,n.start,"Unexpected ".concat(M(n)))},n.any=function(t,n,i){this.expectToken(t);for(var r=[];!this.expectOptionalToken(i);)r.push(n.call(this));return r},n.optionalMany=function(t,n,i){if(this.expectOptionalToken(t)){var r=[];do{r.push(n.call(this))}while(!this.expectOptionalToken(i));return r}return[]},n.many=function(t,n,i){this.expectToken(t);var r=[];do{r.push(n.call(this))}while(!this.expectOptionalToken(i));return r},t}();function P(t,n,i){this.start=t.start,this.end=n.end,this.startToken=t,this.endToken=n,this.source=i}function M(t){var n=t.value;return n?"".concat(t.kind,' "').concat(n,'"'):t.kind}l(P,(function(){return{start:this.start,end:this.end}}));var B="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function L(t,n){return t(n={exports:{}},n.exports),n.exports}var U,H=((U=Object.freeze({parse:function(t,n){return new _(t,n).parseDocument()},parseValue:function(t,n){var i=new _(t,n);i.expectToken(C.SOF);var r=i.parseValueLiteral(!1);return i.expectToken(C.EOF),r},parseType:function(t,n){var i=new _(t,n);i.expectToken(C.SOF);var r=i.parseTypeReference();return i.expectToken(C.EOF),r}}))&&U.default||U).parse;function z(t){return t.replace(/[\s,]+/g," ").trim()}var q={},$={},V=!0,K=!1;function J(){for(var t=Array.prototype.slice.call(arguments),n=t[0],i="string"==typeof n?n:n[0],r=1;r<t.length;r++)i+=t[r]&&t[r].kind&&"Document"===t[r].kind?t[r].loc.source.body:t[r],i+=n[r];return function(t){var n=z(t);if(q[n])return q[n];var i=H(t,{experimentalFragmentVariables:K});if(!i||"Document"!==i.kind)throw new Error("Not a valid GraphQL document.");return i=function t(n,i){var r=Object.prototype.toString.call(n);if("[object Array]"===r)return n.map((function(n){return t(n,i)}));if("[object Object]"!==r)throw new Error("Unexpected input.");i&&n.loc&&delete n.loc,n.loc&&(delete n.loc.startToken,delete n.loc.endToken);var e,s,o,u=Object.keys(n);for(e in u)u.hasOwnProperty(e)&&(s=n[u[e]],"[object Object]"!==(o=Object.prototype.toString.call(s))&&"[object Array]"!==o||(n[u[e]]=t(s,!0)));return n}(i=function(t){for(var n,i={},r=[],e=0;e<t.definitions.length;e++){var s=t.definitions[e];if("FragmentDefinition"===s.kind){var o=s.name.value,u=z((n=s.loc).source.body.substring(n.start,n.end));$.hasOwnProperty(o)&&!$[o][u]?(V&&console.warn("Warning: fragment with name "+o+" already exists.\ngraphql-tag enforces all fragment names across your application to be unique; read more about\nthis in the docs: http://dev.apollodata.com/core/fragments.html#unique-names"),$[o][u]=!0):$.hasOwnProperty(o)||($[o]={},$[o][u]=!0),i[u]||(i[u]=!0,r.push(s))}else r.push(s)}return t.definitions=r,t}(i),!1),q[n]=i,i}(i)}J.default=J,J.resetCaches=function(){q={},$={}},J.disableFragmentWarnings=function(){V=!1},J.enableExperimentalFragmentVariables=function(){K=!0},J.disableExperimentalFragmentVariables=function(){K=!1};var Y=J;const G=Y`
  {
    user {
      firstName
      nickName
    }
  }
`,W="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{};function Z(){throw new Error("setTimeout has not been defined")}function Q(){throw new Error("clearTimeout has not been defined")}var X=Z,tt=Q;function nt(t){if(X===setTimeout)return setTimeout(t,0);if((X===Z||!X)&&setTimeout)return X=setTimeout,setTimeout(t,0);try{return X(t,0)}catch(n){try{return X.call(null,t,0)}catch(n){return X.call(this,t,0)}}}"function"==typeof W.setTimeout&&(X=setTimeout),"function"==typeof W.clearTimeout&&(tt=clearTimeout);var it,rt=[],et=!1,st=-1;function ot(){et&&it&&(et=!1,it.length?rt=it.concat(rt):st=-1,rt.length&&ut())}function ut(){if(!et){var t=nt(ot);et=!0;for(var n=rt.length;n;){for(it=rt,rt=[];++st<n;)it&&it[st].run();st=-1,n=rt.length}it=null,et=!1,function(t){if(tt===clearTimeout)return clearTimeout(t);if((tt===Q||!tt)&&clearTimeout)return tt=clearTimeout,clearTimeout(t);try{tt(t)}catch(n){try{return tt.call(null,t)}catch(n){return tt.call(this,t)}}}(t)}}function at(t){var n=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)n[i-1]=arguments[i];rt.push(new ht(t,n)),1!==rt.length||et||nt(ut)}function ht(t,n){this.fun=t,this.array=n}function ct(){}ht.prototype.run=function(){this.fun.apply(null,this.array)};var ft=ct,lt=ct,vt=ct,dt=ct,pt=ct,wt=ct,mt=ct,yt=W.performance||{},gt=yt.now||yt.mozNow||yt.msNow||yt.oNow||yt.webkitNow||function(){return(new Date).getTime()},Ft=new Date;const bt={nextTick:at,title:"browser",browser:!0,env:{},argv:[],version:"",versions:{},on:ft,addListener:lt,once:vt,off:dt,removeListener:pt,removeAllListeners:wt,emit:mt,binding:function(){throw new Error("process.binding is not supported")},cwd:function(){return"/"},chdir:function(){throw new Error("process.chdir is not supported")},umask:function(){return 0},hrtime:function(t){var n=.001*gt.call(yt),i=Math.floor(n),r=Math.floor(n%1*1e9);return t&&(i-=t[0],(r-=t[1])<0&&(i--,r+=1e9)),[i,r]},platform:"browser",release:{},config:{},uptime:function(){return(new Date-Ft)/1e3}};var Et=function(t,n){return(Et=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)n.hasOwnProperty(i)&&(t[i]=n[i])})(t,n)};function St(t,n){function i(){this.constructor=t}Et(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}var At=function(){return(At=Object.assign||function(t){for(var n,i=1,r=arguments.length;i<r;i++)for(var e in n=arguments[i])Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e]);return t}).apply(this,arguments)};function kt(t,n){var i={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.indexOf(r)<0&&(i[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var e=0;for(r=Object.getOwnPropertySymbols(t);e<r.length;e++)n.indexOf(r[e])<0&&(i[r[e]]=t[r[e]])}return i}function Ct(t,n,i,r){return new(i||(i=Promise))((function(e,s){function o(t){try{a(r.next(t))}catch(t){s(t)}}function u(t){try{a(r.throw(t))}catch(t){s(t)}}function a(t){t.done?e(t.value):new i((function(n){n(t.value)})).then(o,u)}a((r=r.apply(t,n||[])).next())}))}function Tt(t,n){var i,r,e,s,o={label:0,sent:function(){if(1&e[0])throw e[1];return e[1]},trys:[],ops:[]};return s={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function u(s){return function(u){return function(s){if(i)throw new TypeError("Generator is already executing.");for(;o;)try{if(i=1,r&&(e=2&s[0]?r.return:s[0]?r.throw||((e=r.return)&&e.call(r),0):r.next)&&!(e=e.call(r,s[1])).done)return e;switch(r=0,e&&(s=[2&s[0],e.value]),s[0]){case 0:case 1:e=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(e=(e=o.trys).length>0&&e[e.length-1])&&(6===s[0]||2===s[0])){o=0;continue}if(3===s[0]&&(!e||s[1]>e[0]&&s[1]<e[3])){o.label=s[1];break}if(6===s[0]&&o.label<e[1]){o.label=e[1],e=s;break}if(e&&o.label<e[2]){o.label=e[2],o.ops.push(s);break}e[2]&&o.ops.pop(),o.trys.pop();continue}s=n.call(t,o)}catch(t){s=[6,t],r=0}finally{i=e=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}}var It={Name:[],Document:["definitions"],OperationDefinition:["name","variableDefinitions","directives","selectionSet"],VariableDefinition:["variable","type","defaultValue","directives"],Variable:["name"],SelectionSet:["selections"],Field:["alias","name","arguments","directives","selectionSet"],Argument:["name","value"],FragmentSpread:["name","directives"],InlineFragment:["typeCondition","directives","selectionSet"],FragmentDefinition:["name","variableDefinitions","typeCondition","directives","selectionSet"],IntValue:[],FloatValue:[],StringValue:[],BooleanValue:[],NullValue:[],EnumValue:[],ListValue:["values"],ObjectValue:["fields"],ObjectField:["name","value"],Directive:["name","arguments"],NamedType:["name"],ListType:["type"],NonNullType:["type"],SchemaDefinition:["directives","operationTypes"],OperationTypeDefinition:["type"],ScalarTypeDefinition:["description","name","directives"],ObjectTypeDefinition:["description","name","interfaces","directives","fields"],FieldDefinition:["description","name","arguments","type","directives"],InputValueDefinition:["description","name","type","defaultValue","directives"],InterfaceTypeDefinition:["description","name","directives","fields"],UnionTypeDefinition:["description","name","directives","types"],EnumTypeDefinition:["description","name","directives","values"],EnumValueDefinition:["description","name","directives"],InputObjectTypeDefinition:["description","name","directives","fields"],DirectiveDefinition:["description","name","arguments","locations"],SchemaExtension:["directives","operationTypes"],ScalarTypeExtension:["name","directives"],ObjectTypeExtension:["name","interfaces","directives","fields"],InterfaceTypeExtension:["name","directives","fields"],UnionTypeExtension:["name","directives","types"],EnumTypeExtension:["name","directives","values"],InputObjectTypeExtension:["name","directives","fields"]},xt=Object.freeze({});function Ot(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:It,r=void 0,e=Array.isArray(t),s=[t],o=-1,u=[],a=void 0,h=void 0,f=void 0,l=[],v=[],d=t;do{var p=++o===s.length,w=p&&0!==u.length;if(p){if(h=0===v.length?void 0:l[l.length-1],a=f,f=v.pop(),w){if(e)a=a.slice();else{for(var m={},y=0,g=Object.keys(a);y<g.length;y++){var F=g[y];m[F]=a[F]}a=m}for(var b=0,E=0;E<u.length;E++){var S=u[E][0],A=u[E][1];e&&(S-=b),e&&null===A?(a.splice(S,1),b++):a[S]=A}}o=r.index,s=r.keys,u=r.edits,e=r.inArray,r=r.prev}else{if(h=f?e?o:s[o]:void 0,null==(a=f?f[h]:d))continue;f&&l.push(h)}var k=void 0;if(!Array.isArray(a)){if(!Rt(a))throw new Error("Invalid AST Node: "+c(a));var C=Dt(n,a.kind,p);if(C){if((k=C.call(n,a,h,f,l,v))===xt)break;if(!1===k){if(!p){l.pop();continue}}else if(void 0!==k&&(u.push([h,k]),!p)){if(!Rt(k)){l.pop();continue}a=k}}}void 0===k&&w&&u.push([h,a]),p?l.pop():(r={inArray:e,index:o,keys:s,edits:u,prev:r},s=(e=Array.isArray(a))?a:i[a.kind]||[],o=-1,u=[],f&&v.push(f),f=a)}while(void 0!==r);return 0!==u.length&&(d=u[u.length-1][1]),d}function Rt(t){return Boolean(t&&"string"==typeof t.kind)}function Dt(t,n,i){var r=t[n];if(r){if(!i&&"function"==typeof r)return r;var e=i?r.leave:r.enter;if("function"==typeof e)return e}else{var s=i?t.leave:t.enter;if(s){if("function"==typeof s)return s;var o=s[n];if("function"==typeof o)return o}}}var Nt="Invariant Violation",jt=Object.setPrototypeOf,_t=void 0===jt?function(t,n){return t.__proto__=n,t}:jt,Pt=function(t){function n(i){void 0===i&&(i=Nt);var r=t.call(this,"number"==typeof i?Nt+": "+i+" (see https://github.com/apollographql/invariant-packages)":i)||this;return r.framesToPop=1,r.name=Nt,_t(r,n.prototype),r}return St(n,t),n}(Error);function Mt(t,n){if(!t)throw new Pt(n)}function Bt(t){return function(){return console[t].apply(console,arguments)}}!function(t){t.warn=Bt("warn"),t.error=Bt("error")}(Mt||(Mt={}));var Lt={env:{}};if("object"==typeof bt)Lt=bt;else try{Function("stub","process = stub")(Lt)}catch(t){}var Ut=function(t,n){n||(n={}),"function"==typeof n&&(n={cmp:n});var i,r="boolean"==typeof n.cycles&&n.cycles,e=n.cmp&&(i=n.cmp,function(t){return function(n,r){return i({key:n,value:t[n]},{key:r,value:t[r]})}}),s=[];return function t(n){if(n&&n.toJSON&&"function"==typeof n.toJSON&&(n=n.toJSON()),void 0!==n){if("number"==typeof n)return isFinite(n)?""+n:"null";if("object"!=typeof n)return JSON.stringify(n);var i,o;if(Array.isArray(n)){for(o="[",i=0;i<n.length;i++)i&&(o+=","),o+=t(n[i])||"null";return o+"]"}if(null===n)return"null";if(-1!==s.indexOf(n)){if(r)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var u=s.push(n)-1,a=Object.keys(n).sort(e&&e(n));for(o="",i=0;i<a.length;i++){var h=a[i],c=t(n[h]);c&&(o&&(o+=","),o+=JSON.stringify(h)+":"+c)}return s.splice(u,1),"{"+o+"}"}}(t)},Ht=Object.prototype,zt=Ht.toString,qt=Ht.hasOwnProperty,$t=new Map;function Vt(t,n){try{return function t(n,i){if(n===i)return!0;var r=zt.call(n);if(r!==zt.call(i))return!1;switch(r){case"[object Array]":if(n.length!==i.length)return!1;case"[object Object]":if(Kt(n,i))return!0;var e=Object.keys(n),s=Object.keys(i),o=e.length;if(o!==s.length)return!1;for(var u=0;u<o;++u)if(!qt.call(i,e[u]))return!1;for(u=0;u<o;++u){var a=e[u];if(!t(n[a],i[a]))return!1}return!0;case"[object Error]":return n.name===i.name&&n.message===i.message;case"[object Number]":if(n!=n)return i!=i;case"[object Boolean]":case"[object Date]":return+n==+i;case"[object RegExp]":case"[object String]":return n==""+i;case"[object Map]":case"[object Set]":if(n.size!==i.size)return!1;if(Kt(n,i))return!0;for(var h=n.entries(),c="[object Map]"===r;;){var f=h.next();if(f.done)break;var l=f.value,v=l[0],d=l[1];if(!i.has(v))return!1;if(c&&!t(d,i.get(v)))return!1}return!0}return!1}(t,n)}finally{$t.clear()}}function Kt(t,n){var i=$t.get(t);if(i){if(i.has(n))return!0}else $t.set(t,i=new Set);return i.add(n),!1}function Jt(t,n,i,r){if(function(t){return"IntValue"===t.kind}(i)||function(t){return"FloatValue"===t.kind}(i))t[n.value]=Number(i.value);else if(function(t){return"BooleanValue"===t.kind}(i)||function(t){return"StringValue"===t.kind}(i))t[n.value]=i.value;else if(function(t){return"ObjectValue"===t.kind}(i)){var e={};i.fields.map((function(t){return Jt(e,t.name,t.value,r)})),t[n.value]=e}else if(function(t){return"Variable"===t.kind}(i))t[n.value]=(r||{})[i.name.value];else if(function(t){return"ListValue"===t.kind}(i))t[n.value]=i.values.map((function(t){var i={};return Jt(i,n,t,r),i[n.value]}));else if(function(t){return"EnumValue"===t.kind}(i))t[n.value]=i.value;else{if(!function(t){return"NullValue"===t.kind}(i))throw new Pt(17);t[n.value]=null}}var Yt=["connection","include","skip","client","rest","export"];function Gt(t,n,i){if(i&&i.connection&&i.connection.key){if(i.connection.filter&&i.connection.filter.length>0){var r=i.connection.filter?i.connection.filter:[];r.sort();var e=n,s={};return r.forEach((function(t){s[t]=e[t]})),i.connection.key+"("+JSON.stringify(s)+")"}return i.connection.key}var o=t;if(n){var u=Ut(n);o+="("+u+")"}return i&&Object.keys(i).forEach((function(t){-1===Yt.indexOf(t)&&(i[t]&&Object.keys(i[t]).length?o+="@"+t+"("+JSON.stringify(i[t])+")":o+="@"+t)})),o}function Wt(t,n){if(t.arguments&&t.arguments.length){var i={};return t.arguments.forEach((function(t){return Jt(i,t.name,t.value,n)})),i}return null}function Zt(t){return t.alias?t.alias.value:t.name.value}function Qt(t){return"Field"===t.kind}function Xt(t){return"InlineFragment"===t.kind}function tn(t){return t&&"id"===t.type&&"boolean"==typeof t.generated}function nn(t,n){return void 0===n&&(n=!1),At({type:"id",generated:n},"string"==typeof t?{id:t,typename:void 0}:t)}function rn(t,n){if(t.directives&&t.directives.length){var i={};return t.directives.forEach((function(t){i[t.name.value]=Wt(t,n)})),i}return null}function en(t,n){return void 0===n&&(n={}),(i=t.directives,i?i.filter(un).map((function(t){var n=t.arguments;Mt(n&&1===n.length,4);var i=n[0];Mt(i.name&&"if"===i.name.value,5);var r=i.value;return Mt(r&&("Variable"===r.kind||"BooleanValue"===r.kind),6),{directive:t,ifArgument:i}})):[]).every((function(t){var i=t.directive,r=t.ifArgument,e=!1;return"Variable"===r.value.kind?Mt(void 0!==(e=n[r.value.name.value]),3):e=r.value.value,"skip"===i.name.value?!e:e}));var i}function sn(t,n){return function(t){var n=[];return Ot(t,{Directive:function(t){n.push(t.name.value)}}),n}(n).some((function(n){return t.indexOf(n)>-1}))}function on(t){return t&&sn(["client"],t)&&sn(["export"],t)}function un(t){var n=t.name.value;return"skip"===n||"include"===n}function an(t,n){var i=n,r=[];return t.definitions.forEach((function(t){if("OperationDefinition"===t.kind)throw new Pt(1);"FragmentDefinition"===t.kind&&r.push(t)})),void 0===i&&(Mt(1===r.length,2),i=r[0].name.value),At({},t,{definitions:[{kind:"OperationDefinition",operation:"query",selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:i}}]}}].concat(t.definitions)})}function hn(t){for(var n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];return n.forEach((function(n){null!=n&&Object.keys(n).forEach((function(i){t[i]=n[i]}))})),t}function cn(t){return Mt(t&&"Document"===t.kind,8),Mt(t.definitions.filter((function(t){return"FragmentDefinition"!==t.kind})).map((function(t){if("OperationDefinition"!==t.kind)throw new Pt(9);return t})).length<=1,10),t}function fn(t){return cn(t),t.definitions.filter((function(t){return"OperationDefinition"===t.kind}))[0]}function ln(t){return t.definitions.filter((function(t){return"OperationDefinition"===t.kind&&t.name})).map((function(t){return t.name.value}))[0]||null}function vn(t){return t.definitions.filter((function(t){return"FragmentDefinition"===t.kind}))}function dn(t){var n;cn(t);for(var i=0,r=t.definitions;i<r.length;i++){var e=r[i];if("OperationDefinition"===e.kind){var s=e.operation;if("query"===s||"mutation"===s||"subscription"===s)return e}"FragmentDefinition"!==e.kind||n||(n=e)}if(n)return n;throw new Pt(16)}function pn(t){void 0===t&&(t=[]);var n={};return t.forEach((function(t){n[t.name.value]=t})),n}function wn(t){if(t&&t.variableDefinitions&&t.variableDefinitions.length){var n=t.variableDefinitions.filter((function(t){return t.defaultValue})).map((function(t){var n={};return Jt(n,t.variable.name,t.defaultValue),n}));return hn.apply(void 0,[{}].concat(n))}return{}}function mn(t,n,i){var r=0;return t.forEach((function(i,e){n.call(this,i,e,t)&&(t[r++]=i)}),i),t.length=r,t}var yn={kind:"Field",name:{kind:"Name",value:"__typename"}};function gn(t){return function t(n,i){return n.selectionSet.selections.every((function(n){return"FragmentSpread"===n.kind&&t(i[n.name.value],i)}))}(fn(t)||function(t){Mt("Document"===t.kind,13),Mt(t.definitions.length<=1,14);var n=t.definitions[0];return Mt("FragmentDefinition"===n.kind,15),n}(t),pn(vn(t)))?null:t}function Fn(t){return function(n){return t.some((function(t){return t.name&&t.name===n.name.value||t.test&&t.test(n)}))}}function bn(t,n){var i=Object.create(null),r=[],e=Object.create(null),s=[],o=gn(Ot(n,{Variable:{enter:function(t,n,r){"VariableDefinition"!==r.kind&&(i[t.name.value]=!0)}},Field:{enter:function(n){if(t&&n.directives&&t.some((function(t){return t.remove}))&&n.directives&&n.directives.some(Fn(t)))return n.arguments&&n.arguments.forEach((function(t){"Variable"===t.value.kind&&r.push({name:t.value.name.value})})),n.selectionSet&&function t(n){var i=[];return n.selections.forEach((function(n){(Qt(n)||Xt(n))&&n.selectionSet?t(n.selectionSet).forEach((function(t){return i.push(t)})):"FragmentSpread"===n.kind&&i.push(n)})),i}(n.selectionSet).forEach((function(t){s.push({name:t.name.value})})),null}},FragmentSpread:{enter:function(t){e[t.name.value]=!0}},Directive:{enter:function(n){if(Fn(t)(n))return null}}}));return o&&mn(r,(function(t){return!i[t.name]})).length&&(o=function(t,n){var i=function(t){return function(n){return t.some((function(t){return n.value&&"Variable"===n.value.kind&&n.value.name&&(t.name===n.value.name.value||t.test&&t.test(n))}))}}(t);return gn(Ot(n,{OperationDefinition:{enter:function(n){return At({},n,{variableDefinitions:n.variableDefinitions.filter((function(n){return!t.some((function(t){return t.name===n.variable.name.value}))}))})}},Field:{enter:function(n){if(t.some((function(t){return t.remove}))){var r=0;if(n.arguments.forEach((function(t){i(t)&&(r+=1)})),1===r)return null}}},Argument:{enter:function(t){if(i(t))return null}}}))}(r,o)),o&&mn(s,(function(t){return!e[t.name]})).length&&(o=function(t,n){function i(n){if(t.some((function(t){return t.name===n.name.value})))return null}return gn(Ot(n,{FragmentSpread:{enter:i},FragmentDefinition:{enter:i}}))}(s,o)),o}var En={test:function(t){var n="connection"===t.name.value;return n&&(!t.arguments||t.arguments.some((function(t){return"key"===t.name.value}))),n}};function Sn(t){return"query"===dn(t).operation?t:Ot(t,{OperationDefinition:{enter:function(t){return At({},t,{operation:"query"})}}})}var An="function"==typeof WeakMap&&!("object"==typeof navigator&&"ReactNative"===navigator.product),kn=Object.prototype.toString;function Cn(t){try{return t()}catch(t){console.error&&console.error(t)}}function Tn(t){return t.errors&&t.errors.length}var In=Object.prototype.hasOwnProperty;function xn(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return On(t)}function On(t){var n=t[0]||{},i=t.length;if(i>1){var r=[];n=Nn(n,r);for(var e=1;e<i;++e)n=Dn(n,t[e],r)}return n}function Rn(t){return null!==t&&"object"==typeof t}function Dn(t,n,i){return Rn(n)&&Rn(t)?(Object.isExtensible&&!Object.isExtensible(t)&&(t=Nn(t,i)),Object.keys(n).forEach((function(r){var e=n[r];if(In.call(t,r)){var s=t[r];e!==s&&(t[r]=Dn(Nn(s,i),e,i))}else t[r]=e})),t):n}function Nn(t,n){return null!==t&&"object"==typeof t&&n.indexOf(t)<0&&(t=Array.isArray(t)?t.slice(0):At({__proto__:Object.getPrototypeOf(t)},t),n.push(t)),t}var jn,_n=L((function(t,n){Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function t(t,n){for(var i=0;i<n.length;i++){var r=n[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(n,i,r){return i&&t(n.prototype,i),r&&t(n,r),n}}();function r(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}var e=function(){return"function"==typeof Symbol},s=function(t){return e()&&Boolean(Symbol[t])},o=function(t){return s(t)?Symbol[t]:"@@"+t};e()&&!s("observable")&&(Symbol.observable=Symbol("observable"));var u=o("iterator"),a=o("observable"),h=o("species");function c(t,n){var i=t[n];if(null!=i){if("function"!=typeof i)throw new TypeError(i+" is not a function");return i}}function f(t){var n=t.constructor;return void 0!==n&&null===(n=n[h])&&(n=void 0),void 0!==n?n:b}function l(t){return t instanceof b}function v(t){v.log?v.log(t):setTimeout((function(){throw t}))}function d(t){Promise.resolve().then((function(){try{t()}catch(t){v(t)}}))}function p(t){var n=t._cleanup;if(void 0!==n&&(t._cleanup=void 0,n))try{if("function"==typeof n)n();else{var i=c(n,"unsubscribe");i&&i.call(n)}}catch(t){v(t)}}function w(t){t._observer=void 0,t._queue=void 0,t._state="closed"}function m(t,n,i){t._state="running";var r=t._observer;try{var e=c(r,n);switch(n){case"next":e&&e.call(r,i);break;case"error":if(w(t),!e)throw i;e.call(r,i);break;case"complete":w(t),e&&e.call(r)}}catch(t){v(t)}"closed"===t._state?p(t):"running"===t._state&&(t._state="ready")}function y(t,n,i){if("closed"!==t._state){if("buffering"!==t._state)return"ready"!==t._state?(t._state="buffering",t._queue=[{type:n,value:i}],void d((function(){return function(t){var n=t._queue;if(n){t._queue=void 0,t._state="ready";for(var i=0;i<n.length&&(m(t,n[i].type,n[i].value),"closed"!==t._state);++i);}}(t)}))):void m(t,n,i);t._queue.push({type:n,value:i})}}var g=function(){function t(n,i){r(this,t),this._cleanup=void 0,this._observer=n,this._queue=void 0,this._state="initializing";var e=new F(this);try{this._cleanup=i.call(void 0,e)}catch(t){e.error(t)}"initializing"===this._state&&(this._state="ready")}return i(t,[{key:"unsubscribe",value:function(){"closed"!==this._state&&(w(this),p(this))}},{key:"closed",get:function(){return"closed"===this._state}}]),t}(),F=function(){function t(n){r(this,t),this._subscription=n}return i(t,[{key:"next",value:function(t){y(this._subscription,"next",t)}},{key:"error",value:function(t){y(this._subscription,"error",t)}},{key:"complete",value:function(){y(this._subscription,"complete")}},{key:"closed",get:function(){return"closed"===this._subscription._state}}]),t}(),b=n.Observable=function(){function t(n){if(r(this,t),!(this instanceof t))throw new TypeError("Observable cannot be called as a function");if("function"!=typeof n)throw new TypeError("Observable initializer must be a function");this._subscriber=n}return i(t,[{key:"subscribe",value:function(t){return"object"==typeof t&&null!==t||(t={next:t,error:arguments[1],complete:arguments[2]}),new g(t,this._subscriber)}},{key:"forEach",value:function(t){var n=this;return new Promise((function(i,r){if("function"==typeof t)var e=n.subscribe({next:function(n){try{t(n,s)}catch(t){r(t),e.unsubscribe()}},error:r,complete:i});else r(new TypeError(t+" is not a function"));function s(){e.unsubscribe(),i()}}))}},{key:"map",value:function(t){var n=this;if("function"!=typeof t)throw new TypeError(t+" is not a function");return new(f(this))((function(i){return n.subscribe({next:function(n){try{n=t(n)}catch(t){return i.error(t)}i.next(n)},error:function(t){i.error(t)},complete:function(){i.complete()}})}))}},{key:"filter",value:function(t){var n=this;if("function"!=typeof t)throw new TypeError(t+" is not a function");return new(f(this))((function(i){return n.subscribe({next:function(n){try{if(!t(n))return}catch(t){return i.error(t)}i.next(n)},error:function(t){i.error(t)},complete:function(){i.complete()}})}))}},{key:"reduce",value:function(t){var n=this;if("function"!=typeof t)throw new TypeError(t+" is not a function");var i=f(this),r=arguments.length>1,e=!1,s=arguments[1],o=s;return new i((function(i){return n.subscribe({next:function(n){var s=!e;if(e=!0,!s||r)try{o=t(o,n)}catch(t){return i.error(t)}else o=n},error:function(t){i.error(t)},complete:function(){if(!e&&!r)return i.error(new TypeError("Cannot reduce an empty sequence"));i.next(o),i.complete()}})}))}},{key:"concat",value:function(){for(var t=this,n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];var e=f(this);return new e((function(n){var r=void 0,s=0;return function t(o){r=o.subscribe({next:function(t){n.next(t)},error:function(t){n.error(t)},complete:function(){s===i.length?(r=void 0,n.complete()):t(e.from(i[s++]))}})}(t),function(){r&&(r.unsubscribe(),r=void 0)}}))}},{key:"flatMap",value:function(t){var n=this;if("function"!=typeof t)throw new TypeError(t+" is not a function");var i=f(this);return new i((function(r){var e=[],s=n.subscribe({next:function(n){if(t)try{n=t(n)}catch(t){return r.error(t)}var s=i.from(n).subscribe({next:function(t){r.next(t)},error:function(t){r.error(t)},complete:function(){var t=e.indexOf(s);t>=0&&e.splice(t,1),o()}});e.push(s)},error:function(t){r.error(t)},complete:function(){o()}});function o(){s.closed&&0===e.length&&r.complete()}return function(){e.forEach((function(t){return t.unsubscribe()})),s.unsubscribe()}}))}},{key:a,value:function(){return this}}],[{key:"from",value:function(n){var i="function"==typeof this?this:t;if(null==n)throw new TypeError(n+" is not an object");var r=c(n,a);if(r){var e=r.call(n);if(Object(e)!==e)throw new TypeError(e+" is not an object");return l(e)&&e.constructor===i?e:new i((function(t){return e.subscribe(t)}))}if(s("iterator")&&(r=c(n,u)))return new i((function(t){d((function(){if(!t.closed){var i=!0,e=!1,s=void 0;try{for(var o,u=r.call(n)[Symbol.iterator]();!(i=(o=u.next()).done);i=!0)if(t.next(o.value),t.closed)return}catch(t){e=!0,s=t}finally{try{!i&&u.return&&u.return()}finally{if(e)throw s}}t.complete()}}))}));if(Array.isArray(n))return new i((function(t){d((function(){if(!t.closed){for(var i=0;i<n.length;++i)if(t.next(n[i]),t.closed)return;t.complete()}}))}));throw new TypeError(n+" is not observable")}},{key:"of",value:function(){for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];var e="function"==typeof this?this:t;return new e((function(t){d((function(){if(!t.closed){for(var n=0;n<i.length;++n)if(t.next(i[n]),t.closed)return;t.complete()}}))}))}},{key:h,get:function(){return this}}]),t}();e()&&Object.defineProperty(b,Symbol("extensions"),{value:{symbol:a,hostReportError:v},configurable:!0})}));(jn=_n)&&jn.__esModule&&Object.prototype.hasOwnProperty.call(jn,"default");var Pn,Mn=_n.Observable,Bn=Mn;function Ln(t){return t.request.length<=1}function Un(t,n){return n?n(t):Bn.of()}function Hn(t){return"function"==typeof t?new Kn(t):t}function zn(){return new Kn((function(){return Bn.of()}))}function qn(t){return 0===t.length?zn():t.map(Hn).reduce((function(t,n){return t.concat(n)}))}function $n(t,n,i){var r=Hn(n),e=Hn(i||new Kn(Un));return Ln(r)&&Ln(e)?new Kn((function(n){return t(n)?r.request(n)||Bn.of():e.request(n)||Bn.of()})):new Kn((function(n,i){return t(n)?r.request(n,i)||Bn.of():e.request(n,i)||Bn.of()}))}St((function(t,n){var i=Pn.call(this,t)||this;return i.link=n,i}),Pn=Error);var Vn=function(t,n){var i=Hn(t);if(Ln(i))return i;var r=Hn(n);return Ln(r)?new Kn((function(t){return i.request(t,(function(t){return r.request(t)||Bn.of()}))||Bn.of()})):new Kn((function(t,n){return i.request(t,(function(t){return r.request(t,n)||Bn.of()}))||Bn.of()}))},Kn=function(){function t(t){t&&(this.request=t)}return t.prototype.split=function(n,i,r){return this.concat($n(n,i,r||new t(Un)))},t.prototype.concat=function(t){return Vn(this,t)},t.prototype.request=function(){throw new Pt(1)},t.empty=zn,t.from=qn,t.split=$n,t.execute=Jn,t}();function Jn(t,n){return t.request(function(t,n){var i=At({},t);return Object.defineProperty(n,"setContext",{enumerable:!1,value:function(t){i=At({},i,"function"==typeof t?t(i):t)}}),Object.defineProperty(n,"getContext",{enumerable:!1,value:function(){return At({},i)}}),Object.defineProperty(n,"toKey",{enumerable:!1,value:function(){return function(t){return JSON.stringify([t.operationName,t.query,t.variables])}(n)}}),n}(n.context,function(t){var n={variables:t.variables||{},extensions:t.extensions||{},operationName:t.operationName,query:t.query};return n.operationName||(n.operationName="string"!=typeof n.query?ln(n.query):""),n}(function(t){for(var n=["query","operationName","variables","extensions","context"],i=0,r=Object.keys(t);i<r.length;i++)if(n.indexOf(r[i])<0)throw new Pt(2);return t}(n))))||Bn.of()}var Yn,Gn=function(){var t,n=("undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==W?W:"undefined"!=typeof module?module:Function("return this")()).Symbol;return"function"==typeof n?n.observable?t=n.observable:(t=n("observable"),n.observable=t):t="@@observable",t}();function Wn(t){return t<7}!function(t){t[t.loading=1]="loading",t[t.setVariables=2]="setVariables",t[t.fetchMore=3]="fetchMore",t[t.refetch=4]="refetch",t[t.poll=6]="poll",t[t.ready=7]="ready",t[t.error=8]="error"}(Yn||(Yn={}));var Zn=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return St(n,t),n.prototype[Gn]=function(){return this},n.prototype["@@observable"]=function(){return this},n}(Bn);function Qn(t){return Array.isArray(t)&&t.length>0}var Xn,ti=function(t){var n="";return Qn(t.graphQLErrors)&&t.graphQLErrors.forEach((function(t){n+="GraphQL error: "+(t?t.message:"Error message not found.")+"\n"})),t.networkError&&(n+="Network error: "+t.networkError.message+"\n"),n=n.replace(/\n$/,"")},ni=function(t){function n(i){var r=i.graphQLErrors,e=i.networkError,s=i.errorMessage,o=i.extraInfo,u=t.call(this,s)||this;return u.graphQLErrors=r||[],u.networkError=e||null,u.message=s||ti(u),u.extraInfo=o,u.__proto__=n.prototype,u}return St(n,t),n}(Error);!function(t){t[t.normal=1]="normal",t[t.refetch=2]="refetch",t[t.poll=3]="poll"}(Xn||(Xn={}));var ii=function(t){function n(n){var i=n.queryManager,r=n.options,e=n.shouldSubscribe,s=void 0===e||e,o=t.call(this,(function(t){return o.onSubscribe(t)}))||this;o.observers=new Set,o.subscriptions=new Set,o.isTornDown=!1,o.options=r,o.variables=r.variables||{},o.queryId=i.generateQueryId(),o.shouldSubscribe=s;var u=fn(r.query);return o.queryName=u&&u.name&&u.name.value,o.queryManager=i,o}return St(n,t),n.prototype.result=function(){var t=this;return new Promise((function(n,i){var r={next:function(i){n(i),t.observers.delete(r),t.observers.size||t.queryManager.removeQuery(t.queryId),setTimeout((function(){e.unsubscribe()}),0)},error:i},e=t.subscribe(r)}))},n.prototype.currentResult=function(){var t=this.getCurrentResult();return void 0===t.data&&(t.data={}),t},n.prototype.getCurrentResult=function(){if(this.isTornDown){var t=this.lastResult;return{data:!this.lastError&&t&&t.data||void 0,error:this.lastError,loading:!1,networkStatus:Yn.error}}var n,i,r,e=this.queryManager.getCurrentQueryResult(this),s=e.data,o=e.partial,u=this.queryManager.queryStore.get(this.queryId),a=this.options.fetchPolicy,h="network-only"===a||"no-cache"===a;if(u){var c=u.networkStatus;if(void 0===(r=this.options.errorPolicy)&&(r="none"),(i=u)&&(i.networkError||"none"===r&&Qn(i.graphQLErrors)))return{data:void 0,loading:!1,networkStatus:c,error:new ni({graphQLErrors:u.graphQLErrors,networkError:u.networkError})};u.variables&&(this.options.variables=At({},this.options.variables,u.variables),this.variables=this.options.variables),n={data:s,loading:Wn(c),networkStatus:c},u.graphQLErrors&&"all"===this.options.errorPolicy&&(n.errors=u.graphQLErrors)}else{var f=h||o&&"cache-only"!==a;n={data:s,loading:f,networkStatus:f?Yn.loading:Yn.ready}}return o||this.updateLastResult(At({},n,{stale:!1})),At({},n,{partial:o})},n.prototype.isDifferentFromLastResult=function(t){var n=this.lastResultSnapshot;return!(n&&t&&n.networkStatus===t.networkStatus&&n.stale===t.stale&&Vt(n.data,t.data))},n.prototype.getLastResult=function(){return this.lastResult},n.prototype.getLastError=function(){return this.lastError},n.prototype.resetLastResults=function(){delete this.lastResult,delete this.lastResultSnapshot,delete this.lastError,this.isTornDown=!1},n.prototype.resetQueryStoreErrors=function(){var t=this.queryManager.queryStore.get(this.queryId);t&&(t.networkError=null,t.graphQLErrors=[])},n.prototype.refetch=function(t){var n=this.options.fetchPolicy;return"cache-only"===n?Promise.reject(new Pt(3)):("no-cache"!==n&&"cache-and-network"!==n&&(n="network-only"),Vt(this.variables,t)||(this.variables=At({},this.variables,t)),Vt(this.options.variables,this.variables)||(this.options.variables=At({},this.options.variables,this.variables)),this.queryManager.fetchQuery(this.queryId,At({},this.options,{fetchPolicy:n}),Xn.refetch))},n.prototype.fetchMore=function(t){var n=this;Mt(t.updateQuery,4);var i=At({},t.query?t:At({},this.options,t,{variables:At({},this.variables,t.variables)}),{fetchPolicy:"network-only"}),r=this.queryManager.generateQueryId();return this.queryManager.fetchQuery(r,i,Xn.normal,this.queryId).then((function(e){return n.updateQuery((function(n){return t.updateQuery(n,{fetchMoreResult:e.data,variables:i.variables})})),n.queryManager.stopQuery(r),e}),(function(t){throw n.queryManager.stopQuery(r),t}))},n.prototype.subscribeToMore=function(t){var n=this,i=this.queryManager.startGraphQLSubscription({query:t.document,variables:t.variables}).subscribe({next:function(i){var r=t.updateQuery;r&&n.updateQuery((function(t,n){return r(t,{subscriptionData:i,variables:n.variables})}))},error:function(n){t.onError&&t.onError(n)}});return this.subscriptions.add(i),function(){n.subscriptions.delete(i)&&i.unsubscribe()}},n.prototype.setOptions=function(t){var n=this.options.fetchPolicy;this.options=At({},this.options,t),t.pollInterval?this.startPolling(t.pollInterval):0===t.pollInterval&&this.stopPolling();var i=t.fetchPolicy;return this.setVariables(this.options.variables,n!==i&&("cache-only"===n||"standby"===n||"network-only"===i),t.fetchResults)},n.prototype.setVariables=function(t,n,i){return void 0===n&&(n=!1),void 0===i&&(i=!0),this.isTornDown=!1,t=t||this.variables,!n&&Vt(t,this.variables)?this.observers.size&&i?this.result():Promise.resolve():(this.variables=this.options.variables=t,this.observers.size?this.queryManager.fetchQuery(this.queryId,this.options):Promise.resolve())},n.prototype.updateQuery=function(t){var n=this.queryManager,i=n.getQueryWithPreviousResult(this.queryId),r=i.previousResult,e=i.variables,s=i.document,o=Cn((function(){return t(r,{variables:e})}));o&&(n.dataStore.markUpdateQueryResult(s,e,o),n.broadcastQueries())},n.prototype.stopPolling=function(){this.queryManager.stopPollingQuery(this.queryId),this.options.pollInterval=void 0},n.prototype.startPolling=function(t){si(this),this.options.pollInterval=t,this.queryManager.startPollingQuery(this.options,this.queryId)},n.prototype.updateLastResult=function(t){var n=this.lastResult;return this.lastResult=t,this.lastResultSnapshot=this.queryManager.assumeImmutableResults?t:function t(n,i){switch(kn.call(n)){case"[object Array]":if(i.has(n))return i.get(n);var r=n.slice(0);return i.set(n,r),r.forEach((function(n,e){r[e]=t(n,i)})),r;case"[object Object]":if(i.has(n))return i.get(n);var e=Object.create(Object.getPrototypeOf(n));return i.set(n,e),Object.keys(n).forEach((function(r){e[r]=t(n[r],i)})),e;default:return n}}(t,new Map),n},n.prototype.onSubscribe=function(t){var n=this;try{var i=t._subscription._observer;i&&!i.error&&(i.error=ri)}catch(t){}var r=!this.observers.size;return this.observers.add(t),t.next&&this.lastResult&&t.next(this.lastResult),t.error&&this.lastError&&t.error(this.lastError),r&&this.setUpQuery(),function(){n.observers.delete(t)&&!n.observers.size&&n.tearDownQuery()}},n.prototype.setUpQuery=function(){var t=this,n=this.queryManager,i=this.queryId;this.shouldSubscribe&&n.addObservableQuery(i,this),this.options.pollInterval&&(si(this),n.startPollingQuery(this.options,i));var r=function(n){t.updateLastResult(At({},t.lastResult,{errors:n.graphQLErrors,networkStatus:Yn.error,loading:!1})),ei(t.observers,"error",t.lastError=n)};n.observeQuery(i,this.options,{next:function(i){if(t.lastError||t.isDifferentFromLastResult(i)){var r=t.updateLastResult(i),e=t.options,s=e.query,o=e.variables,u=e.fetchPolicy;n.transform(s).hasClientExports?n.getLocalState().addExportedVariables(s,o).then((function(e){var o=t.variables;t.variables=t.options.variables=e,!i.loading&&r&&"cache-only"!==u&&n.transform(s).serverQuery&&!Vt(o,e)?t.refetch():ei(t.observers,"next",i)})):ei(t.observers,"next",i)}},error:r}).catch(r)},n.prototype.tearDownQuery=function(){var t=this.queryManager;this.isTornDown=!0,t.stopPollingQuery(this.queryId),this.subscriptions.forEach((function(t){return t.unsubscribe()})),this.subscriptions.clear(),t.removeObservableQuery(this.queryId),t.stopQuery(this.queryId),this.observers.clear()},n}(Zn);function ri(){}function ei(t,n,i){var r=[];t.forEach((function(t){return t[n]&&r.push(t)})),r.forEach((function(t){return t[n](i)}))}function si(t){var n=t.options.fetchPolicy;Mt("cache-first"!==n&&"cache-only"!==n,5)}var oi=function(){function t(){this.store={}}return t.prototype.getStore=function(){return this.store},t.prototype.get=function(t){return this.store[t]},t.prototype.initMutation=function(t,n,i){this.store[t]={mutation:n,variables:i||{},loading:!0,error:null}},t.prototype.markMutationError=function(t,n){var i=this.store[t];i&&(i.loading=!1,i.error=n)},t.prototype.markMutationResult=function(t){var n=this.store[t];n&&(n.loading=!1,n.error=null)},t.prototype.reset=function(){this.store={}},t}(),ui=function(){function t(){this.store={}}return t.prototype.getStore=function(){return this.store},t.prototype.get=function(t){return this.store[t]},t.prototype.initQuery=function(t){var n=this.store[t.queryId];Mt(!n||n.document===t.document||Vt(n.document,t.document),19);var i=!1,r=null;t.storePreviousVariables&&n&&n.networkStatus!==Yn.loading&&(Vt(n.variables,t.variables)||(i=!0,r=n.variables));var e=[];n&&n.graphQLErrors&&(e=n.graphQLErrors),this.store[t.queryId]={document:t.document,variables:t.variables,previousVariables:r,networkError:null,graphQLErrors:e,networkStatus:i?Yn.setVariables:t.isPoll?Yn.poll:t.isRefetch?Yn.refetch:Yn.loading,metadata:t.metadata},"string"==typeof t.fetchMoreForQueryId&&this.store[t.fetchMoreForQueryId]&&(this.store[t.fetchMoreForQueryId].networkStatus=Yn.fetchMore)},t.prototype.markQueryResult=function(t,n,i){this.store&&this.store[t]&&(this.store[t].networkError=null,this.store[t].graphQLErrors=Qn(n.errors)?n.errors:[],this.store[t].previousVariables=null,this.store[t].networkStatus=Yn.ready,"string"==typeof i&&this.store[i]&&(this.store[i].networkStatus=Yn.ready))},t.prototype.markQueryError=function(t,n,i){this.store&&this.store[t]&&(this.store[t].networkError=n,this.store[t].networkStatus=Yn.error,"string"==typeof i&&this.markQueryResultClient(i,!0))},t.prototype.markQueryResultClient=function(t,n){var i=this.store&&this.store[t];i&&(i.networkError=null,i.previousVariables=null,n&&(i.networkStatus=Yn.ready))},t.prototype.stopQuery=function(t){delete this.store[t]},t.prototype.reset=function(t){var n=this;Object.keys(this.store).forEach((function(i){t.indexOf(i)<0?n.stopQuery(i):n.store[i].networkStatus=Yn.loading}))},t}(),ai=function(){function t(t){var n=t.client,i=t.resolvers,r=t.fragmentMatcher;this.cache=t.cache,n&&(this.client=n),i&&this.addResolvers(i),r&&this.setFragmentMatcher(r)}return t.prototype.addResolvers=function(t){var n=this;this.resolvers=this.resolvers||{},Array.isArray(t)?t.forEach((function(t){n.resolvers=xn(n.resolvers,t)})):this.resolvers=xn(this.resolvers,t)},t.prototype.setResolvers=function(t){this.resolvers={},this.addResolvers(t)},t.prototype.getResolvers=function(){return this.resolvers||{}},t.prototype.runResolvers=function(t){var n=t.document,i=t.remoteResult,r=t.context,e=t.variables,s=t.onlyRunForcedResolvers,o=void 0!==s&&s;return Ct(this,void 0,void 0,(function(){return Tt(this,(function(){return n?[2,this.resolveDocument(n,i.data,r,e,this.fragmentMatcher,o).then((function(t){return At({},i,{data:t.result})}))]:[2,i]}))}))},t.prototype.setFragmentMatcher=function(t){this.fragmentMatcher=t},t.prototype.getFragmentMatcher=function(){return this.fragmentMatcher},t.prototype.clientQuery=function(t){return sn(["client"],t)&&this.resolvers?t:null},t.prototype.serverQuery=function(t){return this.resolvers?function(t){cn(t);var n=bn([{test:function(t){return"client"===t.name.value},remove:!0}],t);return n&&(n=Ot(n,{FragmentDefinition:{enter:function(t){if(t.selectionSet&&t.selectionSet.selections.every((function(t){return Qt(t)&&"__typename"===t.name.value})))return null}}})),n}(t):t},t.prototype.prepareContext=function(t){void 0===t&&(t={});var n=this.cache;return At({},t,{cache:n,getCacheKey:function(t){if(n.config)return n.config.dataIdFromObject(t);Mt(!1,6)}})},t.prototype.addExportedVariables=function(t,n,i){return void 0===n&&(n={}),void 0===i&&(i={}),Ct(this,void 0,void 0,(function(){return Tt(this,(function(){return t?[2,this.resolveDocument(t,this.buildRootValueFromCache(t,n)||{},this.prepareContext(i),n).then((function(t){return At({},n,t.exportedVariables)}))]:[2,At({},n)]}))}))},t.prototype.shouldForceResolvers=function(t){var n=!1;return Ot(t,{Directive:{enter:function(t){if("client"===t.name.value&&t.arguments&&(n=t.arguments.some((function(t){return"always"===t.name.value&&"BooleanValue"===t.value.kind&&!0===t.value.value}))))return xt}}}),n},t.prototype.buildRootValueFromCache=function(t,n){return this.cache.diff({query:Sn(t),variables:n,returnPartialData:!0,optimistic:!1}).result},t.prototype.resolveDocument=function(t,n,i,r,e,s){return void 0===i&&(i={}),void 0===r&&(r={}),void 0===e&&(e=function(){return!0}),void 0===s&&(s=!1),Ct(this,void 0,void 0,(function(){var o,u,a,h,c,f,l;return Tt(this,(function(){var v;return o=dn(t),u=vn(t),a=pn(u),c=(h=o.operation)?(v=h).charAt(0).toUpperCase()+v.slice(1):"Query",l={fragmentMap:a,context:At({},i,{cache:(f=this).cache,client:f.client}),variables:r,fragmentMatcher:e,defaultOperationType:c,exportedVariables:{},onlyRunForcedResolvers:s},[2,this.resolveSelectionSet(o.selectionSet,n,l).then((function(t){return{result:t,exportedVariables:l.exportedVariables}}))]}))}))},t.prototype.resolveSelectionSet=function(t,n,i){return Ct(this,void 0,void 0,(function(){var r,e,s,o,u=this;return Tt(this,(function(){return r=i.fragmentMap,e=i.context,s=i.variables,o=[n],[2,Promise.all(t.selections.map((function(t){return Ct(u,void 0,void 0,(function(){var u;return Tt(this,(function(){return en(t,s)?Qt(t)?[2,this.resolveField(t,n,i).then((function(n){var i;void 0!==n&&o.push(((i={})[Zt(t)]=n,i))}))]:(Xt(t)?u=t:Mt(u=r[t.name.value],7),u&&u.typeCondition&&i.fragmentMatcher(n,u.typeCondition.name.value,e)?[2,this.resolveSelectionSet(u.selectionSet,n,i).then((function(t){o.push(t)}))]:[2]):[2]}))}))}))).then((function(){return On(o)}))]}))}))},t.prototype.resolveField=function(t,n,i){return Ct(this,void 0,void 0,(function(){var r,e,s,o,u,a,h,c,f,l=this;return Tt(this,(function(){return r=i.variables,e=t.name.value,s=Zt(t),o=e!==s,u=n[s]||n[e],a=Promise.resolve(u),i.onlyRunForcedResolvers&&!this.shouldForceResolvers(t)||(h=n.__typename||i.defaultOperationType,(c=this.resolvers&&this.resolvers[h])&&(f=c[o?e:s])&&(a=Promise.resolve(f(n,Wt(t,r),i.context,{field:t})))),[2,a.then((function(n){return void 0===n&&(n=u),t.directives&&t.directives.forEach((function(t){"export"===t.name.value&&t.arguments&&t.arguments.forEach((function(t){"as"===t.name.value&&"StringValue"===t.value.kind&&(i.exportedVariables[t.value.value]=n)}))})),t.selectionSet?null==n?n:Array.isArray(n)?l.resolveSubSelectedArray(t,n,i):t.selectionSet?l.resolveSelectionSet(t.selectionSet,n,i):void 0:n}))]}))}))},t.prototype.resolveSubSelectedArray=function(t,n,i){var r=this;return Promise.all(n.map((function(n){return null===n?null:Array.isArray(n)?r.resolveSubSelectedArray(t,n,i):t.selectionSet?r.resolveSelectionSet(t.selectionSet,n,i):void 0})))},t}();function hi(t){var n=new Set,i=null;return new Zn((function(r){return n.add(r),i=i||t.subscribe({next:function(t){n.forEach((function(n){return n.next&&n.next(t)}))},error:function(t){n.forEach((function(n){return n.error&&n.error(t)}))},complete:function(){n.forEach((function(t){return t.complete&&t.complete()}))}}),function(){n.delete(r)&&!n.size&&i&&(i.unsubscribe(),i=null)}}))}var ci=Object.prototype.hasOwnProperty,fi=function(){function t(t){var n=t.link,i=t.queryDeduplication,r=void 0!==i&&i,e=t.store,s=t.onBroadcast,o=void 0===s?function(){}:s,u=t.ssrMode,a=void 0!==u&&u,h=t.clientAwareness,c=void 0===h?{}:h,f=t.localState,l=t.assumeImmutableResults;this.mutationStore=new oi,this.queryStore=new ui,this.clientAwareness={},this.idCounter=1,this.queries=new Map,this.fetchQueryRejectFns=new Map,this.transformCache=new(An?WeakMap:Map),this.inFlightLinkObservables=new Map,this.pollingInfoByQueryId=new Map,this.link=n,this.queryDeduplication=r,this.dataStore=e,this.onBroadcast=o,this.clientAwareness=c,this.localState=f||new ai({cache:e.getCache()}),this.ssrMode=a,this.assumeImmutableResults=!!l}return t.prototype.stop=function(){var t=this;this.queries.forEach((function(n,i){t.stopQueryNoBroadcast(i)})),this.fetchQueryRejectFns.forEach((function(t){t(new Pt(8))}))},t.prototype.mutate=function(t){var n=t.mutation,i=t.variables,r=t.optimisticResponse,e=t.updateQueries,s=t.refetchQueries,o=void 0===s?[]:s,u=t.awaitRefetchQueries,a=void 0!==u&&u,h=t.update,c=t.errorPolicy,f=void 0===c?"none":c,l=t.fetchPolicy,v=t.context,d=void 0===v?{}:v;return Ct(this,void 0,void 0,(function(){var t,s,u,c=this;return Tt(this,(function(v){switch(v.label){case 0:return Mt(n,9),Mt(!l||"no-cache"===l,10),t=this.generateQueryId(),n=this.transform(n).document,this.setQuery(t,(function(){return{document:n}})),i=this.getVariables(n,i),this.transform(n).hasClientExports?[4,this.localState.addExportedVariables(n,i,d)]:[3,2];case 1:i=v.sent(),v.label=2;case 2:return s=function(){var t={};return e&&c.queries.forEach((function(n,i){var r=n.observableQuery;if(r){var s=r.queryName;s&&ci.call(e,s)&&(t[i]={updater:e[s],query:c.queryStore.get(i)})}})),t},this.mutationStore.initMutation(t,n,i),this.dataStore.markMutationInit({mutationId:t,document:n,variables:i,updateQueries:s(),update:h,optimisticResponse:r}),this.broadcastQueries(),u=this,[2,new Promise((function(e,c){var v,p;u.getObservableFromLink(n,At({},d,{optimisticResponse:r}),i,!1).subscribe({next:function(r){Tn(r)&&"none"===f?p=new ni({graphQLErrors:r.errors}):(u.mutationStore.markMutationResult(t),"no-cache"!==l&&u.dataStore.markMutationResult({mutationId:t,result:r,document:n,variables:i,updateQueries:s(),update:h}),v=r)},error:function(n){u.mutationStore.markMutationError(t,n),u.dataStore.markMutationComplete({mutationId:t,optimisticResponse:r}),u.broadcastQueries(),u.setQuery(t,(function(){return{document:null}})),c(new ni({networkError:n}))},complete:function(){if(p&&u.mutationStore.markMutationError(t,p),u.dataStore.markMutationComplete({mutationId:t,optimisticResponse:r}),u.broadcastQueries(),p)c(p);else{"function"==typeof o&&(o=o(v));var n=[];Qn(o)&&o.forEach((function(t){if("string"==typeof t)u.queries.forEach((function(i){var r=i.observableQuery;r&&r.queryName===t&&n.push(r.refetch())}));else{var i={query:t.query,variables:t.variables,fetchPolicy:"network-only"};t.context&&(i.context=t.context),n.push(u.query(i))}})),Promise.all(a?n:[]).then((function(){u.setQuery(t,(function(){return{document:null}})),"ignore"===f&&v&&Tn(v)&&delete v.errors,e(v)}))}}})}))]}}))}))},t.prototype.fetchQuery=function(t,n,i,r){return Ct(this,void 0,void 0,(function(){var e,s,o,u,a,h,c,f,l,v,d,p,w,m,y,g,F=this;return Tt(this,(function(b){switch(b.label){case 0:return s=void 0===(e=n.metadata)?null:e,u=void 0===(o=n.fetchPolicy)?"cache-first":o,h=void 0===(a=n.context)?{}:a,c=this.transform(n.query).document,f=this.getVariables(c,n.variables),this.transform(c).hasClientExports?[4,this.localState.addExportedVariables(c,f,h)]:[3,2];case 1:f=b.sent(),b.label=2;case 2:if(n=At({},n,{variables:f}),d=v="network-only"===u||"no-cache"===u,v||(p=this.dataStore.getCache().diff({query:c,variables:f,returnPartialData:!0,optimistic:!1}),d=!p.complete||"cache-and-network"===u,l=p.result),w=d&&"cache-only"!==u&&"standby"!==u,sn(["live"],c)&&(w=!0),m=this.idCounter++,y="no-cache"!==u?this.updateQueryWatch(t,c,n):void 0,this.setQuery(t,(function(){return{document:c,lastRequestId:m,invalidated:!0,cancel:y}})),this.invalidate(r),this.queryStore.initQuery({queryId:t,document:c,storePreviousVariables:w,variables:f,isPoll:i===Xn.poll,isRefetch:i===Xn.refetch,metadata:s,fetchMoreForQueryId:r}),this.broadcastQueries(),w){if(g=this.fetchRequest({requestId:m,queryId:t,document:c,options:n,fetchMoreForQueryId:r}).catch((function(n){throw n.hasOwnProperty("graphQLErrors")?n:(m>=F.getQuery(t).lastRequestId&&(F.queryStore.markQueryError(t,n,r),F.invalidate(t),F.invalidate(r),F.broadcastQueries()),new ni({networkError:n}))})),"cache-and-network"!==u)return[2,g];g.catch((function(){}))}return this.queryStore.markQueryResultClient(t,!w),this.invalidate(t),this.invalidate(r),this.transform(c).hasForcedResolvers?[2,this.localState.runResolvers({document:c,remoteResult:{data:l},context:h,variables:f,onlyRunForcedResolvers:!0}).then((function(i){return F.markQueryResult(t,i,n,r),F.broadcastQueries(),i}))]:(this.broadcastQueries(),[2,{data:l}])}}))}))},t.prototype.markQueryResult=function(t,n,i,r){var e=i.variables,s=i.errorPolicy;"no-cache"===i.fetchPolicy?this.setQuery(t,(function(){return{newData:{result:n.data,complete:!0}}})):this.dataStore.markQueryResult(n,this.getQuery(t).document,e,r,"ignore"===s||"all"===s)},t.prototype.queryListenerForObserver=function(t,n,i){var r=this;function e(t,n){if(i[t])try{i[t](n)}catch(t){}}return function(i,s){if(r.invalidate(t,!1),i){var o=r.getQuery(t),u=o.observableQuery,a=o.document,h=u?u.options.fetchPolicy:n.fetchPolicy;if("standby"!==h){var c=Wn(i.networkStatus),f=u&&u.getLastResult();if(!c||n.returnPartialData||!s&&i.previousVariables||f&&f.networkStatus!==i.networkStatus&&n.notifyOnNetworkStatusChange||"cache-only"===h||"cache-and-network"===h){var l=Qn(i.graphQLErrors),v=u&&u.options.errorPolicy||n.errorPolicy||"none";if("none"===v&&l||i.networkError)return e("error",new ni({graphQLErrors:i.graphQLErrors,networkError:i.networkError}));try{var d=void 0,p=void 0;if(s)"no-cache"!==h&&"network-only"!==h&&r.setQuery(t,(function(){return{newData:null}})),d=s.result,p=!s.complete;else{var w=u&&u.getLastError();if(f&&f.data&&("none"===v||(w&&w.graphQLErrors)===i.graphQLErrors))d=f.data,p=!1;else{var m=r.dataStore.getCache().diff({query:a,variables:i.previousVariables||i.variables,returnPartialData:!0,optimistic:!0});d=m.result,p=!m.complete}}var y=p&&!(n.returnPartialData||"cache-only"===h),g={data:y?f&&f.data:d,loading:c,networkStatus:i.networkStatus,stale:y};"all"===v&&l&&(g.errors=i.graphQLErrors),e("next",g)}catch(t){e("error",new ni({networkError:t}))}}}}}},t.prototype.transform=function(t){var n,i=this.transformCache;if(!i.has(t)){var r=this.dataStore.getCache(),e=r.transformDocument(t),s=(n=r.transformForLink(e),bn([En],cn(n))),o=this.localState.clientQuery(e),u=this.localState.serverQuery(s),a={document:e,hasClientExports:on(e),hasForcedResolvers:this.localState.shouldForceResolvers(e),clientQuery:o,serverQuery:u,defaultVars:wn(fn(e))},h=function(t){t&&!i.has(t)&&i.set(t,a)};h(t),h(e),h(o),h(u)}return i.get(t)},t.prototype.getVariables=function(t,n){return At({},this.transform(t).defaultVars,n)},t.prototype.watchQuery=function(t,n){void 0===n&&(n=!0),Mt("standby"!==t.fetchPolicy,11),t.variables=this.getVariables(t.query,t.variables),void 0===t.notifyOnNetworkStatusChange&&(t.notifyOnNetworkStatusChange=!1);var i=At({},t);return new ii({queryManager:this,options:i,shouldSubscribe:n})},t.prototype.query=function(t){var n=this;return Mt(t.query,12),Mt("Document"===t.query.kind,13),Mt(!t.returnPartialData,14),Mt(!t.pollInterval,15),new Promise((function(i,r){var e=n.watchQuery(t,!1);n.fetchQueryRejectFns.set("query:"+e.queryId,r),e.result().then(i,r).then((function(){return n.fetchQueryRejectFns.delete("query:"+e.queryId)}))}))},t.prototype.generateQueryId=function(){return String(this.idCounter++)},t.prototype.stopQueryInStore=function(t){this.stopQueryInStoreNoBroadcast(t),this.broadcastQueries()},t.prototype.stopQueryInStoreNoBroadcast=function(t){this.stopPollingQuery(t),this.queryStore.stopQuery(t),this.invalidate(t)},t.prototype.addQueryListener=function(t,n){this.setQuery(t,(function(t){return t.listeners.add(n),{invalidated:!1}}))},t.prototype.updateQueryWatch=function(t,n,i){var r=this,e=this.getQuery(t).cancel;return e&&e(),this.dataStore.getCache().watch({query:n,variables:i.variables,optimistic:!0,previousResult:function(){var n=null,i=r.getQuery(t).observableQuery;if(i){var e=i.getLastResult();e&&(n=e.data)}return n},callback:function(n){r.setQuery(t,(function(){return{invalidated:!0,newData:n}}))}})},t.prototype.addObservableQuery=function(t,n){this.setQuery(t,(function(){return{observableQuery:n}}))},t.prototype.removeObservableQuery=function(t){var n=this.getQuery(t).cancel;this.setQuery(t,(function(){return{observableQuery:null}})),n&&n()},t.prototype.clearStore=function(){this.fetchQueryRejectFns.forEach((function(t){t(new Pt(16))}));var t=[];return this.queries.forEach((function(n,i){n.observableQuery&&t.push(i)})),this.queryStore.reset(t),this.mutationStore.reset(),this.dataStore.reset()},t.prototype.resetStore=function(){var t=this;return this.clearStore().then((function(){return t.reFetchObservableQueries()}))},t.prototype.reFetchObservableQueries=function(t){var n=this;void 0===t&&(t=!1);var i=[];return this.queries.forEach((function(r,e){var s=r.observableQuery;if(s){var o=s.options.fetchPolicy;s.resetLastResults(),"cache-only"===o||!t&&"standby"===o||i.push(s.refetch()),n.setQuery(e,(function(){return{newData:null}})),n.invalidate(e)}})),this.broadcastQueries(),Promise.all(i)},t.prototype.observeQuery=function(t,n,i){return this.addQueryListener(t,this.queryListenerForObserver(t,n,i)),this.fetchQuery(t,n)},t.prototype.startQuery=function(t,n,i){return this.addQueryListener(t,i),this.fetchQuery(t,n).catch((function(){})),t},t.prototype.startGraphQLSubscription=function(t){var n=this,i=t.query,r=t.fetchPolicy,e=t.variables;i=this.transform(i).document,e=this.getVariables(i,e);var s=function(t){return n.getObservableFromLink(i,{},t,!1).map((function(e){if(r&&"no-cache"===r||(n.dataStore.markSubscriptionResult(e,i,t),n.broadcastQueries()),Tn(e))throw new ni({graphQLErrors:e.errors});return e}))};if(this.transform(i).hasClientExports){var o=this.localState.addExportedVariables(i,e).then(s);return new Zn((function(t){var n=null;return o.then((function(i){return n=i.subscribe(t)}),t.error),function(){return n&&n.unsubscribe()}}))}return s(e)},t.prototype.stopQuery=function(t){this.stopQueryNoBroadcast(t),this.broadcastQueries()},t.prototype.stopQueryNoBroadcast=function(t){this.stopQueryInStoreNoBroadcast(t),this.removeQuery(t)},t.prototype.removeQuery=function(t){this.fetchQueryRejectFns.delete("query:"+t),this.fetchQueryRejectFns.delete("fetchRequest:"+t),this.getQuery(t).subscriptions.forEach((function(t){return t.unsubscribe()})),this.queries.delete(t)},t.prototype.getCurrentQueryResult=function(t,n){void 0===n&&(n=!0);var i=t.options,r=i.variables,e=i.query,s=i.fetchPolicy,o=i.returnPartialData,u=t.getLastResult(),a=this.getQuery(t.queryId).newData;if(a&&a.complete)return{data:a.result,partial:!1};if("no-cache"===s||"network-only"===s)return{data:void 0,partial:!1};var h=this.dataStore.getCache().diff({query:e,variables:r,previousResult:u?u.data:void 0,returnPartialData:!0,optimistic:n}),c=h.complete;return{data:c||o?h.result:void 0,partial:!c}},t.prototype.getQueryWithPreviousResult=function(t){var n;if("string"==typeof t){var i=this.getQuery(t).observableQuery;Mt(i,17),n=i}else n=t;var r=n.options,e=r.variables,s=r.query;return{previousResult:this.getCurrentQueryResult(n,!1).data,variables:e,document:s}},t.prototype.broadcastQueries=function(){var t=this;this.onBroadcast(),this.queries.forEach((function(n,i){n.invalidated&&n.listeners.forEach((function(r){r&&r(t.queryStore.get(i),n.newData)}))}))},t.prototype.getLocalState=function(){return this.localState},t.prototype.getObservableFromLink=function(t,n,i,r){var e,s=this;void 0===r&&(r=this.queryDeduplication);var o=this.transform(t).serverQuery;if(o){var u=this.inFlightLinkObservables,a=this.link,h={query:o,variables:i,operationName:ln(o)||void 0,context:this.prepareContext(At({},n,{forceFetch:!r}))};if(n=h.context,r){var c=u.get(o)||new Map;u.set(o,c);var f=JSON.stringify(i);if(!(e=c.get(f))){c.set(f,e=hi(Jn(a,h)));var l=function(){c.delete(f),c.size||u.delete(o),v.unsubscribe()},v=e.subscribe({next:l,error:l,complete:l})}}else e=hi(Jn(a,h))}else e=Zn.of({data:{}}),n=this.prepareContext(n);var d=this.transform(t).clientQuery;return d&&(e=function(t){return new Zn((function(r){var e=r.next,o=r.error,u=r.complete,a=0,h=!1,c={next:function(t){++a,new Promise((function(r){r(function(t){return s.localState.runResolvers({document:d,remoteResult:t,context:n,variables:i})}(t))})).then((function(t){--a,e&&e.call(r,t),h&&c.complete()}),(function(t){--a,o&&o.call(r,t)}))},error:function(t){o&&o.call(r,t)},complete:function(){h=!0,a||u&&u.call(r)}},f=t.subscribe(c);return function(){return f.unsubscribe()}}))}(e)),e},t.prototype.fetchRequest=function(t){var n,i,r=this,e=t.requestId,s=t.queryId,o=t.document,u=t.options,a=t.fetchMoreForQueryId,h=u.variables,c=u.errorPolicy,f=void 0===c?"none":c,l=u.fetchPolicy;return new Promise((function(t,c){var v=r.getObservableFromLink(o,u.context,h),d="fetchRequest:"+s;r.fetchQueryRejectFns.set(d,c);var p=function(){r.fetchQueryRejectFns.delete(d),r.setQuery(s,(function(t){t.subscriptions.delete(w)}))},w=v.map((function(t){if(e>=r.getQuery(s).lastRequestId&&(r.markQueryResult(s,t,u,a),r.queryStore.markQueryResult(s,t,a),r.invalidate(s),r.invalidate(a),r.broadcastQueries()),"none"===f&&Qn(t.errors))return c(new ni({graphQLErrors:t.errors}));if("all"===f&&(i=t.errors),a||"no-cache"===l)n=t.data;else{var v=r.dataStore.getCache().diff({variables:h,query:o,optimistic:!1,returnPartialData:!0});(v.complete||u.returnPartialData)&&(n=v.result)}})).subscribe({error:function(t){p(),c(t)},complete:function(){p(),t({data:n,errors:i,loading:!1,networkStatus:Yn.ready,stale:!1})}});r.setQuery(s,(function(t){t.subscriptions.add(w)}))}))},t.prototype.getQuery=function(t){return this.queries.get(t)||{listeners:new Set,invalidated:!1,document:null,newData:null,lastRequestId:1,observableQuery:null,subscriptions:new Set}},t.prototype.setQuery=function(t,n){var i=this.getQuery(t),r=At({},i,n(i));this.queries.set(t,r)},t.prototype.invalidate=function(t,n){void 0===n&&(n=!0),t&&this.setQuery(t,(function(){return{invalidated:n}}))},t.prototype.prepareContext=function(t){void 0===t&&(t={});var n=this.localState.prepareContext(t);return At({},n,{clientAwareness:this.clientAwareness})},t.prototype.checkInFlight=function(t){var n=this.queryStore.get(t);return n&&n.networkStatus!==Yn.ready&&n.networkStatus!==Yn.error},t.prototype.startPollingQuery=function(t,n,i){var r=this,e=t.pollInterval;if(Mt(e,18),!this.ssrMode){var s=this.pollingInfoByQueryId.get(n);s||this.pollingInfoByQueryId.set(n,s={}),s.interval=e,s.options=At({},t,{fetchPolicy:"network-only"});var o=function(){var t=r.pollingInfoByQueryId.get(n);t&&(r.checkInFlight(n)?u():r.fetchQuery(n,t.options,Xn.poll).then(u,u))},u=function(){var t=r.pollingInfoByQueryId.get(n);t&&(clearTimeout(t.timeout),t.timeout=setTimeout(o,t.interval))};i&&this.addQueryListener(n,i),u()}return n},t.prototype.stopPollingQuery=function(t){this.pollingInfoByQueryId.delete(t)},t}(),li=function(){function t(t){this.cache=t}return t.prototype.getCache=function(){return this.cache},t.prototype.markQueryResult=function(t,n,i,r,e){void 0===e&&(e=!1);var s=!Tn(t);e&&Tn(t)&&t.data&&(s=!0),!r&&s&&this.cache.write({result:t.data,dataId:"ROOT_QUERY",query:n,variables:i})},t.prototype.markSubscriptionResult=function(t,n,i){Tn(t)||this.cache.write({result:t.data,dataId:"ROOT_SUBSCRIPTION",query:n,variables:i})},t.prototype.markMutationInit=function(t){var n,i=this;t.optimisticResponse&&(n="function"==typeof t.optimisticResponse?t.optimisticResponse(t.variables):t.optimisticResponse,this.cache.recordOptimisticTransaction((function(r){var e=i.cache;i.cache=r;try{i.markMutationResult({mutationId:t.mutationId,result:{data:n},document:t.document,variables:t.variables,updateQueries:t.updateQueries,update:t.update})}finally{i.cache=e}}),t.mutationId))},t.prototype.markMutationResult=function(t){var n=this;if(!Tn(t.result)){var i=[{result:t.result.data,dataId:"ROOT_MUTATION",query:t.document,variables:t.variables}],r=t.updateQueries;r&&Object.keys(r).forEach((function(e){var s=r[e],o=s.query,u=s.updater,a=n.cache.diff({query:o.document,variables:o.variables,returnPartialData:!0,optimistic:!1}),h=a.result;if(a.complete){var c=Cn((function(){return u(h,{mutationResult:t.result,queryName:ln(o.document)||void 0,queryVariables:o.variables})}));c&&i.push({result:c,dataId:"ROOT_QUERY",query:o.document,variables:o.variables})}})),this.cache.performTransaction((function(n){i.forEach((function(t){return n.write(t)}));var r=t.update;r&&Cn((function(){return r(n,t.result)}))}))}},t.prototype.markMutationComplete=function(t){t.optimisticResponse&&this.cache.removeOptimistic(t.mutationId)},t.prototype.markUpdateQueryResult=function(t,n,i){this.cache.write({result:i,dataId:"ROOT_QUERY",variables:n,query:t})},t.prototype.reset=function(){return this.cache.reset()},t}(),vi="2.6.4",di=function(){function t(t){var n=this;this.defaultOptions={},this.resetStoreCallbacks=[],this.clearStoreCallbacks=[];var i=t.cache,r=t.ssrMode,e=void 0!==r&&r,s=t.ssrForceFetchDelay,o=void 0===s?0:s,u=t.connectToDevTools,a=t.queryDeduplication,h=void 0===a||a,c=t.defaultOptions,f=t.assumeImmutableResults,l=void 0!==f&&f,v=t.resolvers,d=t.typeDefs,p=t.fragmentMatcher,w=t.name,m=t.version,y=t.link;if(!y&&v&&(y=Kn.empty()),!y||!i)throw new Pt(1);this.link=y,this.cache=i,this.store=new li(i),this.disableNetworkFetches=e||o>0,this.queryDeduplication=h,this.defaultOptions=c||{},this.typeDefs=d,o&&setTimeout((function(){return n.disableNetworkFetches=!1}),o),this.watchQuery=this.watchQuery.bind(this),this.query=this.query.bind(this),this.mutate=this.mutate.bind(this),this.resetStore=this.resetStore.bind(this),this.reFetchObservableQueries=this.reFetchObservableQueries.bind(this),void 0!==u&&u&&"undefined"!=typeof window&&(window.__APOLLO_CLIENT__=this),this.version=vi,this.localState=new ai({cache:i,client:this,resolvers:v,fragmentMatcher:p}),this.queryManager=new fi({link:this.link,store:this.store,queryDeduplication:h,ssrMode:e,clientAwareness:{name:w,version:m},localState:this.localState,assumeImmutableResults:l,onBroadcast:function(){n.devToolsHookCb&&n.devToolsHookCb({action:{},state:{queries:n.queryManager.queryStore.getStore(),mutations:n.queryManager.mutationStore.getStore()},dataWithOptimisticResults:n.cache.extract(!0)})}})}return t.prototype.stop=function(){this.queryManager.stop()},t.prototype.watchQuery=function(t){return this.defaultOptions.watchQuery&&(t=At({},this.defaultOptions.watchQuery,t)),!this.disableNetworkFetches||"network-only"!==t.fetchPolicy&&"cache-and-network"!==t.fetchPolicy||(t=At({},t,{fetchPolicy:"cache-first"})),this.queryManager.watchQuery(t)},t.prototype.query=function(t){return this.defaultOptions.query&&(t=At({},this.defaultOptions.query,t)),Mt("cache-and-network"!==t.fetchPolicy,2),this.disableNetworkFetches&&"network-only"===t.fetchPolicy&&(t=At({},t,{fetchPolicy:"cache-first"})),this.queryManager.query(t)},t.prototype.mutate=function(t){return this.defaultOptions.mutate&&(t=At({},this.defaultOptions.mutate,t)),this.queryManager.mutate(t)},t.prototype.subscribe=function(t){return this.queryManager.startGraphQLSubscription(t)},t.prototype.readQuery=function(t,n){return void 0===n&&(n=!1),this.cache.readQuery(t,n)},t.prototype.readFragment=function(t,n){return void 0===n&&(n=!1),this.cache.readFragment(t,n)},t.prototype.writeQuery=function(t){var n=this.cache.writeQuery(t);return this.queryManager.broadcastQueries(),n},t.prototype.writeFragment=function(t){var n=this.cache.writeFragment(t);return this.queryManager.broadcastQueries(),n},t.prototype.writeData=function(t){var n=this.cache.writeData(t);return this.queryManager.broadcastQueries(),n},t.prototype.__actionHookForDevTools=function(t){this.devToolsHookCb=t},t.prototype.__requestRaw=function(t){return Jn(this.link,t)},t.prototype.initQueryManager=function(){return this.queryManager},t.prototype.resetStore=function(){var t=this;return Promise.resolve().then((function(){return t.queryManager.clearStore()})).then((function(){return Promise.all(t.resetStoreCallbacks.map((function(t){return t()})))})).then((function(){return t.reFetchObservableQueries()}))},t.prototype.clearStore=function(){var t=this;return Promise.resolve().then((function(){return t.queryManager.clearStore()})).then((function(){return Promise.all(t.clearStoreCallbacks.map((function(t){return t()})))}))},t.prototype.onResetStore=function(t){var n=this;return this.resetStoreCallbacks.push(t),function(){n.resetStoreCallbacks=n.resetStoreCallbacks.filter((function(n){return n!==t}))}},t.prototype.onClearStore=function(t){var n=this;return this.clearStoreCallbacks.push(t),function(){n.clearStoreCallbacks=n.clearStoreCallbacks.filter((function(n){return n!==t}))}},t.prototype.reFetchObservableQueries=function(t){return this.queryManager.reFetchObservableQueries(t)},t.prototype.extract=function(t){return this.cache.extract(t)},t.prototype.restore=function(t){return this.cache.restore(t)},t.prototype.addResolvers=function(t){this.localState.addResolvers(t)},t.prototype.setResolvers=function(t){this.localState.setResolvers(t)},t.prototype.getResolvers=function(){return this.localState.getResolvers()},t.prototype.setLocalStateFragmentMatcher=function(t){this.localState.setFragmentMatcher(t)},t}();function pi(t){return{kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"GeneratedClientQuery"},selectionSet:wi(t)}]}}function wi(t){if("number"==typeof t||"boolean"==typeof t||"string"==typeof t||null==t)return null;if(Array.isArray(t))return wi(t[0]);var n=[];return Object.keys(t).forEach((function(i){var r=wi(t[i]);n.push({kind:"Field",name:{kind:"Name",value:i},selectionSet:r||void 0})})),{kind:"SelectionSet",selections:n}}var mi={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:null,variableDefinitions:null,directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:null,name:{kind:"Name",value:"__typename"},arguments:[],directives:[],selectionSet:null}]}}]},yi=function(){function t(){}return t.prototype.transformDocument=function(t){return t},t.prototype.transformForLink=function(t){return t},t.prototype.readQuery=function(t,n){return void 0===n&&(n=!1),this.read({query:t.query,variables:t.variables,optimistic:n})},t.prototype.readFragment=function(t,n){return void 0===n&&(n=!1),this.read({query:an(t.fragment,t.fragmentName),variables:t.variables,rootId:t.id,optimistic:n})},t.prototype.writeQuery=function(t){this.write({dataId:"ROOT_QUERY",result:t.data,query:t.query,variables:t.variables})},t.prototype.writeFragment=function(t){this.write({dataId:t.id,result:t.data,variables:t.variables,query:an(t.fragment,t.fragmentName)})},t.prototype.writeData=function(t){var n,i,r=t.id,e=t.data;if(void 0!==r){var s=null;try{s=this.read({rootId:r,optimistic:!1,query:mi})}catch(t){}var o=s&&s.__typename||"__ClientData",u=Object.assign({__typename:o},e);this.writeFragment({id:r,fragment:(n=u,i=o,{kind:"Document",definitions:[{kind:"FragmentDefinition",typeCondition:{kind:"NamedType",name:{kind:"Name",value:i||"__FakeType"}},name:{kind:"Name",value:"GeneratedClientQuery"},selectionSet:wi(n)}]}),data:u})}else this.writeQuery({query:pi(e),data:e})},t}(),gi=null,Fi={},bi=1,Ei=Array,Si=Ei["@wry/context:Slot"]||function(){var t=function(){function t(){this.id=["slot",bi++,Date.now(),Math.random().toString(36).slice(2)].join(":")}return t.prototype.hasValue=function(){for(var t=gi;t;t=t.parent)if(this.id in t.slots){var n=t.slots[this.id];if(n===Fi)break;return t!==gi&&(gi.slots[this.id]=n),!0}return gi&&(gi.slots[this.id]=Fi),!1},t.prototype.getValue=function(){if(this.hasValue())return gi.slots[this.id]},t.prototype.withValue=function(t,n,i,r){var e,s=((e={__proto__:null})[this.id]=t,e),o=gi;gi={parent:o,slots:s};try{return n.apply(r,i)}finally{gi=o}},t.bind=function(t){var n=gi;return function(){var i=gi;try{return gi=n,t.apply(this,arguments)}finally{gi=i}}},t.noContext=function(t,n,i){if(!gi)return t.apply(i,n);var r=gi;try{return gi=null,t.apply(i,n)}finally{gi=r}},t}();try{Object.defineProperty(Ei,"@wry/context:Slot",{value:Ei["@wry/context:Slot"]=t,enumerable:!1,writable:!1,configurable:!1})}finally{return t}}();function Ai(){}var ki=function(){function t(t,n){void 0===t&&(t=1/0),void 0===n&&(n=Ai),this.max=t,this.dispose=n,this.map=new Map,this.newest=null,this.oldest=null}return t.prototype.has=function(t){return this.map.has(t)},t.prototype.get=function(t){var n=this.getEntry(t);return n&&n.value},t.prototype.getEntry=function(t){var n=this.map.get(t);if(n&&n!==this.newest){var i=n.older,r=n.newer;r&&(r.older=i),i&&(i.newer=r),n.older=this.newest,n.older.newer=n,n.newer=null,this.newest=n,n===this.oldest&&(this.oldest=r)}return n},t.prototype.set=function(t,n){var i=this.getEntry(t);return i?i.value=n:(i={key:t,value:n,newer:null,older:this.newest},this.newest&&(this.newest.newer=i),this.newest=i,this.oldest=this.oldest||i,this.map.set(t,i),i.value)},t.prototype.clean=function(){for(;this.oldest&&this.map.size>this.max;)this.delete(this.oldest.key)},t.prototype.delete=function(t){var n=this.map.get(t);return!!n&&(n===this.newest&&(this.newest=n.older),n===this.oldest&&(this.oldest=n.newer),n.newer&&(n.newer.older=n.older),n.older&&(n.older.newer=n.newer),this.map.delete(t),this.dispose(n.value,t),!0)},t}(),Ci=new Si,Ti=[],Ii=[],xi=100;function Oi(t,n){if(!t)throw new Error(n||"assertion failure")}function Ri(t){switch(t.length){case 0:throw new Error("unknown value");case 1:return t[0];case 2:throw t[1]}}var Di=function(){function t(n,i){this.fn=n,this.args=i,this.parents=new Set,this.childValues=new Map,this.dirtyChildren=null,this.dirty=!0,this.recomputing=!1,this.value=[],++t.count}return t.prototype.recompute=function(){if(Oi(!this.recomputing,"already recomputing"),function(t){var n=Ci.getValue();if(n)return t.parents.add(n),n.childValues.has(t)||n.childValues.set(t,[]),ji(t)?Mi(n,t):Bi(n,t),n}(this)||!Ui(this))return ji(this)?(n=Hi(t=this),Ci.withValue(t,Ni,[t]),function(t){if("function"==typeof t.subscribe)try{qi(t),t.unsubscribe=t.subscribe.apply(null,t.args)}catch(n){return t.setDirty(),!1}return!0}(t)&&function(t){t.dirty=!1,ji(t)||Pi(t)}(t),n.forEach(Ui),Ri(t.value)):Ri(this.value);var t,n},t.prototype.setDirty=function(){this.dirty||(this.dirty=!0,this.value.length=0,_i(this),qi(this))},t.prototype.dispose=function(){var t=this;Hi(this).forEach(Ui),qi(this),this.parents.forEach((function(n){n.setDirty(),zi(n,t)}))},t.count=0,t}();function Ni(t){t.recomputing=!0,t.value.length=0;try{t.value[0]=t.fn.apply(null,t.args)}catch(n){t.value[1]=n}t.recomputing=!1}function ji(t){return t.dirty||!(!t.dirtyChildren||!t.dirtyChildren.size)}function _i(t){t.parents.forEach((function(n){return Mi(n,t)}))}function Pi(t){t.parents.forEach((function(n){return Bi(n,t)}))}function Mi(t,n){if(Oi(t.childValues.has(n)),Oi(ji(n)),t.dirtyChildren){if(t.dirtyChildren.has(n))return}else t.dirtyChildren=Ii.pop()||new Set;t.dirtyChildren.add(n),_i(t)}function Bi(t,n){Oi(t.childValues.has(n)),Oi(!ji(n));var i,r,e,s=t.childValues.get(n);0===s.length?t.childValues.set(n,n.value.slice(0)):(r=n.value,(e=(i=s).length)>0&&e===r.length&&i[e-1]===r[e-1]||t.setDirty()),Li(t,n),ji(t)||Pi(t)}function Li(t,n){var i=t.dirtyChildren;i&&(i.delete(n),0===i.size&&(Ii.length<xi&&Ii.push(i),t.dirtyChildren=null))}function Ui(t){return 0===t.parents.size&&"function"==typeof t.reportOrphan&&!0===t.reportOrphan()}function Hi(t){var n=Ti;return t.childValues.size>0&&(n=[],t.childValues.forEach((function(i,r){zi(t,r),n.push(r)}))),Oi(null===t.dirtyChildren),n}function zi(t,n){n.parents.delete(t),t.childValues.delete(n),Li(t,n)}function qi(t){var n=t.unsubscribe;"function"==typeof n&&(t.unsubscribe=void 0,n())}var $i=function(){function t(t){this.weakness=t}return t.prototype.lookup=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return this.lookupArray(t)},t.prototype.lookupArray=function(t){var n=this;return t.forEach((function(t){return n=n.getChildTrie(t)})),n.data||(n.data=Object.create(null))},t.prototype.getChildTrie=function(n){var i=this.weakness&&function(t){switch(typeof t){case"object":if(null===t)break;case"function":return!0}return!1}(n)?this.weak||(this.weak=new WeakMap):this.strong||(this.strong=new Map),r=i.get(n);return r||i.set(n,r=new t(this.weakness)),r},t}(),Vi=new $i("function"==typeof WeakMap);function Ki(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return Vi.lookupArray(t)}var Ji=new Set;function Yi(t,n){void 0===n&&(n=Object.create(null));var i=new ki(n.max||Math.pow(2,16),(function(t){return t.dispose()})),r=!!n.disposable,e=n.makeCacheKey||Ki;function s(){if(!r||Ci.hasValue()){var s=e.apply(null,arguments);if(!s)return t.apply(null,arguments);var o=Array.prototype.slice.call(arguments),u=i.get(s);u?u.args=o:(u=new Di(t,o),i.set(s,u),u.subscribe=n.subscribe,r&&(u.reportOrphan=function(){return i.delete(s)}));var a=u.recompute();return i.set(s,u),Ji.add(i),Ci.hasValue()||(Ji.forEach((function(t){return t.clean()})),Ji.clear()),r?void 0:a}}return s.dirty=function(){var t=e.apply(null,arguments),n=t&&i.get(t);n&&n.setDirty()},s}var Gi=function(){function t(){}return t.prototype.ensureReady=function(){return Promise.resolve()},t.prototype.canBypassInit=function(){return!0},t.prototype.match=function(t,n,i){var r=i.store.get(t.id),e="ROOT_QUERY"===t.id;if(!r)return e;var s=r.__typename,o=void 0===s?e&&"Query":s;return o&&o===n||"heuristic"},t}(),Wi=Object.prototype.hasOwnProperty,Zi=function(){function t(t){var n=this;void 0===t&&(t=Object.create(null)),this.data=t,this.depend=Yi((function(t){return n.data[t]}),{disposable:!0,makeCacheKey:function(t){return t}})}return t.prototype.toObject=function(){return this.data},t.prototype.get=function(t){return this.depend(t),this.data[t]},t.prototype.set=function(t,n){n!==this.data[t]&&(this.data[t]=n,this.depend.dirty(t))},t.prototype.delete=function(t){Wi.call(this.data,t)&&(delete this.data[t],this.depend.dirty(t))},t.prototype.clear=function(){this.replace(null)},t.prototype.replace=function(t){var n=this;t?(Object.keys(t).forEach((function(i){n.set(i,t[i])})),Object.keys(this.data).forEach((function(i){Wi.call(t,i)||n.delete(i)}))):Object.keys(this.data).forEach((function(t){n.delete(t)}))},t}();function Qi(t){return new Zi(t)}var Xi=function(){function t(t){var n=this,i=void 0===t?{}:t,r=i.cacheKeyRoot,e=void 0===r?new $i(An):r,s=i.freezeResults,o=this.executeStoreQuery,u=this.executeSelectionSet,a=this.executeSubSelectedArray;this.freezeResults=void 0!==s&&s,this.executeStoreQuery=Yi((function(t){return o.call(n,t)}),{makeCacheKey:function(t){var n=t.rootValue,i=t.contextValue;if(i.store instanceof Zi)return e.lookup(i.store,t.query,t.fragmentMatcher,JSON.stringify(t.variableValues),n.id)}}),this.executeSelectionSet=Yi((function(t){return u.call(n,t)}),{makeCacheKey:function(t){var n=t.rootValue,i=t.execContext;if(i.contextValue.store instanceof Zi)return e.lookup(i.contextValue.store,t.selectionSet,i.fragmentMatcher,JSON.stringify(i.variableValues),n.id)}}),this.executeSubSelectedArray=Yi((function(t){return a.call(n,t)}),{makeCacheKey:function(t){var n=t.execContext;if(n.contextValue.store instanceof Zi)return e.lookup(n.contextValue.store,t.field,t.array,JSON.stringify(n.variableValues))}})}return t.prototype.readQueryFromStore=function(t){return this.diffQueryAgainstStore(At({},t,{returnPartialData:!1})).result},t.prototype.diffQueryAgainstStore=function(t){var n,i=t.store,r=t.query,e=t.variables,s=t.previousResult,o=t.returnPartialData,u=void 0===o||o,a=t.rootId,h=void 0===a?"ROOT_QUERY":a,c=t.fragmentMatcherFunction,f=t.config;e=hn({},wn((Mt((n=fn(r))&&"query"===n.operation,12),n)),e);var l=this.executeStoreQuery({query:r,rootValue:{type:"id",id:h,generated:!0,typename:"Query"},contextValue:{store:i,dataIdFromObject:f&&f.dataIdFromObject,cacheRedirects:f&&f.cacheRedirects||{}},variableValues:e,fragmentMatcher:c}),v=l.missing&&l.missing.length>0;return v&&!u&&l.missing.forEach((function(t){if(!t.tolerable)throw new Pt(8)})),s&&Vt(s,l.result)&&(l.result=s),{result:l.result,complete:!v}},t.prototype.executeStoreQuery=function(t){var n=t.query,i=t.rootValue,r=t.contextValue,e=t.variableValues,s=t.fragmentMatcher,o=void 0===s?nr:s,u=dn(n),a=pn(vn(n));return this.executeSelectionSet({selectionSet:u.selectionSet,rootValue:i,execContext:{query:n,fragmentMap:a,contextValue:r,variableValues:e,fragmentMatcher:o}})},t.prototype.executeSelectionSet=function(t){var n=this,i=t.selectionSet,r=t.rootValue,e=t.execContext,s=e.fragmentMap,o=e.contextValue,u=e.variableValues,a={result:null},h=[],c=o.store.get(r.id),f=c&&c.__typename||"ROOT_QUERY"===r.id&&"Query"||void 0;function l(t){var n;return t.missing&&(a.missing=a.missing||[],(n=a.missing).push.apply(n,t.missing)),t.result}return i.selections.forEach((function(t){var i;if(en(t,u))if(Qt(t)){var a=l(n.executeField(c,f,t,e));void 0!==a&&h.push(((i={})[Zt(t)]=a,i))}else{var v=void 0;if(Xt(t))v=t;else if(!(v=s[t.name.value]))throw new Pt(9);var d=v.typeCondition&&v.typeCondition.name.value,p=!d||e.fragmentMatcher(r,d,o);if(p){var w=n.executeSelectionSet({selectionSet:v.selectionSet,rootValue:r,execContext:e});"heuristic"===p&&w.missing&&(w=At({},w,{missing:w.missing.map((function(t){return At({},t,{tolerable:!0})}))})),h.push(l(w))}}})),a.result=On(h),a},t.prototype.executeField=function(t,n,i,r){var e=r.variableValues,s=r.contextValue,o=function(t,n,i,r,e,s){var o=s.directives,u=i;(r||o)&&(u=Gt(u,r,o));var a,h=void 0;if(t&&void 0===(h=t[u])&&e.cacheRedirects&&"string"==typeof n){var c=e.cacheRedirects[n];if(c){var f=c[i];f&&(h=f(t,r,{getCacheKey:function(t){var n=e.dataIdFromObject(t);return n&&nn({id:n,typename:t.__typename})}}))}}return void 0===h?{result:h,missing:[{object:t,fieldName:u,tolerable:!1}]}:(null!=(a=h)&&"object"==typeof a&&"json"===a.type&&(h=h.json),{result:h})}(t,n,i.name.value,Wt(i,e),s,{resultKey:Zt(i),directives:rn(i,e)});return Array.isArray(o.result)?this.combineExecResults(o,this.executeSubSelectedArray({field:i,array:o.result,execContext:r})):i.selectionSet?null==o.result?o:this.combineExecResults(o,this.executeSelectionSet({selectionSet:i.selectionSet,rootValue:o.result,execContext:r})):(tr(i,o.result),o)},t.prototype.combineExecResults=function(){for(var t,n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];return n.forEach((function(n){n.missing&&(t=t||[]).push.apply(t,n.missing)})),{result:n.pop().result,missing:t}},t.prototype.executeSubSelectedArray=function(t){var n,i=this,r=t.field,e=t.array,s=t.execContext;function o(t){return t.missing&&(n=n||[]).push.apply(n,t.missing),t.result}return{result:e=e.map((function(t){return null===t?null:Array.isArray(t)?o(i.executeSubSelectedArray({field:r,array:t,execContext:s})):r.selectionSet?o(i.executeSelectionSet({selectionSet:r.selectionSet,rootValue:t,execContext:s})):(tr(r,t),t)})),missing:n}},t}();function tr(t,n){if(!t.selectionSet&&tn(n))throw new Pt(10)}function nr(){return!0}var ir=function(){function t(t){void 0===t&&(t=Object.create(null)),this.data=t}return t.prototype.toObject=function(){return this.data},t.prototype.get=function(t){return this.data[t]},t.prototype.set=function(t,n){this.data[t]=n},t.prototype.delete=function(t){this.data[t]=void 0},t.prototype.clear=function(){this.data=Object.create(null)},t.prototype.replace=function(t){this.data=t||Object.create(null)},t}(),rr=function(t){function n(){var n=null!==t&&t.apply(this,arguments)||this;return n.type="WriteError",n}return St(n,t),n}(Error),er=function(){function t(){}return t.prototype.writeQueryToStore=function(t){var n=t.query,i=t.result,r=t.store,e=void 0===r?Qi():r;return this.writeResultToStore({dataId:"ROOT_QUERY",result:i,document:n,store:e,variables:t.variables,dataIdFromObject:t.dataIdFromObject,fragmentMatcherFunction:t.fragmentMatcherFunction})},t.prototype.writeResultToStore=function(t){var n=t.dataId,i=t.result,r=t.document,e=t.store,s=void 0===e?Qi():e,o=t.variables,u=t.dataIdFromObject,a=t.fragmentMatcherFunction,h=fn(r);try{return this.writeSelectionSetToStore({result:i,dataId:n,selectionSet:h.selectionSet,context:{store:s,processedData:{},variables:hn({},wn(h),o),dataIdFromObject:u,fragmentMap:pn(vn(r)),fragmentMatcherFunction:a}})}catch(t){throw function(t,n){var i=new rr("Error writing result to store for query:\n "+JSON.stringify(n));return i.message+="\n"+t.message,i.stack=t.stack,i}(t,r)}},t.prototype.writeSelectionSetToStore=function(t){var n=this,i=t.result,r=t.dataId,e=t.context,s=e.variables,o=e.store,u=e.fragmentMap;return t.selectionSet.selections.forEach((function(t){var o;if(en(t,s))if(Qt(t)){var a=Zt(t),h=i[a];void 0!==h?n.writeFieldToStore({dataId:r,value:h,field:t,context:e}):t.directives&&t.directives.length&&(t.directives.some((function(t){return t.name&&"defer"===t.name.value})),t.directives.some((function(t){return t.name&&"client"===t.name.value})))}else{var c=void 0;Xt(t)?c=t:Mt(c=(u||{})[t.name.value],2);var f=!0;if(e.fragmentMatcherFunction&&c.typeCondition){var l=r||"self",v=nn({id:l,typename:void 0}),d={store:new ir((o={},o[l]=i,o)),cacheRedirects:{}};f=!!e.fragmentMatcherFunction(v,c.typeCondition.name.value,d)}f&&n.writeSelectionSetToStore({result:i,selectionSet:c.selectionSet,dataId:r,context:e})}})),o},t.prototype.writeFieldToStore=function(t){var n,i,r,e=t.field,s=t.value,o=t.dataId,u=t.context,a=u.dataIdFromObject,h=u.store,c=function(t,n){var i=null;t.directives&&(i={},t.directives.forEach((function(t){i[t.name.value]={},t.arguments&&t.arguments.forEach((function(r){return Jt(i[t.name.value],r.name,r.value,n)}))})));var r=null;return t.arguments&&t.arguments.length&&(r={},t.arguments.forEach((function(t){return Jt(r,t.name,t.value,n)}))),Gt(t.name.value,r,i)}(e,u.variables);if(e.selectionSet&&null!==s)if(Array.isArray(s))i=this.processArrayValue(s,o+"."+c,e.selectionSet,u);else{var f=o+"."+c,l=!0;if(sr(f)||(f="$"+f),a){var v=a(s);Mt(!v||!sr(v),3),(v||"number"==typeof v&&0===v)&&(f=v,l=!1)}or(f,e,u.processedData)||this.writeSelectionSetToStore({dataId:f,result:s,selectionSet:e.selectionSet,context:u});var d=s.__typename;i=nn({id:f,typename:d},l);var p=(r=h.get(o))&&r[c];if(p!==i&&tn(p)){var w=void 0!==p.typename,m=void 0!==d,y=w&&m&&p.typename!==d;Mt(!l||p.generated||y,4),Mt(!w||m,5),p.generated&&(y?l||h.delete(p.id):function t(n,i,r){if(n===i)return!1;var e=r.get(n),s=r.get(i),o=!1;Object.keys(e).forEach((function(n){var i=e[n],u=s[n];tn(i)&&sr(i.id)&&tn(u)&&!Vt(i,u)&&t(i.id,u.id,r)&&(o=!0)})),r.delete(n);var u=At({},e,s);return Vt(u,s)?o:(r.set(i,u),!0)}(p.id,i.id,h))}}else i=null!=s&&"object"==typeof s?{type:"json",json:s}:s;(r=h.get(o))&&Vt(i,r[c])||h.set(o,At({},r,((n={})[c]=i,n)))},t.prototype.processArrayValue=function(t,n,i,r){var e=this;return t.map((function(t,s){if(null===t)return null;var o=n+"."+s;if(Array.isArray(t))return e.processArrayValue(t,o,i,r);var u=!0;if(r.dataIdFromObject){var a=r.dataIdFromObject(t);a&&(o=a,u=!1)}return or(o,i,r.processedData)||e.writeSelectionSetToStore({dataId:o,result:t,selectionSet:i,context:r}),nn({id:o,typename:t.__typename},u)}))},t}();function sr(t){return"$"===t[0]}function or(t,n,i){if(!i)return!1;if(i[t]){if(i[t].indexOf(n)>=0)return!0;i[t].push(n)}else i[t]=[n];return!1}var ur={fragmentMatcher:new Gi,dataIdFromObject:function(t){if(t.__typename){if(void 0!==t.id)return t.__typename+":"+t.id;if(void 0!==t._id)return t.__typename+":"+t._id}return null},addTypename:!0,resultCaching:!0,freezeResults:!1},ar=Object.prototype.hasOwnProperty,hr=function(t){function n(n,i,r){var e=t.call(this,Object.create(null))||this;return e.optimisticId=n,e.parent=i,e.transaction=r,e}return St(n,t),n.prototype.toObject=function(){return At({},this.parent.toObject(),this.data)},n.prototype.get=function(t){return ar.call(this.data,t)?this.data[t]:this.parent.get(t)},n}(ir),cr=function(t){function n(n){void 0===n&&(n={});var i=t.call(this)||this;i.watches=new Set,i.typenameDocumentCache=new Map,i.cacheKeyRoot=new $i(An),i.silenceBroadcast=!1,i.config=At({},ur,n),i.config.customResolvers&&(i.config.cacheRedirects=i.config.customResolvers),i.config.cacheResolvers&&(i.config.cacheRedirects=i.config.cacheResolvers),i.addTypename=!!i.config.addTypename,i.data=i.config.resultCaching?new Zi:new ir,i.optimisticData=i.data,i.storeWriter=new er,i.storeReader=new Xi({cacheKeyRoot:i.cacheKeyRoot,freezeResults:n.freezeResults});var r=i,e=r.maybeBroadcastWatch;return i.maybeBroadcastWatch=Yi((function(t){return e.call(i,t)}),{makeCacheKey:function(t){if(!t.optimistic&&!t.previousResult)return r.data instanceof Zi?r.cacheKeyRoot.lookup(t.query,JSON.stringify(t.variables)):void 0}}),i}return St(n,t),n.prototype.restore=function(t){return t&&this.data.replace(t),this},n.prototype.extract=function(t){return void 0===t&&(t=!1),(t?this.optimisticData:this.data).toObject()},n.prototype.read=function(t){if("string"==typeof t.rootId&&void 0===this.data.get(t.rootId))return null;var n=this.config.fragmentMatcher,i=n&&n.match;return this.storeReader.readQueryFromStore({store:t.optimistic?this.optimisticData:this.data,query:this.transformDocument(t.query),variables:t.variables,rootId:t.rootId,fragmentMatcherFunction:i,previousResult:t.previousResult,config:this.config})||null},n.prototype.write=function(t){var n=this.config.fragmentMatcher,i=n&&n.match;this.storeWriter.writeResultToStore({dataId:t.dataId,result:t.result,variables:t.variables,document:this.transformDocument(t.query),store:this.data,dataIdFromObject:this.config.dataIdFromObject,fragmentMatcherFunction:i}),this.broadcastWatches()},n.prototype.diff=function(t){var n=this.config.fragmentMatcher,i=n&&n.match;return this.storeReader.diffQueryAgainstStore({store:t.optimistic?this.optimisticData:this.data,query:this.transformDocument(t.query),variables:t.variables,returnPartialData:t.returnPartialData,previousResult:t.previousResult,fragmentMatcherFunction:i,config:this.config})},n.prototype.watch=function(t){var n=this;return this.watches.add(t),function(){n.watches.delete(t)}},n.prototype.evict=function(){throw new Pt(1)},n.prototype.reset=function(){return this.data.clear(),this.broadcastWatches(),Promise.resolve()},n.prototype.removeOptimistic=function(t){for(var n=[],i=0,r=this.optimisticData;r instanceof hr;)r.optimisticId===t?++i:n.push(r),r=r.parent;if(i>0){for(this.optimisticData=r;n.length>0;){var e=n.pop();this.performTransaction(e.transaction,e.optimisticId)}this.broadcastWatches()}},n.prototype.performTransaction=function(t,n){var i=this.data,r=this.silenceBroadcast;this.silenceBroadcast=!0,"string"==typeof n&&(this.data=this.optimisticData=new hr(n,this.optimisticData,t));try{t(this)}finally{this.silenceBroadcast=r,this.data=i}this.broadcastWatches()},n.prototype.recordOptimisticTransaction=function(t,n){return this.performTransaction(t,n)},n.prototype.transformDocument=function(t){if(this.addTypename){var n=this.typenameDocumentCache.get(t);return n||(n=Ot(cn(t),{SelectionSet:{enter:function(t,n,i){if(!i||"OperationDefinition"!==i.kind){var r=t.selections;if(r&&!r.some((function(t){return Qt(t)&&("__typename"===t.name.value||0===t.name.value.lastIndexOf("__",0))}))){var e=i;if(!(Qt(e)&&e.directives&&e.directives.some((function(t){return"export"===t.name.value}))))return At({},t,{selections:r.concat([yn])})}}}}}),this.typenameDocumentCache.set(t,n),this.typenameDocumentCache.set(n,n)),n}return t},n.prototype.broadcastWatches=function(){var t=this;this.silenceBroadcast||this.watches.forEach((function(n){return t.maybeBroadcastWatch(n)}))},n.prototype.maybeBroadcastWatch=function(t){t.callback(this.diff({query:t.query,variables:t.variables,previousResult:t.previousResult&&t.previousResult(),optimistic:t.optimistic}))},n}(yi),fr=Mn;function lr(t){return t.request.length<=1}function vr(t,n){return n?n(t):fr.of()}function dr(t){return"function"==typeof t?new yr(t):t}function pr(){return new yr((function(){return fr.of()}))}function wr(t){return 0===t.length?pr():t.map(dr).reduce((function(t,n){return t.concat(n)}))}function mr(t,n,i){var r=dr(n),e=dr(i||new yr(vr));return lr(r)&&lr(e)?new yr((function(n){return t(n)?r.request(n)||fr.of():e.request(n)||fr.of()})):new yr((function(n,i){return t(n)?r.request(n,i)||fr.of():e.request(n,i)||fr.of()}))}!function(t){St((function(n,i){var r=t.call(this,n)||this;return r.link=i,r}),t)}(Error);var yr=function(){function t(t){t&&(this.request=t)}return t.prototype.split=function(n,i,r){return this.concat(mr(n,i,r||new t(vr)))},t.prototype.concat=function(t){return function(t,n){var i=dr(t);if(lr(i))return i;var r=dr(n);return lr(r)?new yr((function(t){return i.request(t,(function(t){return r.request(t)||fr.of()}))||fr.of()})):new yr((function(t,n){return i.request(t,(function(t){return r.request(t,n)||fr.of()}))||fr.of()}))}(this,t)},t.prototype.request=function(){throw new Pt(1)},t.empty=pr,t.from=wr,t.split=mr,t.execute=gr,t}();function gr(t,n){return t.request(function(t,n){var i=At({},t);return Object.defineProperty(n,"setContext",{enumerable:!1,value:function(t){i=At({},i,"function"==typeof t?t(i):t)}}),Object.defineProperty(n,"getContext",{enumerable:!1,value:function(){return At({},i)}}),Object.defineProperty(n,"toKey",{enumerable:!1,value:function(){return function(t){return JSON.stringify([t.operationName,t.query,t.variables])}(n)}}),n}(n.context,function(t){var n={variables:t.variables||{},extensions:t.extensions||{},operationName:t.operationName,query:t.query};return n.operationName||(n.operationName="string"!=typeof n.query?ln(n.query):""),n}(function(t){for(var n=["query","operationName","variables","extensions","context"],i=0,r=Object.keys(t);i<r.length;i++)if(n.indexOf(r[i])<0)throw new Pt(2);return t}(n))))||fr.of()}var Fr=Mn;function br(t){return t.request.length<=1}function Er(t){return new Fr((function(n){n.error(t)}))}function Sr(t,n){return n?n(t):Fr.of()}function Ar(t){return"function"==typeof t?new Ir(t):t}function kr(){return new Ir((function(){return Fr.of()}))}function Cr(t){return 0===t.length?kr():t.map(Ar).reduce((function(t,n){return t.concat(n)}))}function Tr(t,n,i){var r=Ar(n),e=Ar(i||new Ir(Sr));return br(r)&&br(e)?new Ir((function(n){return t(n)?r.request(n)||Fr.of():e.request(n)||Fr.of()})):new Ir((function(n,i){return t(n)?r.request(n,i)||Fr.of():e.request(n,i)||Fr.of()}))}!function(t){St((function(n,i){var r=t.call(this,n)||this;return r.link=i,r}),t)}(Error);var Ir=function(){function t(t){t&&(this.request=t)}return t.prototype.split=function(n,i,r){return this.concat(Tr(n,i,r||new t(Sr)))},t.prototype.concat=function(t){return function(t,n){var i=Ar(t);if(br(i))return i;var r=Ar(n);return br(r)?new Ir((function(t){return i.request(t,(function(t){return r.request(t)||Fr.of()}))||Fr.of()})):new Ir((function(t,n){return i.request(t,(function(t){return r.request(t,n)||Fr.of()}))||Fr.of()}))}(this,t)},t.prototype.request=function(){throw new Pt(1)},t.empty=kr,t.from=Cr,t.split=Tr,t.execute=xr,t}();function xr(t,n){return t.request(function(t,n){var i=At({},t);return Object.defineProperty(n,"setContext",{enumerable:!1,value:function(t){i=At({},i,"function"==typeof t?t(i):t)}}),Object.defineProperty(n,"getContext",{enumerable:!1,value:function(){return At({},i)}}),Object.defineProperty(n,"toKey",{enumerable:!1,value:function(){return function(t){return JSON.stringify([t.operationName,t.query,t.variables])}(n)}}),n}(n.context,function(t){var n={variables:t.variables||{},extensions:t.extensions||{},operationName:t.operationName,query:t.query};return n.operationName||(n.operationName="string"!=typeof n.query?ln(n.query):""),n}(function(t){for(var n=["query","operationName","variables","extensions","context"],i=0,r=Object.keys(t);i<r.length;i++)if(n.indexOf(r[i])<0)throw new Pt(2);return t}(n))))||Fr.of()}function Or(t){return Ot(t,{leave:Rr})}var Rr={Name:function(t){return t.value},Variable:function(t){return"$"+t.name},Document:function(t){return Nr(t.definitions,"\n\n")+"\n"},OperationDefinition:function(t){var n=t.operation,i=t.name,r=_r("(",Nr(t.variableDefinitions,", "),")"),e=Nr(t.directives," "),s=t.selectionSet;return i||e||r||"query"!==n?Nr([n,Nr([i,r]),e,s]," "):s},VariableDefinition:function(t){var n=t.directives;return t.variable+": "+t.type+_r(" = ",t.defaultValue)+_r(" ",Nr(n," "))},SelectionSet:function(t){return jr(t.selections)},Field:function(t){var n=t.name,i=t.arguments,r=t.directives,e=t.selectionSet;return Nr([_r("",t.alias,": ")+n+_r("(",Nr(i,", "),")"),Nr(r," "),e]," ")},Argument:function(t){return t.name+": "+t.value},FragmentSpread:function(t){return"..."+t.name+_r(" ",Nr(t.directives," "))},InlineFragment:function(t){var n=t.directives,i=t.selectionSet;return Nr(["...",_r("on ",t.typeCondition),Nr(n," "),i]," ")},FragmentDefinition:function(t){var n=t.typeCondition,i=t.variableDefinitions,r=t.directives,e=t.selectionSet;return"fragment ".concat(t.name).concat(_r("(",Nr(i,", "),")")," ")+"on ".concat(n," ").concat(_r("",Nr(r," ")," "))+e},IntValue:function(t){return t.value},FloatValue:function(t){return t.value},StringValue:function(t,n){var i=t.value;return t.block?function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=-1===t.indexOf("\n"),e=!r||'"'===t[t.length-1]||i,s="";return!e||r&&(" "===t[0]||"\t"===t[0])||(s+="\n"+n),s+=n?t.replace(/\n/g,"\n"+n):t,e&&(s+="\n"),'"""'+s.replace(/"""/g,'\\"""')+'"""'}(i,"description"===n?"":"  "):JSON.stringify(i)},BooleanValue:function(t){return t.value?"true":"false"},NullValue:function(){return"null"},EnumValue:function(t){return t.value},ListValue:function(t){return"["+Nr(t.values,", ")+"]"},ObjectValue:function(t){return"{"+Nr(t.fields,", ")+"}"},ObjectField:function(t){return t.name+": "+t.value},Directive:function(t){return"@"+t.name+_r("(",Nr(t.arguments,", "),")")},NamedType:function(t){return t.name},ListType:function(t){return"["+t.type+"]"},NonNullType:function(t){return t.type+"!"},SchemaDefinition:function(t){var n=t.operationTypes;return Nr(["schema",Nr(t.directives," "),jr(n)]," ")},OperationTypeDefinition:function(t){return t.operation+": "+t.type},ScalarTypeDefinition:Dr((function(t){return Nr(["scalar",t.name,Nr(t.directives," ")]," ")})),ObjectTypeDefinition:Dr((function(t){var n=t.directives,i=t.fields;return Nr(["type",t.name,_r("implements ",Nr(t.interfaces," & ")),Nr(n," "),jr(i)]," ")})),FieldDefinition:Dr((function(t){var n=t.arguments,i=t.type,r=t.directives;return t.name+(Br(n)?_r("(\n",Pr(Nr(n,"\n")),"\n)"):_r("(",Nr(n,", "),")"))+": "+i+_r(" ",Nr(r," "))})),InputValueDefinition:Dr((function(t){var n=t.directives;return Nr([t.name+": "+t.type,_r("= ",t.defaultValue),Nr(n," ")]," ")})),InterfaceTypeDefinition:Dr((function(t){var n=t.fields;return Nr(["interface",t.name,Nr(t.directives," "),jr(n)]," ")})),UnionTypeDefinition:Dr((function(t){var n=t.types;return Nr(["union",t.name,Nr(t.directives," "),n&&0!==n.length?"= "+Nr(n," | "):""]," ")})),EnumTypeDefinition:Dr((function(t){var n=t.values;return Nr(["enum",t.name,Nr(t.directives," "),jr(n)]," ")})),EnumValueDefinition:Dr((function(t){return Nr([t.name,Nr(t.directives," ")]," ")})),InputObjectTypeDefinition:Dr((function(t){var n=t.fields;return Nr(["input",t.name,Nr(t.directives," "),jr(n)]," ")})),DirectiveDefinition:Dr((function(t){var n=t.arguments,i=t.repeatable,r=t.locations;return"directive @"+t.name+(Br(n)?_r("(\n",Pr(Nr(n,"\n")),"\n)"):_r("(",Nr(n,", "),")"))+(i?" repeatable":"")+" on "+Nr(r," | ")})),SchemaExtension:function(t){var n=t.operationTypes;return Nr(["extend schema",Nr(t.directives," "),jr(n)]," ")},ScalarTypeExtension:function(t){return Nr(["extend scalar",t.name,Nr(t.directives," ")]," ")},ObjectTypeExtension:function(t){var n=t.directives,i=t.fields;return Nr(["extend type",t.name,_r("implements ",Nr(t.interfaces," & ")),Nr(n," "),jr(i)]," ")},InterfaceTypeExtension:function(t){var n=t.fields;return Nr(["extend interface",t.name,Nr(t.directives," "),jr(n)]," ")},UnionTypeExtension:function(t){var n=t.types;return Nr(["extend union",t.name,Nr(t.directives," "),n&&0!==n.length?"= "+Nr(n," | "):""]," ")},EnumTypeExtension:function(t){var n=t.values;return Nr(["extend enum",t.name,Nr(t.directives," "),jr(n)]," ")},InputObjectTypeExtension:function(t){var n=t.fields;return Nr(["extend input",t.name,Nr(t.directives," "),jr(n)]," ")}};function Dr(t){return function(n){return Nr([n.description,t(n)],"\n")}}function Nr(t,n){return t?t.filter((function(t){return t})).join(n||""):""}function jr(t){return t&&0!==t.length?"{\n"+Pr(Nr(t,"\n"))+"\n}":""}function _r(t,n,i){return n?t+n+(i||""):""}function Pr(t){return t&&"  "+t.replace(/\n/g,"\n  ")}function Mr(t){return-1!==t.indexOf("\n")}function Br(t){return t&&t.some(Mr)}var Lr={http:{includeQuery:!0,includeExtensions:!1},headers:{accept:"*/*","content-type":"application/json"},options:{method:"POST"}},Ur=function(t,n,i){var r=new Error(i);throw r.name="ServerError",r.response=t,r.statusCode=t.status,r.result=n,r},Hr=function(t){var n;try{n=JSON.stringify(t)}catch(t){var i=new Pt(2);throw i.parseError=t,i}return n},zr=function(t){void 0===t&&(t={});var n=t.uri,i=void 0===n?"/graphql":n,r=t.fetch,e=t.includeExtensions,s=t.useGETForQueries,o=kt(t,["uri","fetch","includeExtensions","useGETForQueries"]);!function(t){if(!t&&"undefined"==typeof fetch)throw new Pt(1)}(r),r||(r=fetch);var u={http:{includeExtensions:e},options:o.fetchOptions,credentials:o.credentials,headers:o.headers};return new Ir((function(t){var n=function(t,n){return t.getContext().uri||("function"==typeof n?n(t):n||"/graphql")}(t,i),e=t.getContext(),o={};if(e.clientAwareness){var a=e.clientAwareness,h=a.name,c=a.version;h&&(o["apollographql-client-name"]=h),c&&(o["apollographql-client-version"]=c)}var f,l=At({},o,e.headers),v=function(t,n){for(var i=[],r=2;r<arguments.length;r++)i[r-2]=arguments[r];var e=At({},n.options,{headers:n.headers,credentials:n.credentials}),s=n.http;i.forEach((function(t){e=At({},e,t.options,{headers:At({},e.headers,t.headers)}),t.credentials&&(e.credentials=t.credentials),s=At({},s,t.http)}));var o=t.operationName,u=t.extensions,a=t.variables,h=t.query,c={operationName:o,variables:a};return s.includeExtensions&&(c.extensions=u),s.includeQuery&&(c.query=Or(h)),{options:e,body:c}}(t,Lr,u,{http:e.http,options:e.fetchOptions,credentials:e.credentials,headers:l}),d=v.options,p=v.body;if(!d.signal){var w=function(){if("undefined"==typeof AbortController)return{controller:!1,signal:!1};var t=new AbortController;return{controller:t,signal:t.signal}}();(f=w.controller)&&(d.signal=w.signal)}if(s&&!t.query.definitions.some((function(t){return"OperationDefinition"===t.kind&&"mutation"===t.operation}))&&(d.method="GET"),"GET"===d.method){var m=function(t,n){var i=[],r=function(t,n){i.push(t+"="+encodeURIComponent(n))};if("query"in n&&r("query",n.query),n.operationName&&r("operationName",n.operationName),n.variables){var e=void 0;try{e=Hr(n.variables)}catch(t){return{parseError:t}}r("variables",e)}if(n.extensions){var s=void 0;try{s=Hr(n.extensions)}catch(t){return{parseError:t}}r("extensions",s)}var o="",u=t,a=t.indexOf("#");-1!==a&&(o=t.substr(a),u=t.substr(0,a));var h=-1===u.indexOf("?")?"?":"&";return{newURI:u+h+i.join("&")+o}}(n,p),y=m.newURI,g=m.parseError;if(g)return Er(g);n=y}else try{d.body=Hr(p)}catch(g){return Er(g)}return new Fr((function(i){var e;return r(n,d).then((function(n){return t.setContext({response:n}),n})).then((e=t,function(t){return t.text().then((function(n){try{return JSON.parse(n)}catch(r){var i=r;return i.name="ServerParseError",i.response=t,i.statusCode=t.status,i.bodyText=n,Promise.reject(i)}})).then((function(n){return t.status>=300&&Ur(t,n,"Response not successful: Received status code "+t.status),Array.isArray(n)||n.hasOwnProperty("data")||n.hasOwnProperty("errors")||Ur(t,n,"Server response was missing for query '"+(Array.isArray(e)?e.map((function(t){return t.operationName})):e.operationName)+"'."),n}))})).then((function(t){return i.next(t),i.complete(),t})).catch((function(t){"AbortError"!==t.name&&(t.result&&t.result.errors&&t.result.data&&i.next(t.result),i.error(t))})),function(){f&&f.abort()}}))}))};(function(t){St((function(n){return t.call(this,zr(n).request)||this}),t)})(Ir),L((function(t,n){var i=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==i)return i;throw new Error("unable to locate global object")}();t.exports=n=i.fetch,n.default=i.fetch.bind(i),n.Headers=i.Headers,n.Request=i.Request,n.Response=i.Response}));var qr=!1;function $r(t){const n=zr(Object.assign({uri:void 0},qr)),i=(r=(n,{headers:i})=>({headers:Object.assign(Object.assign({},i),{authorization:t})}),new yr((function(t,n){var i=kt(t,[]);return new fr((function(e){var s;return Promise.resolve(i).then((function(){return r(0,t.getContext())})).then(t.setContext).then((function(){s=n(t).subscribe({next:e.next.bind(e),error:e.error.bind(e),complete:e.complete.bind(e)})})).catch(e.error.bind(e)),function(){s&&s.unsubscribe()}}))})));var r;return new di({link:i.concat(n),defaultOptions:{watchQuery:{fetchPolicy:"no-cache"},query:{fetchPolicy:"no-cache"}},cache:new cr})}const Vr=class{constructor(n){t(this,n),this.user=null,this.displayName=null}authTokenHandler(t,n){t!==n&&(this.apolloClient=$r(t),this.getUser())}componentWillLoad(){this.apolloClient=$r(this.authToken)}componentWillRender(){if(this.authToken)return this.getUser()}componentDidRender(){const t=new CustomEvent("component rendered",{detail:this.host});document.dispatchEvent(t),setTimeout(()=>{this.host.shadowRoot.querySelector(".greeting").classList.add("fade-in")},0)}getUser(){return this.apolloClient.query({query:G}).then(t=>{this.user=t.data.user,this.getDisplayName()}).catch(t=>{this.getDisplayName(),this.logError(t)})}getDisplayName(){this.displayName=this.user&&(this.user.nickName||this.user.firstName)||this.defaultName||""}parseTimeBasedGreetings(t){return t>=17?"Good evening":t>=12?"Good afternoon":"Good morning"}renderGreeting(){const t=new Date;return`${this.parseTimeBasedGreetings(t.getHours())}, ${this.displayName}`}logError(t){console.error(t)}render(){return this.displayName?n("div",{class:"greeting"},n("h3",{class:"font-size-large flush"},this.renderGreeting()),n("p",{class:"flush"},"This place was made for you!")):""}get host(){return i(this)}static get watchers(){return{authToken:["authTokenHandler"]}}static get style(){return"*{-webkit-box-sizing:border-box;box-sizing:border-box}.relative{position:relative}.overflow-hidden{overflow:hidden}.d-flex{display:-ms-flexbox;display:flex}.d-block{display:block}.d-inline{display:inline}.d-none{display:none}.align-items-center{-ms-flex-align:center;align-items:center}.w-100{width:100%}.img-responsive{display:block;height:auto;max-width:100%}hr{border:0;border-top:1px solid #e7e7e7;margin-bottom:1rem;margin-top:1rem}.font-family-base{font-family:acumin-pro,helvetica,arial,sans-serif!important;font-weight:300!important}.text-white{color:#fff!important}.text-gray-light{color:#979797!important}.text-gray{color:#737373!important}.text-center{text-align:center}.text-uppercase{text-transform:uppercase}.text-uppercase.font-size-smaller{font-size:13px!important;letter-spacing:.5px}.font-size-base{font-size:16px!important}\@media (min-width:480px){.font-size-base{font-size:19px!important}}.font-size-large{font-size:19px!important}\@media (min-width:480px){.font-size-large{font-size:22px!important}}.font-size-smaller{font-size:14px!important}.font-size-smallest{font-size:10px}.font-weight-mid{font-weight:500}.bg-charcoal{background-color:#171717}.flush{margin:0!important}.flush-bottom{margin-bottom:0!important}.flush-top{margin-top:0!important}.push-half-bottom{margin-bottom:12px!important}.push-bottom{margin-bottom:24px!important}.push-top{margin-top:24px}.push-half-top{margin-top:12px!important}.soft-quarter-top{padding-top:6px}.component-header{font-family:acumin-pro-extra-condensed;font-size:2rem;font-weight:500;line-height:.95;text-transform:uppercase}\@media (min-width:480px){.component-header{font-size:2.125rem}}.card>a{color:inherit;display:block;text-decoration:none}.card img{width:100%}.color-gray{color:#737373}.media-label{display:-ms-flexbox;display:flex;position:absolute;right:0;bottom:0;padding:6px 8px}.media-label>:not(:last-child){margin-right:5px}.media-label .icon{fill:#fff;height:16px;width:12px}.btn{display:inline-block;margin-bottom:0;font-weight:300;text-align:center;white-space:nowrap;vertical-align:middle;-ms-touch-action:manipulation;touch-action:manipulation;cursor:pointer;background-image:none;border:1px solid transparent;padding:8px 10px;font-size:16px;line-height:1.5;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;border-radius:4px;line-height:1;margin-top:5px;margin-bottom:5px;font-size:14px;padding:13px 16px}.btn.btn-gray-light{color:#fff;background-color:#979797;border-color:#979797}.btn.btn-gray-light.btn-outline{background:transparent;border-style:solid;border-width:1px;color:#979797}.btn.btn-gray-light.btn-outline:hover{background-color:#979797;color:#fff}.btn.btn-sm{font-size:13px;padding:10px 16px 11px}.greeting{opacity:0;-webkit-transition:opacity .45s ease-in-out .25s;transition:opacity .45s ease-in-out .25s}.greeting.fade-in{opacity:1}"}};var Kr=function(t,n){return function(){for(var i=new Array(arguments.length),r=0;r<i.length;r++)i[r]=arguments[r];return t.apply(n,i)}},Jr=Object.prototype.toString;function Yr(t){return"[object Array]"===Jr.call(t)}function Gr(t){return null!==t&&"object"==typeof t}function Wr(t){return"[object Function]"===Jr.call(t)}function Zr(t,n){if(null!=t)if("object"!=typeof t&&(t=[t]),Yr(t))for(var i=0,r=t.length;i<r;i++)n.call(null,t[i],i,t);else for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&n.call(null,t[e],e,t)}var Qr={isArray:Yr,isArrayBuffer:function(t){return"[object ArrayBuffer]"===Jr.call(t)},isBuffer:function(t){return null!=t&&null!=t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)},isFormData:function(t){return"undefined"!=typeof FormData&&t instanceof FormData},isArrayBufferView:function(t){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer&&t.buffer instanceof ArrayBuffer},isString:function(t){return"string"==typeof t},isNumber:function(t){return"number"==typeof t},isObject:Gr,isUndefined:function(t){return void 0===t},isDate:function(t){return"[object Date]"===Jr.call(t)},isFile:function(t){return"[object File]"===Jr.call(t)},isBlob:function(t){return"[object Blob]"===Jr.call(t)},isFunction:Wr,isStream:function(t){return Gr(t)&&Wr(t.pipe)},isURLSearchParams:function(t){return"undefined"!=typeof URLSearchParams&&t instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:Zr,merge:function t(){var n={};function i(i,r){n[r]="object"==typeof n[r]&&"object"==typeof i?t(n[r],i):i}for(var r=0,e=arguments.length;r<e;r++)Zr(arguments[r],i);return n},deepMerge:function t(){var n={};function i(i,r){n[r]="object"==typeof n[r]&&"object"==typeof i?t(n[r],i):"object"==typeof i?t({},i):i}for(var r=0,e=arguments.length;r<e;r++)Zr(arguments[r],i);return n},extend:function(t,n,i){return Zr(n,(function(n,r){t[r]=i&&"function"==typeof n?Kr(n,i):n})),t},trim:function(t){return t.replace(/^\s*/,"").replace(/\s*$/,"")}};function Xr(t){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var te=function(t,n,i){if(!n)return t;var r;if(i)r=i(n);else if(Qr.isURLSearchParams(n))r=n.toString();else{var e=[];Qr.forEach(n,(function(t,n){null!=t&&(Qr.isArray(t)?n+="[]":t=[t],Qr.forEach(t,(function(t){Qr.isDate(t)?t=t.toISOString():Qr.isObject(t)&&(t=JSON.stringify(t)),e.push(Xr(n)+"="+Xr(t))})))})),r=e.join("&")}if(r){var s=t.indexOf("#");-1!==s&&(t=t.slice(0,s)),t+=(-1===t.indexOf("?")?"?":"&")+r}return t};function ne(){this.handlers=[]}ne.prototype.use=function(t,n){return this.handlers.push({fulfilled:t,rejected:n}),this.handlers.length-1},ne.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)},ne.prototype.forEach=function(t){Qr.forEach(this.handlers,(function(n){null!==n&&t(n)}))};var ie=ne,re=function(t,n,i){return Qr.forEach(i,(function(i){t=i(t,n)})),t},ee=function(t){return!(!t||!t.__CANCEL__)},se=function(t,n){Qr.forEach(t,(function(i,r){r!==n&&r.toUpperCase()===n.toUpperCase()&&(t[n]=i,delete t[r])}))},oe=function(t,n,i,r,e){return function(t,n,i,r,e){return t.config=n,i&&(t.code=i),t.request=r,t.response=e,t.isAxiosError=!0,t.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},t}(new Error(t),n,i,r,e)},ue=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"],ae=Qr.isStandardBrowserEnv()?function(){var t,n=/(msie|trident)/i.test(navigator.userAgent),i=document.createElement("a");function r(t){var r=t;return n&&(i.setAttribute("href",r),r=i.href),i.setAttribute("href",r),{href:i.href,protocol:i.protocol?i.protocol.replace(/:$/,""):"",host:i.host,search:i.search?i.search.replace(/^\?/,""):"",hash:i.hash?i.hash.replace(/^#/,""):"",hostname:i.hostname,port:i.port,pathname:"/"===i.pathname.charAt(0)?i.pathname:"/"+i.pathname}}return t=r(window.location.href),function(n){var i=Qr.isString(n)?r(n):n;return i.protocol===t.protocol&&i.host===t.host}}():function(){return!0},he=Qr.isStandardBrowserEnv()?{write:function(t,n,i,r,e,s){var o=[];o.push(t+"="+encodeURIComponent(n)),Qr.isNumber(i)&&o.push("expires="+new Date(i).toGMTString()),Qr.isString(r)&&o.push("path="+r),Qr.isString(e)&&o.push("domain="+e),!0===s&&o.push("secure"),document.cookie=o.join("; ")},read:function(t){var n=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return n?decodeURIComponent(n[3]):null},remove:function(t){this.write(t,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}},ce=function(t){return new Promise((function(n,i){var r=t.data,e=t.headers;Qr.isFormData(r)&&delete e["Content-Type"];var s=new XMLHttpRequest;if(t.auth&&(e.Authorization="Basic "+btoa((t.auth.username||"")+":"+(t.auth.password||""))),s.open(t.method.toUpperCase(),te(t.url,t.params,t.paramsSerializer),!0),s.timeout=t.timeout,s.onreadystatechange=function(){if(s&&4===s.readyState&&(0!==s.status||s.responseURL&&0===s.responseURL.indexOf("file:"))){var r="getAllResponseHeaders"in s?function(t){var n,i,r,e={};return t?(Qr.forEach(t.split("\n"),(function(t){if(r=t.indexOf(":"),n=Qr.trim(t.substr(0,r)).toLowerCase(),i=Qr.trim(t.substr(r+1)),n){if(e[n]&&ue.indexOf(n)>=0)return;e[n]="set-cookie"===n?(e[n]?e[n]:[]).concat([i]):e[n]?e[n]+", "+i:i}})),e):e}(s.getAllResponseHeaders()):null;!function(t,n,i){var r=i.config.validateStatus;!r||r(i.status)?t(i):n(oe("Request failed with status code "+i.status,i.config,null,i.request,i))}(n,i,{data:t.responseType&&"text"!==t.responseType?s.response:s.responseText,status:s.status,statusText:s.statusText,headers:r,config:t,request:s}),s=null}},s.onabort=function(){s&&(i(oe("Request aborted",t,"ECONNABORTED",s)),s=null)},s.onerror=function(){i(oe("Network Error",t,null,s)),s=null},s.ontimeout=function(){i(oe("timeout of "+t.timeout+"ms exceeded",t,"ECONNABORTED",s)),s=null},Qr.isStandardBrowserEnv()){var o=he,u=(t.withCredentials||ae(t.url))&&t.xsrfCookieName?o.read(t.xsrfCookieName):void 0;u&&(e[t.xsrfHeaderName]=u)}if("setRequestHeader"in s&&Qr.forEach(e,(function(t,n){void 0===r&&"content-type"===n.toLowerCase()?delete e[n]:s.setRequestHeader(n,t)})),t.withCredentials&&(s.withCredentials=!0),t.responseType)try{s.responseType=t.responseType}catch(n){if("json"!==t.responseType)throw n}"function"==typeof t.onDownloadProgress&&s.addEventListener("progress",t.onDownloadProgress),"function"==typeof t.onUploadProgress&&s.upload&&s.upload.addEventListener("progress",t.onUploadProgress),t.cancelToken&&t.cancelToken.promise.then((function(t){s&&(s.abort(),i(t),s=null)})),void 0===r&&(r=null),s.send(r)}))},fe={"Content-Type":"application/x-www-form-urlencoded"};function le(t,n){!Qr.isUndefined(t)&&Qr.isUndefined(t["Content-Type"])&&(t["Content-Type"]=n)}var ve,de={adapter:(void 0!==bt&&"[object process]"===Object.prototype.toString.call(bt)?ve=ce:"undefined"!=typeof XMLHttpRequest&&(ve=ce),ve),transformRequest:[function(t,n){return se(n,"Accept"),se(n,"Content-Type"),Qr.isFormData(t)||Qr.isArrayBuffer(t)||Qr.isBuffer(t)||Qr.isStream(t)||Qr.isFile(t)||Qr.isBlob(t)?t:Qr.isArrayBufferView(t)?t.buffer:Qr.isURLSearchParams(t)?(le(n,"application/x-www-form-urlencoded;charset=utf-8"),t.toString()):Qr.isObject(t)?(le(n,"application/json;charset=utf-8"),JSON.stringify(t)):t}],transformResponse:[function(t){if("string"==typeof t)try{t=JSON.parse(t)}catch(t){}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};Qr.forEach(["delete","get","head"],(function(t){de.headers[t]={}})),Qr.forEach(["post","put","patch"],(function(t){de.headers[t]=Qr.merge(fe)}));var pe=de;function we(t){t.cancelToken&&t.cancelToken.throwIfRequested()}var me=function(t){var n,i;return we(t),t.baseURL&&!/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(t.url)&&(t.url=(n=t.baseURL,(i=t.url)?n.replace(/\/+$/,"")+"/"+i.replace(/^\/+/,""):n)),t.headers=t.headers||{},t.data=re(t.data,t.headers,t.transformRequest),t.headers=Qr.merge(t.headers.common||{},t.headers[t.method]||{},t.headers||{}),Qr.forEach(["delete","get","head","post","put","patch","common"],(function(n){delete t.headers[n]})),(t.adapter||pe.adapter)(t).then((function(n){return we(t),n.data=re(n.data,n.headers,t.transformResponse),n}),(function(n){return ee(n)||(we(t),n&&n.response&&(n.response.data=re(n.response.data,n.response.headers,t.transformResponse))),Promise.reject(n)}))},ye=function(t,n){n=n||{};var i={};return Qr.forEach(["url","method","params","data"],(function(t){void 0!==n[t]&&(i[t]=n[t])})),Qr.forEach(["headers","auth","proxy"],(function(r){Qr.isObject(n[r])?i[r]=Qr.deepMerge(t[r],n[r]):void 0!==n[r]?i[r]=n[r]:Qr.isObject(t[r])?i[r]=Qr.deepMerge(t[r]):void 0!==t[r]&&(i[r]=t[r])})),Qr.forEach(["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","maxContentLength","validateStatus","maxRedirects","httpAgent","httpsAgent","cancelToken","socketPath"],(function(r){void 0!==n[r]?i[r]=n[r]:void 0!==t[r]&&(i[r]=t[r])})),i};function ge(t){this.defaults=t,this.interceptors={request:new ie,response:new ie}}ge.prototype.request=function(t){"string"==typeof t?(t=arguments[1]||{}).url=arguments[0]:t=t||{},(t=ye(this.defaults,t)).method=t.method?t.method.toLowerCase():"get";var n=[me,void 0],i=Promise.resolve(t);for(this.interceptors.request.forEach((function(t){n.unshift(t.fulfilled,t.rejected)})),this.interceptors.response.forEach((function(t){n.push(t.fulfilled,t.rejected)}));n.length;)i=i.then(n.shift(),n.shift());return i},ge.prototype.getUri=function(t){return t=ye(this.defaults,t),te(t.url,t.params,t.paramsSerializer).replace(/^\?/,"")},Qr.forEach(["delete","get","head","options"],(function(t){ge.prototype[t]=function(n,i){return this.request(Qr.merge(i||{},{method:t,url:n}))}})),Qr.forEach(["post","put","patch"],(function(t){ge.prototype[t]=function(n,i,r){return this.request(Qr.merge(r||{},{method:t,url:n,data:i}))}}));var Fe=ge;function be(t){this.message=t}be.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},be.prototype.__CANCEL__=!0;var Ee=be;function Se(t){if("function"!=typeof t)throw new TypeError("executor must be a function.");var n;this.promise=new Promise((function(t){n=t}));var i=this;t((function(t){i.reason||(i.reason=new Ee(t),n(i.reason))}))}Se.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},Se.source=function(){var t;return{token:new Se((function(n){t=n})),cancel:t}};var Ae=Se;function ke(t){var n=new Fe(t),i=Kr(Fe.prototype.request,n);return Qr.extend(i,Fe.prototype,n),Qr.extend(i,n),i}var Ce=ke(pe);Ce.Axios=Fe,Ce.create=function(t){return ke(ye(Ce.defaults,t))},Ce.Cancel=Ee,Ce.CancelToken=Ae,Ce.isCancel=ee,Ce.all=function(t){return Promise.all(t)},Ce.spread=function(t){return function(n){return t.apply(null,n)}};var Te=Ce;Te.default=Ce;var Ie=Te;const xe=class{constructor(n){t(this,n),this.debug=!1,this.storageKey="crds-hearts",this._likes=[]}componentWillLoad(){this.console=new r(this.debug),this.config=new e,this.isLiked=this.likes().includes(this.contentfulId),this.getCount().then(t=>{this.count=t})}getCount(){let t=`${this.config.endpoint()}/entries/${this.contentfulId}`;return Ie.get(t,{params:{access_token:this.config.token()}}).then(t=>(function(t){for(var n=arguments.length,i=Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];var e=t,s=!0,o=!1,u=void 0;try{for(var a,h=i[Symbol.iterator]();!(s=(a=h.next()).done);s=!0){var c=a.value;if(null==e)return;e="function"==typeof c?c(e):e[c]}}catch(t){o=!0,u=t}finally{try{!s&&h.return&&h.return()}finally{if(o)throw u}}return e})(t,"data","fields","interaction_count")||0)}abbrevCount(){return this.count>1e3?`${Math.round(this.count/1e3*4)/4}K`:(this.count||0).toString()}likes(){const t=localStorage.getItem(this.storageKey);return t?JSON.parse(t):[]}toggle(t){this.console.log("toggle()"),t.preventDefault(),this.isLiked=!this.isLiked,this.isLiked?(this.add(),this.count++):(this.remove(),this.count>0&&this.count--)}remove(){this.console.log("removeFromStore()"),this._likes=this.likes().filter(t=>{if(t.toString()!==this.contentfulId)return t}),this.save(this._likes)}add(){this._likes=this.likes(),this._likes.push(this.contentfulId),this.save(this.removeDuplicates(this._likes))}removeDuplicates(t){return Array.from(new Set(t))}save(t){this.console.log("save()"),localStorage.setItem(this.storageKey,JSON.stringify(t)),Ie.post(`${this.endpoint()}/content-interactions`,{entry_id:this.contentfulId,action:this.isLiked?"add":"subtract"})}endpoint(){return s.getMeta("crds:interactions-endpoint")||"https://8k97vbzbrk.execute-api.us-east-1.amazonaws.com/int"}render(){return n("a",{href:"#",onClick:t=>this.toggle(t),class:this.isLiked?"on":"off"},n("span",{innerHTML:'<svg width="256px" height="256px" viewBox="0 0 256 256" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g id="heart"><path d="M222.944078,39.3395243 C232.469215,47.3270078 239.075354,57.1577642 242.762502,68.8317796 C246.449652,80.505795 246.987363,92.2566154 244.37563,104.084241 C241.763898,115.911866 236.156363,126.126627 227.553015,134.728537 L138.600552,226.891836 C135.527926,229.963948 131.994414,231.5 128,231.5 C124.005586,231.5 120.472074,229.963948 117.399448,226.891836 L28.4469857,135.189353 C19.8436364,126.280238 14.2361025,115.911866 11.6243699,104.084241 C9.01263721,92.2566154 9.55034867,80.505795 13.2374974,68.8317796 C16.924646,57.1577642 23.5307851,47.3270078 33.0559215,39.3395243 C41.3520061,32.2736738 50.7235066,27.8191121 61.1704302,25.9758461 C71.6173538,24.1325802 81.9106415,24.90061 92.0503004,28.2799285 C102.189959,31.6592471 111.100566,37.3426551 118.782129,45.3301387 L128,54.5464684 L137.217871,45.3301387 C144.899434,37.3426551 153.810041,31.6592471 163.9497,28.2799285 C174.089359,24.90061 184.382646,24.1325802 194.82957,25.9758461 C205.276493,27.8191121 214.647994,32.2736738 222.944078,39.3395243 Z" id="Path"></path></g></svg>',class:"icon heart"}),n("span",{innerHTML:'<svg width="256px" height="256px" viewBox="0 0 256 256" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g id="heart-o"><path d="M218.116413,43.6103959 C227.157221,51.1917362 233.427455,60.5226236 236.927121,71.603045 C240.426788,82.6834664 240.937158,93.8367875 238.458225,105.063008 C235.979293,116.289229 230.656887,125.984595 222.490997,134.14912 L138.061541,221.626149 C135.14515,224.542052 131.791308,226 128,226 C124.208692,226 120.85485,224.542052 117.938459,221.626149 L33.5090034,134.586505 C25.3431125,126.130395 20.0207075,116.289229 17.5417748,105.063008 C15.0628421,93.8367875 15.5732123,82.6834664 19.0728789,71.603045 C22.5725454,60.5226236 28.7698738,51.1917362 37.6648574,43.6103959 C46.559841,36.0290557 56.4026531,31.6552043 67.1932938,30.4888417 C76.8173768,29.3224791 86.587277,30.6346345 96.5030011,34.425308 C105.543809,37.9243891 113.126417,42.8814185 119.250834,49.2964028 L128,58.4814907 L136.749166,49.2964028 C144.040141,41.7150625 152.570578,36.3206413 162.340478,33.1131525 C172.110378,29.9056637 181.95319,29.1766863 191.868914,30.9262268 C201.784638,32.6757674 210.533805,36.903826 218.116413,43.6103959 Z M212.429455,124.526647 C218.262231,118.694847 222.272267,111.477993 224.459559,102.876083 C226.646851,94.2741726 226.573939,85.8909618 224.24083,77.726437 C221.61608,68.3955562 216.585309,60.5955167 209.148518,54.3263319 C201.711727,48.0571471 193.47293,44.630959 184.432123,44.0477811 C177.141149,43.7561888 169.704357,45.3599365 162.121749,48.8590176 C155.705691,51.4833285 150.602015,54.9824096 146.810708,59.356261 L128,78.6012073 L109.189292,59.356261 C105.10635,54.9824096 100.002668,51.3375357 93.8782512,48.4216325 C86.2956426,44.9225514 78.8588512,43.4646031 71.567877,44.0477811 C62.5270696,44.630959 54.2882735,48.0571471 46.8514821,54.3263319 C39.4146907,60.5955167 34.38392,68.3955562 31.7591701,77.726437 C29.4260613,85.8909618 29.3531494,94.2741726 31.5404409,102.876083 C33.7277325,111.477993 37.7377693,118.694847 43.5705447,124.526647 L128,212.003675 L212.429455,124.526647 Z"></path></g></svg>',class:"icon heart-o"}),n("span",{class:"count"},this.abbrevCount()))}static get style(){return"a{font-family:sans-serif;display:block;color:#979797;font-size:80%;text-decoration:none}a>*{vertical-align:middle}a.on>span.heart-o.heart,a.on>span.heart.heart{display:inline-block}a.on>span.heart-o.heart-o,a.on>span.heart.heart-o{display:none}a.on>span.heart-o>svg,a.on>span.heart>svg{fill:#c05c04}a span.count{padding-left:.5rem}a span.heart,a span.heart-o{display:inline-block;border:1px solid;border-radius:50%;width:42px;height:42px}a span.heart-o svg,a span.heart svg{margin:9px;width:24px;height:24px;fill:currentColor}a span.heart{display:none}a span.heart-o{display:inline-block}"}},Oe=class{constructor(n){t(this,n),this.isActive=!1,this.handleInnerClick=t=>{t.stopPropagation()},this.closeModal=()=>{this.isActive=!1,"function"==typeof this.onModalClose&&this.onModalClose()}}componentDidUpdate(){document.body.appendChild(this.element)}render(){return n("div",{class:`modal ${this.isActive?"is-active":""}`,id:"subscribeModalForm",tabindex:"-1",onClick:this.closeModal},n("div",{class:"modal-content",onClick:this.handleInnerClick},n("div",{class:"modal-header"},n("button",{type:"button",class:"modal-close",onClick:this.closeModal})),n("div",{class:"modal-body"},this.label&&n("h3",{class:"modal-title"},this.label),n("slot",null))))}get element(){return i(this)}static get style(){return".modal{background-color:rgba(0,0,0,.8);bottom:0;left:0;opacity:0;position:fixed;right:0;top:0;-webkit-transition:opacity .3s ease,visibility .3s ease;transition:opacity .3s ease,visibility .3s ease;visibility:hidden;will-change:opacity,visibility}.modal.is-active{opacity:1;visibility:visible;z-index:11}.modal.is-active .modal-content{-webkit-transform:translateY(0);transform:translateY(0)}.modal-content{background:#fff;font-size:16px;margin:45px auto;max-width:600px;position:relative;-webkit-transform:translateY(-50px);transform:translateY(-50px);-webkit-transition:-webkit-transform .35s ease;transition:-webkit-transform .35s ease;transition:transform .35s ease;transition:transform .35s ease,-webkit-transform .35s ease;will-change:transform}.modal-body{padding:40px}.modal-title{font-family:acumin-pro-extra-condensed,sans-serif!important;font-weight:500!important;font-size:36px!important;margin:0;text-transform:uppercase}\@media screen and (min-width:480px){.modal-title{font-size:52.2px!important}}input{background-image:none;-webkit-box-shadow:none;box-shadow:none}input[type=text]{background-color:#f4f4f4;border:1px solid #f4f4f4;border-radius:0;color:#4d4d4d;display:block;font-size:16px;line-height:1.5;padding:8px 10px;-webkit-transition:border-color .15s ease-in-out,-webkit-box-shadow .15s ease-in-out;transition:border-color .15s ease-in-out,-webkit-box-shadow .15s ease-in-out;transition:border-color .15s ease-in-out,box-shadow .15s ease-in-out;transition:border-color .15s ease-in-out,box-shadow .15s ease-in-out,-webkit-box-shadow .15s ease-in-out;width:100%}input:focus{border-color:#8bceed;-webkit-box-shadow:inset 0 0 0 1px rgba(139,206,237,.5);box-shadow:inset 0 0 0 1px rgba(139,206,237,.5)}input[type=submit]{-webkit-appearance:button;-moz-appearance:button;appearance:button;background-color:#0095d9;border:1px solid #0095d9;border-radius:4px;color:#fff;cursor:pointer;font-size:16px;line-height:1;margin-top:24px;padding:14px 20px 16px}input[type=submit],label{display:inline-block;margin-bottom:5px}label{font-weight:700;max-width:100%}.modal-close{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:hsla(0,0%,73.3%,.6);-o-border-image:none;border-image:none;border-radius:50%;border-style:none;color:#fff;cursor:pointer;height:25px;position:absolute;right:15px;top:15px;width:25px}.modal-close:after{font-family:acumin-pro,helvetica,arial,sans-serif!important;font-weight:300!important;bottom:3px;content:\"x\";display:inline-block;font-size:16px;position:relative}.modal-close:focus{outline:none}"}};class Re{static articleIcon(){return n("path",{d:"M118.96 18.175c0 1.376-.481 2.547-1.445 3.51-.964.964-2.134 1.446-3.511 1.446H4.957c-1.377 0-2.547-.482-3.511-1.445C.482 20.722 0 19.55 0 18.175V4.957C0 3.58.482 2.41 1.446 1.446S3.58 0 4.956 0h109.048c1.377 0 2.547.482 3.51 1.446.965.964 1.447 2.134 1.447 3.51v13.219zM4.958 76.003c-1.377 0-2.547-.482-3.511-1.446S0 72.423 0 71.046V57.828c0-1.377.482-2.547 1.446-3.51.964-.965 2.134-1.447 3.51-1.447h175.137c1.377 0 2.547.482 3.511 1.446s1.446 2.134 1.446 3.511v13.218c0 1.377-.482 2.547-1.446 3.51-.964.965-2.134 1.447-3.51 1.447H4.956zm0 105.742c-1.377 0-2.547-.482-3.511-1.445C.482 179.336 0 178.166 0 176.789V163.57c0-1.377.482-2.547 1.446-3.511s2.134-1.446 3.51-1.446h175.137c1.377 0 2.547.482 3.511 1.446s1.446 2.134 1.446 3.51v13.219c0 1.377-.482 2.547-1.446 3.51-.964.964-2.134 1.446-3.51 1.446H4.956zm109.047-76.002c1.377 0 2.547.482 3.51 1.445.965.964 1.447 2.135 1.447 3.511v13.218c0 1.377-.482 2.547-1.446 3.511s-2.134 1.446-3.511 1.446H4.957c-1.377 0-2.547-.482-3.511-1.446S0 125.294 0 123.918v-13.219c0-1.376.482-2.547 1.446-3.51.964-.964 2.134-1.446 3.51-1.446h109.048z"})}static podcastIcon(){return n("path",{d:"M30.857 41.151c0-11.43 4-21.147 12-29.149C50.857 4.001 60.571 0 72 0c11.428 0 21.143 4 29.143 12.002s12 17.718 12 29.149v68.585c0 11.43-4 21.147-12 29.149-8 8.001-17.715 12.002-29.143 12.002-11.429 0-21.143-4-29.143-12.002s-12-17.718-12-29.15V41.152zm108 44.58c1.428 0 2.643.5 3.643 1.5s1.5 2.215 1.5 3.644v18.86c0 12.003-2.715 23.077-8.143 33.222-5.429 10.145-12.857 18.575-22.286 25.29-9.428 6.716-19.857 10.931-31.285 12.646v19.718h29.142c1.429 0 2.643.5 3.643 1.5s1.5 2.215 1.5 3.644v8.573c0 1.429-.5 2.643-1.5 3.644-1 1-2.214 1.5-3.643 1.5H32.571c-1.428 0-2.643-.5-3.642-1.5-1-1-1.5-2.215-1.5-3.644v-8.573c0-1.429.5-2.643 1.5-3.644 1-1 2.214-1.5 3.642-1.5h29.143v-19.718c-11.428-1.715-21.857-5.93-31.286-12.645-9.428-6.716-16.857-15.146-22.285-25.291C2.714 132.812 0 121.738 0 109.736v-18.86c0-1.43.5-2.644 1.5-3.644s2.214-1.5 3.643-1.5h10.286c1.428 0 2.642.5 3.642 1.5s1.5 2.214 1.5 3.643v18.86c0 9.431 2.358 18.076 7.072 25.935 4.714 7.858 11 14.074 18.857 18.646 7.857 4.573 16.428 6.859 25.714 6.859 9.286 0 17.857-2.358 25.714-7.073 7.857-4.715 14.072-11.074 18.643-19.075 4.572-8.002 6.857-16.575 6.857-25.72V90.875c0-1.429.5-2.643 1.5-3.643s2.215-1.5 3.643-1.5h10.286z"})}static videoIcon(){return n("path",{d:"M168.209 84.996c4.231 2.371 7.075 5.665 8.53 9.88 1.454 4.217 1.454 8.433 0 12.649-1.455 4.216-4.299 7.51-8.53 9.88L28.564 199.619c-3.967 2.371-8.2 3.162-12.695 2.371-4.496-.79-8.265-2.898-11.307-6.324C1.521 192.24 0 188.155 0 183.412V18.99c0-5.27 1.587-9.552 4.76-12.845C7.935 2.85 11.77.874 16.266.214c4.497-.658 8.596.198 12.299 2.57l139.645 82.212z"})}static bullseyeIcon(t,i,r){return n("svg",{width:t,height:i,"aria-hidden":"true",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 496 512"},n("path",{fill:r,d:"M248 8C111.03 8 0 119.03 0 256s111.03 248 248 248 248-111.03 248-248S384.97 8 248 8zm0 432c-101.69 0-184-82.29-184-184 0-101.69 82.29-184 184-184 101.69 0 184 82.29 184 184 0 101.69-82.29 184-184 184zm0-312c-70.69 0-128 57.31-128 128s57.31 128 128 128 128-57.31 128-128-57.31-128-128-128zm0 192c-35.29 0-64-28.71-64-64s28.71-64 64-64 64 28.71 64 64-28.71 64-64 64z"}))}}const De=Y`
{
    user {
        lifeStage {
            id
            title
        }
    }
}
`,Ne=Y`
{
  lifeStages{
    title
    description
    id
    imageUrl
    contentType
    contentTotal
    content {
        id
        title
        authors {
            fullName
            qualifiedUrl
        }
        duration
        contentType
        category
        slug
        qualifiedUrl
        imageUrl
    }
  }
}
`,je=Y`
mutation setLifeStage($lifeStage: LifeStageInput)
 {
  setLifeStage(lifeStage: $lifeStage) {
    lifeStage {
      title
      id
    }
  }
}`,_e=class{constructor(n){t(this,n),this.analytics=window.analytics||{},this.crdsDefaultImg="https://crds-cms-uploads.imgix.net/content/images/cr-social-sharing-still-bg.jpg",this.recommendedContent=[],this.lifeStages=[],this.user={name:"",lifeStage:null}}authTokenHandler(t,n){t!==n&&(this.apolloClient=$r(t),this.getUser())}componentWillLoad(){this.apolloClient=$r(this.authToken),this.getLifeStages(),this.getUser()}componentDidLoad(){s.trackInView(this.host,"RecommendedContentComponent",this.getLifeStageId.bind(this))}componentWillRender(){if(this.user.lifeStage&&null!==this.user.lifeStage.id&&this.lifeStages.length)return this.filterContent(this.user.lifeStage.id)}getLifeStageId(){return this.user.lifeStage&&this.user.lifeStage.id}getUser(){return this.authToken?this.apolloClient.query({query:De}).then(t=>{const n=t.data.user.lifeStage&&t.data.user.lifeStage.title,i=t.data.user.lifeStage&&t.data.user.lifeStage.id;this.user=Object.assign(Object.assign({},this.user),{lifeStage:{id:i,title:n}}),this.host.forceUpdate()}):null}getLifeStages(){return this.apolloClient.query({query:Ne}).then(t=>{this.lifeStages=t.data.lifeStages,this.host.forceUpdate()})}filterContent(t){return this.recommendedContent=this.lifeStages.find(n=>n.id===t).content}handleBackClick(t){this.recommendedContent=[],this.user=Object.assign(Object.assign({},this.user),{lifeStage:{id:null,title:null}}),t.target.parentNode.scrollLeft=0}handleContentClicked(t){try{this.analytics.track("RecommendedContentClicked",{parent:this.host.tagName,title:t.currentTarget.querySelector(".component-header").innerText,targetUrl:t.target.parentElement.href,lifeStageId:this.user.lifeStage.id,lifeStageName:this.user.lifeStage.title})}catch(t){console.error(t)}}setLifeStage(t,n){return this.apolloClient.mutate({variables:{lifeStage:t?{id:t,title:n}:null},mutation:je}).catch(t=>console.error(t))}handleLifeStageClicked(t){const n=t.target,i=this.host.shadowRoot.querySelectorAll("[data-life-stage-id]");i.forEach(t=>t.classList.add("disabled")),this.user=Object.assign(Object.assign({},this.user),{lifeStage:{id:n.dataset.lifeStageId,title:n.dataset.lifeStageName}});try{this.analytics.track("LifeStageUpdated",{lifeStageId:this.user.lifeStage.id,lifeStageName:this.user.lifeStage.title})}catch(t){console.error(t)}this.filterContent(this.user.lifeStage.id),n.parentNode.scrollLeft=0,i.forEach(t=>t.classList.remove("disabled")),this.setLifeStage(this.user.lifeStage.id,this.user.lifeStage.title)}renderCardSkeleton(){return[1,2,3,4,5].map(()=>n("div",{class:"skeleton skeleton-life-stage"},n("div",{class:"content"},n("div",{class:"text title shimmer shimmer-reverse"}),n("div",{class:"text subtitle shimmer shimmer-reverse"}))))}renderTextSkeleton(){return n("div",{class:"skeleton text-skeleton"},n("div",{class:"title shimmer"}),n("div",{class:"subtitle shimmer"}))}renderLifeStages(){return this.lifeStages.map((t,i)=>n("div",{class:`card ${this.recommendedContent.length?"d-none":""}`,key:i,style:{backgroundImage:`url(${s.imgixify(t.imageUrl+"?auto=format&h=400")}`,backgroundSize:"cover",backgroundPosition:"center"},"data-life-stage-name":t.title,"data-life-stage-id":t.id,onClick:t=>this.handleLifeStageClicked(t)},n("div",{class:"bg-overlay"}),n("div",{class:"card-content"},n("h2",{class:"card-title component-header"},t.title),n("h3",{class:"card-subtitle"},`${t.contentTotal} items`))))}renderMediaLabel(t,i){if("series"!==t)return n("div",{class:"media-label bg-charcoal text-white align-items-center"},i&&n("span",{class:"font-size-smallest"},i),this.renderIcon(t))}renderIcon(t){let i;switch(t){case"video":case"message":i=Re.videoIcon();break;case"podcast":case"episode":i=Re.podcastIcon();break;case"article":i=Re.articleIcon()}return n("svg",{class:"icon",viewBox:"0 0 256 256"},i)}renderRecommendedContent(){const t=window.innerWidth>767?"?auto=format&w=400&h=225&fit=crop":"?auto=format&w=262&h=196.5&fit=crop";return this.recommendedContent.map((i,r)=>n("div",{class:"card",key:r,onClick:t=>this.handleContentClicked(t)},n("a",{class:"relative d-block",href:i.qualifiedUrl},this.renderMediaLabel(i.contentType,i.duration),n("img",{src:(i.imageUrl||this.crdsDefaultImg)+t,class:"img-responsive"})),n("a",{href:i.qualifiedUrl},n("h4",{class:"text-gray font-size-smaller font-weight-mid text-uppercase soft-quarter-top"},i.category),n("h3",{class:"component-header"},i.title),i.authors&&n("p",{class:"soft-quarter-top"},i.authors.map((t,r)=>n("a",{class:"text-gray-light font-size-smaller",href:t.qualifiedUrl,style:{color:"inherit",display:"inline-block",textDecoration:"none"}},t.fullName,r<i.authors.length-1?n("span",null,","):""))))))}renderText(){const t=this.lifeStages.find(t=>t.id===(this.user.lifeStage&&this.user.lifeStage.id));return n("div",null,n("h2",{class:"component-header flush-bottom"},this.recommendedContent.length&&t?"Recommended For You":"Personalize Your Experience"),n("p",{class:"push-half-top push-half-bottom color-gray"},this.recommendedContent.length&&t?t.description:"Which of these best describes your stage of life? (Pick one)"))}render(){const t=this.lifeStages.length&&this.user.lifeStage&&!this.user.lifeStage.id,i=this.recommendedContent.length,r=`cards ${this.recommendedContent.length?"media-cards":""}`;return n("div",{class:"life-stages"},n("div",{class:"life-stages-inner"},n("div",{class:"life-stages-header"},(()=>t||i?this.renderText():this.renderTextSkeleton())(),!!this.recommendedContent.length&&n("div",{class:"life-stage-selected"},n("a",{class:"btn btn-gray-light btn-outline btn-sm back-btn flush",onClick:t=>this.handleBackClick(t)},"change"))),n("div",{class:r},(()=>t?this.renderLifeStages():i?this.renderRecommendedContent():this.renderCardSkeleton())())))}get host(){return i(this)}static get watchers(){return{authToken:["authTokenHandler"]}}static get style(){return"*{-webkit-box-sizing:border-box;box-sizing:border-box}.relative{position:relative}.overflow-hidden{overflow:hidden}.d-flex{display:-ms-flexbox;display:flex}.d-block{display:block}.d-inline{display:inline}.d-none{display:none}.align-items-center{-ms-flex-align:center;align-items:center}.w-100{width:100%}.img-responsive{display:block;height:auto;max-width:100%}hr{border:0;border-top:1px solid #e7e7e7;margin-bottom:1rem;margin-top:1rem}.font-family-base{font-family:acumin-pro,helvetica,arial,sans-serif!important;font-weight:300!important}.text-white{color:#fff!important}.text-gray-light{color:#979797!important}.text-gray{color:#737373!important}.text-center{text-align:center}.text-uppercase{text-transform:uppercase}.text-uppercase.font-size-smaller{font-size:13px!important;letter-spacing:.5px}.font-size-base{font-size:16px!important}\@media (min-width:480px){.font-size-base{font-size:19px!important}}.font-size-large{font-size:19px!important}\@media (min-width:480px){.font-size-large{font-size:22px!important}}.font-size-smaller{font-size:14px!important}.font-size-smallest{font-size:10px}.font-weight-mid{font-weight:500}.bg-charcoal{background-color:#171717}.flush{margin:0!important}.flush-bottom{margin-bottom:0!important}.flush-top{margin-top:0!important}.push-half-bottom{margin-bottom:12px!important}.push-bottom{margin-bottom:24px!important}.push-top{margin-top:24px}.push-half-top{margin-top:12px!important}.soft-quarter-top{padding-top:6px}.component-header{font-family:acumin-pro-extra-condensed;font-size:2rem;font-weight:500;line-height:.95;text-transform:uppercase}\@media (min-width:480px){.component-header{font-size:2.125rem}}.card>a{color:inherit;display:block;text-decoration:none}.card img{width:100%}.color-gray{color:#737373}.media-label{display:-ms-flexbox;display:flex;position:absolute;right:0;bottom:0;padding:6px 8px}.media-label>:not(:last-child){margin-right:5px}.media-label .icon{fill:#fff;height:16px;width:12px}.btn{display:inline-block;margin-bottom:0;font-weight:300;text-align:center;white-space:nowrap;vertical-align:middle;-ms-touch-action:manipulation;touch-action:manipulation;cursor:pointer;background-image:none;border:1px solid transparent;padding:8px 10px;font-size:16px;line-height:1.5;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;border-radius:4px;line-height:1;margin-top:5px;margin-bottom:5px;font-size:14px;padding:13px 16px}.btn.btn-gray-light{color:#fff;background-color:#979797;border-color:#979797}.btn.btn-gray-light.btn-outline{background:transparent;border-style:solid;border-width:1px;color:#979797}.btn.btn-gray-light.btn-outline:hover{background-color:#979797;color:#fff}.btn.btn-sm{font-size:13px;padding:10px 16px 11px}.skeleton{position:relative}.skeleton,.skeleton .shimmer{overflow:hidden}.skeleton .shimmer:after{position:absolute;top:0;right:0;bottom:0;left:0;-webkit-transform:translateX(-100%);transform:translateX(-100%);background-image:linear-gradient(100deg,#f0f0f0 20%,hsla(0,0%,100%,.3) 30%,hsla(0,0%,100%,.7) 40%,#f0f0f0 50%);-webkit-animation:shimmer 1.5s infinite;animation:shimmer 1.5s infinite;-webkit-animation-timing-function:ease;animation-timing-function:ease;content:\"\"}.skeleton .shimmer-reverse:after{background-image:linear-gradient(100deg,#fff 20%,hsla(0,0%,94.1%,.3) 30%,hsla(0,0%,94.1%,.7) 40%,#fff 50%)}\@-webkit-keyframes shimmer{to{-webkit-transform:translateX(100%);transform:translateX(100%)}}\@keyframes shimmer{to{-webkit-transform:translateX(100%);transform:translateX(100%)}}h1,h2,h3,h4,h5,p{margin:0}.disabled{opacity:.5;pointer-events:none}.life-stages{background-color:#fff;min-height:300px;overflow:hidden}\@media (min-width:768px){.life-stages{min-height:500px}}.life-stages .life-stages-inner{-webkit-transition:all .45s ease;transition:all .45s ease}.life-stages .life-stages-header{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;padding-bottom:1.875rem}\@media (min-width:768px){.life-stages .life-stages-header{-ms-flex-direction:row;flex-direction:row}}.life-stages .life-stages-header .life-stage-selected{font-size:.875rem}\@media (min-width:768px){.life-stages .life-stages-header .life-stage-selected{margin-left:auto}}.cards{display:grid;grid-auto-columns:180px;grid-auto-flow:column;grid-column:1/-1;grid-gap:1rem;-webkit-overflow-scrolling:touch;overflow-x:scroll;padding-bottom:1.875rem;-webkit-scroll-snap-type:x mandatory;-ms-scroll-snap-type:x mandatory;scroll-snap-type:x mandatory;scrollbar-base-color:transparent}.cards.media-cards{grid-auto-columns:262px}\@media (min-width:768px){.cards{grid-auto-columns:220px;grid-gap:1.875rem}.cards.media-cards{grid-auto-columns:400px}}.cards .card,.cards .skeleton-life-stage{cursor:pointer;height:340px;overflow:hidden;position:relative;scroll-snap-align:start}.cards .card:hover,.cards .skeleton-life-stage:hover{cursor:pointer}.cards .card:hover .bg-overlay,.cards .skeleton-life-stage:hover .bg-overlay{opacity:.75}.cards .card .bg-overlay,.cards .card .card-content,.cards .skeleton-life-stage .bg-overlay,.cards .skeleton-life-stage .card-content{bottom:0;pointer-events:none;position:absolute;width:100%}.cards .card .bg-overlay,.cards .skeleton-life-stage .bg-overlay{background:-webkit-gradient(linear,left bottom,left top,from(#000),color-stop(50%,transparent));background:linear-gradient(0deg,#000,transparent 50%);height:100%;-webkit-transition:all .45s ease;transition:all .45s ease}.cards .card .card-content,.cards .skeleton-life-stage .card-content{bottom:0;left:0;padding:1rem}.cards .card .card-content .card-subtitle,.cards .card .card-content .card-title,.cards .skeleton-life-stage .card-content .card-subtitle,.cards .skeleton-life-stage .card-content .card-title{letter-spacing:.5px;margin:0;text-transform:uppercase}.cards .card .card-content .card-title,.cards .skeleton-life-stage .card-content .card-title{color:#fff}.cards .card .card-content .card-subtitle,.cards .skeleton-life-stage .card-content .card-subtitle{color:hsla(0,0%,100%,.75);font-size:.75rem}.skeleton-life-stage{background-color:#f0f0f0}.skeleton-life-stage .content{bottom:0;padding:1rem;position:absolute;width:100%}.skeleton-life-stage .content .text{background-color:#fff;margin-top:.5rem;overflow:hidden;position:relative}.skeleton-life-stage .content .title{height:24px;width:90%}.skeleton-life-stage .content .subtitle{height:16px;width:55%}.text-skeleton{width:100%}.text-skeleton .subtitle,.text-skeleton .title{background-color:#f0f0f0;overflow:hidden;position:relative}.text-skeleton .title{height:24px;margin-bottom:1rem;width:35%}.text-skeleton .subtitle{height:16px;width:50%}"}},Pe=(t,n)=>[...n],Me=class{constructor(n){t(this,n),this.env="prod",this.data=[]}componentWillLoad(){Ie.get(this.src||`https://crds-data.netlify.com/shared-footer/${this.env}.json`).then(t=>this.data=t.data)}componentDidLoad(){this.element.parentElement.classList.add("shared-footer"),this.element.parentElement.classList.remove("shared-footer-skeleton")}renderElement(t){if(!t.href)return t.title;let i={target:t.href.match(/:\/\//)?"_blank":"",href:t.href};return t["automation-id"]&&(i["data-automation-id"]=t["automation-id"]),n("a",Object.assign({},i),t.img?n("img",{src:t.img,alt:t.title,title:t.title}):t.title)}renderGroups(t){const i=t.map(t=>t.children?n(Pe,null,n("p",null,t.title),n("ul",null,t.children.map(t=>n("li",null,this.renderElement(t))))):n("li",null,this.renderElement(t))),r=t.filter(t=>t.children).length>0?"Fragment":"ul";return n(r,null,i)}renderColumns(){return this.data.map(t=>n("div",{class:t.class},n("h5",null,this.renderElement(t)),this.renderGroups(t.children)))}render(){return 0===this.data.length?null:n("footer",null,n("div",{class:"container"},this.renderColumns()))}get element(){return i(this)}static get style(){return"footer{font-family:acumin-pro,helvetica,arial,sans-serif!important;font-weight:300!important;color:#737373;background-color:#e7e7e7;overflow:hidden;padding:3.125rem 0}footer .container{margin:0 auto;max-width:1170px}\@media only screen and (min-width:768px){footer .container{display:-ms-flexbox;display:flex}}footer .container div{padding-left:15px;padding-right:15px;margin-bottom:24px;vertical-align:top}\@media only screen and (min-width:768px){footer .container div{-ms-flex:1;flex:1;width:16.66667%}}footer .container div p{margin-bottom:0;font-weight:700}footer .container div ul{list-style-type:none;margin:0;padding-left:0}footer .container div.social-icons{padding-left:0}\@media only screen and (min-width:768px){footer .container div.social-icons{-ms-flex:2;flex:2;text-align:right;width:33.33333%}}footer .container div.social-icons li{display:inline}footer .container div.social-icons li a{-webkit-box-sizing:border-box;box-sizing:border-box;margin-left:.75rem;background:#737373;border-radius:50%;display:-ms-inline-flexbox;display:inline-flex;-ms-flex-pack:center;justify-content:center;height:36px;width:36px;padding:10px}footer .container div.social-icons li a img{max-width:100%}footer .container a{color:#737373;text-decoration:none}footer .container h5{font-size:16.1px!important;line-height:1.1;margin:12px 0}"}},Be=class{constructor(n){t(this,n),this.env="prod",this.mainNavIsShowing=!1,this.profileNavIsShowing=!1,this.giveNavIsShowing=!1,this.data=[]}componentWillLoad(){return Ie.get(this.src||`https://crds-data.netlify.com/shared-header/${this.env}.json`).then(t=>this.data=t.data).catch(t=>console.error(t))}componentDidLoad(){this.element.parentElement.classList.add("shared-header"),this.element.parentElement.classList.remove("shared-header-skeleton")}onClick(t,n){t.preventDefault(),this.active=n}renderSections(t){return t?t.map(t=>{const i=s.parameterize(t.title);return n("nav-section",{slug:i,onActivate:this.onClick.bind(this),isActive:this.active==i},n("h2",null,t.title),n("p",null,t.description))}):null}handleBackClick(t){t.preventDefault(),this.active=null}renderSubnavs(t){if(!t)return null;const i=t.map(t=>n("nav-section-subnav",{onBack:this.handleBackClick.bind(this),active:this.active,slug:s.parameterize(t.title)},this.renderChildren(t)));return n("div",{class:"subnavigation"},i)}renderChildren(t){const i=t.children.map(t=>{if("string"==typeof t)return n("h4",null,t);{const i=t.map(t=>n("li",{class:t.top_level?"top-level":null},n("a",{href:t.href||"#","data-automation-id":t["automation-id"]},t.title)));return n("ul",null,i)}});return n(Pe,null,n("h2",null,t.title),i)}toggleMenu(t,n){if(t.preventDefault(),t.stopPropagation(),"main-nav"==n)this.giveNavIsShowing=!1,this.mainNavIsShowing=!this.mainNavIsShowing,this.profileNavIsShowing=!1,this.mainNavIsShowing?document.body.setAttribute("style","overflow: hidden; position: absolute; width: 100vw;"):document.body.setAttribute("style","overflow: scroll;");else{if("profile-nav"==n)return this.giveNavIsShowing=!1,this.mainNavIsShowing=!1,this.profileNavIsShowing=!this.profileNavIsShowing,this.profileNavIsShowing?document.body.setAttribute("style","overflow: hidden; position: absolute; width: 100vw;"):document.body.setAttribute("style","overflow: scroll;");if("give-nav"==n)return this.giveNavIsShowing=!this.giveNavIsShowing,this.mainNavIsShowing=!1,this.profileNavIsShowing=!1,this.giveNavIsShowing?document.body.setAttribute("style","overflow: hidden; position: absolute; width: 100vw;"):document.body.setAttribute("style","overflow: scroll; ")}}closeMenus(t){return t.preventDefault(),this.giveNavIsShowing=!1,this.mainNavIsShowing=!1,this.profileNavIsShowing=!1,document.body.setAttribute("style","overflow: scroll;")}navClasses(){let t=[];return this.mainNavIsShowing&&t.push("is-showing"),this.active&&t.push(`section--${this.active}`),(this.profileNavIsShowing||this.giveNavIsShowing)&&(t=[]),t.join(" ")}navCloseClasses(){let t=["close"];return(this.mainNavIsShowing||this.profileNavIsShowing||this.giveNavIsShowing)&&t.push("is-showing"),t.join(" ")}handleScroll(t){if(this.mainNavIsShowing||this.giveNavIsShowing||this.profileNavIsShowing)return document.body.setAttribute("style","overflow: scroll;"),this.closeMenus(t)}render(){return n(Pe,null,n("global-nav",{mainNavIsShowing:this.mainNavIsShowing,profileNavIsShowing:this.profileNavIsShowing,giveNavIsShowing:this.giveNavIsShowing,navClickHandler:this.toggleMenu.bind(this),giveData:this.data.give,profileData:this.data.profile,config:this.data.config,env:this.env}),n("nav",{class:this.navClasses(),onClick:t=>t.stopPropagation()},n("div",{class:"content"},n("div",{class:"navigation"},n("ul",null,this.renderSections(this.data.nav))),this.renderSubnavs(this.data.nav),n("nav-ctas",{active:this.active,data:this.data.promos}))),n("div",{class:this.navCloseClasses()},n("div",{class:"close-icon",innerHTML:'<svg aria-hidden="true" focusable="false" data-prefix="fal" data-icon="times" class="svg-inline--fa fa-times fa-w-10" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path fill="" d="M193.94 256L296.5 153.44l21.15-21.15c3.12-3.12 3.12-8.19 0-11.31l-22.63-22.63c-3.12-3.12-8.19-3.12-11.31 0L160 222.06 36.29 98.34c-3.12-3.12-8.19-3.12-11.31 0L2.34 120.97c-3.12 3.12-3.12 8.19 0 11.31L126.06 256 2.34 379.71c-3.12 3.12-3.12 8.19 0 11.31l22.63 22.63c3.12 3.12 8.19 3.12 11.31 0L160 289.94 262.56 392.5l21.15 21.15c3.12 3.12 8.19 3.12 11.31 0l22.63-22.63c3.12-3.12 3.12-8.19 0-11.31L193.94 256z"></path></svg>',onClick:this.closeMenus.bind(this)})))}get element(){return i(this)}static get style(){return"\@media (max-width:992px){.subnavigation{left:100vw;padding-bottom:125px;position:absolute;top:0}}\@media (min-width:992px){.subnavigation{padding-top:47px}}.subnavigation h3{color:#fff;font-size:11px;opacity:.5;text-transform:uppercase}nav{background-color:#000;background-repeat:no-repeat;background-size:cover;color:#fff;display:none;font-family:acumin-pro,helvetica,arial,sans-serif;height:calc(100% - 47px);overflow-x:hidden;overflow-y:scroll;position:fixed;top:47px;-webkit-transform:translateX(0);transform:translateX(0);width:100vw;z-index:2;background-image:url(https://crds-media.imgix.net/7B6MoNNiWMZOtdusfRpipl/651049926b72990ae4f510a725cc2b26/nav-section-default-mobile.jpg?auto=format%2Ccompress)}nav.is-showing{display:block}\@media (min-width:768px){nav{height:100vh}}\@media (min-width:992px){nav{background-size:100%;background-image:url(https://crds-media.imgix.net/1OTqm9FjFl6wtjCXAkA04V/d44f06765e1fe0cf6a33ac3222b29302/nav-section-default.jpg?auto=format%2Ccompress)}}nav.section--come-visit{background-image:url(https://crds-media.imgix.net/7tP5INZjs0NUsWUlUDRpKv/6af5b40c0caf555a52876d51037de2a2/nav-section-locations-mobile.jpg?auto=format%2Ccompress)}\@media (min-width:992px){nav.section--come-visit{background-image:url(https://crds-media.imgix.net/49tv3Wjdt28dPnim7TbR89/6e9931a3700a3894510faa32d6dcea0f/nav-section-locations.jpg?auto=format%2Ccompress)}}nav.section--find-community{background-image:url(https://crds-media.imgix.net/67LrfkAcGom2zu23JncnA0/6e3c9b52f38f455d69f8b441d0d60726/nav-section-community-mobile.jpg?auto=format%2Ccompress)}\@media (min-width:992px){nav.section--find-community{background-image:url(https://crds-media.imgix.net/zEx1Ajg3dIlh5SpvzQ1qI/981c79df660b3dc5b393338a7640b2a1/nav-section-community.jpg?auto=format%2Ccompress)}}nav.section--get-support{background-image:url(https://crds-media.imgix.net/Cx02UnQr9sbVzjpXIcuqY/92b73ec270bf84af99c590bbd0173c54/nav-section-support-mobile.jpg?auto=format%2Ccompress)}\@media (min-width:992px){nav.section--get-support{background-image:url(https://crds-media.imgix.net/7i7YFUv6uY8MpwztZwIZE0/d093954885a5af29757040281c3b7e4c/nav-section-support.jpg?auto=format%2Ccompress)}}nav.section--watch-listen-read{background-image:url(https://crds-media.imgix.net/5lMvnR6A9cavGG4aS0zzO8/bcff1c0f42284f027a411b22a85bfb55/nav-section-media-mobile.jpg?auto=format%2Ccompress)}\@media (min-width:992px){nav.section--watch-listen-read{background-image:url(https://crds-media.imgix.net/59liSAMGW8dBCeUza5NUvj/b43c1e158ac599fd6debc40b916997d9/nav-section-media.jpg?auto=format%2Ccompress)}}nav .content{position:relative;width:200vw;z-index:3;margin:0 auto;max-width:1170px}\@media (max-width:992px){nav .content{padding-bottom:125px;-webkit-transform:translateX(0);transform:translateX(0);-webkit-transition:-webkit-transform .2s linear;transition:-webkit-transform .2s linear;transition:transform .2s linear;transition:transform .2s linear,-webkit-transform .2s linear}}\@media (min-width:992px){nav .content{display:-ms-flexbox;display:flex;padding-bottom:0}}\@media (max-width:992px){nav[class*=section--] .content{-webkit-transform:translateX(-100vw);transform:translateX(-100vw);-webkit-transition:-webkit-transform .2s linear;transition:-webkit-transform .2s linear;transition:transform .2s linear;transition:transform .2s linear,-webkit-transform .2s linear}}\@media (min-width:992px){nav[class*=section--] .ctas{display:none}}\@media (min-width:992px){nav[class*=section--] .subnavigation{width:calc(50% - 40px)}}.navigation{position:relative;width:100vw}\@media (min-width:992px){.navigation{margin-right:1.2%;width:50%}}.navigation ul{padding-left:0;margin:0;padding:30px 0 20px}.navigation ul li{list-style:none}\@media (min-width:992px){.navigation ul{padding:50px 20px 0;position:relative;z-index:1}}.navigation li{width:100%}.navigation:after{background-color:#d8d8d8;bottom:0;content:\"\";height:2px;left:20px;margin:0 auto;opacity:.2;position:absolute;width:calc(100vw - 40px)}\@media (min-width:992px){.navigation:after{background:-webkit-gradient(linear,left top,left bottom,from(#fff),to(hsla(0,0%,100%,0)));background:linear-gradient(180deg,#fff 0,hsla(0,0%,100%,0));height:100%;left:auto;right:56px;top:50px;width:2px}}.close{background:-webkit-gradient(linear,left top,left bottom,from(transparent),to(rgba(0,0,0,.9)));background:linear-gradient(180deg,transparent,rgba(0,0,0,.9));bottom:0;display:none;height:125px;padding-left:22px;position:fixed;width:100%;z-index:3}\@media (max-width:992px){.close.is-showing{display:block}}.close-icon{background-color:#0095d9;border-radius:50%;bottom:22px;-webkit-box-shadow:0 5px 24px -5px rgba(0,0,0,.75);box-shadow:0 5px 24px -5px rgba(0,0,0,.75);cursor:pointer;height:64px;position:absolute;width:64px}.close svg{fill:#fff;height:30px;left:50%;position:absolute;top:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);width:30px}"}};var Le=L((function(t){!function(){var n={newline:/^\n+/,code:/^( {4}[^\n]+\n*)+/,fences:/^ {0,3}(`{3,}|~{3,})([^`~\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?:\n+|$)|$)/,hr:/^ {0,3}((?:- *){3,}|(?:_ *){3,}|(?:\* *){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6}) +([^\n]*?)(?: +#+)? *(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3})(bull) [\s\S]+?(?:hr|def|\n{2,}(?! )(?!\1bull )\n*|\s*$)/,html:"^ {0,3}(?:<(script|pre|style)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?\\?>\\n*|<![A-Z][\\s\\S]*?>\\n*|<!\\[CDATA\\[[\\s\\S]*?\\]\\]>\\n*|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:\\n{2,}|$)|<(?!script|pre|style)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:\\n{2,}|$)|</(?!script|pre|style)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:\\n{2,}|$))",def:/^ {0,3}\[(label)\]: *\n? *<?([^\s>]+)>?(?:(?: +\n? *| *\n *)(title))? *(?:\n+|$)/,nptable:p,table:p,lheading:/^([^\n]+)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html)[^\n]+)*)/,text:/^[^\n]+/};function i(t){this.tokens=[],this.tokens.links=Object.create(null),this.options=t||b.defaults,this.rules=n.normal,this.options.pedantic?this.rules=n.pedantic:this.options.gfm&&(this.rules=n.gfm)}n._label=/(?!\s*\])(?:\\[\[\]]|[^\[\]])+/,n._title=/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/,n.def=f(n.def).replace("label",n._label).replace("title",n._title).getRegex(),n.bullet=/(?:[*+-]|\d{1,9}\.)/,n.item=/^( *)(bull) ?[^\n]*(?:\n(?!\1bull ?)[^\n]*)*/,n.item=f(n.item,"gm").replace(/bull/g,n.bullet).getRegex(),n.list=f(n.list).replace(/bull/g,n.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+n.def.source+")").getRegex(),n._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",n._comment=/<!--(?!-?>)[\s\S]*?-->/,n.html=f(n.html,"i").replace("comment",n._comment).replace("tag",n._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),n.paragraph=f(n._paragraph).replace("hr",n.hr).replace("heading"," {0,3}#{1,6} +").replace("|lheading","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}|~{3,})[^`\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|!--)").replace("tag",n._tag).getRegex(),n.blockquote=f(n.blockquote).replace("paragraph",n.paragraph).getRegex(),n.normal=w({},n),n.gfm=w({},n.normal,{nptable:/^ *([^|\n ].*\|.*)\n *([-:]+ *\|[-| :]*)(?:\n((?:.*[^>\n ].*(?:\n|$))*)\n*|$)/,table:/^ *\|(.+)\n *\|?( *[-:]+[-| :]*)(?:\n((?: *[^>\n ].*(?:\n|$))*)\n*|$)/}),n.pedantic=w({},n.normal,{html:f("^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))").replace("comment",n._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^ *(#{1,6}) *([^\n]+?) *(?:#+ *)?(?:\n+|$)/,fences:p,paragraph:f(n.normal._paragraph).replace("hr",n.hr).replace("heading"," *#{1,6} *[^\n]").replace("lheading",n.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()}),i.rules=n,i.lex=function(t,n){return new i(n).lex(t)},i.prototype.lex=function(t){return t=t.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    ").replace(/\u00a0/g," ").replace(/\u2424/g,"\n"),this.token(t,!0)},i.prototype.token=function(t,i){var r,e,s,o,u,a,c,f,l,v,d,p,w,g,F,b;for(t=t.replace(/^ +$/gm,"");t;)if((s=this.rules.newline.exec(t))&&(t=t.substring(s[0].length),s[0].length>1&&this.tokens.push({type:"space"})),s=this.rules.code.exec(t)){var E=this.tokens[this.tokens.length-1];t=t.substring(s[0].length),E&&"paragraph"===E.type?E.text+="\n"+s[0].trimRight():(s=s[0].replace(/^ {4}/gm,""),this.tokens.push({type:"code",codeBlockStyle:"indented",text:this.options.pedantic?s:y(s,"\n")}))}else if(s=this.rules.fences.exec(t))t=t.substring(s[0].length),this.tokens.push({type:"code",lang:s[2]?s[2].trim():s[2],text:s[3]||""});else if(s=this.rules.heading.exec(t))t=t.substring(s[0].length),this.tokens.push({type:"heading",depth:s[1].length,text:s[2]});else if((s=this.rules.nptable.exec(t))&&(a={type:"table",header:m(s[1].replace(/^ *| *\| *$/g,"")),align:s[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:s[3]?s[3].replace(/\n$/,"").split("\n"):[]}).header.length===a.align.length){for(t=t.substring(s[0].length),d=0;d<a.align.length;d++)a.align[d]=/^ *-+: *$/.test(a.align[d])?"right":/^ *:-+: *$/.test(a.align[d])?"center":/^ *:-+ *$/.test(a.align[d])?"left":null;for(d=0;d<a.cells.length;d++)a.cells[d]=m(a.cells[d],a.header.length);this.tokens.push(a)}else if(s=this.rules.hr.exec(t))t=t.substring(s[0].length),this.tokens.push({type:"hr"});else if(s=this.rules.blockquote.exec(t))t=t.substring(s[0].length),this.tokens.push({type:"blockquote_start"}),s=s[0].replace(/^ *> ?/gm,""),this.token(s,i),this.tokens.push({type:"blockquote_end"});else if(s=this.rules.list.exec(t)){for(t=t.substring(s[0].length),this.tokens.push(c={type:"list_start",ordered:g=(o=s[2]).length>1,start:g?+o:"",loose:!1}),f=[],r=!1,w=(s=s[0].match(this.rules.item)).length,d=0;d<w;d++)v=(a=s[d]).length,~(a=a.replace(/^ *([*+-]|\d+\.) */,"")).indexOf("\n ")&&(v-=a.length,a=a.replace(this.options.pedantic?/^ {1,4}/gm:new RegExp("^ {1,"+v+"}","gm"),"")),d!==w-1&&(u=n.bullet.exec(s[d+1])[0],(o.length>1?1===u.length:u.length>1||this.options.smartLists&&u!==o)&&(t=s.slice(d+1).join("\n")+t,d=w-1)),e=r||/\n\n(?!\s*$)/.test(a),d!==w-1&&(r="\n"===a.charAt(a.length-1),e||(e=r)),e&&(c.loose=!0),b=void 0,(F=/^\[[ xX]\] /.test(a))&&(b=" "!==a[1],a=a.replace(/^\[[ xX]\] +/,"")),f.push(l={type:"list_item_start",task:F,checked:b,loose:e}),this.tokens.push(l),this.token(a,!1),this.tokens.push({type:"list_item_end"});if(c.loose)for(w=f.length,d=0;d<w;d++)f[d].loose=!0;this.tokens.push({type:"list_end"})}else if(s=this.rules.html.exec(t))t=t.substring(s[0].length),this.tokens.push({type:this.options.sanitize?"paragraph":"html",pre:!this.options.sanitizer&&("pre"===s[1]||"script"===s[1]||"style"===s[1]),text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(s[0]):h(s[0]):s[0]});else if(i&&(s=this.rules.def.exec(t)))t=t.substring(s[0].length),s[3]&&(s[3]=s[3].substring(1,s[3].length-1)),p=s[1].toLowerCase().replace(/\s+/g," "),this.tokens.links[p]||(this.tokens.links[p]={href:s[2],title:s[3]});else if((s=this.rules.table.exec(t))&&(a={type:"table",header:m(s[1].replace(/^ *| *\| *$/g,"")),align:s[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:s[3]?s[3].replace(/\n$/,"").split("\n"):[]}).header.length===a.align.length){for(t=t.substring(s[0].length),d=0;d<a.align.length;d++)a.align[d]=/^ *-+: *$/.test(a.align[d])?"right":/^ *:-+: *$/.test(a.align[d])?"center":/^ *:-+ *$/.test(a.align[d])?"left":null;for(d=0;d<a.cells.length;d++)a.cells[d]=m(a.cells[d].replace(/^ *\| *| *\| *$/g,""),a.header.length);this.tokens.push(a)}else if(s=this.rules.lheading.exec(t))t=t.substring(s[0].length),this.tokens.push({type:"heading",depth:"="===s[2].charAt(0)?1:2,text:s[1]});else if(i&&(s=this.rules.paragraph.exec(t)))t=t.substring(s[0].length),this.tokens.push({type:"paragraph",text:"\n"===s[1].charAt(s[1].length-1)?s[1].slice(0,-1):s[1]});else if(s=this.rules.text.exec(t))t=t.substring(s[0].length),this.tokens.push({type:"text",text:s[0]});else if(t)throw new Error("Infinite loop on byte: "+t.charCodeAt(0));return this.tokens};var r={escape:/^\\([!"#$%&'()*+,\-.\/:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:p,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(?!\s*\])((?:\\[\[\]]?|[^\[\]\\])+)\]/,nolink:/^!?\[(?!\s*\])((?:\[[^\[\]]*\]|\\[\[\]]|[^\[\]])*)\](?:\[\])?/,strong:/^__([^\s_])__(?!_)|^\*\*([^\s*])\*\*(?!\*)|^__([^\s][\s\S]*?[^\s])__(?!_)|^\*\*([^\s][\s\S]*?[^\s])\*\*(?!\*)/,em:/^_([^\s_])_(?!_)|^\*([^\s*<\[])\*(?!\*)|^_([^\s<][\s\S]*?[^\s_])_(?!_|[^\spunctuation])|^_([^\s_<][\s\S]*?[^\s])_(?!_|[^\spunctuation])|^\*([^\s<"][\s\S]*?[^\s\*])\*(?!\*|[^\spunctuation])|^\*([^\s*"<\[][\s\S]*?[^\s])\*(?!\*)/,code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:p,text:/^(`+|[^`])(?:[\s\S]*?(?:(?=[\\<!\[`*]|\b_|$)|[^ ](?= {2,}\n))|(?= {2,}\n))/};function e(t,n){if(this.options=n||b.defaults,this.links=t,this.rules=r.normal,this.renderer=this.options.renderer||new s,this.renderer.options=this.options,!this.links)throw new Error("Tokens array requires a `links` property.");this.options.pedantic?this.rules=r.pedantic:this.options.gfm&&(this.rules=this.options.breaks?r.breaks:r.gfm)}function s(t){this.options=t||b.defaults}function o(){}function u(t){this.tokens=[],this.token=null,this.options=t||b.defaults,this.options.renderer=this.options.renderer||new s,this.renderer=this.options.renderer,this.renderer.options=this.options,this.slugger=new a}function a(){this.seen={}}function h(t,n){if(n){if(h.escapeTest.test(t))return t.replace(h.escapeReplace,(function(t){return h.replacements[t]}))}else if(h.escapeTestNoEncode.test(t))return t.replace(h.escapeReplaceNoEncode,(function(t){return h.replacements[t]}));return t}function c(t){return t.replace(/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi,(function(t,n){return"colon"===(n=n.toLowerCase())?":":"#"===n.charAt(0)?"x"===n.charAt(1)?String.fromCharCode(parseInt(n.substring(2),16)):String.fromCharCode(+n.substring(1)):""}))}function f(t,n){return t=t.source||t,n=n||"",{replace:function(n,i){return i=(i=i.source||i).replace(/(^|[^\[])\^/g,"$1"),t=t.replace(n,i),this},getRegex:function(){return new RegExp(t,n)}}}function l(t,n,i){if(t){try{var r=decodeURIComponent(c(i)).replace(/[^\w:]/g,"").toLowerCase()}catch(t){return null}if(0===r.indexOf("javascript:")||0===r.indexOf("vbscript:")||0===r.indexOf("data:"))return null}n&&!d.test(i)&&(i=function(t,n){return v[" "+t]||(v[" "+t]=/^[^:]+:\/*[^\/]*$/.test(t)?t+"/":y(t,"/",!0)),t=v[" "+t],"//"===n.slice(0,2)?t.replace(/:[\s\S]*/,":")+n:"/"===n.charAt(0)?t.replace(/(:\/*[^\/]*)[\s\S]*/,"$1")+n:t+n}(n,i));try{i=encodeURI(i).replace(/%25/g,"%")}catch(t){return null}return i}r._punctuation="!\"#$%&'()*+,\\-./:;<=>?@\\[^_{|}~",r.em=f(r.em).replace(/punctuation/g,r._punctuation).getRegex(),r._escapes=/\\([!"#$%&'()*+,\-.\/:;<=>?@\[\]\\^_`{|}~])/g,r._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,r._email=/[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,r.autolink=f(r.autolink).replace("scheme",r._scheme).replace("email",r._email).getRegex(),r._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,r.tag=f(r.tag).replace("comment",n._comment).replace("attribute",r._attribute).getRegex(),r._label=/(?:\[[^\[\]]*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,r._href=/<(?:\\[<>]?|[^\s<>\\])*>|[^\s\x00-\x1f]*/,r._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,r.link=f(r.link).replace("label",r._label).replace("href",r._href).replace("title",r._title).getRegex(),r.reflink=f(r.reflink).replace("label",r._label).getRegex(),r.normal=w({},r),r.pedantic=w({},r.normal,{strong:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,em:/^_(?=\S)([\s\S]*?\S)_(?!_)|^\*(?=\S)([\s\S]*?\S)\*(?!\*)/,link:f(/^!?\[(label)\]\((.*?)\)/).replace("label",r._label).getRegex(),reflink:f(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",r._label).getRegex()}),r.gfm=w({},r.normal,{escape:f(r.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^~+(?=\S)([\s\S]*?\S)~+/,text:/^(`+|[^`])(?:[\s\S]*?(?:(?=[\\<!\[`*~]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@))|(?= {2,}\n|[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@))/}),r.gfm.url=f(r.gfm.url,"i").replace("email",r.gfm._extended_email).getRegex(),r.breaks=w({},r.gfm,{br:f(r.br).replace("{2,}","*").getRegex(),text:f(r.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()}),e.rules=r,e.output=function(t,n,i){return new e(n,i).output(t)},e.prototype.output=function(t){for(var n,i,r,s,o,u,a="";t;)if(o=this.rules.escape.exec(t))t=t.substring(o[0].length),a+=h(o[1]);else if(o=this.rules.tag.exec(t))!this.inLink&&/^<a /i.test(o[0])?this.inLink=!0:this.inLink&&/^<\/a>/i.test(o[0])&&(this.inLink=!1),!this.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(o[0])?this.inRawBlock=!0:this.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(o[0])&&(this.inRawBlock=!1),t=t.substring(o[0].length),a+=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(o[0]):h(o[0]):o[0];else if(o=this.rules.link.exec(t)){var c=g(o[2],"()");if(c>-1){var f=4+o[1].length+c;o[2]=o[2].substring(0,c),o[0]=o[0].substring(0,f).trim(),o[3]=""}t=t.substring(o[0].length),this.inLink=!0,r=o[2],this.options.pedantic?(n=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(r))?(r=n[1],s=n[3]):s="":s=o[3]?o[3].slice(1,-1):"",r=r.trim().replace(/^<([\s\S]*)>$/,"$1"),a+=this.outputLink(o,{href:e.escapes(r),title:e.escapes(s)}),this.inLink=!1}else if((o=this.rules.reflink.exec(t))||(o=this.rules.nolink.exec(t))){if(t=t.substring(o[0].length),n=(o[2]||o[1]).replace(/\s+/g," "),!(n=this.links[n.toLowerCase()])||!n.href){a+=o[0].charAt(0),t=o[0].substring(1)+t;continue}this.inLink=!0,a+=this.outputLink(o,n),this.inLink=!1}else if(o=this.rules.strong.exec(t))t=t.substring(o[0].length),a+=this.renderer.strong(this.output(o[4]||o[3]||o[2]||o[1]));else if(o=this.rules.em.exec(t))t=t.substring(o[0].length),a+=this.renderer.em(this.output(o[6]||o[5]||o[4]||o[3]||o[2]||o[1]));else if(o=this.rules.code.exec(t))t=t.substring(o[0].length),a+=this.renderer.codespan(h(o[2].trim(),!0));else if(o=this.rules.br.exec(t))t=t.substring(o[0].length),a+=this.renderer.br();else if(o=this.rules.del.exec(t))t=t.substring(o[0].length),a+=this.renderer.del(this.output(o[1]));else if(o=this.rules.autolink.exec(t))t=t.substring(o[0].length),r="@"===o[2]?"mailto:"+(i=h(this.mangle(o[1]))):i=h(o[1]),a+=this.renderer.link(r,null,i);else if(this.inLink||!(o=this.rules.url.exec(t))){if(o=this.rules.text.exec(t))t=t.substring(o[0].length),a+=this.renderer.text(this.inRawBlock?this.options.sanitize?this.options.sanitizer?this.options.sanitizer(o[0]):h(o[0]):o[0]:h(this.smartypants(o[0])));else if(t)throw new Error("Infinite loop on byte: "+t.charCodeAt(0))}else{if("@"===o[2])r="mailto:"+(i=h(o[0]));else{do{u=o[0],o[0]=this.rules._backpedal.exec(o[0])[0]}while(u!==o[0]);i=h(o[0]),r="www."===o[1]?"http://"+i:i}t=t.substring(o[0].length),a+=this.renderer.link(r,null,i)}return a},e.escapes=function(t){return t?t.replace(e.rules._escapes,"$1"):t},e.prototype.outputLink=function(t,n){var i=n.href,r=n.title?h(n.title):null;return"!"!==t[0].charAt(0)?this.renderer.link(i,r,this.output(t[1])):this.renderer.image(i,r,h(t[1]))},e.prototype.smartypants=function(t){return this.options.smartypants?t.replace(/---/g,"").replace(/--/g,"").replace(/(^|[-\u2014\/(\[{"\s])'/g,"$1").replace(/'/g,"").replace(/(^|[-\u2014\/(\[{\u2018\s])"/g,"$1").replace(/"/g,"").replace(/\.{3}/g,""):t},e.prototype.mangle=function(t){if(!this.options.mangle)return t;for(var n,i="",r=t.length,e=0;e<r;e++)n=t.charCodeAt(e),Math.random()>.5&&(n="x"+n.toString(16)),i+="&#"+n+";";return i},s.prototype.code=function(t,n,i){var r=(n||"").match(/\S*/)[0];if(this.options.highlight){var e=this.options.highlight(t,r);null!=e&&e!==t&&(i=!0,t=e)}return r?'<pre><code class="'+this.options.langPrefix+h(r,!0)+'">'+(i?t:h(t,!0))+"</code></pre>\n":"<pre><code>"+(i?t:h(t,!0))+"</code></pre>"},s.prototype.blockquote=function(t){return"<blockquote>\n"+t+"</blockquote>\n"},s.prototype.html=function(t){return t},s.prototype.heading=function(t,n,i,r){return this.options.headerIds?"<h"+n+' id="'+this.options.headerPrefix+r.slug(i)+'">'+t+"</h"+n+">\n":"<h"+n+">"+t+"</h"+n+">\n"},s.prototype.hr=function(){return this.options.xhtml?"<hr/>\n":"<hr>\n"},s.prototype.list=function(t,n,i){var r=n?"ol":"ul";return"<"+r+(n&&1!==i?' start="'+i+'"':"")+">\n"+t+"</"+r+">\n"},s.prototype.listitem=function(t){return"<li>"+t+"</li>\n"},s.prototype.checkbox=function(t){return"<input "+(t?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "},s.prototype.paragraph=function(t){return"<p>"+t+"</p>\n"},s.prototype.table=function(t,n){return n&&(n="<tbody>"+n+"</tbody>"),"<table>\n<thead>\n"+t+"</thead>\n"+n+"</table>\n"},s.prototype.tablerow=function(t){return"<tr>\n"+t+"</tr>\n"},s.prototype.tablecell=function(t,n){var i=n.header?"th":"td";return(n.align?"<"+i+' align="'+n.align+'">':"<"+i+">")+t+"</"+i+">\n"},s.prototype.strong=function(t){return"<strong>"+t+"</strong>"},s.prototype.em=function(t){return"<em>"+t+"</em>"},s.prototype.codespan=function(t){return"<code>"+t+"</code>"},s.prototype.br=function(){return this.options.xhtml?"<br/>":"<br>"},s.prototype.del=function(t){return"<del>"+t+"</del>"},s.prototype.link=function(t,n,i){if(null===(t=l(this.options.sanitize,this.options.baseUrl,t)))return i;var r='<a href="'+h(t)+'"';return n&&(r+=' title="'+n+'"'),r+">"+i+"</a>"},s.prototype.image=function(t,n,i){if(null===(t=l(this.options.sanitize,this.options.baseUrl,t)))return i;var r='<img src="'+t+'" alt="'+i+'"';return n&&(r+=' title="'+n+'"'),r+(this.options.xhtml?"/>":">")},s.prototype.text=function(t){return t},o.prototype.strong=o.prototype.em=o.prototype.codespan=o.prototype.del=o.prototype.text=function(t){return t},o.prototype.link=o.prototype.image=function(t,n,i){return""+i},o.prototype.br=function(){return""},u.parse=function(t,n){return new u(n).parse(t)},u.prototype.parse=function(t){this.inline=new e(t.links,this.options),this.inlineText=new e(t.links,w({},this.options,{renderer:new o})),this.tokens=t.reverse();for(var n="";this.next();)n+=this.tok();return n},u.prototype.next=function(){return this.token=this.tokens.pop(),this.token},u.prototype.peek=function(){return this.tokens[this.tokens.length-1]||0},u.prototype.parseText=function(){for(var t=this.token.text;"text"===this.peek().type;)t+="\n"+this.next().text;return this.inline.output(t)},u.prototype.tok=function(){switch(this.token.type){case"space":return"";case"hr":return this.renderer.hr();case"heading":return this.renderer.heading(this.inline.output(this.token.text),this.token.depth,c(this.inlineText.output(this.token.text)),this.slugger);case"code":return this.renderer.code(this.token.text,this.token.lang,this.token.escaped);case"table":var t,n,i,r,e="",s="";for(i="",t=0;t<this.token.header.length;t++)i+=this.renderer.tablecell(this.inline.output(this.token.header[t]),{header:!0,align:this.token.align[t]});for(e+=this.renderer.tablerow(i),t=0;t<this.token.cells.length;t++){for(n=this.token.cells[t],i="",r=0;r<n.length;r++)i+=this.renderer.tablecell(this.inline.output(n[r]),{header:!1,align:this.token.align[r]});s+=this.renderer.tablerow(i)}return this.renderer.table(e,s);case"blockquote_start":for(s="";"blockquote_end"!==this.next().type;)s+=this.tok();return this.renderer.blockquote(s);case"list_start":s="";for(var o=this.token.ordered,u=this.token.start;"list_end"!==this.next().type;)s+=this.tok();return this.renderer.list(s,o,u);case"list_item_start":s="";var a=this.token.loose,h=this.token.checked,f=this.token.task;for(this.token.task&&(s+=this.renderer.checkbox(h));"list_item_end"!==this.next().type;)s+=a||"text"!==this.token.type?this.tok():this.parseText();return this.renderer.listitem(s,f,h);case"html":return this.renderer.html(this.token.text);case"paragraph":return this.renderer.paragraph(this.inline.output(this.token.text));case"text":return this.renderer.paragraph(this.parseText());default:var l='Token with "'+this.token.type+'" type was not found.';if(!this.options.silent)throw new Error(l);console.log(l)}},a.prototype.slug=function(t){var n=t.toLowerCase().trim().replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,.\/:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-");if(this.seen.hasOwnProperty(n)){var i=n;do{this.seen[i]++,n=i+"-"+this.seen[i]}while(this.seen.hasOwnProperty(n))}return this.seen[n]=0,n},h.escapeTest=/[&<>"']/,h.escapeReplace=/[&<>"']/g,h.replacements={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},h.escapeTestNoEncode=/[<>"']|&(?!#?\w+;)/,h.escapeReplaceNoEncode=/[<>"']|&(?!#?\w+;)/g;var v={},d=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function p(){}function w(t){for(var n,i,r=1;r<arguments.length;r++)for(i in n=arguments[r])Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);return t}function m(t,n){var i=t.replace(/\|/g,(function(t,n,i){for(var r=!1,e=n;--e>=0&&"\\"===i[e];)r=!r;return r?"|":" |"})).split(/ \|/),r=0;if(i.length>n)i.splice(n);else for(;i.length<n;)i.push("");for(;r<i.length;r++)i[r]=i[r].trim().replace(/\\\|/g,"|");return i}function y(t,n,i){if(0===t.length)return"";for(var r=0;r<t.length;){var e=t.charAt(t.length-r-1);if(e!==n||i){if(e===n||!i)break;r++}else r++}return t.substr(0,t.length-r)}function g(t,n){if(-1===t.indexOf(n[1]))return-1;for(var i=0,r=0;r<t.length;r++)if("\\"===t[r])r++;else if(t[r]===n[0])i++;else if(t[r]===n[1]&&--i<0)return r;return-1}function F(t){t&&t.sanitize&&!t.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")}function b(t,n,r){if(null==t)throw new Error("marked(): input parameter is undefined or null");if("string"!=typeof t)throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(t)+", string expected");if(r||"function"==typeof n){r||(r=n,n=null),F(n=w({},b.defaults,n||{}));var e,s,o=n.highlight,a=0;try{e=i.lex(t,n)}catch(t){return r(t)}s=e.length;var c=function(t){if(t)return n.highlight=o,r(t);var i;try{i=u.parse(e,n)}catch(n){t=n}return n.highlight=o,t?r(t):r(null,i)};if(!o||o.length<3)return c();if(delete n.highlight,!s)return c();for(;a<e.length;a++)!function(t){"code"!==t.type?--s||c():o(t.text,t.lang,(function(n,i){return n?c(n):null==i||i===t.text?--s||c():(t.text=i,t.escaped=!0,void(--s||c()))}))}(e[a])}else try{return n&&(n=w({},b.defaults,n)),F(n),u.parse(i.lex(t,n),n)}catch(t){if(t.message+="\nPlease report this to https://github.com/markedjs/marked.",(n||b.defaults).silent)return"<p>An error occurred:</p><pre>"+h(t.message+"",!0)+"</pre>";throw t}}p.exec=p,b.options=b.setOptions=function(t){return w(b.defaults,t),b},b.getDefaults=function(){return{baseUrl:null,breaks:!1,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:new s,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,xhtml:!1}},b.defaults=b.getDefaults(),b.Parser=u,b.parser=u.parse,b.Renderer=s,b.TextRenderer=o,b.Lexer=i,b.lexer=i.lex,b.InlineLexer=e,b.inlineLexer=e.output,b.Slugger=a,b.parse=b,t.exports=b}()}));const Ue=Y`
  {
    sites(filter: "Available_Online = 1") {
      name
      id
    }
  }
`,He=Y`
  {
    user {
      site {
        id
        name
      }
    }
  }
`,ze=Y`
  {
    promos {
      targetAudience
      title
      description
      qualifiedUrl
      imageUrl
    }
  }
`,qe=Y`
  mutation setSite($siteId: ID!) {
    setSite(siteId: $siteId) {
      site {
        id
        name
      }
    }
  }
`,$e=(Y`
  {
    contentBlocks(filters: { category: "site happenings" }) {
      content
      slug
    }
  }
`,Y`
query contentBlocks($componentName: String) {
  contentBlocks(filters: { category: $componentName }) {
    content
    slug
  }
}
`);class Ve{constructor(t,n){this.copy=[],this.apolloClient=t,this.componentName=n}getCopy(){return this.apolloClient.query({query:$e,variables:{componentName:this.componentName}}).then(t=>(this.copy=t.data.contentBlocks,t.data.contentBlocks))}getContentBlock(t){if(!this.copy)return null;const i=this.copy.find(n=>n.slug===t);return i?n("div",{innerHTML:i.content.toString()}):void 0}}const Ke=class{constructor(n){t(this,n),this.analytics=window.analytics||{},this.contentfulSites=[],this.sites=[],this.happenings=[],this.user=null}watchHandler(t,n){t!==n&&(this.apolloClient=$r(t),this.getUser())}logError(t){console.error(t)}getInViewDetails(){return{selectedSite:this.selectedSite}}componentDidLoad(){s.trackInView(this.host,"HappeningComponent",this.getInViewDetails.bind(this))}componentWillLoad(){this.apolloClient=$r(this.authToken),this.contentBlockHandler=new Ve(this.apolloClient,"site happenings"),Promise.all([this.getSites(),this.getPromos(),this.contentBlockHandler.getCopy(),this.getUser()]).then(()=>{this.validateSelectedSite(this.user&&this.user.site||"Churchwide")})}componentDidRender(){this.handleParentElementWidthBasedOnText(this.host.shadowRoot.querySelector(".happenings-dropdown-select"),this.selectedSite)}getSites(){return this.apolloClient.query({query:Ue}).then(t=>{this.validateSites(t.data.sites)}).catch(t=>{this.logError(t)})}getUser(){return this.authToken?this.apolloClient.query({query:He}).then(t=>{const n=t.data.user;this.validateUserSite(n.site&&n.site.name),this.validateSelectedSite(this.user.site)}).catch(t=>{this.resetUser(),this.logError(t)}):Promise.resolve(this.resetUser())}getPromos(){return this.apolloClient.query({query:ze}).then(t=>{this.setHappenings(t.data.promos),this.setContentfulSites(),this.renderHappenings()}).catch(t=>this.logError(t))}setUserSite(t){return this.apolloClient.mutate({variables:{siteId:t},mutation:qe}).catch(t=>{this.logError(t)})}resetUser(){this.user=null,this.validateSelectedSite("Churchwide")}validateSites(t){const n=t.filter(t=>"string"==typeof t.name&&"Not site specific"!==t.name&&"Xroads Church"!==t.name);this.sites=n.sort((t,n)=>t.name>n.name?1:n.name>t.name?-1:0)}validateUserSite(t){"string"==typeof t&&""!==t&&(this.user={site:t})}validateSelectedSite(t){"Not site specific"!==t&&"I do not attend Crossroads"!==t&&"Anywhere"!==t&&""!==t||(t="Churchwide"),this.contentfulSites.includes(t)&&(this.selectedSite=t)}setHappenings(t){this.happenings=t.filter(t=>null!==t.targetAudience)}setContentfulSites(){const t=new Set;this.happenings.forEach(n=>n.targetAudience.forEach(n=>t.add(n))),this.contentfulSites=Array.from(t).sort((t,n)=>t>n?1:n>t?-1:0)}handleSiteSelection(t){this.validateSelectedSite(t.target.value),this.analytics.track("HappeningSiteFiltered",{site:this.selectedSite})}handleParentElementWidthBasedOnText(t,n){let i=document.createElement("select"),r=window.getComputedStyle(t);i.style.visibility="hidden",i.style.margin=r.margin,i.style.padding=r.padding,i.style.fontSize=r.fontSize,i.style.fontFamily=r.fontFamily,i.style.webkitAppearance="none";let e=document.createElement("option");e.innerText=n,i.appendChild(e),this.host.shadowRoot.appendChild(i),t.parentNode.style.width=`${i.offsetWidth+12}px`,this.host.shadowRoot.removeChild(i)}handleHappeningsClicked(t){let n=t.target,i={title:"A"===n.tagName?n.innerText.toLowerCase():n.alt.toLowerCase(),url:"A"===n.tagName?n.href:n.parentNode.href,userSite:this.user&&this.user.site||"logged out",selectedSite:this.selectedSite};this.analytics.track("HappeningCardClicked",{params:i})}handleSetSiteInput(t){const n=t.target.options[t.target.selectedIndex].text;this.validateUserSite(n),this.validateSelectedSite(n),this.handleSetSiteModalClose();const i=t.target.value;this.setUserSite(i),this.analytics.track("HappeningSiteUpdated",{id:i,name:this.selectedSite})}handleSetSiteModalClose(){this.host.shadowRoot.querySelector(".site-select-message").classList.add("hidden")}renderHappeningsSkeleton(){let t=[];return window.innerWidth<768?t.push(1,2):window.innerWidth<960?t.push(1,2,3):t.push(1,2,3,4),t.map(()=>n("div",{class:"skeleton skeleton-happenings"},n("div",{class:"image shimmer"}),n("div",{class:"content"},n("div",{class:"overlap"},n("div",{class:"text title shimmer"}),n("div",{class:"text title shimmer"})),n("div",{class:"text subtitle shimmer"}),n("div",{class:"text subtitle shimmer"}),n("div",{class:"text subtitle shimmer"}),n("div",{class:"text subtitle shimmer"}))))}renderHappenings(){return this.selectedSite?this.happenings.filter(t=>t.targetAudience.find(t=>t===this.selectedSite)).map((t,i)=>n("div",{class:"card carousel-cell",key:i},n("a",{class:"relative",href:t.qualifiedUrl,onClick:t=>this.handleHappeningsClicked(t)},n("img",{alt:t.title,class:"img-responsive",src:s.imgixify(t.imageUrl)+"?auto=format&w=400&h=300&fit=crop"})),n("div",{class:"card-block"},n("h4",{class:"card-title card-title--overlap text-uppercase"},n("a",{href:t.qualifiedUrl,onClick:t=>this.handleHappeningsClicked(t)},t.title)),n("div",{class:"card-text",innerHTML:Le(t.description||"")})))):this.renderHappeningsSkeleton()}maybeRenderSetSiteModal(){return this.user&&!this.isUserSiteSet()?this.renderSetSiteModal():""}renderSetSiteModal(){return n("div",{class:"site-select-message"},n("button",{type:"button",class:"close","aria-label":"Close",onClick:()=>this.handleSetSiteModalClose()},n("svg",{xmlns:"http://www.w3.org/2000/svg"},n("line",{x1:"1",y1:"10",x2:"10",y2:"1",stroke:"#fff",strokeWidth:"2"}),n("line",{x1:"1",y1:"1",x2:"10",y2:"10",stroke:"#fff",strokeWidth:"2"}))),n("div",{class:"text-center push-top w-100"},this.contentBlockHandler.getContentBlock("SiteHappeningsPrompt"),n("div",{class:"happenings-dropdown","data-automation-id":"happenings-choose-site"},n("select",{class:"dropdown w-100",onInput:t=>this.handleSetSiteInput(t)},n("option",{disabled:!0,selected:!0},"Choose a site"),this.sites.map(t=>n("option",{value:t.id,"data-name":t.name},t.name))),n("svg",{class:"dropdown-caret icon icon-1 pull-right push-left",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 237 152"},n("path",{d:"M200.731 135.586L92.136 244.182c-1.854 1.853-4.05 2.78-6.587 2.78s-4.731-.927-6.586-2.78l-24.295-24.295c-1.854-1.854-2.781-4.05-2.781-6.587s.927-4.732 2.78-6.586L132.385 129 54.669 51.285c-1.854-1.853-2.781-4.05-2.781-6.586 0-2.537.927-4.732 2.78-6.587l24.296-24.295c1.854-1.853 4.05-2.78 6.586-2.78 2.537 0 4.732.927 6.587 2.78L200.73 122.414c1.854 1.853 2.781 4.049 2.781 6.586s-.927 4.732-2.78 6.586z",transform:"translate(-9 -53) rotate(90 127.7 129)"}))),n("p",null,n("small",null,"*This will update the site field in your profile"))))}isUserSiteSet(){return this.user.site&&"Not site specific"!==this.user.site}render(){return n("div",{class:"container push-top"},n("div",{class:"relative"},this.maybeRenderSetSiteModal(),n("hr",{class:"push-half-bottom"}),n("div",{class:"happenings-dropdown-container push-half-bottom"},n("h4",{id:"happening-filter-label",class:"flush font-size-base font-family-base text-gray-light"},"happening at crossroads"),n("div",{class:"happenings-dropdown","data-automation-id":"happenings-dropdown"},n("select",{class:"happenings-dropdown-select font-family-base",onInput:t=>this.handleSiteSelection(t)},this.contentfulSites.map(t=>n("option",{value:t,selected:this.selectedSite===t},t))),n("svg",{class:"dropdown-caret icon icon-1 pull-right push-left",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 237 152"},n("path",{d:"M200.731 135.586L92.136 244.182c-1.854 1.853-4.05 2.78-6.587 2.78s-4.731-.927-6.586-2.78l-24.295-24.295c-1.854-1.854-2.781-4.05-2.781-6.587s.927-4.732 2.78-6.586L132.385 129 54.669 51.285c-1.854-1.853-2.781-4.05-2.781-6.586 0-2.537.927-4.732 2.78-6.587l24.296-24.295c1.854-1.853 4.05-2.78 6.586-2.78 2.537 0 4.732.927 6.587 2.78L200.73 122.414c1.854 1.853 2.781 4.049 2.781 6.586s-.927 4.732-2.78 6.586z",transform:"translate(-9 -53) rotate(90 127.7 129)"})),this.selectedSite===(this.user&&this.user.site)?n("span",{class:"my-site-label"},"(my site)"):"")),n("div",{class:"card-deck carousel","data-crds-carousel":"mobile-scroll"},n("div",{id:"section-what-s-happening",class:"feature-cards card-deck--expanded-layout carousel","data-automation-id":"happenings-cards","data-crds-carousel":"mobile-scroll"},this.renderHappenings()))))}get host(){return i(this)}static get watchers(){return{authToken:["watchHandler"]}}static get style(){return"\@charset \"UTF-8\";*{-webkit-box-sizing:border-box;box-sizing:border-box}.relative{position:relative}.overflow-hidden{overflow:hidden}.d-flex{display:-ms-flexbox;display:flex}.d-block{display:block}.d-inline{display:inline}.d-none{display:none}.align-items-center{-ms-flex-align:center;align-items:center}.w-100{width:100%}hr{border:0;border-top:1px solid #e7e7e7;margin-bottom:1rem;margin-top:1rem}.font-family-base{font-family:acumin-pro,helvetica,arial,sans-serif!important;font-weight:300!important}.text-white{color:#fff!important}.text-gray-light{color:#979797!important}.text-gray{color:#737373!important}.text-center{text-align:center}.text-uppercase{text-transform:uppercase}.text-uppercase.font-size-smaller{font-size:13px!important;letter-spacing:.5px}.font-size-base{font-size:16px!important}\@media (min-width:480px){.font-size-base{font-size:19px!important}}.font-size-large{font-size:19px!important}\@media (min-width:480px){.font-size-large{font-size:22px!important}}.font-size-smaller{font-size:14px!important}.font-size-smallest{font-size:10px}.font-weight-mid{font-weight:500}.bg-charcoal{background-color:#171717}.flush{margin:0!important}.flush-bottom{margin-bottom:0!important}.flush-top{margin-top:0!important}.push-half-bottom{margin-bottom:12px!important}.push-bottom{margin-bottom:24px!important}.push-top{margin-top:24px}.push-half-top{margin-top:12px!important}.soft-quarter-top{padding-top:6px}.component-header{font-family:acumin-pro-extra-condensed;line-height:.95}\@media (min-width:480px){.component-header{font-size:2.125rem}}.card>a{color:inherit;display:block;text-decoration:none}.card img{width:100%}.color-gray{color:#737373}.media-label{display:-ms-flexbox;display:flex;position:absolute;right:0;bottom:0;padding:6px 8px}.media-label>:not(:last-child){margin-right:5px}.media-label .icon{fill:#fff;height:16px;width:12px}.btn{display:inline-block;margin-bottom:0;font-weight:300;text-align:center;white-space:nowrap;vertical-align:middle;-ms-touch-action:manipulation;touch-action:manipulation;cursor:pointer;background-image:none;border:1px solid transparent;padding:8px 10px;font-size:16px;line-height:1.5;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;border-radius:4px;line-height:1;margin-top:5px;margin-bottom:5px;font-size:14px;padding:13px 16px}.btn.btn-gray-light{color:#fff;background-color:#979797;border-color:#979797}.btn.btn-gray-light.btn-outline{background:transparent;border-style:solid;border-width:1px;color:#979797}.btn.btn-gray-light.btn-outline:hover{background-color:#979797;color:#fff}.btn.btn-sm{font-size:13px;padding:10px 16px 11px}.skeleton{position:relative}.skeleton,.skeleton .shimmer{overflow:hidden}.skeleton .shimmer:after{position:absolute;top:0;right:0;bottom:0;left:0;-webkit-transform:translateX(-100%);transform:translateX(-100%);background-image:linear-gradient(100deg,#f0f0f0 20%,hsla(0,0%,100%,.3) 30%,hsla(0,0%,100%,.7) 40%,#f0f0f0 50%);-webkit-animation:shimmer 1.5s infinite;animation:shimmer 1.5s infinite;-webkit-animation-timing-function:ease;animation-timing-function:ease;content:\"\"}.skeleton .shimmer-reverse:after{background-image:linear-gradient(100deg,#fff 20%,hsla(0,0%,94.1%,.3) 30%,hsla(0,0%,94.1%,.7) 40%,#fff 50%)}\@-webkit-keyframes shimmer{to{-webkit-transform:translateX(100%);transform:translateX(100%)}}\@keyframes shimmer{to{-webkit-transform:translateX(100%);transform:translateX(100%)}}.happenings-dropdown-container{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column}\@media (min-width:480px){.happenings-dropdown-container{-ms-flex-direction:row;flex-direction:row;-ms-flex-align:center;align-items:center}}.happenings-dropdown{position:relative;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center}.happenings-dropdown .happenings-dropdown-select{font-size:19px;position:relative;background:0;border:0;margin:0;color:#0095d9;padding:.5rem 0;-webkit-appearance:none;-moz-appearance:none;width:100%}.happenings-dropdown .happenings-dropdown-select:hover{cursor:pointer}.happenings-dropdown .happenings-dropdown-select:focus{outline:0}\@media (min-width:480px){.happenings-dropdown .happenings-dropdown-select{padding:.5rem}}.happenings-dropdown .dropdown-caret{fill:#0095d9;position:absolute;width:.75rem;right:0;padding-top:4px;pointer-events:none}\@media (min-width:480px){.happenings-dropdown .dropdown-caret{right:6px}}.happenings-dropdown .my-site-label{position:absolute;width:100%;left:calc(100% + .625rem);font-size:.875rem;color:#979797}.site-select-message{position:absolute;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;width:100%;height:100%;background-color:#fff;-webkit-transition:opacity .5s ease-in-out;transition:opacity .5s ease-in-out;opacity:1;z-index:1}.site-select-message,.site-select-message .happenings-dropdown{-ms-flex-pack:center;justify-content:center}\@media (min-width:768px){.site-select-message .happenings-dropdown{margin:0 auto;width:33.333333%}}.site-select-message .happenings-dropdown .dropdown{display:inline-block;font-weight:300;text-align:center;font-size:14px;line-height:1;white-space:nowrap;vertical-align:middle;-ms-touch-action:manipulation;touch-action:manipulation;cursor:pointer;background-image:none;font-size:16px;line-height:1.5;border-radius:4px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;margin-top:5px;margin-bottom:5px;padding:10px;background:transparent;border:1px solid #0095d9;color:#0095d9;-webkit-appearance:none}.site-select-message .happenings-dropdown .dropdown:focus{outline:0}\@media (max-width:480px){.site-select-message .happenings-dropdown .dropdown{width:100%}}.site-select-message .happenings-dropdown .dropdown-caret{right:20px}.site-select-message .close{position:absolute;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;top:1rem;right:1rem;background-color:hsla(0,0%,73.3%,.6);border-radius:50%;width:1.5rem;height:1.5rem;font-weight:unset;opacity:1;padding:0;cursor:pointer;border:0}.site-select-message .close:hover{cursor:pointer}.site-select-message .close svg{width:10px;height:10px;stroke:#fff}.hidden{visibility:hidden;opacity:0}.card-deck .card{-webkit-box-flex:1;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column}.card-deck--expanded-layout,.card-deck .card{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex}.card-deck--expanded-layout{-webkit-flex-flow:row nowrap;-ms-flex-flow:row nowrap;flex-flow:row nowrap;-webkit-overflow-scrolling:touch;overflow-x:scroll;-webkit-scroll-snap-type:x mandatory;-ms-scroll-snap-type:x mandatory;scroll-snap-type:x mandatory}\@media (min-width:768px){.card-deck--expanded-layout{-ms-flex-wrap:wrap;flex-wrap:wrap}}.card-deck--expanded-layout .card,.card-deck--expanded-layout .skeleton-happenings{cursor:auto;-webkit-flex:1 0 270px;-ms-flex:1 0 270px;flex:1 0 270px;-ms-flex-preferred-size:270px;flex-basis:270px;margin-bottom:1.5rem;padding:0 .5rem;position:relative;max-width:100%;scroll-snap-align:start}.card-deck--expanded-layout .card:first-child,.card-deck--expanded-layout .skeleton-happenings:first-child{padding-left:0}.card-deck--expanded-layout .card:last-child,.card-deck--expanded-layout .skeleton-happenings:last-child{padding-right:0}\@media (min-width:480px){.card-deck--expanded-layout .card,.card-deck--expanded-layout .skeleton-happenings{max-width:50%}}\@media (min-width:768px){.card-deck--expanded-layout .card,.card-deck--expanded-layout .skeleton-happenings{max-width:33.333333%}}\@media (min-width:960px){.card-deck--expanded-layout .card,.card-deck--expanded-layout .skeleton-happenings{max-width:25%}}.card-deck--expanded-layout .card a,.card-deck--expanded-layout .skeleton-happenings a{color:inherit;text-decoration:none}.card-deck--expanded-layout .card .card-text,.card-deck--expanded-layout .skeleton-happenings .card-text{font-size:.9375rem;position:relative}.card-deck--expanded-layout .card .card-text p,.card-deck--expanded-layout .skeleton-happenings .card-text p{margin:0}.card-deck--expanded-layout .card .card-block,.card-deck--expanded-layout .skeleton-happenings .card-block{font-family:acumin-pro,helvetica,arial,sans-serif;padding:1rem}.card-deck--expanded-layout .card .card-block .component-header,.card-deck--expanded-layout .skeleton-happenings .card-block .component-header{line-height:.95}.skeleton-happenings{height:500px;margin:0}.skeleton-happenings .image{height:75%;max-height:200px;width:100%}.skeleton-happenings .image,.skeleton-happenings .text{background-color:#f0f0f0;position:relative}.skeleton-happenings .content{padding:.5rem}.skeleton-happenings .content .overlap{background:#fff;padding:.5rem;-webkit-transform:translateY(-40%);transform:translateY(-40%)}.skeleton-happenings .content .title{height:24px;margin-bottom:.5rem}.skeleton-happenings .content .title:nth-child(2){width:75%}.skeleton-happenings .content .subtitle{height:16px;margin:.5rem}.skeleton-happenings .content .subtitle:nth-child(3){width:75%}.skeleton-happenings .content .subtitle:nth-child(4){width:85%}.skeleton-happenings .content .subtitle:nth-child(5){width:50%}.img-responsive{display:block;height:auto;max-width:100%}.card-title--overlap{background-color:#fff;display:inline-block;font-family:acumin-pro-extra-condensed,sans-serif;font-size:2.125rem;margin:-2rem -.5rem 0;padding:.25rem .5rem;position:relative}.card-title--overlap:after{color:#979797;content:\"\";display:block;font-family:acumin-pro,helvetica,arial,sans-serif;font-size:1.25rem;font-weight:100;line-height:1.5}.card-title{color:#4d4d4d;line-height:1;font-weight:600}.text-uppercase{text-transform:uppercase!important}.component-header{font-family:acumin-pro-extra-condensed,sans-serif;font-size:2rem;font-weight:500;line-height:1.1;text-transform:uppercase}"}},Je=class{constructor(n){t(this,n),this.env="prod",this.data={}}componentWillLoad(){(this.src||this.name&&this.env)&&Ie.get(this.src||`https://crds-data.netlify.com/snail-trails/${this.name}/${this.env}.json`).then(t=>this.data=t.data)}listItem(t){return t.subscribe&&t.src?n("crds-subscribe",{src:t.src,label:t.title}):t.href?n("crds-snail-trail-link",{href:t.href,automationId:t["data-automation-id"]},t.title):n("strong",null,t.title)}list(t){return t.map(t=>n("li",null,this.listItem(t)))}navSections(){if(this.data.nav)return this.data.nav.map(t=>n("ul",null,this.list(t)))}render(){if(this.data.nav||0!=this.element.childElementCount)return n(Pe,null,n("nav",null,n("div",null,this.element.childElementCount>0&&n("slot",null),0==this.element.childElementCount&&n(Pe,null,this.navSections()))))}get element(){return i(this)}static get style(){return"nav{font-family:acumin-pro,helvetica,arial,sans-serif!important;font-weight:300!important;background-color:#fff;-webkit-box-shadow:0 1px 6px 0 rgba(0,0,0,.14);box-shadow:0 1px 6px 0 rgba(0,0,0,.14);font-size:14px;padding-left:20px;position:relative}\@media (min-width:1170px){nav{padding-left:0}}nav>div{display:-ms-flexbox;display:flex;-webkit-overflow-scrolling:touch;overflow-x:auto;overflow-y:hidden;position:relative;scrollbar-width:none;margin:0 auto;max-width:1170px}\@media (max-width:992px){nav:after{background:-webkit-gradient(linear,left top,right top,from(hsla(0,0%,100%,0)),to(rgba(0,0,0,.8)));background:linear-gradient(90deg,hsla(0,0%,100%,0),rgba(0,0,0,.8));content:\"\";display:inline-block;height:100%;opacity:.3;position:absolute;right:0;top:0;width:20px}}strong{color:#4d4d4d;display:inline-block;font-weight:600;margin-right:15px;padding:11px 0;text-transform:capitalize;white-space:nowrap}ul{padding-left:0;-ms-flex-align:center;align-items:center;display:-ms-flexbox;display:flex;margin-bottom:0;margin-top:0}ul li{list-style:none}ul:not(:last-of-type):after{border-right:1px solid #d8d8d8;content:\"\";height:calc(100% - 22px);width:1px}li{display:inline-block;text-transform:capitalize;white-space:nowrap}"}};var Ye=2147483647,Ge=36,We=1,Ze=26,Qe=38,Xe=700,ts=72,ns=128,is="-",rs=/[^\x20-\x7E]/,es=/[\x2E\u3002\uFF0E\uFF61]/g,ss={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},os=Ge-We,us=Math.floor,as=String.fromCharCode;function hs(t){throw new RangeError(ss[t])}function cs(t,n){return t+22+75*(t<26)-((0!=n)<<5)}function fs(t,n,i){var r=0;for(t=i?us(t/Xe):t>>1,t+=us(t/n);t>os*Ze>>1;r+=Ge)t=us(t/os);return us(r+(os+1)*t/(t+Qe))}function ls(t){return function(t){var n=t.split("@"),i="";n.length>1&&(i=n[0]+"@",t=n[1]);var r=function(t,n){for(var i=t.length,r=[];i--;)r[i]=n(t[i]);return r}((t=t.replace(es,".")).split("."),(function(t){return rs.test(t)?"xn--"+function(t){var n,i,r,e,s,o,u,a,h,c,f,l,v,d,p,w=[];for(l=(t=function(t){for(var n,i,r=[],e=0,s=t.length;e<s;)(n=t.charCodeAt(e++))>=55296&&n<=56319&&e<s?56320==(64512&(i=t.charCodeAt(e++)))?r.push(((1023&n)<<10)+(1023&i)+65536):(r.push(n),e--):r.push(n);return r}(t)).length,n=ns,i=0,s=ts,o=0;o<l;++o)(f=t[o])<128&&w.push(as(f));for(r=e=w.length,e&&w.push(is);r<l;){for(u=Ye,o=0;o<l;++o)(f=t[o])>=n&&f<u&&(u=f);for(u-n>us((Ye-i)/(v=r+1))&&hs("overflow"),i+=(u-n)*v,n=u,o=0;o<l;++o)if((f=t[o])<n&&++i>Ye&&hs("overflow"),f==n){for(a=i,h=Ge;!(a<(c=h<=s?We:h>=s+Ze?Ze:h-s));h+=Ge)w.push(as(cs(c+(p=a-c)%(d=Ge-c),0))),a=us(p/d);w.push(as(cs(a,0))),s=fs(i,v,r==e),i=0,++r}++i,++n}return w.join("")}(t):t})).join(".");return i+r}(t)}var vs=[],ds=[],ps="undefined"!=typeof Uint8Array?Uint8Array:Array,ws=!1;function ms(){ws=!0;for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n=0,i=t.length;n<i;++n)vs[n]=t[n],ds[t.charCodeAt(n)]=n;ds["-".charCodeAt(0)]=62,ds["_".charCodeAt(0)]=63}function ys(t,n,i){for(var r,e=[],s=n;s<i;s+=3)e.push(vs[(r=(t[s]<<16)+(t[s+1]<<8)+t[s+2])>>18&63]+vs[r>>12&63]+vs[r>>6&63]+vs[63&r]);return e.join("")}function gs(t,n,i,r,e){var s,o,u=8*e-r-1,a=(1<<u)-1,h=a>>1,c=-7,f=i?e-1:0,l=i?-1:1,v=t[n+f];for(f+=l,s=v&(1<<-c)-1,v>>=-c,c+=u;c>0;s=256*s+t[n+f],f+=l,c-=8);for(o=s&(1<<-c)-1,s>>=-c,c+=r;c>0;o=256*o+t[n+f],f+=l,c-=8);if(0===s)s=1-h;else{if(s===a)return o?NaN:1/0*(v?-1:1);o+=Math.pow(2,r),s-=h}return(v?-1:1)*o*Math.pow(2,s-r)}function Fs(t,n,i,r,e,s){var o,u,a,h=8*s-e-1,c=(1<<h)-1,f=c>>1,l=23===e?Math.pow(2,-24)-Math.pow(2,-77):0,v=r?0:s-1,d=r?1:-1,p=n<0||0===n&&1/n<0?1:0;for(n=Math.abs(n),isNaN(n)||n===1/0?(u=isNaN(n)?1:0,o=c):(o=Math.floor(Math.log(n)/Math.LN2),n*(a=Math.pow(2,-o))<1&&(o--,a*=2),(n+=o+f>=1?l/a:l*Math.pow(2,1-f))*a>=2&&(o++,a/=2),o+f>=c?(u=0,o=c):o+f>=1?(u=(n*a-1)*Math.pow(2,e),o+=f):(u=n*Math.pow(2,f-1)*Math.pow(2,e),o=0));e>=8;t[i+v]=255&u,v+=d,u/=256,e-=8);for(o=o<<e|u,h+=e;h>0;t[i+v]=255&o,v+=d,o/=256,h-=8);t[i+v-d]|=128*p}var bs={}.toString;const Es=Array.isArray||function(t){return"[object Array]"==bs.call(t)};function Ss(){return ks.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function As(t,n){if(Ss()<n)throw new RangeError("Invalid typed array length");return ks.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(n)).__proto__=ks.prototype:(null===t&&(t=new ks(n)),t.length=n),t}function ks(t,n,i){if(!(ks.TYPED_ARRAY_SUPPORT||this instanceof ks))return new ks(t,n,i);if("number"==typeof t){if("string"==typeof n)throw new Error("If encoding is specified then the first argument must be a string");return Is(this,t)}return Cs(this,t,n,i)}function Cs(t,n,i,r){if("number"==typeof n)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&n instanceof ArrayBuffer?function(t,n,i,r){if(i<0||n.byteLength<i)throw new RangeError("'offset' is out of bounds");if(n.byteLength<i+(r||0))throw new RangeError("'length' is out of bounds");return n=void 0===i&&void 0===r?new Uint8Array(n):void 0===r?new Uint8Array(n,i):new Uint8Array(n,i,r),ks.TYPED_ARRAY_SUPPORT?(t=n).__proto__=ks.prototype:t=xs(t,n),t}(t,n,i,r):"string"==typeof n?function(t,n,i){if("string"==typeof i&&""!==i||(i="utf8"),!ks.isEncoding(i))throw new TypeError('"encoding" must be a valid string encoding');var r=0|Ds(n,i),e=(t=As(t,r)).write(n,i);return e!==r&&(t=t.slice(0,e)),t}(t,n,i):function(t,n){if(Rs(n)){var i=0|Os(n.length);return 0===(t=As(t,i)).length?t:(n.copy(t,0,0,i),t)}if(n){if("undefined"!=typeof ArrayBuffer&&n.buffer instanceof ArrayBuffer||"length"in n)return"number"!=typeof n.length||(r=n.length)!=r?As(t,0):xs(t,n);if("Buffer"===n.type&&Es(n.data))return xs(t,n.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,n)}function Ts(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function Is(t,n){if(Ts(n),t=As(t,n<0?0:0|Os(n)),!ks.TYPED_ARRAY_SUPPORT)for(var i=0;i<n;++i)t[i]=0;return t}function xs(t,n){var i=n.length<0?0:0|Os(n.length);t=As(t,i);for(var r=0;r<i;r+=1)t[r]=255&n[r];return t}function Os(t){if(t>=Ss())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+Ss().toString(16)+" bytes");return 0|t}function Rs(t){return!(null==t||!t._isBuffer)}function Ds(t,n){if(Rs(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var i=t.length;if(0===i)return 0;for(var r=!1;;)switch(n){case"ascii":case"latin1":case"binary":return i;case"utf8":case"utf-8":case void 0:return so(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*i;case"hex":return i>>>1;case"base64":return oo(t).length;default:if(r)return so(t).length;n=(""+n).toLowerCase(),r=!0}}function Ns(t,n,i){var r=!1;if((void 0===n||n<0)&&(n=0),n>this.length)return"";if((void 0===i||i>this.length)&&(i=this.length),i<=0)return"";if((i>>>=0)<=(n>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return Ys(this,n,i);case"utf8":case"utf-8":return $s(this,n,i);case"ascii":return Ks(this,n,i);case"latin1":case"binary":return Js(this,n,i);case"base64":return qs(this,n,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Gs(this,n,i);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}function js(t,n,i){var r=t[n];t[n]=t[i],t[i]=r}function _s(t,n,i,r,e){if(0===t.length)return-1;if("string"==typeof i?(r=i,i=0):i>2147483647?i=2147483647:i<-2147483648&&(i=-2147483648),i=+i,isNaN(i)&&(i=e?0:t.length-1),i<0&&(i=t.length+i),i>=t.length){if(e)return-1;i=t.length-1}else if(i<0){if(!e)return-1;i=0}if("string"==typeof n&&(n=ks.from(n,r)),Rs(n))return 0===n.length?-1:Ps(t,n,i,r,e);if("number"==typeof n)return n&=255,ks.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?e?Uint8Array.prototype.indexOf.call(t,n,i):Uint8Array.prototype.lastIndexOf.call(t,n,i):Ps(t,[n],i,r,e);throw new TypeError("val must be string, number or Buffer")}function Ps(t,n,i,r,e){var s,o=1,u=t.length,a=n.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||n.length<2)return-1;o=2,u/=2,a/=2,i/=2}function h(t,n){return 1===o?t[n]:t.readUInt16BE(n*o)}if(e){var c=-1;for(s=i;s<u;s++)if(h(t,s)===h(n,-1===c?0:s-c)){if(-1===c&&(c=s),s-c+1===a)return c*o}else-1!==c&&(s-=s-c),c=-1}else for(i+a>u&&(i=u-a),s=i;s>=0;s--){for(var f=!0,l=0;l<a;l++)if(h(t,s+l)!==h(n,l)){f=!1;break}if(f)return s}return-1}function Ms(t,n,i,r){i=Number(i)||0;var e=t.length-i;r?(r=Number(r))>e&&(r=e):r=e;var s=n.length;if(s%2!=0)throw new TypeError("Invalid hex string");r>s/2&&(r=s/2);for(var o=0;o<r;++o){var u=parseInt(n.substr(2*o,2),16);if(isNaN(u))return o;t[i+o]=u}return o}function Bs(t,n,i,r){return uo(so(n,t.length-i),t,i,r)}function Ls(t,n,i,r){return uo(function(t){for(var n=[],i=0;i<t.length;++i)n.push(255&t.charCodeAt(i));return n}(n),t,i,r)}function Us(t,n,i,r){return Ls(t,n,i,r)}function Hs(t,n,i,r){return uo(oo(n),t,i,r)}function zs(t,n,i,r){return uo(function(t,n){for(var i,r,e=[],s=0;s<t.length&&!((n-=2)<0);++s)r=(i=t.charCodeAt(s))>>8,e.push(i%256),e.push(r);return e}(n,t.length-i),t,i,r)}function qs(t,n,i){return function(t){var n;ws||ms();for(var i=t.length,r=i%3,e="",s=[],o=0,u=i-r;o<u;o+=16383)s.push(ys(t,o,o+16383>u?u:o+16383));return 1===r?(e+=vs[(n=t[i-1])>>2],e+=vs[n<<4&63],e+="=="):2===r&&(e+=vs[(n=(t[i-2]<<8)+t[i-1])>>10],e+=vs[n>>4&63],e+=vs[n<<2&63],e+="="),s.push(e),s.join("")}(0===n&&i===t.length?t:t.slice(n,i))}function $s(t,n,i){i=Math.min(t.length,i);for(var r=[],e=n;e<i;){var s,o,u,a,h=t[e],c=null,f=h>239?4:h>223?3:h>191?2:1;if(e+f<=i)switch(f){case 1:h<128&&(c=h);break;case 2:128==(192&(s=t[e+1]))&&(a=(31&h)<<6|63&s)>127&&(c=a);break;case 3:o=t[e+2],128==(192&(s=t[e+1]))&&128==(192&o)&&(a=(15&h)<<12|(63&s)<<6|63&o)>2047&&(a<55296||a>57343)&&(c=a);break;case 4:o=t[e+2],u=t[e+3],128==(192&(s=t[e+1]))&&128==(192&o)&&128==(192&u)&&(a=(15&h)<<18|(63&s)<<12|(63&o)<<6|63&u)>65535&&a<1114112&&(c=a)}null===c?(c=65533,f=1):c>65535&&(r.push((c-=65536)>>>10&1023|55296),c=56320|1023&c),r.push(c),e+=f}return function(t){var n=t.length;if(n<=Vs)return String.fromCharCode.apply(String,t);for(var i="",r=0;r<n;)i+=String.fromCharCode.apply(String,t.slice(r,r+=Vs));return i}(r)}ks.TYPED_ARRAY_SUPPORT=void 0===W.TYPED_ARRAY_SUPPORT||W.TYPED_ARRAY_SUPPORT,ks.poolSize=8192,ks._augment=function(t){return t.__proto__=ks.prototype,t},ks.from=function(t,n,i){return Cs(null,t,n,i)},ks.TYPED_ARRAY_SUPPORT&&(ks.prototype.__proto__=Uint8Array.prototype,ks.__proto__=Uint8Array),ks.alloc=function(t,n,i){return function(t,n,i,r){return Ts(n),n<=0?As(null,n):void 0!==i?"string"==typeof r?As(null,n).fill(i,r):As(null,n).fill(i):As(null,n)}(0,t,n,i)},ks.allocUnsafe=function(t){return Is(null,t)},ks.allocUnsafeSlow=function(t){return Is(null,t)},ks.isBuffer=function(t){return null!=t&&(!!t._isBuffer||ao(t)||function(t){return"function"==typeof t.readFloatLE&&"function"==typeof t.slice&&ao(t.slice(0,0))}(t))},ks.compare=function(t,n){if(!Rs(t)||!Rs(n))throw new TypeError("Arguments must be Buffers");if(t===n)return 0;for(var i=t.length,r=n.length,e=0,s=Math.min(i,r);e<s;++e)if(t[e]!==n[e]){i=t[e],r=n[e];break}return i<r?-1:r<i?1:0},ks.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},ks.concat=function(t,n){if(!Es(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return ks.alloc(0);var i;if(void 0===n)for(n=0,i=0;i<t.length;++i)n+=t[i].length;var r=ks.allocUnsafe(n),e=0;for(i=0;i<t.length;++i){var s=t[i];if(!Rs(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(r,e),e+=s.length}return r},ks.byteLength=Ds,ks.prototype._isBuffer=!0,ks.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var n=0;n<t;n+=2)js(this,n,n+1);return this},ks.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var n=0;n<t;n+=4)js(this,n,n+3),js(this,n+1,n+2);return this},ks.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var n=0;n<t;n+=8)js(this,n,n+7),js(this,n+1,n+6),js(this,n+2,n+5),js(this,n+3,n+4);return this},ks.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?$s(this,0,t):Ns.apply(this,arguments)},ks.prototype.equals=function(t){if(!Rs(t))throw new TypeError("Argument must be a Buffer");return this===t||0===ks.compare(this,t)},ks.prototype.inspect=function(){var t="";return this.length>0&&(t=this.toString("hex",0,50).match(/.{2}/g).join(" "),this.length>50&&(t+=" ... ")),"<Buffer "+t+">"},ks.prototype.compare=function(t,n,i,r,e){if(!Rs(t))throw new TypeError("Argument must be a Buffer");if(void 0===n&&(n=0),void 0===i&&(i=t?t.length:0),void 0===r&&(r=0),void 0===e&&(e=this.length),n<0||i>t.length||r<0||e>this.length)throw new RangeError("out of range index");if(r>=e&&n>=i)return 0;if(r>=e)return-1;if(n>=i)return 1;if(this===t)return 0;for(var s=(e>>>=0)-(r>>>=0),o=(i>>>=0)-(n>>>=0),u=Math.min(s,o),a=this.slice(r,e),h=t.slice(n,i),c=0;c<u;++c)if(a[c]!==h[c]){s=a[c],o=h[c];break}return s<o?-1:o<s?1:0},ks.prototype.includes=function(t,n,i){return-1!==this.indexOf(t,n,i)},ks.prototype.indexOf=function(t,n,i){return _s(this,t,n,i,!0)},ks.prototype.lastIndexOf=function(t,n,i){return _s(this,t,n,i,!1)},ks.prototype.write=function(t,n,i,r){if(void 0===n)r="utf8",i=this.length,n=0;else if(void 0===i&&"string"==typeof n)r=n,i=this.length,n=0;else{if(!isFinite(n))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");n|=0,isFinite(i)?(i|=0,void 0===r&&(r="utf8")):(r=i,i=void 0)}var e=this.length-n;if((void 0===i||i>e)&&(i=e),t.length>0&&(i<0||n<0)||n>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var s=!1;;)switch(r){case"hex":return Ms(this,t,n,i);case"utf8":case"utf-8":return Bs(this,t,n,i);case"ascii":return Ls(this,t,n,i);case"latin1":case"binary":return Us(this,t,n,i);case"base64":return Hs(this,t,n,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return zs(this,t,n,i);default:if(s)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),s=!0}},ks.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var Vs=4096;function Ks(t,n,i){var r="";i=Math.min(t.length,i);for(var e=n;e<i;++e)r+=String.fromCharCode(127&t[e]);return r}function Js(t,n,i){var r="";i=Math.min(t.length,i);for(var e=n;e<i;++e)r+=String.fromCharCode(t[e]);return r}function Ys(t,n,i){var r=t.length;(!n||n<0)&&(n=0),(!i||i<0||i>r)&&(i=r);for(var e="",s=n;s<i;++s)e+=eo(t[s]);return e}function Gs(t,n,i){for(var r=t.slice(n,i),e="",s=0;s<r.length;s+=2)e+=String.fromCharCode(r[s]+256*r[s+1]);return e}function Ws(t,n,i){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+n>i)throw new RangeError("Trying to access beyond buffer length")}function Zs(t,n,i,r,e,s){if(!Rs(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(n>e||n<s)throw new RangeError('"value" argument is out of bounds');if(i+r>t.length)throw new RangeError("Index out of range")}function Qs(t,n,i,r){n<0&&(n=65535+n+1);for(var e=0,s=Math.min(t.length-i,2);e<s;++e)t[i+e]=(n&255<<8*(r?e:1-e))>>>8*(r?e:1-e)}function Xs(t,n,i,r){n<0&&(n=4294967295+n+1);for(var e=0,s=Math.min(t.length-i,4);e<s;++e)t[i+e]=n>>>8*(r?e:3-e)&255}function to(t,n,i,r){if(i+r>t.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("Index out of range")}function no(t,n,i,r,e){return e||to(t,0,i,4),Fs(t,n,i,r,23,4),i+4}function io(t,n,i,r,e){return e||to(t,0,i,8),Fs(t,n,i,r,52,8),i+8}ks.prototype.slice=function(t,n){var i,r=this.length;if((t=~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),(n=void 0===n?r:~~n)<0?(n+=r)<0&&(n=0):n>r&&(n=r),n<t&&(n=t),ks.TYPED_ARRAY_SUPPORT)(i=this.subarray(t,n)).__proto__=ks.prototype;else{var e=n-t;i=new ks(e,void 0);for(var s=0;s<e;++s)i[s]=this[s+t]}return i},ks.prototype.readUIntLE=function(t,n,i){t|=0,n|=0,i||Ws(t,n,this.length);for(var r=this[t],e=1,s=0;++s<n&&(e*=256);)r+=this[t+s]*e;return r},ks.prototype.readUIntBE=function(t,n,i){t|=0,n|=0,i||Ws(t,n,this.length);for(var r=this[t+--n],e=1;n>0&&(e*=256);)r+=this[t+--n]*e;return r},ks.prototype.readUInt8=function(t,n){return n||Ws(t,1,this.length),this[t]},ks.prototype.readUInt16LE=function(t,n){return n||Ws(t,2,this.length),this[t]|this[t+1]<<8},ks.prototype.readUInt16BE=function(t,n){return n||Ws(t,2,this.length),this[t]<<8|this[t+1]},ks.prototype.readUInt32LE=function(t,n){return n||Ws(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},ks.prototype.readUInt32BE=function(t,n){return n||Ws(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},ks.prototype.readIntLE=function(t,n,i){t|=0,n|=0,i||Ws(t,n,this.length);for(var r=this[t],e=1,s=0;++s<n&&(e*=256);)r+=this[t+s]*e;return r>=(e*=128)&&(r-=Math.pow(2,8*n)),r},ks.prototype.readIntBE=function(t,n,i){t|=0,n|=0,i||Ws(t,n,this.length);for(var r=n,e=1,s=this[t+--r];r>0&&(e*=256);)s+=this[t+--r]*e;return s>=(e*=128)&&(s-=Math.pow(2,8*n)),s},ks.prototype.readInt8=function(t,n){return n||Ws(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},ks.prototype.readInt16LE=function(t,n){n||Ws(t,2,this.length);var i=this[t]|this[t+1]<<8;return 32768&i?4294901760|i:i},ks.prototype.readInt16BE=function(t,n){n||Ws(t,2,this.length);var i=this[t+1]|this[t]<<8;return 32768&i?4294901760|i:i},ks.prototype.readInt32LE=function(t,n){return n||Ws(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},ks.prototype.readInt32BE=function(t,n){return n||Ws(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},ks.prototype.readFloatLE=function(t,n){return n||Ws(t,4,this.length),gs(this,t,!0,23,4)},ks.prototype.readFloatBE=function(t,n){return n||Ws(t,4,this.length),gs(this,t,!1,23,4)},ks.prototype.readDoubleLE=function(t,n){return n||Ws(t,8,this.length),gs(this,t,!0,52,8)},ks.prototype.readDoubleBE=function(t,n){return n||Ws(t,8,this.length),gs(this,t,!1,52,8)},ks.prototype.writeUIntLE=function(t,n,i,r){t=+t,n|=0,i|=0,r||Zs(this,t,n,i,Math.pow(2,8*i)-1,0);var e=1,s=0;for(this[n]=255&t;++s<i&&(e*=256);)this[n+s]=t/e&255;return n+i},ks.prototype.writeUIntBE=function(t,n,i,r){t=+t,n|=0,i|=0,r||Zs(this,t,n,i,Math.pow(2,8*i)-1,0);var e=i-1,s=1;for(this[n+e]=255&t;--e>=0&&(s*=256);)this[n+e]=t/s&255;return n+i},ks.prototype.writeUInt8=function(t,n,i){return t=+t,n|=0,i||Zs(this,t,n,1,255,0),ks.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[n]=255&t,n+1},ks.prototype.writeUInt16LE=function(t,n,i){return t=+t,n|=0,i||Zs(this,t,n,2,65535,0),ks.TYPED_ARRAY_SUPPORT?(this[n]=255&t,this[n+1]=t>>>8):Qs(this,t,n,!0),n+2},ks.prototype.writeUInt16BE=function(t,n,i){return t=+t,n|=0,i||Zs(this,t,n,2,65535,0),ks.TYPED_ARRAY_SUPPORT?(this[n]=t>>>8,this[n+1]=255&t):Qs(this,t,n,!1),n+2},ks.prototype.writeUInt32LE=function(t,n,i){return t=+t,n|=0,i||Zs(this,t,n,4,4294967295,0),ks.TYPED_ARRAY_SUPPORT?(this[n+3]=t>>>24,this[n+2]=t>>>16,this[n+1]=t>>>8,this[n]=255&t):Xs(this,t,n,!0),n+4},ks.prototype.writeUInt32BE=function(t,n,i){return t=+t,n|=0,i||Zs(this,t,n,4,4294967295,0),ks.TYPED_ARRAY_SUPPORT?(this[n]=t>>>24,this[n+1]=t>>>16,this[n+2]=t>>>8,this[n+3]=255&t):Xs(this,t,n,!1),n+4},ks.prototype.writeIntLE=function(t,n,i,r){if(t=+t,n|=0,!r){var e=Math.pow(2,8*i-1);Zs(this,t,n,i,e-1,-e)}var s=0,o=1,u=0;for(this[n]=255&t;++s<i&&(o*=256);)t<0&&0===u&&0!==this[n+s-1]&&(u=1),this[n+s]=(t/o>>0)-u&255;return n+i},ks.prototype.writeIntBE=function(t,n,i,r){if(t=+t,n|=0,!r){var e=Math.pow(2,8*i-1);Zs(this,t,n,i,e-1,-e)}var s=i-1,o=1,u=0;for(this[n+s]=255&t;--s>=0&&(o*=256);)t<0&&0===u&&0!==this[n+s+1]&&(u=1),this[n+s]=(t/o>>0)-u&255;return n+i},ks.prototype.writeInt8=function(t,n,i){return t=+t,n|=0,i||Zs(this,t,n,1,127,-128),ks.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[n]=255&t,n+1},ks.prototype.writeInt16LE=function(t,n,i){return t=+t,n|=0,i||Zs(this,t,n,2,32767,-32768),ks.TYPED_ARRAY_SUPPORT?(this[n]=255&t,this[n+1]=t>>>8):Qs(this,t,n,!0),n+2},ks.prototype.writeInt16BE=function(t,n,i){return t=+t,n|=0,i||Zs(this,t,n,2,32767,-32768),ks.TYPED_ARRAY_SUPPORT?(this[n]=t>>>8,this[n+1]=255&t):Qs(this,t,n,!1),n+2},ks.prototype.writeInt32LE=function(t,n,i){return t=+t,n|=0,i||Zs(this,t,n,4,2147483647,-2147483648),ks.TYPED_ARRAY_SUPPORT?(this[n]=255&t,this[n+1]=t>>>8,this[n+2]=t>>>16,this[n+3]=t>>>24):Xs(this,t,n,!0),n+4},ks.prototype.writeInt32BE=function(t,n,i){return t=+t,n|=0,i||Zs(this,t,n,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),ks.TYPED_ARRAY_SUPPORT?(this[n]=t>>>24,this[n+1]=t>>>16,this[n+2]=t>>>8,this[n+3]=255&t):Xs(this,t,n,!1),n+4},ks.prototype.writeFloatLE=function(t,n,i){return no(this,t,n,!0,i)},ks.prototype.writeFloatBE=function(t,n,i){return no(this,t,n,!1,i)},ks.prototype.writeDoubleLE=function(t,n,i){return io(this,t,n,!0,i)},ks.prototype.writeDoubleBE=function(t,n,i){return io(this,t,n,!1,i)},ks.prototype.copy=function(t,n,i,r){if(i||(i=0),r||0===r||(r=this.length),n>=t.length&&(n=t.length),n||(n=0),r>0&&r<i&&(r=i),r===i)return 0;if(0===t.length||0===this.length)return 0;if(n<0)throw new RangeError("targetStart out of bounds");if(i<0||i>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-n<r-i&&(r=t.length-n+i);var e,s=r-i;if(this===t&&i<n&&n<r)for(e=s-1;e>=0;--e)t[e+n]=this[e+i];else if(s<1e3||!ks.TYPED_ARRAY_SUPPORT)for(e=0;e<s;++e)t[e+n]=this[e+i];else Uint8Array.prototype.set.call(t,this.subarray(i,i+s),n);return s},ks.prototype.fill=function(t,n,i,r){if("string"==typeof t){if("string"==typeof n?(r=n,n=0,i=this.length):"string"==typeof i&&(r=i,i=this.length),1===t.length){var e=t.charCodeAt(0);e<256&&(t=e)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!ks.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof t&&(t&=255);if(n<0||this.length<n||this.length<i)throw new RangeError("Out of range index");if(i<=n)return this;var s;if(n>>>=0,i=void 0===i?this.length:i>>>0,t||(t=0),"number"==typeof t)for(s=n;s<i;++s)this[s]=t;else{var o=Rs(t)?t:so(new ks(t,r).toString()),u=o.length;for(s=0;s<i-n;++s)this[s+n]=o[s%u]}return this};var ro=/[^+\/0-9A-Za-z-_]/g;function eo(t){return t<16?"0"+t.toString(16):t.toString(16)}function so(t,n){var i;n=n||1/0;for(var r=t.length,e=null,s=[],o=0;o<r;++o){if((i=t.charCodeAt(o))>55295&&i<57344){if(!e){if(i>56319){(n-=3)>-1&&s.push(239,191,189);continue}if(o+1===r){(n-=3)>-1&&s.push(239,191,189);continue}e=i;continue}if(i<56320){(n-=3)>-1&&s.push(239,191,189),e=i;continue}i=65536+(e-55296<<10|i-56320)}else e&&(n-=3)>-1&&s.push(239,191,189);if(e=null,i<128){if((n-=1)<0)break;s.push(i)}else if(i<2048){if((n-=2)<0)break;s.push(i>>6|192,63&i|128)}else if(i<65536){if((n-=3)<0)break;s.push(i>>12|224,i>>6&63|128,63&i|128)}else{if(!(i<1114112))throw new Error("Invalid code point");if((n-=4)<0)break;s.push(i>>18|240,i>>12&63|128,i>>6&63|128,63&i|128)}}return s}function oo(t){return function(t){var n,i,r,e,s,o;ws||ms();var u=t.length;if(u%4>0)throw new Error("Invalid string. Length must be a multiple of 4");o=new ps(3*u/4-(s="="===t[u-2]?2:"="===t[u-1]?1:0)),r=s>0?u-4:u;var a=0;for(n=0,i=0;n<r;n+=4,i+=3)e=ds[t.charCodeAt(n)]<<18|ds[t.charCodeAt(n+1)]<<12|ds[t.charCodeAt(n+2)]<<6|ds[t.charCodeAt(n+3)],o[a++]=e>>16&255,o[a++]=e>>8&255,o[a++]=255&e;return 2===s?(e=ds[t.charCodeAt(n)]<<2|ds[t.charCodeAt(n+1)]>>4,o[a++]=255&e):1===s&&(e=ds[t.charCodeAt(n)]<<10|ds[t.charCodeAt(n+1)]<<4|ds[t.charCodeAt(n+2)]>>2,o[a++]=e>>8&255,o[a++]=255&e),o}(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(ro,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function uo(t,n,i,r){for(var e=0;e<r&&!(e+i>=n.length||e>=t.length);++e)n[e+i]=t[e];return e}function ao(t){return!!t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}function ho(t){return null===t}function co(t){return"string"==typeof t}function fo(t){return"object"==typeof t&&null!==t}function lo(t,n){return Object.prototype.hasOwnProperty.call(t,n)}var vo=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function po(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}}function wo(t,n){if(t.map)return t.map(n);for(var i=[],r=0;r<t.length;r++)i.push(n(t[r],r));return i}var mo=Object.keys||function(t){var n=[];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&n.push(i);return n};function yo(t,n,i,r){i=i||"=";var e={};if("string"!=typeof t||0===t.length)return e;var s=/\+/g;t=t.split(n=n||"&");var o=1e3;r&&"number"==typeof r.maxKeys&&(o=r.maxKeys);var u=t.length;o>0&&u>o&&(u=o);for(var a=0;a<u;++a){var h,c,f,l,v=t[a].replace(s,"%20"),d=v.indexOf(i);d>=0?(h=v.substr(0,d),c=v.substr(d+1)):(h=v,c=""),f=decodeURIComponent(h),l=decodeURIComponent(c),lo(e,f)?vo(e[f])?e[f].push(l):e[f]=[e[f],l]:e[f]=l}return e}function go(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var Fo=/^([a-z0-9.+-]+:)/i,bo=/:[0-9]*$/,Eo=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,So=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),Ao=["'"].concat(So),ko=["%","/","?",";","#"].concat(Ao),Co=["/","?","#"],To=/^[+a-z0-9A-Z_-]{0,63}$/,Io=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,xo={javascript:!0,"javascript:":!0},Oo={javascript:!0,"javascript:":!0},Ro={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function Do(t,n,i){if(t&&fo(t)&&t instanceof go)return t;var r=new go;return r.parse(t,n,i),r}function No(t){var n=t.auth||"";n&&(n=(n=encodeURIComponent(n)).replace(/%3A/i,":"),n+="@");var i,r,e,s=t.protocol||"",o=t.pathname||"",u=t.hash||"",a=!1,h="";t.host?a=n+t.host:t.hostname&&(a=n+(-1===t.hostname.indexOf(":")?t.hostname:"["+this.hostname+"]"),t.port&&(a+=":"+t.port)),t.query&&fo(t.query)&&Object.keys(t.query).length&&(r=r||"&",e=e||"=",null===(i=t.query)&&(i=void 0),h="object"==typeof i?wo(mo(i),(function(t){var n=encodeURIComponent(po(t))+e;return vo(i[t])?wo(i[t],(function(t){return n+encodeURIComponent(po(t))})).join(r):n+encodeURIComponent(po(i[t]))})).join(r):"");var c=t.search||h&&"?"+h||"";return s&&":"!==s.substr(-1)&&(s+=":"),t.slashes||(!s||Ro[s])&&!1!==a?(a="//"+(a||""),o&&"/"!==o.charAt(0)&&(o="/"+o)):a||(a=""),u&&"#"!==u.charAt(0)&&(u="#"+u),c&&"?"!==c.charAt(0)&&(c="?"+c),s+a+(o=o.replace(/[?#]/g,(function(t){return encodeURIComponent(t)})))+(c=c.replace("#","%23"))+u}function jo(t){var n=t.host,i=bo.exec(n);i&&(":"!==(i=i[0])&&(t.port=i.substr(1)),n=n.substr(0,n.length-i.length)),n&&(t.hostname=n)}go.prototype.parse=function(t,n,i){return function(t,n,i,r){if(!co(n))throw new TypeError("Parameter 'url' must be a string, not "+typeof n);var e=n.indexOf("?"),s=-1!==e&&e<n.indexOf("#")?"?":"#",o=n.split(s);o[0]=o[0].replace(/\\/g,"/");var u=n=o.join(s);if(u=u.trim(),!r&&1===n.split("#").length){var a=Eo.exec(u);if(a)return t.path=u,t.href=u,t.pathname=a[1],a[2]?(t.search=a[2],t.query=i?yo(t.search.substr(1)):t.search.substr(1)):i&&(t.search="",t.query={}),t}var h,c,f,l=Fo.exec(u);if(l){var v=(l=l[0]).toLowerCase();t.protocol=v,u=u.substr(l.length)}if(r||l||u.match(/^\/\/[^@\/]+@[^@\/]+/)){var d="//"===u.substr(0,2);!d||l&&Oo[l]||(u=u.substr(2),t.slashes=!0)}if(!Oo[l]&&(d||l&&!Ro[l])){var p,w,m=-1;for(h=0;h<Co.length;h++)-1!==(c=u.indexOf(Co[h]))&&(-1===m||c<m)&&(m=c);for(-1!==(w=-1===m?u.lastIndexOf("@"):u.lastIndexOf("@",m))&&(p=u.slice(0,w),u=u.slice(w+1),t.auth=decodeURIComponent(p)),m=-1,h=0;h<ko.length;h++)-1!==(c=u.indexOf(ko[h]))&&(-1===m||c<m)&&(m=c);-1===m&&(m=u.length),t.host=u.slice(0,m),u=u.slice(m),jo(t),t.hostname=t.hostname||"";var y="["===t.hostname[0]&&"]"===t.hostname[t.hostname.length-1];if(!y){var g=t.hostname.split(/\./);for(h=0,f=g.length;h<f;h++){var F=g[h];if(F&&!F.match(To)){for(var b="",E=0,S=F.length;E<S;E++)F.charCodeAt(E)>127?b+="x":b+=F[E];if(!b.match(To)){var A=g.slice(0,h),k=g.slice(h+1),C=F.match(Io);C&&(A.push(C[1]),k.unshift(C[2])),k.length&&(u="/"+k.join(".")+u),t.hostname=A.join(".");break}}}}t.hostname=t.hostname.length>255?"":t.hostname.toLowerCase(),y||(t.hostname=ls(t.hostname)),t.host=(t.hostname||"")+(t.port?":"+t.port:""),t.href+=t.host,y&&(t.hostname=t.hostname.substr(1,t.hostname.length-2),"/"!==u[0]&&(u="/"+u))}if(!xo[v])for(h=0,f=Ao.length;h<f;h++){var T=Ao[h];if(-1!==u.indexOf(T)){var I=encodeURIComponent(T);I===T&&(I=escape(T)),u=u.split(T).join(I)}}var x=u.indexOf("#");-1!==x&&(t.hash=u.substr(x),u=u.slice(0,x));var O=u.indexOf("?");return-1!==O?(t.search=u.substr(O),t.query=u.substr(O+1),i&&(t.query=yo(t.query)),u=u.slice(0,O)):i&&(t.search="",t.query={}),u&&(t.pathname=u),Ro[v]&&t.hostname&&!t.pathname&&(t.pathname="/"),(t.pathname||t.search)&&(t.path=(t.pathname||"")+(t.search||"")),t.href=No(t),t}(this,t,n,i)},go.prototype.format=function(){return No(this)},go.prototype.resolve=function(t){return this.resolveObject(Do(t,!1,!0)).format()},go.prototype.resolveObject=function(t){if(co(t)){var n=new go;n.parse(t,!1,!0),t=n}for(var i,r=new go,e=Object.keys(this),s=0;s<e.length;s++){var o=e[s];r[o]=this[o]}if(r.hash=t.hash,""===t.href)return r.href=r.format(),r;if(t.slashes&&!t.protocol){for(var u=Object.keys(t),a=0;a<u.length;a++){var h=u[a];"protocol"!==h&&(r[h]=t[h])}return Ro[r.protocol]&&r.hostname&&!r.pathname&&(r.path=r.pathname="/"),r.href=r.format(),r}if(t.protocol&&t.protocol!==r.protocol){if(!Ro[t.protocol]){for(var c=Object.keys(t),f=0;f<c.length;f++){var l=c[f];r[l]=t[l]}return r.href=r.format(),r}if(r.protocol=t.protocol,t.host||Oo[t.protocol])r.pathname=t.pathname;else{for(i=(t.pathname||"").split("/");i.length&&!(t.host=i.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==i[0]&&i.unshift(""),i.length<2&&i.unshift(""),r.pathname=i.join("/")}return r.search=t.search,r.query=t.query,r.host=t.host||"",r.auth=t.auth,r.hostname=t.hostname||t.host,r.port=t.port,(r.pathname||r.search)&&(r.path=(r.pathname||"")+(r.search||"")),r.slashes=r.slashes||t.slashes,r.href=r.format(),r}var v,d=r.pathname&&"/"===r.pathname.charAt(0),p=t.host||t.pathname&&"/"===t.pathname.charAt(0),w=p||d||r.host&&t.pathname,m=w,y=r.pathname&&r.pathname.split("/")||[],g=r.protocol&&!Ro[r.protocol];if(i=t.pathname&&t.pathname.split("/")||[],g&&(r.hostname="",r.port=null,r.host&&(""===y[0]?y[0]=r.host:y.unshift(r.host)),r.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===i[0]?i[0]=t.host:i.unshift(t.host)),t.host=null),w=w&&(""===i[0]||""===y[0])),p)r.host=t.host||""===t.host?t.host:r.host,r.hostname=t.hostname||""===t.hostname?t.hostname:r.hostname,r.search=t.search,r.query=t.query,y=i;else if(i.length)y||(y=[]),y.pop(),y=y.concat(i),r.search=t.search,r.query=t.query;else if(null!=t.search)return g&&(r.hostname=r.host=y.shift(),(v=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@"))&&(r.auth=v.shift(),r.host=r.hostname=v.shift())),r.search=t.search,r.query=t.query,ho(r.pathname)&&ho(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r;if(!y.length)return r.pathname=null,r.path=r.search?"/"+r.search:null,r.href=r.format(),r;for(var F=y.slice(-1)[0],b=(r.host||t.host||y.length>1)&&("."===F||".."===F)||""===F,E=0,S=y.length;S>=0;S--)"."===(F=y[S])?y.splice(S,1):".."===F?(y.splice(S,1),E++):E&&(y.splice(S,1),E--);if(!w&&!m)for(;E--;E)y.unshift("..");!w||""===y[0]||y[0]&&"/"===y[0].charAt(0)||y.unshift(""),b&&"/"!==y.join("/").substr(-1)&&y.push("");var A=""===y[0]||y[0]&&"/"===y[0].charAt(0);return g&&(r.hostname=r.host=A?"":y.length?y.shift():"",(v=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@"))&&(r.auth=v.shift(),r.host=r.hostname=v.shift())),(w=w||r.host&&y.length)&&!A&&y.unshift(""),y.length?r.pathname=y.join("/"):(r.pathname=null,r.path=null),ho(r.pathname)&&ho(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=t.auth||r.auth,r.slashes=r.slashes||t.slashes,r.href=r.format(),r},go.prototype.parseHost=function(){return jo(this)};const _o=class{constructor(n){t(this,n),this.href="#"}componentWillLoad(){const t=Do(this.href),n=this.stripTrailingSlash(t.pathname),i=this.stripTrailingSlash(window.location.pathname);this.isActive=null==this.isActive?n==i:this.isActive}stripTrailingSlash(t){try{return t.replace(/^(.+?)\/*?$/,"$1")}catch(n){return t}}clicked(){this.element.parentNode.parentElement.querySelectorAll("crds-snail-trail-link").forEach(t=>t.isActive=!1),this.isActive=!0}render(){let t={href:this.href,onClick:this.clicked.bind(this),class:this.isActive?"active":""};return n("a",Object.assign({"data-automation-id":this.automationId},t),n("slot",null))}get element(){return i(this)}static get style(){return"a{color:#4d4d4d;display:block;font-weight:300;padding:11px 15px;position:relative;text-decoration:none}a.active:before{border:10px solid transparent;border-bottom:0;border-top-color:#0095d9;content:\"\";left:50%;position:absolute;top:0;-webkit-transform:translateX(-50%);transform:translateX(-50%)}\@media (hover){a:hover:after{background-color:#0095d9;bottom:0;content:\"\";display:inline-block;height:2px;left:15px;position:absolute;width:calc(100% - 30px)}}"}};var Po={iframeResizer:L((function(t){!function(n){if("undefined"!=typeof window){var i,r=0,e=!1,s=!1,o="message".length,u="[iFrameSizer]",a=u.length,h=null,c=window.requestAnimationFrame,f={max:1,scroll:1,bodyScroll:1,documentElementScroll:1},l={},v=null,d={autoResize:!0,bodyBackground:null,bodyMargin:null,bodyMarginV1:8,bodyPadding:null,checkOrigin:!0,inPageLinks:!1,enablePublicMethods:!0,heightCalculationMethod:"bodyOffset",id:"iFrameResizer",interval:32,log:!1,maxHeight:1/0,maxWidth:1/0,minHeight:0,minWidth:0,resizeFrom:"parent",scrolling:!1,sizeHeight:!0,sizeWidth:!1,warningTimeout:5e3,tolerance:0,widthCalculationMethod:"scroll",onClosed:function(){},onInit:function(){},onMessage:function(){E("onMessage function not defined")},onResized:function(){},onScroll:function(){return!0}},p={};window.jQuery&&((i=window.jQuery).fn?i.fn.iFrameResize||(i.fn.iFrameResize=function(t){return this.filter("iframe").each((function(n,i){P(i,t)})).end()}):b("","Unable to bind to jQuery, it is not fully loaded.")),"function"==typeof n&&n.amd?n([],U):t.exports=U(),window.iFrameResize=window.iFrameResize||U()}function w(){return window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver}function m(t,n,i){t.addEventListener(n,i,!1)}function y(t,n,i){t.removeEventListener(n,i,!1)}function g(t){return l[t]?l[t].log:e}function F(t,n){S("log",t,n,g(t))}function b(t,n){S("info",t,n,g(t))}function E(t,n){S("warn",t,n,!0)}function S(t,n,i,r){!0===r&&"object"==typeof window.console&&console[t](function(t){return u+"["+function(t){var n="Host page: "+t;return window.top!==window.self&&(n=window.parentIFrame&&window.parentIFrame.getId?window.parentIFrame.getId()+": "+t:"Nested host page: "+t),n}(t)+"]"}(n),i)}function A(t){function n(){i("Height"),i("Width"),N((function(){D(A),x(C),v("onResized",A)}),A,"init")}function i(t){var n=Number(l[C]["max"+t]),i=Number(l[C]["min"+t]),r=t.toLowerCase(),e=Number(A[r]);F(C,"Checking "+r+" is in range "+i+"-"+n),e<i&&(e=i,F(C,"Set "+r+" to min value")),e>n&&(e=n,F(C,"Set "+r+" to max value")),A[r]=""+e}function r(t){return S.substr(S.indexOf(":")+o+t)}function e(t,n){var i,r;i=function(){var i,r;j("Send Page Info","pageInfo:"+(i=document.body.getBoundingClientRect(),r=A.iframe.getBoundingClientRect(),JSON.stringify({iframeHeight:r.height,iframeWidth:r.width,clientHeight:Math.max(document.documentElement.clientHeight,window.innerHeight||0),clientWidth:Math.max(document.documentElement.clientWidth,window.innerWidth||0),offsetTop:parseInt(r.top-i.top,10),offsetLeft:parseInt(r.left-i.left,10),scrollTop:window.pageYOffset,scrollLeft:window.pageXOffset,documentHeight:document.documentElement.clientHeight,documentWidth:document.documentElement.clientWidth,windowHeight:window.innerHeight,windowWidth:window.innerWidth})),t,n)},p[r=n]||(p[r]=setTimeout((function(){p[r]=null,i()}),32))}function s(t){var n=t.getBoundingClientRect();return I(C),{x:Math.floor(Number(n.left)+Number(h.x)),y:Math.floor(Number(n.top)+Number(h.y))}}function c(t){var n=t?s(A.iframe):{x:0,y:0},i={x:Number(A.width)+n.x,y:Number(A.height)+n.y};F(C,"Reposition requested from iFrame (offset x:"+n.x+" y:"+n.y+")"),window.top!==window.self?window.parentIFrame?window.parentIFrame["scrollTo"+(t?"Offset":"")](i.x,i.y):E(C,"Unable to scroll to requested position, window.parentIFrame not found"):(h=i,f(),F(C,"--"))}function f(){!1!==v("onScroll",h)?x(C):O()}function v(t,n){return k(C,t,n)}var d,w,g,S=t.data,A={},C=null;"[iFrameResizerChild]Ready"===S?function(){for(var t in l)j("iFrame requested init",_(t),document.getElementById(t),t)}():u===(""+S).substr(0,a)&&S.substr(a).split(":")[0]in l?(g=S.substr(a).split(":"),l[C=(A={iframe:l[g[0]]&&l[g[0]].iframe,id:g[0],height:g[1],width:g[2],type:g[3]}).id]&&(l[C].loaded=!0),(w=A.type in{true:1,false:1,undefined:1})&&F(C,"Ignoring init message from meta parent page"),!w&&function(t){var n=!0;return l[t]||(n=!1,E(A.type+" No settings for "+t+". Message was: "+S)),n}(C)&&(F(C,"Received: "+S),d=!0,null===A.iframe&&(E(C,"IFrame ("+A.id+") not found"),d=!1),d&&function(){var n,i=t.origin,r=l[C]&&l[C].checkOrigin;if(r&&""+i!="null"&&!(r.constructor===Array?function(){var t=0,n=!1;for(F(C,"Checking connection is from allowed list of origins: "+r);t<r.length;t++)if(r[t]===i){n=!0;break}return n}():(F(C,"Checking connection is from: "+(n=l[C]&&l[C].remoteHost)),i===n)))throw new Error("Unexpected message received from: "+i+" for "+A.iframe.id+". Message was: "+t.data+". This error can be disabled by setting the checkOrigin: false option or by providing of array of trusted domains.");return!0}()&&function(){switch(l[C]&&l[C].firstRun&&l[C]&&(l[C].firstRun=!1),A.type){case"close":l[C].closeRequeston?k(C,"onCloseRequest",l[C].iframe):T(A.iframe);break;case"message":t=r(6),F(C,"onMessage passed: {iframe: "+A.iframe.id+", message: "+t+"}"),v("onMessage",{iframe:A.iframe,message:JSON.parse(t)}),F(C,"--");break;case"scrollTo":c(!1);break;case"scrollToOffset":c(!0);break;case"pageInfo":e(l[C]&&l[C].iframe,C),function(){function t(t,r){function s(){l[i]?e(l[i].iframe,i):n()}["scroll","resize"].forEach((function(n){F(i,t+n+" listener for sendPageInfo"),r(window,n,s)}))}function n(){t("Remove ",y)}var i=C;t("Add ",m),l[i]&&(l[i].stopPageInfo=n)}();break;case"pageInfoStop":l[C]&&l[C].stopPageInfo&&(l[C].stopPageInfo(),delete l[C].stopPageInfo);break;case"inPageLink":!function(t){var n,i=t.split("#")[1]||"",r=decodeURIComponent(i),e=document.getElementById(r)||document.getElementsByName(r)[0];e?(n=s(e),F(C,"Moving to in page link (#"+i+") at x: "+n.x+" y: "+n.y),h={x:n.x,y:n.y},f(),F(C,"--")):window.top!==window.self?window.parentIFrame?window.parentIFrame.moveToAnchor(i):F(C,"In page link #"+i+" not found and window.parentIFrame not found"):F(C,"In page link #"+i+" not found")}(r(9));break;case"reset":R(A);break;case"init":n(),v("onInit",A.iframe);break;default:n()}var t}())):b(C,"Ignored: "+S)}function k(t,n,i){var r=null,e=null;if(l[t]){if("function"!=typeof(r=l[t][n]))throw new TypeError(n+" on iFrame["+t+"] is not a function");e=r(i)}return e}function C(t){delete l[t.id]}function T(t){var n=t.id;F(n,"Removing iFrame: "+n);try{t.parentNode&&t.parentNode.removeChild(t)}catch(t){E(t)}k(n,"onClosed",n),F(n,"--"),C(t)}function I(t){null===h&&F(t,"Get page position: "+(h={x:window.pageXOffset!==n?window.pageXOffset:document.documentElement.scrollLeft,y:window.pageYOffset!==n?window.pageYOffset:document.documentElement.scrollTop}).x+","+h.y)}function x(t){null!==h&&(window.scrollTo(h.x,h.y),F(t,"Set page position: "+h.x+","+h.y),O())}function O(){h=null}function R(t){F(t.id,"Size reset requested by "+("init"===t.type?"host page":"iFrame")),I(t.id),N((function(){D(t),j("reset","reset",t.iframe,t.id)}),t,"reset")}function D(t){function n(n){!function(n){t.id?(t.iframe.style[n]=t[n]+"px",F(t.id,"IFrame ("+i+") "+n+" set to "+t[n]+"px")):F("undefined","messageData id not set")}(n),function(n){s||"0"!==t[n]||(s=!0,F(i,"Hidden iFrame detected, creating visibility listener"),function(){function t(){Object.keys(l).forEach((function(t){!function(t){function n(n){return"0px"===(l[t]&&l[t].iframe.style[n])}l[t]&&null!==l[t].iframe.offsetParent&&(n("height")||n("width"))&&j("Visibility change","resize",l[t].iframe,t)}(l[t])}))}var n,i=w();i&&(n=document.querySelector("body"),new i((function(n){F("window","Mutation observed: "+n[0].target+" "+n[0].type),M(t,16)})).observe(n,{attributes:!0,attributeOldValue:!1,characterData:!0,characterDataOldValue:!1,childList:!0,subtree:!0}))}())}(n)}var i=t.iframe.id;l[i]&&(l[i].sizeHeight&&n("height"),l[i].sizeWidth&&n("width"))}function N(t,n,i){i!==n.type&&c?(F(n.id,"Requesting animation frame"),c(t)):t()}function j(t,n,i,r,e){var s,o=!1;l[r=r||i.id]&&(i&&"contentWindow"in i&&null!==i.contentWindow?(F(r,"["+t+"] Sending msg to iframe["+r+"] ("+n+") targetOrigin: "+(s=l[r]&&l[r].targetOrigin)),i.contentWindow.postMessage(u+n,s)):E(r,"["+t+"] IFrame("+r+") not found"),e&&l[r]&&l[r].warningTimeout&&(l[r].msgTimeout=setTimeout((function(){!l[r]||l[r].loaded||o||(o=!0,E(r,"IFrame has not responded within "+l[r].warningTimeout/1e3+" seconds. Check iFrameResizer.contentWindow.js has been loaded in iFrame. This message can be ignored if everything is working, or you can set the warningTimeout option to a higher value or zero to suppress this warning."))}),l[r].warningTimeout)))}function _(t){return t+":"+l[t].bodyMarginV1+":"+l[t].sizeWidth+":"+l[t].log+":"+l[t].interval+":"+l[t].enablePublicMethods+":"+l[t].autoResize+":"+l[t].bodyMargin+":"+l[t].heightCalculationMethod+":"+l[t].bodyBackground+":"+l[t].bodyPadding+":"+l[t].tolerance+":"+l[t].inPageLinks+":"+l[t].resizeFrom+":"+l[t].widthCalculationMethod}function P(t,i){function s(t){var n=t.split("Callback");if(2===n.length){var i="on"+n[0].charAt(0).toUpperCase()+n[0].slice(1);this[i]=this[t],delete this[t],E(a,"Deprecated: '"+t+"' has been renamed '"+i+"'. The old method will be removed in the next major version.")}}var o,u,a=function(n){var s;return""===n&&(t.id=(s=i&&i.id||d.id+r++,null!==document.getElementById(s)&&(s+=r++),n=s),e=(i||{}).log,F(n,"Added missing iframe ID: "+n+" ("+t.src+")")),n}(t.id);a in l&&"iFrameResizer"in t?E(a,"Ignored iFrame, already setup."):(function(n){var i;n=n||{},l[a]={firstRun:!0,iframe:t,remoteHost:t.src.split("/").slice(0,3).join("/")},function(t){if("object"!=typeof t)throw new TypeError("Options is not an object")}(n),Object.keys(n).forEach(s,n),function(t){for(var n in d)Object.prototype.hasOwnProperty.call(d,n)&&(l[a][n]=Object.prototype.hasOwnProperty.call(t,n)?t[n]:d[n])}(n),l[a]&&(l[a].targetOrigin=!0===l[a].checkOrigin?""===(i=l[a].remoteHost)||"file://"===i?"*":i:"*")}(i),function(){switch(F(a,"IFrame scrolling "+(l[a]&&l[a].scrolling?"enabled":"disabled")+" for "+a),t.style.overflow=!1===(l[a]&&l[a].scrolling)?"hidden":"auto",l[a]&&l[a].scrolling){case"omit":break;case!0:t.scrolling="yes";break;case!1:t.scrolling="no";break;default:t.scrolling=l[a]?l[a].scrolling:"no"}}(),function(){function n(n){1/0!==l[a][n]&&0!==l[a][n]&&(t.style[n]=l[a][n]+"px",F(a,"Set "+n+" = "+l[a][n]+"px"))}function i(t){if(l[a]["min"+t]>l[a]["max"+t])throw new Error("Value for min"+t+" can not be greater than max"+t)}i("Height"),i("Width"),n("maxHeight"),n("minHeight"),n("maxWidth"),n("minWidth")}(),"number"!=typeof(l[a]&&l[a].bodyMargin)&&"0"!==(l[a]&&l[a].bodyMargin)||(l[a].bodyMarginV1=l[a].bodyMargin,l[a].bodyMargin=l[a].bodyMargin+"px"),o=_(a),(u=w())&&function(n){t.parentNode&&new n((function(n){n.forEach((function(n){Array.prototype.slice.call(n.removedNodes).forEach((function(n){n===t&&T(t)}))}))})).observe(t.parentNode,{childList:!0})}(u),m(t,"load",(function(){j("iFrame.onload",o,t,n,!0),(!l[a]||!l[a].firstRun)&&l[a]&&l[a].heightCalculationMethod in f&&R({iframe:t,height:0,width:0,type:"init"})})),j("init",o,t,n,!0),l[a]&&(l[a].iframe.iFrameResizer={close:T.bind(null,l[a].iframe),removeListeners:C.bind(null,l[a].iframe),resize:j.bind(null,"Window resize","resize",l[a].iframe),moveToAnchor:function(t){j("Move to anchor","moveToAnchor:"+t,l[a].iframe,a)},sendMessage:function(t){j("Send Message","message:"+(t=JSON.stringify(t)),l[a].iframe,a)}}))}function M(t,n){null===v&&(v=setTimeout((function(){v=null,t()}),n))}function B(){"hidden"!==document.visibilityState&&(F("document","Trigger event: Visiblity change"),M((function(){L("Tab Visable","resize")}),16))}function L(t,n){Object.keys(l).forEach((function(i){(function(t){return l[t]&&"parent"===l[t].resizeFrom&&l[t].autoResize&&!l[t].firstRun})(i)&&j(t,n,document.getElementById(i),i)}))}function U(){function t(t,n){n&&(function(){if(!n.tagName)throw new TypeError("Object is not a valid DOM element");if("IFRAME"!==n.tagName.toUpperCase())throw new TypeError("Expected <IFRAME> tag, found <"+n.tagName+">")}(),P(n,t),i.push(n))}var i;return function(){var t,n=["moz","webkit","o","ms"];for(t=0;t<n.length&&!c;t+=1)c=window[n[t]+"RequestAnimationFrame"];c||F("setup","RequestAnimationFrame not supported")}(),m(window,"message",A),m(window,"resize",(function(){F("window","Trigger event: resize"),M((function(){L("Window resize","resize")}),16)})),m(document,"visibilitychange",B),m(document,"-webkit-visibilitychange",B),function(r,e){switch(i=[],function(t){t&&t.enablePublicMethods&&E("enablePublicMethods option has been removed, public methods are now always available in the iFrame")}(r),typeof e){case"undefined":case"string":Array.prototype.forEach.call(document.querySelectorAll(e||"iframe"),t.bind(n,r));break;case"object":t(r,e);break;default:throw new TypeError("Unexpected data type ("+typeof e+")")}return i}}}()})),iframeResizerContentWindow:L((function(t){!function(n){if("undefined"!=typeof window){var i=!0,r=10,e="",s=0,o="",u=null,a="",h=!1,c={resize:1,click:1},f=128,l=!0,v=1,d="bodyOffset",p=d,w=!0,m="",y={},g=32,F=null,b=!1,E="[iFrameSizer]",S=E.length,A="",k={max:1,min:1,bodyScroll:1,documentElementScroll:1},C="child",T=!0,I=window.parent,x="*",O=0,R=!1,D=null,N=16,j=1,_="scroll",P=_,M=window,B=function(){nt("onMessage function not defined")},L=function(){},U=function(){},H={height:function(){return nt("Custom height calculation function not defined"),document.documentElement.offsetHeight},width:function(){return nt("Custom width calculation function not defined"),document.body.scrollWidth}},z={},q=!1;try{var $=Object.create({},{passive:{get:function(){q=!0}}});window.addEventListener("test",G,$),window.removeEventListener("test",G,$)}catch(t){}var V=Date.now||function(){return(new Date).getTime()},K={bodyOffset:function(){return document.body.offsetHeight+vt("marginTop")+vt("marginBottom")},offset:function(){return K.bodyOffset()},bodyScroll:function(){return document.body.scrollHeight},custom:function(){return H.height()},documentElementOffset:function(){return document.documentElement.offsetHeight},documentElementScroll:function(){return document.documentElement.scrollHeight},max:function(){return Math.max.apply(null,pt(K))},min:function(){return Math.min.apply(null,pt(K))},grow:function(){return K.max()},lowestElement:function(){return Math.max(K.bodyOffset()||K.documentElementOffset(),dt("bottom",mt()))},taggedElement:function(){return wt("bottom","data-iframe-height")}},J={bodyScroll:function(){return document.body.scrollWidth},bodyOffset:function(){return document.body.offsetWidth},custom:function(){return H.width()},documentElementScroll:function(){return document.documentElement.scrollWidth},documentElementOffset:function(){return document.documentElement.offsetWidth},scroll:function(){return Math.max(J.bodyScroll(),J.documentElementScroll())},max:function(){return Math.max.apply(null,pt(J))},min:function(){return Math.min.apply(null,pt(J))},rightMostElement:function(){return dt("right",mt())},taggedElement:function(){return wt("right","data-iframe-width")}},Y=function(t){var n,i,r,e=null,s=0,o=function(){s=V(),e=null,r=t.apply(n,i),e||(n=i=null)};return function(){var u=V();s||(s=u);var a=N-(u-s);return n=this,i=arguments,a<=0||a>N?(e&&(clearTimeout(e),e=null),s=u,r=t.apply(n,i),e||(n=i=null)):e||(e=setTimeout(o,a)),r}}(yt);W(window,"message",At),W(window,"readystatechange",kt),kt()}function G(){}function W(t,n,i,r){t.addEventListener(n,i,!!q&&(r||{}))}function Z(t,n,i){t.removeEventListener(n,i,!1)}function Q(t){return t.charAt(0).toUpperCase()+t.slice(1)}function X(t){return E+"["+A+"] "+t}function tt(t){b&&"object"==typeof window.console&&console.log(X(t))}function nt(t){"object"==typeof window.console&&console.warn(X(t))}function it(){var t,r;!function(){function t(t){return"true"===t}var r=m.substr(S).split(":");A=r[0],s=n!==r[1]?Number(r[1]):s,h=n!==r[2]?t(r[2]):h,b=n!==r[3]?t(r[3]):b,g=n!==r[4]?Number(r[4]):g,i=n!==r[6]?t(r[6]):i,o=r[7],p=n!==r[8]?r[8]:p,e=r[9],a=r[10],O=n!==r[11]?Number(r[11]):O,y.enable=n!==r[12]&&t(r[12]),C=n!==r[13]?r[13]:C,P=n!==r[14]?r[14]:P}(),tt("Initialising iFrame ("+location.href+")"),function(){function t(t,n){return"function"==typeof t&&(tt("Setup custom "+n+"CalcMethod"),H[n]=t,t="custom"),t}var n;"iFrameResizer"in window&&Object===window.iFrameResizer.constructor&&(n=window.iFrameResizer,tt("Reading data from page: "+JSON.stringify(n)),Object.keys(n).forEach(rt,n),B="onMessage"in n?n.onMessage:B,L="onReady"in n?n.onReady:L,x="targetOrigin"in n?n.targetOrigin:x,P="widthCalculationMethod"in n?n.widthCalculationMethod:P,p=t(p="heightCalculationMethod"in n?n.heightCalculationMethod:p,"height"),P=t(P,"width")),tt("TargetOrigin for parent set to: "+x)}(),n===o&&(o=s+"px"),et("margin",(-1!==(r=o).indexOf("-")&&(nt("Negative CSS value ignored for margin"),r=""),r)),et("background",e),et("padding",a),(t=document.createElement("div")).style.clear="both",t.style.display="block",t.style.height="0",document.body.appendChild(t),at(),ht(),document.documentElement.style.height="",document.body.style.height="",tt('HTML & body height set to "auto"'),tt("Enable public methods"),M.parentIFrame={autoResize:function(t){return!0===t&&!1===i?(i=!0,ct()):!1===t&&!0===i&&(i=!1,ft()),i},close:function(){St(0,0,"close"),tt("Disable outgoing messages"),T=!1,tt("Remove event listener: Message"),Z(window,"message",At),!0===i&&ft()},getId:function(){return A},getPageInfo:function(t){"function"==typeof t?(U=t,St(0,0,"pageInfo")):(U=function(){},St(0,0,"pageInfoStop"))},moveToAnchor:function(t){y.findTarget(t)},reset:function(){Et("parentIFrame.reset")},scrollTo:function(t,n){St(n,t,"scrollTo")},scrollToOffset:function(t,n){St(n,t,"scrollToOffset")},sendMessage:function(t,n){St(0,0,"message",JSON.stringify(t),n)},setHeightCalculationMethod:function(t){p=t,at()},setWidthCalculationMethod:function(t){P=t,ht()},setTargetOrigin:function(t){tt("Set targetOrigin: "+t),x=t},size:function(t,n){gt("size","parentIFrame.size("+(t||"")+(n?","+n:"")+")",t,n)}},ct(),y=function(){function t(t){var i=t.split("#")[1]||t,r=decodeURIComponent(i),e=document.getElementById(r)||document.getElementsByName(r)[0];n!==e?function(t){var r,e,s=(r=t.getBoundingClientRect(),e={x:window.pageXOffset!==n?window.pageXOffset:document.documentElement.scrollLeft,y:window.pageYOffset!==n?window.pageYOffset:document.documentElement.scrollTop},{x:parseInt(r.left,10)+parseInt(e.x,10),y:parseInt(r.top,10)+parseInt(e.y,10)});tt("Moving to in page link (#"+i+") at x: "+s.x+" y: "+s.y),St(s.y,s.x,"scrollToOffset")}(e):(tt("In page link (#"+i+") not found in iFrame, so sending to parent"),St(0,0,"inPageLink","#"+i))}function i(){""!==location.hash&&"#"!==location.hash&&t(location.href)}return y.enable?Array.prototype.forEach&&document.querySelectorAll?(tt("Setting up location.hash handlers"),Array.prototype.forEach.call(document.querySelectorAll('a[href^="#"]'),(function(n){"#"!==n.getAttribute("href")&&W(n,"click",(function(n){n.preventDefault(),t(this.getAttribute("href"))}))})),W(window,"hashchange",i),setTimeout(i,f)):nt("In page linking not fully supported in this browser! (See README.md for IE8 workaround)"):tt("In page linking not enabled"),{findTarget:t}}(),gt("init","Init message from host page"),L()}function rt(t){var n=t.split("Callback");if(2===n.length){var i="on"+n[0].charAt(0).toUpperCase()+n[0].slice(1);this[i]=this[t],delete this[t],nt("Deprecated: '"+t+"' has been renamed '"+i+"'. The old method will be removed in the next major version.")}}function et(t,i){n!==i&&""!==i&&"null"!==i&&(document.body.style[t]=i,tt("Body "+t+' set to "'+i+'"'))}function st(t){var n={add:function(n){function i(){gt(t.eventName,t.eventType)}z[n]=i,W(window,n,i,{passive:!0})},remove:function(t){var n=z[t];delete z[t],Z(window,t,n)}};t.eventNames&&Array.prototype.map?(t.eventName=t.eventNames[0],t.eventNames.map(n[t.method])):n[t.method](t.eventName),tt(Q(t.method)+" event listener: "+t.eventType)}function ot(t){st({method:t,eventType:"Animation Start",eventNames:["animationstart","webkitAnimationStart"]}),st({method:t,eventType:"Animation Iteration",eventNames:["animationiteration","webkitAnimationIteration"]}),st({method:t,eventType:"Animation End",eventNames:["animationend","webkitAnimationEnd"]}),st({method:t,eventType:"Input",eventName:"input"}),st({method:t,eventType:"Mouse Up",eventName:"mouseup"}),st({method:t,eventType:"Mouse Down",eventName:"mousedown"}),st({method:t,eventType:"Orientation Change",eventName:"orientationchange"}),st({method:t,eventType:"Print",eventName:["afterprint","beforeprint"]}),st({method:t,eventType:"Ready State Change",eventName:"readystatechange"}),st({method:t,eventType:"Touch Start",eventName:"touchstart"}),st({method:t,eventType:"Touch End",eventName:"touchend"}),st({method:t,eventType:"Touch Cancel",eventName:"touchcancel"}),st({method:t,eventType:"Transition Start",eventNames:["transitionstart","webkitTransitionStart","MSTransitionStart","oTransitionStart","otransitionstart"]}),st({method:t,eventType:"Transition Iteration",eventNames:["transitioniteration","webkitTransitionIteration","MSTransitionIteration","oTransitionIteration","otransitioniteration"]}),st({method:t,eventType:"Transition End",eventNames:["transitionend","webkitTransitionEnd","MSTransitionEnd","oTransitionEnd","otransitionend"]}),"child"===C&&st({method:t,eventType:"IFrame Resized",eventName:"resize"})}function ut(t,n,i,r){return n!==t&&(t in i||(nt(t+" is not a valid option for "+r+"CalculationMethod."),t=n),tt(r+' calculation method set to "'+t+'"')),t}function at(){p=ut(p,d,K,"height")}function ht(){P=ut(P,_,J,"width")}function ct(){!0===i?(ot("add"),window.MutationObserver||window.WebKitMutationObserver?0>g?lt():u=function(){function t(t){function n(t){!1===t.complete&&(tt("Attach listeners to "+t.src),t.addEventListener("load",e,!1),t.addEventListener("error",s,!1),u.push(t))}"attributes"===t.type&&"src"===t.attributeName?n(t.target):"childList"===t.type&&Array.prototype.forEach.call(t.target.querySelectorAll("img"),n)}function i(t){tt("Remove listeners from "+t.src),t.removeEventListener("load",e,!1),t.removeEventListener("error",s,!1),function(t){u.splice(u.indexOf(t),1)}(t)}function r(t,r,e){i(t.target),gt(r,e+": "+t.target.src,n,n)}function e(t){r(t,"imageLoad","Image loaded")}function s(t){r(t,"imageLoadFailed","Image load failed")}function o(n){gt("mutationObserver","mutationObserver: "+n[0].target+" "+n[0].type),n.forEach(t)}var u=[],a=window.MutationObserver||window.WebKitMutationObserver,h=function(){var t=document.querySelector("body");return h=new a(o),tt("Create body MutationObserver"),h.observe(t,{attributes:!0,attributeOldValue:!1,characterData:!0,characterDataOldValue:!1,childList:!0,subtree:!0}),h}();return{disconnect:function(){"disconnect"in h&&(tt("Disconnect body MutationObserver"),h.disconnect(),u.forEach(i))}}}():(tt("MutationObserver not supported in this browser!"),lt())):tt("Auto Resize disabled")}function ft(){ot("remove"),null!==u&&u.disconnect(),clearInterval(F)}function lt(){0!==g&&(tt("setInterval: "+g+"ms"),F=setInterval((function(){gt("interval","setInterval: "+g)}),Math.abs(g)))}function vt(t,n){var i=0;return n=n||document.body,i=null!==(i=document.defaultView.getComputedStyle(n,null))?i[t]:0,parseInt(i,r)}function dt(t,n){for(var i=n.length,r=0,e=0,s=Q(t),o=V(),u=0;u<i;u++)(r=n[u].getBoundingClientRect()[t]+vt("margin"+s,n[u]))>e&&(e=r);return o=V()-o,tt("Parsed "+i+" HTML elements"),tt("Element position calculated in "+o+"ms"),function(t){t>N/2&&tt("Event throttle increased to "+(N=2*t)+"ms")}(o),e}function pt(t){return[t.bodyOffset(),t.bodyScroll(),t.documentElementOffset(),t.documentElementScroll()]}function wt(t,n){var i=document.querySelectorAll("["+n+"]");return 0===i.length&&(nt("No tagged elements ("+n+") found on page"),document.querySelectorAll("body *")),dt(t,i)}function mt(){return document.querySelectorAll("body *")}function yt(t,i,r,e){var s,o;!function(){function t(t,n){return!(Math.abs(t-n)<=O)}return s=n!==r?r:K[p](),o=n!==e?e:J[P](),t(v,s)||h&&t(j,o)}()&&"init"!==t?t in{init:1,interval:1,size:1}||!(p in k||h&&P in k)?t in{interval:1}||tt("No change in size detected"):Et(i):(Ft(),St(v=s,j=o,t))}function gt(t,n,i,r){R&&t in c?tt("Trigger event cancelled: "+t):(t in{reset:1,resetPage:1,init:1}||tt("Trigger event: "+n),"init"===t?yt(t,n,i,r):Y(t,n,i,r))}function Ft(){R||(R=!0,tt("Trigger event lock on")),clearTimeout(D),D=setTimeout((function(){R=!1,tt("Trigger event lock off"),tt("--")}),f)}function bt(t){v=K[p](),j=J[P](),St(v,j,t)}function Et(t){var n=p;p=d,tt("Reset trigger event: "+t),Ft(),bt("reset"),p=n}function St(t,i,r,e,s){var o;!0===T&&(n===s?s=x:tt("Message targetOrigin: "+s),tt("Sending message to host page ("+(o=A+":"+t+":"+i+":"+r+(n!==e?":"+e:""))+")"),I.postMessage(E+o,s))}function At(n){var i,r={init:function(){m=n.data,I=n.source,it(),l=!1,setTimeout((function(){w=!1}),f)},reset:function(){w?tt("Page reset ignored by init"):(tt("Page size reset by host page"),bt("resetPage"))},resize:function(){gt("resizeParent","Parent window requested size check")},moveToAnchor:function(){y.findTarget(s())},inPageLink:function(){this.moveToAnchor()},pageInfo:function(){var t=s();tt("PageInfoFromParent called from parent: "+t),U(JSON.parse(t)),tt(" --")},message:function(){var t=s();tt("onMessage called from parent: "+t),B(JSON.parse(t)),tt(" --")}};function e(){return n.data.split("]")[1].split(":")[0]}function s(){return n.data.substr(n.data.indexOf(":")+1)}function o(){return n.data.split(":")[2]in{true:1,false:1}}E===(""+n.data).substr(0,S)&&(!1===l?(i=e())in r?r[i]():!t.exports&&"iFrameResize"in window||"jQuery"in window&&"iFrameResize"in window.jQuery.prototype||o()||nt("Unexpected message ("+n.data+")"):o()?r.init():tt('Ignored message of type "'+e()+'". Received before initialization.'))}function kt(){"loading"!==document.readyState&&window.parent.postMessage("[iFrameResizerChild]Ready","*")}}()}))};const Mo=class{constructor(n){t(this,n),this.modalIsShowing=!1,this.handleSubscribeClick=()=>{this.modalIsShowing=!0},this.handleModalClose=()=>{this.modalIsShowing=!1}}componentDidUpdate(){Po.iframeResizer({},this.frame)}render(){return n(Pe,null,n("div",{class:"subscribe-script"}),n("button",{onClick:this.handleSubscribeClick,class:"subscribe-button"},this.label),n("crds-modal",{label:this.label,isActive:this.modalIsShowing,onModalClose:this.handleModalClose},n("iframe",{ref:t=>this.frame=t,src:this.src,class:"subscribe-frame",frameborder:"0"})))}static get style(){return".subscribe-button{background-color:transparent;border:0;color:#0095d9;cursor:pointer;display:inline-block;font:inherit;font-weight:600;line-height:normal;margin:0;padding:11px 15px}.subscribe-button:focus{border:0;outline:none}.subscribe-frame{border:none;height:100%;width:100%}"}};class Bo{constructor(t){this.handleSignOut=t}renderSections(t,i){let r=!0;return n("div",null,n("h2",null," ",i," "),Array.isArray(t.children)&&t.children.map(t=>{let i="string"==typeof t,e=i?this.renderSubHeader(t):this.maybeRenderList(t,r);return r=!i,e&&n("div",{style:{padding:"0"}},e)}))}renderSubHeader(t){return n("h4",null,t)}maybeRenderList(t,i){if(!Array.isArray(t))return;const r=t.map(t=>this.maybeRenderListEntry(t,i)).filter(Boolean);return r.length>0&&n("ul",null,r)}maybeRenderListEntry(t,i){return this.isObjectTruthyNonArray(t)&&n("li",{class:this.topLevelClassValue(t,i)},n("nav-link",{href:t.href,automationId:t["automation-id"],handleSignOut:this.handleSignOut},t.title))}topLevelClassValue(t,n){return("boolean"==typeof t.top_level?t.top_level:n)?"top-level":""}isObjectTruthyNonArray(t){return t&&"object"==typeof t&&!Array.isArray(t)}}const Lo=class{constructor(n){t(this,n),this.giveNavIsShowing=!0,this.simpleNav=new Bo}navTitle(){const t=this.data;return t&&t.title||""}backgroundImageURL(t){return t.background_img||""}render(){return this.giveNavIsShowing&&this.simpleNav.isObjectTruthyNonArray(this.data)?n("div",{class:"give-nav",style:{backgroundImage:`url(${this.backgroundImageURL(this.data)})`}},this.simpleNav.renderSections(this.data,this.navTitle())):null}static get style(){return".give-nav,.profile-nav{font-family:acumin-pro,helvetica,arial,sans-serif!important;font-weight:300!important;color:#fff;background-color:#000;background-repeat:no-repeat;background-size:100%;height:100vh;left:0;margin-left:-15px;max-height:100vh;overflow-y:scroll;position:-webkit-sticky;position:sticky;top:48px;width:100vw;z-index:2}.give-nav div,.profile-nav div{height:auto;padding:30px 20px 90px}.give-nav a,.profile-nav a{color:#fff;display:inline-block;font-size:19px;margin-bottom:10px;padding-left:10px;text-decoration:none;text-transform:capitalize}.give-nav a.all,.profile-nav a.all{margin-bottom:30px}.give-nav a:hover,.profile-nav a:hover{color:#ccc}.give-nav h2,.profile-nav h2{font-family:acumin-pro-extra-condensed,sans-serif!important;font-weight:500!important;font-size:48px;line-height:48px;margin:0;text-transform:uppercase;margin-bottom:20px}.give-nav h4,.profile-nav h4{font-size:11px;margin:0 0 10px;opacity:.5;text-transform:uppercase}.give-nav ul,.profile-nav ul{padding-left:0;margin-top:0}.give-nav ul li,.profile-nav ul li{list-style:none}.give-nav ul li.top-level a,.profile-nav ul li.top-level a{padding-left:0}\@media (min-width:992px){.give-nav,.profile-nav{height:auto;left:auto;margin-right:-15px;position:absolute;right:15px;width:375px}}\@media (min-width:1170px){.give-nav,.profile-nav{margin-right:0}}.give-nav::-webkit-scrollbar,.profile-nav::-webkit-scrollbar{width:0}.give-nav ul:last-of-type,.profile-nav ul:last-of-type{padding-bottom:30px}.give-nav{background-image:url(https://crds-media.imgix.net/6sNxa1MWhMOfjhAB47yTCa/0acf1af4109f23abc0199b1e34abeb7a/give-bg_2x.jpg?auto=format%2Ccompress)}.profile-nav:after{background-color:rgba(0,0,0,.75);content:\" \";z-index:-1}.profile-nav .profile-nav-img,.profile-nav:after{height:100%;left:0;position:absolute;top:0;width:100%}.profile-nav .profile-nav-img{background-position:top;background-repeat:no-repeat;background-size:contain;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-filter:blur(2px);filter:blur(2px);z-index:-2}\@media (min-width:992px){.profile-nav div{padding-bottom:0}}"}};function Uo(t){return"function"==typeof t}let Ho=!1;const zo={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){if(t){const t=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+t.stack)}else Ho&&console.log("RxJS: Back to a better error behavior. Thank you. <3");Ho=t},get useDeprecatedSynchronousErrorHandling(){return Ho}};function qo(t){setTimeout(()=>{throw t},0)}const $o={closed:!0,next(t){},error(t){if(zo.useDeprecatedSynchronousErrorHandling)throw t;qo(t)},complete(){}},Vo=Array.isArray||(t=>t&&"number"==typeof t.length);function Ko(t){return null!==t&&"object"==typeof t}function Jo(t){return Error.call(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((t,n)=>`${n+1}) ${t.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t,this}Jo.prototype=Object.create(Error.prototype);const Yo=Jo;class Go{constructor(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._unsubscribe=t)}unsubscribe(){let t;if(this.closed)return;let{_parentOrParents:n,_unsubscribe:i,_subscriptions:r}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof Go)n.remove(this);else if(null!==n)for(let t=0;t<n.length;++t)n[t].remove(this);if(Uo(i))try{i.call(this)}catch(n){t=n instanceof Yo?Wo(n.errors):[n]}if(Vo(r)){let n=-1,i=r.length;for(;++n<i;){const i=r[n];if(Ko(i))try{i.unsubscribe()}catch(n){t=t||[],n instanceof Yo?t=t.concat(Wo(n.errors)):t.push(n)}}}if(t)throw new Yo(t)}add(t){let n=t;switch(typeof t){case"function":n=new Go(t);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof Go)){const t=n;(n=new Go)._subscriptions=[t]}break;default:if(!t)return Go.EMPTY;throw new Error("unrecognized teardown "+t+" added to Subscription.")}let{_parentOrParents:i}=n;if(null===i)n._parentOrParents=this;else if(i instanceof Go){if(i===this)return n;n._parentOrParents=[i,this]}else{if(-1!==i.indexOf(this))return n;i.push(this)}const r=this._subscriptions;return null===r?this._subscriptions=[n]:r.push(n),n}remove(t){const n=this._subscriptions;if(n){const i=n.indexOf(t);-1!==i&&n.splice(i,1)}}}function Wo(t){return t.reduce((t,n)=>t.concat(n instanceof Yo?n.errors:n),[])}Go.EMPTY=function(t){return t.closed=!0,t}(new Go);const Zo="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random();class Qo extends Go{constructor(t,n,i){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=$o;break;case 1:if(!t){this.destination=$o;break}if("object"==typeof t){t instanceof Qo?(this.syncErrorThrowable=t.syncErrorThrowable,this.destination=t,t.add(this)):(this.syncErrorThrowable=!0,this.destination=new Xo(this,t));break}default:this.syncErrorThrowable=!0,this.destination=new Xo(this,t,n,i)}}[Zo](){return this}static create(t,n,i){const r=new Qo(t,n,i);return r.syncErrorThrowable=!1,r}next(t){this.isStopped||this._next(t)}error(t){this.isStopped||(this.isStopped=!0,this._error(t))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(t){this.destination.next(t)}_error(t){this.destination.error(t),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:t}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this}}class Xo extends Qo{constructor(t,n,i,r){let e;super(),this._parentSubscriber=t;let s=this;Uo(n)?e=n:n&&(e=n.next,i=n.error,r=n.complete,n!==$o&&(Uo((s=Object.create(n)).unsubscribe)&&this.add(s.unsubscribe.bind(s)),s.unsubscribe=this.unsubscribe.bind(this))),this._context=s,this._next=e,this._error=i,this._complete=r}next(t){if(!this.isStopped&&this._next){const{_parentSubscriber:n}=this;zo.useDeprecatedSynchronousErrorHandling&&n.syncErrorThrowable?this.__tryOrSetError(n,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}}error(t){if(!this.isStopped){const{_parentSubscriber:n}=this,{useDeprecatedSynchronousErrorHandling:i}=zo;if(this._error)i&&n.syncErrorThrowable?(this.__tryOrSetError(n,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(n.syncErrorThrowable)i?(n.syncErrorValue=t,n.syncErrorThrown=!0):qo(t),this.unsubscribe();else{if(this.unsubscribe(),i)throw t;qo(t)}}}complete(){if(!this.isStopped){const{_parentSubscriber:t}=this;if(this._complete){const n=()=>this._complete.call(this._context);zo.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(t,n){try{t.call(this._context,n)}catch(t){if(this.unsubscribe(),zo.useDeprecatedSynchronousErrorHandling)throw t;qo(t)}}__tryOrSetError(t,n,i){if(!zo.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{n.call(this._context,i)}catch(n){return zo.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=n,t.syncErrorThrown=!0,!0):(qo(n),!0)}return!1}_unsubscribe(){const{_parentSubscriber:t}=this;this._context=null,this._parentSubscriber=null,t.unsubscribe()}}const tu="function"==typeof Symbol&&Symbol.observable||"@@observable";function nu(){}class iu{constructor(t){this._isScalar=!1,t&&(this._subscribe=t)}lift(t){const n=new iu;return n.source=this,n.operator=t,n}subscribe(t,n,i){const{operator:r}=this,e=function(t,n,i){if(t){if(t instanceof Qo)return t;if(t[Zo])return t[Zo]()}return t||n||i?new Qo(t,n,i):new Qo($o)}(t,n,i);if(e.add(r?r.call(e,this.source):this.source||zo.useDeprecatedSynchronousErrorHandling&&!e.syncErrorThrowable?this._subscribe(e):this._trySubscribe(e)),zo.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable&&(e.syncErrorThrowable=!1,e.syncErrorThrown))throw e.syncErrorValue;return e}_trySubscribe(t){try{return this._subscribe(t)}catch(n){zo.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=n),function(t){for(;t;){const{closed:n,destination:i,isStopped:r}=t;if(n||r)return!1;t=i&&i instanceof Qo?i:null}return!0}(t)?t.error(n):console.warn(n)}}forEach(t,n){return new(n=ru(n))((n,i)=>{let r;r=this.subscribe(n=>{try{t(n)}catch(t){i(t),r&&r.unsubscribe()}},i,n)})}_subscribe(t){const{source:n}=this;return n&&n.subscribe(t)}[tu](){return this}pipe(...t){return 0===t.length?this:((n=t)?1===n.length?n[0]:function(t){return n.reduce((t,n)=>n(t),t)}:nu)(this);var n}toPromise(t){return new(t=ru(t))((t,n)=>{let i;this.subscribe(t=>i=t,t=>n(t),()=>t(i))})}}function ru(t){if(t||(t=Promise),!t)throw new Error("no Promise impl found");return t}function eu(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}iu.create=t=>new iu(t),eu.prototype=Object.create(Error.prototype);const su=eu;class ou extends Go{constructor(t,n){super(),this.subject=t,this.subscriber=n,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const t=this.subject,n=t.observers;if(this.subject=null,!n||0===n.length||t.isStopped||t.closed)return;const i=n.indexOf(this.subscriber);-1!==i&&n.splice(i,1)}}class uu extends Qo{constructor(t){super(t),this.destination=t}}class au extends iu{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[Zo](){return new uu(this)}lift(t){const n=new hu(this,this);return n.operator=t,n}next(t){if(this.closed)throw new su;if(!this.isStopped){const{observers:n}=this,i=n.length,r=n.slice();for(let n=0;n<i;n++)r[n].next(t)}}error(t){if(this.closed)throw new su;this.hasError=!0,this.thrownError=t,this.isStopped=!0;const{observers:n}=this,i=n.length,r=n.slice();for(let n=0;n<i;n++)r[n].error(t);this.observers.length=0}complete(){if(this.closed)throw new su;this.isStopped=!0;const{observers:t}=this,n=t.length,i=t.slice();for(let t=0;t<n;t++)i[t].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(t){if(this.closed)throw new su;return super._trySubscribe(t)}_subscribe(t){if(this.closed)throw new su;return this.hasError?(t.error(this.thrownError),Go.EMPTY):this.isStopped?(t.complete(),Go.EMPTY):(this.observers.push(t),new ou(this,t))}asObservable(){const t=new iu;return t.source=this,t}}au.create=(t,n)=>new hu(t,n);class hu extends au{constructor(t,n){super(),this.destination=t,this.source=n}next(t){const{destination:n}=this;n&&n.next&&n.next(t)}error(t){const{destination:n}=this;n&&n.error&&this.destination.error(t)}complete(){const{destination:t}=this;t&&t.complete&&this.destination.complete()}_subscribe(t){const{source:n}=this;return n?this.source.subscribe(t):Go.EMPTY}}class cu extends au{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const n=super._subscribe(t);return n&&!n.closed&&t.next(this._value),n}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new su;return this._value}next(t){super.next(this._value=t)}}new iu(t=>t.complete());const fu=t=>n=>{for(let i=0,r=t.length;i<r&&!n.closed;i++)n.next(t[i]);n.complete()};function lu(t,n){return new iu(i=>{const r=new Go;let e=0;return r.add(n.schedule((function(){e!==t.length?(i.next(t[e++]),i.closed||r.add(this.schedule())):i.complete()}))),r})}function vu(...t){let n=t[t.length-1];return(i=n)&&"function"==typeof i.schedule?(t.pop(),lu(t,n)):new iu(fu(t));var i}function du(t){return t}function pu(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}pu.prototype=Object.create(Error.prototype);const wu=pu;function mu(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}mu.prototype=Object.create(Error.prototype);const yu=mu;function gu(t,n){return function(i){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return i.lift(new Fu(t,n))}}class Fu{constructor(t,n){this.project=t,this.thisArg=n}call(t,n){return n.subscribe(new bu(t,this.project,this.thisArg))}}class bu extends Qo{constructor(t,n,i){super(t),this.project=n,this.count=0,this.thisArg=i||this}_next(t){let n;try{n=this.project.call(this.thisArg,t,this.count++)}catch(t){return void this.destination.error(t)}this.destination.next(n)}}class Eu extends Qo{notifyNext(t,n,i,r,e){this.destination.next(n)}notifyError(t,n){this.destination.error(t)}notifyComplete(t){this.destination.complete()}}class Su extends Qo{constructor(t,n,i){super(),this.parent=t,this.outerValue=n,this.outerIndex=i,this.index=0}_next(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)}_error(t){this.parent.notifyError(t,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}const Au="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator",ku=t=>t&&"number"==typeof t.length&&"function"!=typeof t;function Cu(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}const Tu=t=>{if(t&&"function"==typeof t[tu])return(t=>n=>{const i=t[tu]();if("function"!=typeof i.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return i.subscribe(n)})(t);if(ku(t))return fu(t);if(Cu(t))return(t=>n=>(t.then(t=>{n.closed||(n.next(t),n.complete())},t=>n.error(t)).then(null,qo),n))(t);if(t&&"function"==typeof t[Au])return(t=>n=>{const i=t[Au]();for(;;){const t=i.next();if(t.done){n.complete();break}if(n.next(t.value),n.closed)break}return"function"==typeof i.return&&n.add(()=>{i.return&&i.return()}),n})(t);{const n=Ko(t)?"an invalid object":`'${t}'`;throw new TypeError(`You provided ${n} where a stream was expected.`+" You can provide an Observable, Promise, Array, or Iterable.")}};function Iu(t,n,i,r,e=new Su(t,i,r)){if(!e.closed)return n instanceof iu?n.subscribe(e):Tu(n)(e)}function xu(t,n){return n?function(t,n){if(null!=t){if(function(t){return t&&"function"==typeof t[tu]}(t))return function(t,n){return new iu(i=>{const r=new Go;return r.add(n.schedule(()=>{const e=t[tu]();r.add(e.subscribe({next(t){r.add(n.schedule(()=>i.next(t)))},error(t){r.add(n.schedule(()=>i.error(t)))},complete(){r.add(n.schedule(()=>i.complete()))}}))})),r})}(t,n);if(Cu(t))return function(t,n){return new iu(i=>{const r=new Go;return r.add(n.schedule(()=>t.then(t=>{r.add(n.schedule(()=>{i.next(t),r.add(n.schedule(()=>i.complete()))}))},t=>{r.add(n.schedule(()=>i.error(t)))}))),r})}(t,n);if(ku(t))return lu(t,n);if(function(t){return t&&"function"==typeof t[Au]}(t)||"string"==typeof t)return function(t,n){if(!t)throw new Error("Iterable cannot be null");return new iu(i=>{const r=new Go;let e;return r.add(()=>{e&&"function"==typeof e.return&&e.return()}),r.add(n.schedule(()=>{e=t[Au](),r.add(n.schedule((function(){if(i.closed)return;let t,n;try{const i=e.next();t=i.value,n=i.done}catch(t){return void i.error(t)}n?i.complete():(i.next(t),this.schedule())})))})),r})}(t,n)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}(t,n):t instanceof iu?t:new iu(Tu(t))}function Ou(t,n){return new iu(i=>{const r=t.length;if(0===r)return void i.complete();const e=new Array(r);let s=0,o=0;for(let u=0;u<r;u++){const a=xu(t[u]);let h=!1;i.add(a.subscribe({next:t=>{h||(h=!0,o++),e[u]=t},error:t=>i.error(t),complete:()=>{++s!==r&&h||(o===r&&i.next(n?n.reduce((t,n,i)=>(t[n]=e[i],t),{}):e),i.complete())}}))}})}class Ru{constructor(t,n){this.predicate=t,this.thisArg=n}call(t,n){return n.subscribe(new Du(t,this.predicate,this.thisArg))}}class Du extends Qo{constructor(t,n,i){super(t),this.predicate=n,this.thisArg=i,this.count=0}_next(t){let n;try{n=this.predicate.call(this.thisArg,t,this.count++)}catch(t){return void this.destination.error(t)}n&&this.destination.next(t)}}var Nu;function ju(t){return function(n){const i=new _u(t),r=n.lift(i);return i.caught=r}}!function(t){t[t.Mp=1]="Mp",t[t.Okta=2]="Okta"}(Nu||(Nu={}));class _u{constructor(t){this.selector=t}call(t,n){return n.subscribe(new Pu(t,this.selector,this.caught))}}class Pu extends Eu{constructor(t,n,i){super(t),this.selector=n,this.caught=i}error(t){if(!this.isStopped){let n;try{n=this.selector(t,this.caught)}catch(t){return void super.error(t)}this._unsubscribeAndRecycle();const i=new Su(this,void 0,void 0);this.add(i),Iu(this,n,void 0,void 0,i)}}}class Mu{constructor(t){this.defaultValue=t}call(t,n){return n.subscribe(new Bu(t,this.defaultValue))}}class Bu extends Qo{constructor(t,n){super(t),this.defaultValue=n,this.isEmpty=!0}_next(t){this.isEmpty=!1,this.destination.next(t)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}function Lu(t=zu){return n=>n.lift(new Uu(t))}class Uu{constructor(t){this.errorFactory=t}call(t,n){return n.subscribe(new Hu(t,this.errorFactory))}}class Hu extends Qo{constructor(t,n){super(t),this.errorFactory=n,this.hasValue=!1}_next(t){this.hasValue=!0,this.destination.next(t)}_complete(){if(this.hasValue)return this.destination.complete();{let t;try{t=this.errorFactory()}catch(n){t=n}this.destination.error(t)}}}function zu(){return new yu}class qu{constructor(t){if(this.total=t,this.total<0)throw new wu}call(t,n){return n.subscribe(new $u(t,this.total))}}class $u extends Qo{constructor(t,n){super(t),this.total=n,this.count=0}_next(t){const n=this.total,i=++this.count;i<=n&&(this.destination.next(t),i===n&&(this.destination.complete(),this.unsubscribe()))}}function Vu(t,n){const i=arguments.length>=2;return r=>r.pipe(t?function(t){return function(n){return n.lift(new Ru(t,void 0))}}((n,i)=>t(n,i,r)):du,t=>t.lift(new qu(1)),i?function(t=null){return n=>n.lift(new Mu(t))}(n):Lu(()=>new yu))}function Ku(t,n){return"function"==typeof n?i=>i.pipe(Ku((i,r)=>xu(t(i,r)).pipe(gu((t,e)=>n(i,t,r,e))))):n=>n.lift(new Ju(t))}class Ju{constructor(t){this.project=t}call(t,n){return n.subscribe(new Yu(t,this.project))}}class Yu extends Eu{constructor(t,n){super(t),this.project=n,this.index=0}_next(t){let n;const i=this.index++;try{n=this.project(t,i)}catch(t){return void this.destination.error(t)}this._innerSub(n,t,i)}_innerSub(t,n,i){const r=this.innerSubscription;r&&r.unsubscribe();const e=new Su(this,void 0,void 0);this.destination.add(e),this.innerSubscription=Iu(this,t,n,i,e)}_complete(){const{innerSubscription:t}=this;t&&!t.closed||super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=null}notifyComplete(t){this.destination.remove(t),this.innerSubscription=null,this.isStopped&&super._complete()}notifyNext(t,n,i,r,e){this.destination.next(n)}}function Gu(t,n,i){return function(r){return r.lift(new Wu(t,n,i))}}class Wu{constructor(t,n,i){this.nextOrObserver=t,this.error=n,this.complete=i}call(t,n){return n.subscribe(new Zu(t,this.nextOrObserver,this.error,this.complete))}}class Zu extends Qo{constructor(t,n,i,r){super(t),this._tapNext=nu,this._tapError=nu,this._tapComplete=nu,this._tapError=i||nu,this._tapComplete=r||nu,Uo(n)?(this._context=this,this._tapNext=n):n&&(this._context=n,this._tapNext=n.next||nu,this._tapError=n.error||nu,this._tapComplete=n.complete||nu)}_next(t){try{this._tapNext.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.next(t)}_error(t){try{this._tapError.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.error(t)}_complete(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()}}class Qu{constructor(t=null,n=null){this.provider=Nu.Okta,null!=t&&(this.access_token=t),null!=n&&(this.id_token=n)}static From(t){const{access_token:n,id_token:i}=t;return new Qu(n,i)}}class Xu{constructor(t,n){this.log=n,this.oktaAuthClient=t}authenticated(){return this.getTokenDictionary().pipe(Ku(t=>t?vu(t):this.getTokensFromSession()))}signOut(){return xu(this.oktaAuthClient.signOut()).pipe(Vu(),gu(()=>(this.oktaAuthClient.tokenManager.clear(),this.log.Log("successfully logged out"),!0)),ju(t=>(this.log.Error("AUTHENTICATION SERICE: okta signout function returned error",t),vu(!1))))}subscribeToTokenExpiration(t){this.oktaAuthClient.tokenManager.on("expired",t)}subscribeToTokenRenewed(t){this.oktaAuthClient.tokenManager.on("renewed",t)}subscribeToTokenError(t){this.oktaAuthClient.tokenManager.on("error",t)}getTokenDictionary(){return function(...t){if(1===t.length){const i=t[0];if(Vo(i))return Ou(i,null);if(Ko(i)&&(!(n=i)||!(n instanceof iu||"function"==typeof n.lift&&"function"==typeof n.subscribe))){const t=Object.keys(i);return Ou(t.map(t=>i[t]),t)}}var n;if("function"==typeof t[t.length-1]){const n=t.pop();return Ou(t=1===t.length&&Vo(t[0])?t[0]:t,null).pipe(gu(t=>n(...t)))}return Ou(t,null)}([xu(this.oktaAuthClient.tokenManager.get("id_token")),xu(this.oktaAuthClient.tokenManager.get("access_token"))]).pipe(Vu(),gu(([t,n])=>t&&n?Qu.From({id_token:t,access_token:n}):null),ju(t=>(this.log.Error("AUTHENTICATION SERICE: okta tokenManager get function returned error",t),vu(null))))}getTokensFromSession(){return xu(this.oktaAuthClient.session.exists()).pipe(Vu(),Ku(t=>t?xu(this.oktaAuthClient.token.getWithoutPrompt({scopes:["openid","profile","email"],responseType:["id_token","token"]})).pipe(Vu(),Gu(t=>{this.oktaAuthClient.tokenManager.add("id_token",t[0]),this.oktaAuthClient.tokenManager.add("access_token",t[1])}),gu(t=>Qu.From({id_token:t[0],access_token:t[1]})),ju(t=>(this.log.Error("AUTHENTICATION SERICE: okta get without prompt function returned error",t),vu(null)))):vu(null)),ju(t=>(this.log.Error("AUTHENTICATION SERICE: okta session exists function returned error",t),vu(null))))}}class ta{constructor(t=null,n=null){this.provider=Nu.Mp,null!=t&&(this.access_token=t),null!=n&&(this.refresh_token=n)}static From(t){const{access_token:n,refresh_token:i}=t;return new ta(n,i)}}var na=L((function(t){t.exports=function(){function t(){for(var t=0,n={};t<arguments.length;t++){var i=arguments[t];for(var r in i)n[r]=i[r]}return n}function n(t){return t.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}return function i(r){function e(){}function s(n,i,s){if("undefined"!=typeof document){"number"==typeof(s=t({path:"/"},e.defaults,s)).expires&&(s.expires=new Date(1*new Date+864e5*s.expires)),s.expires=s.expires?s.expires.toUTCString():"";try{var o=JSON.stringify(i);/^[\{\[]/.test(o)&&(i=o)}catch(t){}i=r.write?r.write(i,n):encodeURIComponent(String(i)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),n=encodeURIComponent(String(n)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var u="";for(var a in s)s[a]&&(u+="; "+a,!0!==s[a]&&(u+="="+s[a].split(";")[0]));return document.cookie=n+"="+i+u}}function o(t,i){if("undefined"!=typeof document){for(var e={},s=document.cookie?document.cookie.split("; "):[],o=0;o<s.length;o++){var u=s[o].split("="),a=u.slice(1).join("=");i||'"'!==a.charAt(0)||(a=a.slice(1,-1));try{var h=n(u[0]);if(a=(r.read||r)(a,h)||n(a),i)try{a=JSON.parse(a)}catch(t){}if(e[h]=a,t===h)break}catch(t){}}return t?e[t]:e}}return e.set=s,e.get=function(t){return o(t,!1)},e.getJSON=function(t){return o(t,!0)},e.remove=function(n,i){s(n,"",t(i,{expires:-1}))},e.defaults={},e.withConverter=i,e}((function(){}))}()})),ia=!1,ra={};if(void 0===ea)var ea={};ea.lang={extend:function(t,n,i){if(!n||!t)throw new Error("YAHOO.lang.extend failed, please check that all dependencies are included.");var r=function(){};if(r.prototype=n.prototype,t.prototype=new r,t.prototype.constructor=t,t.superclass=n.prototype,n.prototype.constructor==Object.prototype.constructor&&(n.prototype.constructor=n),i){var e;for(e in i)t.prototype[e]=i[e];var s=function(){},o=["toString","valueOf"];try{/MSIE/.test(ia)&&(s=function(t,n){for(e=0;e<o.length;e+=1){var i=o[e],r=n[i];"function"==typeof r&&r!=Object.prototype[i]&&(t[i]=r)}})}catch(t){}s(t.prototype,i)}}};var sa,oa,ua,aa,ha,ca,fa=fa||function(t){var n={},i=n.lib={},r=i.Base=function(){function t(){}return{extend:function(n){t.prototype=this;var i=new t;return n&&i.mixIn(n),i.hasOwnProperty("init")||(i.init=function(){i.$super.init.apply(this,arguments)}),i.init.prototype=i,i.$super=this,i},create:function(){var t=this.extend();return t.init.apply(t,arguments),t},init:function(){},mixIn:function(t){for(var n in t)t.hasOwnProperty(n)&&(this[n]=t[n]);t.hasOwnProperty("toString")&&(this.toString=t.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),e=i.WordArray=r.extend({init:function(t,n){t=this.words=t||[],this.sigBytes=null!=n?n:4*t.length},toString:function(t){return(t||o).stringify(this)},concat:function(t){var n=this.words,i=t.words,r=this.sigBytes,e=t.sigBytes;if(this.clamp(),r%4)for(var s=0;s<e;s++)n[r+s>>>2]|=(i[s>>>2]>>>24-s%4*8&255)<<24-(r+s)%4*8;else for(s=0;s<e;s+=4)n[r+s>>>2]=i[s>>>2];return this.sigBytes+=e,this},clamp:function(){var n=this.words,i=this.sigBytes;n[i>>>2]&=4294967295<<32-i%4*8,n.length=t.ceil(i/4)},clone:function(){var t=r.clone.call(this);return t.words=this.words.slice(0),t},random:function(n){for(var i=[],r=0;r<n;r+=4)i.push(4294967296*t.random()|0);return new e.init(i,n)}}),s=n.enc={},o=s.Hex={stringify:function(t){for(var n=t.words,i=t.sigBytes,r=[],e=0;e<i;e++){var s=n[e>>>2]>>>24-e%4*8&255;r.push((s>>>4).toString(16)),r.push((15&s).toString(16))}return r.join("")},parse:function(t){for(var n=t.length,i=[],r=0;r<n;r+=2)i[r>>>3]|=parseInt(t.substr(r,2),16)<<24-r%8*4;return new e.init(i,n/2)}},u=s.Latin1={stringify:function(t){for(var n=t.words,i=t.sigBytes,r=[],e=0;e<i;e++)r.push(String.fromCharCode(n[e>>>2]>>>24-e%4*8&255));return r.join("")},parse:function(t){for(var n=t.length,i=[],r=0;r<n;r++)i[r>>>2]|=(255&t.charCodeAt(r))<<24-r%4*8;return new e.init(i,n)}},a=s.Utf8={stringify:function(t){try{return decodeURIComponent(escape(u.stringify(t)))}catch(t){throw new Error("Malformed UTF-8 data")}},parse:function(t){return u.parse(unescape(encodeURIComponent(t)))}},h=i.BufferedBlockAlgorithm=r.extend({reset:function(){this._data=new e.init,this._nDataBytes=0},_append:function(t){"string"==typeof t&&(t=a.parse(t)),this._data.concat(t),this._nDataBytes+=t.sigBytes},_process:function(n){var i=this._data,r=i.words,s=i.sigBytes,o=this.blockSize,u=s/(4*o),a=(u=n?t.ceil(u):t.max((0|u)-this._minBufferSize,0))*o,h=t.min(4*a,s);if(a){for(var c=0;c<a;c+=o)this._doProcessBlock(r,c);var f=r.splice(0,a);i.sigBytes-=h}return new e.init(f,h)},clone:function(){var t=r.clone.call(this);return t._data=this._data.clone(),t},_minBufferSize:0}),c=(i.Hasher=h.extend({cfg:r.extend(),init:function(t){this.cfg=this.cfg.extend(t),this.reset()},reset:function(){h.reset.call(this),this._doReset()},update:function(t){return this._append(t),this._process(),this},finalize:function(t){return t&&this._append(t),this._doFinalize()},blockSize:16,_createHelper:function(t){return function(n,i){return new t.init(i).finalize(n)}},_createHmacHelper:function(t){return function(n,i){return new c.HMAC.init(t,i).finalize(n)}}}),n.algo={});return n}(Math);!function(){var t,n=(t=fa).lib,i=n.Base,r=n.WordArray;(t=t.x64={}).Word=i.extend({init:function(t,n){this.high=t,this.low=n}}),t.WordArray=i.extend({init:function(t,n){t=this.words=t||[],this.sigBytes=null!=n?n:8*t.length},toX32:function(){for(var t=this.words,n=t.length,i=[],e=0;e<n;e++){var s=t[e];i.push(s.high),i.push(s.low)}return r.create(i,this.sigBytes)},clone:function(){for(var t=i.clone.call(this),n=t.words=this.words.slice(0),r=n.length,e=0;e<r;e++)n[e]=n[e].clone();return t}})}(),fa.lib.Cipher||function(){var t=(l=fa).lib,n=t.Base,i=t.WordArray,r=t.BufferedBlockAlgorithm,e=l.enc.Base64,s=l.algo.EvpKDF,o=t.Cipher=r.extend({cfg:n.extend(),createEncryptor:function(t,n){return this.create(this._ENC_XFORM_MODE,t,n)},createDecryptor:function(t,n){return this.create(this._DEC_XFORM_MODE,t,n)},init:function(t,n,i){this.cfg=this.cfg.extend(i),this._xformMode=t,this._key=n,this.reset()},reset:function(){r.reset.call(this),this._doReset()},process:function(t){return this._append(t),this._process()},finalize:function(t){return t&&this._append(t),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(t){return{encrypt:function(n,i,r){return("string"==typeof i?v:f).encrypt(t,n,i,r)},decrypt:function(n,i,r){return("string"==typeof i?v:f).decrypt(t,n,i,r)}}}});t.StreamCipher=o.extend({_doFinalize:function(){return this._process(!0)},blockSize:1});var u=l.mode={},a=function(t,n,i){var r=this._iv;r?this._iv=void 0:r=this._prevBlock;for(var e=0;e<i;e++)t[n+e]^=r[e]},h=(t.BlockCipherMode=n.extend({createEncryptor:function(t,n){return this.Encryptor.create(t,n)},createDecryptor:function(t,n){return this.Decryptor.create(t,n)},init:function(t,n){this._cipher=t,this._iv=n}})).extend();h.Encryptor=h.extend({processBlock:function(t,n){var i=this._cipher,r=i.blockSize;a.call(this,t,n,r),i.encryptBlock(t,n),this._prevBlock=t.slice(n,n+r)}}),h.Decryptor=h.extend({processBlock:function(t,n){var i=this._cipher,r=i.blockSize,e=t.slice(n,n+r);i.decryptBlock(t,n),a.call(this,t,n,r),this._prevBlock=e}}),u=u.CBC=h,h=(l.pad={}).Pkcs7={pad:function(t,n){for(var r,e=(r=(r=4*n)-t.sigBytes%r)<<24|r<<16|r<<8|r,s=[],o=0;o<r;o+=4)s.push(e);r=i.create(s,r),t.concat(r)},unpad:function(t){t.sigBytes-=255&t.words[t.sigBytes-1>>>2]}},t.BlockCipher=o.extend({cfg:o.cfg.extend({mode:u,padding:h}),reset:function(){o.reset.call(this);var t=(n=this.cfg).iv,n=n.mode;if(this._xformMode==this._ENC_XFORM_MODE)var i=n.createEncryptor;else i=n.createDecryptor,this._minBufferSize=1;this._mode=i.call(n,this,t&&t.words)},_doProcessBlock:function(t,n){this._mode.processBlock(t,n)},_doFinalize:function(){var t=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){t.pad(this._data,this.blockSize);var n=this._process(!0)}else n=this._process(!0),t.unpad(n);return n},blockSize:4});var c=t.CipherParams=n.extend({init:function(t){this.mixIn(t)},toString:function(t){return(t||this.formatter).stringify(this)}}),f=(u=(l.format={}).OpenSSL={stringify:function(t){var n=t.ciphertext;return((t=t.salt)?i.create([1398893684,1701076831]).concat(t).concat(n):n).toString(e)},parse:function(t){var n=(t=e.parse(t)).words;if(1398893684==n[0]&&1701076831==n[1]){var r=i.create(n.slice(2,4));n.splice(0,4),t.sigBytes-=16}return c.create({ciphertext:t,salt:r})}},t.SerializableCipher=n.extend({cfg:n.extend({format:u}),encrypt:function(t,n,i,r){r=this.cfg.extend(r);var e=t.createEncryptor(i,r);return n=e.finalize(n),c.create({ciphertext:n,key:i,iv:(e=e.cfg).iv,algorithm:t,mode:e.mode,padding:e.padding,blockSize:t.blockSize,formatter:r.format})},decrypt:function(t,n,i,r){return r=this.cfg.extend(r),n=this._parse(n,r.format),t.createDecryptor(i,r).finalize(n.ciphertext)},_parse:function(t,n){return"string"==typeof t?n.parse(t,this):t}})),l=(l.kdf={}).OpenSSL={execute:function(t,n,r,e){return e||(e=i.random(8)),t=s.create({keySize:n+r}).compute(t,e),r=i.create(t.words.slice(n),4*r),t.sigBytes=4*n,c.create({key:t,iv:r,salt:e})}},v=t.PasswordBasedCipher=f.extend({cfg:f.cfg.extend({kdf:l}),encrypt:function(t,n,i,r){return i=(r=this.cfg.extend(r)).kdf.execute(i,t.keySize,t.ivSize),r.iv=i.iv,(t=f.encrypt.call(this,t,n,i.key,r)).mixIn(i),t},decrypt:function(t,n,i,r){return r=this.cfg.extend(r),n=this._parse(n,r.format),i=r.kdf.execute(i,t.keySize,t.ivSize,n.salt),r.iv=i.iv,f.decrypt.call(this,t,n,i.key,r)}})}(),function(){for(var t=fa,n=t.lib.BlockCipher,i=t.algo,r=[],e=[],s=[],o=[],u=[],a=[],h=[],c=[],f=[],l=[],v=[],d=0;256>d;d++)v[d]=128>d?d<<1:d<<1^283;var p=0,w=0;for(d=0;256>d;d++){var m;r[p]=m=(m=w^w<<1^w<<2^w<<3^w<<4)>>>8^255&m^99,e[m]=p;var y=v[p],g=v[y],F=v[g],b=257*v[m]^16843008*m;s[p]=b<<24|b>>>8,o[p]=b<<16|b>>>16,u[p]=b<<8|b>>>24,a[p]=b,h[m]=(b=16843009*F^65537*g^257*y^16843008*p)<<24|b>>>8,c[m]=b<<16|b>>>16,f[m]=b<<8|b>>>24,l[m]=b,p?(p=y^v[v[v[F^y]]],w^=v[v[w]]):p=w=1}var E=[0,1,2,4,8,16,32,64,128,27,54];i=i.AES=n.extend({_doReset:function(){for(var t=(i=this._key).words,n=i.sigBytes/4,i=4*((this._nRounds=n+6)+1),e=this._keySchedule=[],s=0;s<i;s++)if(s<n)e[s]=t[s];else{var o=e[s-1];s%n?6<n&&4==s%n&&(o=r[o>>>24]<<24|r[o>>>16&255]<<16|r[o>>>8&255]<<8|r[255&o]):(o=r[(o=o<<8|o>>>24)>>>24]<<24|r[o>>>16&255]<<16|r[o>>>8&255]<<8|r[255&o],o^=E[s/n|0]<<24),e[s]=e[s-n]^o}for(t=this._invKeySchedule=[],n=0;n<i;n++)s=i-n,o=n%4?e[s]:e[s-4],t[n]=4>n||4>=s?o:h[r[o>>>24]]^c[r[o>>>16&255]]^f[r[o>>>8&255]]^l[r[255&o]]},encryptBlock:function(t,n){this._doCryptBlock(t,n,this._keySchedule,s,o,u,a,r)},decryptBlock:function(t,n){var i=t[n+1];t[n+1]=t[n+3],t[n+3]=i,this._doCryptBlock(t,n,this._invKeySchedule,h,c,f,l,e),i=t[n+1],t[n+1]=t[n+3],t[n+3]=i},_doCryptBlock:function(t,n,i,r,e,s,o,u){for(var a=this._nRounds,h=t[n]^i[0],c=t[n+1]^i[1],f=t[n+2]^i[2],l=t[n+3]^i[3],v=4,d=1;d<a;d++){var p=r[h>>>24]^e[c>>>16&255]^s[f>>>8&255]^o[255&l]^i[v++],w=r[c>>>24]^e[f>>>16&255]^s[l>>>8&255]^o[255&h]^i[v++],m=r[f>>>24]^e[l>>>16&255]^s[h>>>8&255]^o[255&c]^i[v++];l=r[l>>>24]^e[h>>>16&255]^s[c>>>8&255]^o[255&f]^i[v++],h=p,c=w,f=m}p=(u[h>>>24]<<24|u[c>>>16&255]<<16|u[f>>>8&255]<<8|u[255&l])^i[v++],w=(u[c>>>24]<<24|u[f>>>16&255]<<16|u[l>>>8&255]<<8|u[255&h])^i[v++],m=(u[f>>>24]<<24|u[l>>>16&255]<<16|u[h>>>8&255]<<8|u[255&c])^i[v++],l=(u[l>>>24]<<24|u[h>>>16&255]<<16|u[c>>>8&255]<<8|u[255&f])^i[v++],t[n]=p,t[n+1]=w,t[n+2]=m,t[n+3]=l},keySize:8}),t.AES=n._createHelper(i)}(),function(){function t(t,n){var i=(this._lBlock>>>t^this._rBlock)&n;this._rBlock^=i,this._lBlock^=i<<t}function n(t,n){var i=(this._rBlock>>>t^this._lBlock)&n;this._lBlock^=i,this._rBlock^=i<<t}var i,r=fa,e=(i=r.lib).WordArray,s=r.algo,o=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],u=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],a=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],h=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],c=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],f=s.DES=(i=i.BlockCipher).extend({_doReset:function(){for(var t=this._key.words,n=[],i=0;56>i;i++){var r=o[i]-1;n[i]=t[r>>>5]>>>31-r%32&1}for(t=this._subKeys=[],r=0;16>r;r++){var e=t[r]=[],s=a[r];for(i=0;24>i;i++)e[i/6|0]|=n[(u[i]-1+s)%28]<<31-i%6,e[4+(i/6|0)]|=n[28+(u[i+24]-1+s)%28]<<31-i%6;for(e[0]=e[0]<<1|e[0]>>>31,i=1;7>i;i++)e[i]>>>=4*(i-1)+3;e[7]=e[7]<<5|e[7]>>>27}for(n=this._invSubKeys=[],i=0;16>i;i++)n[i]=t[15-i]},encryptBlock:function(t,n){this._doCryptBlock(t,n,this._subKeys)},decryptBlock:function(t,n){this._doCryptBlock(t,n,this._invSubKeys)},_doCryptBlock:function(i,r,e){this._lBlock=i[r],this._rBlock=i[r+1],t.call(this,4,252645135),t.call(this,16,65535),n.call(this,2,858993459),n.call(this,8,16711935),t.call(this,1,1431655765);for(var s=0;16>s;s++){for(var o=e[s],u=this._lBlock,a=this._rBlock,f=0,l=0;8>l;l++)f|=h[l][((a^o[l])&c[l])>>>0];this._lBlock=a,this._rBlock=u^f}e=this._lBlock,this._lBlock=this._rBlock,this._rBlock=e,t.call(this,1,1431655765),n.call(this,8,16711935),n.call(this,2,858993459),t.call(this,16,65535),t.call(this,4,252645135),i[r]=this._lBlock,i[r+1]=this._rBlock},keySize:2,ivSize:2,blockSize:2});r.DES=i._createHelper(f),s=s.TripleDES=i.extend({_doReset:function(){var t=this._key.words;this._des1=f.createEncryptor(e.create(t.slice(0,2))),this._des2=f.createEncryptor(e.create(t.slice(2,4))),this._des3=f.createEncryptor(e.create(t.slice(4,6)))},encryptBlock:function(t,n){this._des1.encryptBlock(t,n),this._des2.decryptBlock(t,n),this._des3.encryptBlock(t,n)},decryptBlock:function(t,n){this._des3.decryptBlock(t,n),this._des2.encryptBlock(t,n),this._des1.decryptBlock(t,n)},keySize:6,ivSize:2,blockSize:2}),r.TripleDES=i._createHelper(s)}(),sa=fa.lib.WordArray,fa.enc.Base64={stringify:function(t){var n=t.words,i=t.sigBytes,r=this._map;t.clamp(),t=[];for(var e=0;e<i;e+=3)for(var s=(n[e>>>2]>>>24-e%4*8&255)<<16|(n[e+1>>>2]>>>24-(e+1)%4*8&255)<<8|n[e+2>>>2]>>>24-(e+2)%4*8&255,o=0;4>o&&e+.75*o<i;o++)t.push(r.charAt(s>>>6*(3-o)&63));if(n=r.charAt(64))for(;t.length%4;)t.push(n);return t.join("")},parse:function(t){var n=t.length,i=this._map;(r=i.charAt(64))&&-1!=(r=t.indexOf(r))&&(n=r);for(var r=[],e=0,s=0;s<n;s++)if(s%4){var o=i.indexOf(t.charAt(s-1))<<s%4*2,u=i.indexOf(t.charAt(s))>>>6-s%4*2;r[e>>>2]|=(o|u)<<24-e%4*8,e++}return sa.create(r,e)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},function(t){function n(t,n,i,r,e,s,o){return((t=t+(n&i|~n&r)+e+o)<<s|t>>>32-s)+n}function i(t,n,i,r,e,s,o){return((t=t+(n&r|i&~r)+e+o)<<s|t>>>32-s)+n}function r(t,n,i,r,e,s,o){return((t=t+(n^i^r)+e+o)<<s|t>>>32-s)+n}function e(t,n,i,r,e,s,o){return((t=t+(i^(n|~r))+e+o)<<s|t>>>32-s)+n}for(var s=fa,o=(a=s.lib).WordArray,u=a.Hasher,a=s.algo,h=[],c=0;64>c;c++)h[c]=4294967296*t.abs(t.sin(c+1))|0;a=a.MD5=u.extend({_doReset:function(){this._hash=new o.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(t,s){for(var o=0;16>o;o++)t[u=s+o]=16711935&((a=t[u])<<8|a>>>24)|4278255360&(a<<24|a>>>8);var u,a=t[s+1],c=t[s+2],f=t[s+3],l=t[s+4],v=t[s+5],d=t[s+6],p=t[s+7],w=t[s+8],m=t[s+9],y=t[s+10],g=t[s+11],F=t[s+12],b=t[s+13],E=t[s+14],S=t[s+15],A=n(A=(o=this._hash.words)[0],T=o[1],C=o[2],k=o[3],u=t[s+0],7,h[0]),k=n(k,A,T,C,a,12,h[1]),C=n(C,k,A,T,c,17,h[2]),T=n(T,C,k,A,f,22,h[3]);A=n(A,T,C,k,l,7,h[4]),k=n(k,A,T,C,v,12,h[5]),C=n(C,k,A,T,d,17,h[6]),T=n(T,C,k,A,p,22,h[7]),A=n(A,T,C,k,w,7,h[8]),k=n(k,A,T,C,m,12,h[9]),C=n(C,k,A,T,y,17,h[10]),T=n(T,C,k,A,g,22,h[11]),A=n(A,T,C,k,F,7,h[12]),k=n(k,A,T,C,b,12,h[13]),C=n(C,k,A,T,E,17,h[14]),A=i(A,T=n(T,C,k,A,S,22,h[15]),C,k,a,5,h[16]),k=i(k,A,T,C,d,9,h[17]),C=i(C,k,A,T,g,14,h[18]),T=i(T,C,k,A,u,20,h[19]),A=i(A,T,C,k,v,5,h[20]),k=i(k,A,T,C,y,9,h[21]),C=i(C,k,A,T,S,14,h[22]),T=i(T,C,k,A,l,20,h[23]),A=i(A,T,C,k,m,5,h[24]),k=i(k,A,T,C,E,9,h[25]),C=i(C,k,A,T,f,14,h[26]),T=i(T,C,k,A,w,20,h[27]),A=i(A,T,C,k,b,5,h[28]),k=i(k,A,T,C,c,9,h[29]),C=i(C,k,A,T,p,14,h[30]),A=r(A,T=i(T,C,k,A,F,20,h[31]),C,k,v,4,h[32]),k=r(k,A,T,C,w,11,h[33]),C=r(C,k,A,T,g,16,h[34]),T=r(T,C,k,A,E,23,h[35]),A=r(A,T,C,k,a,4,h[36]),k=r(k,A,T,C,l,11,h[37]),C=r(C,k,A,T,p,16,h[38]),T=r(T,C,k,A,y,23,h[39]),A=r(A,T,C,k,b,4,h[40]),k=r(k,A,T,C,u,11,h[41]),C=r(C,k,A,T,f,16,h[42]),T=r(T,C,k,A,d,23,h[43]),A=r(A,T,C,k,m,4,h[44]),k=r(k,A,T,C,F,11,h[45]),C=r(C,k,A,T,S,16,h[46]),A=e(A,T=r(T,C,k,A,c,23,h[47]),C,k,u,6,h[48]),k=e(k,A,T,C,p,10,h[49]),C=e(C,k,A,T,E,15,h[50]),T=e(T,C,k,A,v,21,h[51]),A=e(A,T,C,k,F,6,h[52]),k=e(k,A,T,C,f,10,h[53]),C=e(C,k,A,T,y,15,h[54]),T=e(T,C,k,A,a,21,h[55]),A=e(A,T,C,k,w,6,h[56]),k=e(k,A,T,C,S,10,h[57]),C=e(C,k,A,T,d,15,h[58]),T=e(T,C,k,A,b,21,h[59]),A=e(A,T,C,k,l,6,h[60]),k=e(k,A,T,C,g,10,h[61]),C=e(C,k,A,T,c,15,h[62]),T=e(T,C,k,A,m,21,h[63]),o[0]=o[0]+A|0,o[1]=o[1]+T|0,o[2]=o[2]+C|0,o[3]=o[3]+k|0},_doFinalize:function(){var n=this._data,i=n.words,r=8*this._nDataBytes,e=8*n.sigBytes;i[e>>>5]|=128<<24-e%32;var s=t.floor(r/4294967296);for(i[15+(e+64>>>9<<4)]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),i[14+(e+64>>>9<<4)]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8),n.sigBytes=4*(i.length+1),this._process(),i=(n=this._hash).words,r=0;4>r;r++)i[r]=16711935&((e=i[r])<<8|e>>>24)|4278255360&(e<<24|e>>>8);return n},clone:function(){var t=u.clone.call(this);return t._hash=this._hash.clone(),t}}),s.MD5=u._createHelper(a),s.HmacMD5=u._createHmacHelper(a)}(Math),ua=(ca=(oa=fa).lib).WordArray,ha=[],ca=oa.algo.SHA1=(aa=ca.Hasher).extend({_doReset:function(){this._hash=new ua.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(t,n){for(var i=this._hash.words,r=i[0],e=i[1],s=i[2],o=i[3],u=i[4],a=0;80>a;a++){if(16>a)ha[a]=0|t[n+a];else{var h=ha[a-3]^ha[a-8]^ha[a-14]^ha[a-16];ha[a]=h<<1|h>>>31}h=(r<<5|r>>>27)+u+ha[a],h=20>a?h+(1518500249+(e&s|~e&o)):40>a?h+(1859775393+(e^s^o)):60>a?h+((e&s|e&o|s&o)-1894007588):h+((e^s^o)-899497514),u=o,o=s,s=e<<30|e>>>2,e=r,r=h}i[0]=i[0]+r|0,i[1]=i[1]+e|0,i[2]=i[2]+s|0,i[3]=i[3]+o|0,i[4]=i[4]+u|0},_doFinalize:function(){var t=this._data,n=t.words,i=8*this._nDataBytes,r=8*t.sigBytes;return n[r>>>5]|=128<<24-r%32,n[14+(r+64>>>9<<4)]=Math.floor(i/4294967296),n[15+(r+64>>>9<<4)]=i,t.sigBytes=4*n.length,this._process(),this._hash},clone:function(){var t=aa.clone.call(this);return t._hash=this._hash.clone(),t}}),oa.SHA1=aa._createHelper(ca),oa.HmacSHA1=aa._createHmacHelper(ca),function(t){for(var n=fa,i=(e=n.lib).WordArray,r=e.Hasher,e=n.algo,s=[],o=[],u=function(t){return 4294967296*(t-(0|t))|0},a=2,h=0;64>h;){var c;t:{for(var f=t.sqrt(c=a),l=2;l<=f;l++)if(!(c%l)){c=!1;break t}c=!0}c&&(8>h&&(s[h]=u(t.pow(a,.5))),o[h]=u(t.pow(a,1/3)),h++),a++}var v=[];e=e.SHA256=r.extend({_doReset:function(){this._hash=new i.init(s.slice(0))},_doProcessBlock:function(t,n){for(var i=this._hash.words,r=i[0],e=i[1],s=i[2],u=i[3],a=i[4],h=i[5],c=i[6],f=i[7],l=0;64>l;l++){if(16>l)v[l]=0|t[n+l];else{var d=v[l-15],p=v[l-2];v[l]=((d<<25|d>>>7)^(d<<14|d>>>18)^d>>>3)+v[l-7]+((p<<15|p>>>17)^(p<<13|p>>>19)^p>>>10)+v[l-16]}d=f+((a<<26|a>>>6)^(a<<21|a>>>11)^(a<<7|a>>>25))+(a&h^~a&c)+o[l]+v[l],p=((r<<30|r>>>2)^(r<<19|r>>>13)^(r<<10|r>>>22))+(r&e^r&s^e&s),f=c,c=h,h=a,a=u+d|0,u=s,s=e,e=r,r=d+p|0}i[0]=i[0]+r|0,i[1]=i[1]+e|0,i[2]=i[2]+s|0,i[3]=i[3]+u|0,i[4]=i[4]+a|0,i[5]=i[5]+h|0,i[6]=i[6]+c|0,i[7]=i[7]+f|0},_doFinalize:function(){var n=this._data,i=n.words,r=8*this._nDataBytes,e=8*n.sigBytes;return i[e>>>5]|=128<<24-e%32,i[14+(e+64>>>9<<4)]=t.floor(r/4294967296),i[15+(e+64>>>9<<4)]=r,n.sigBytes=4*i.length,this._process(),this._hash},clone:function(){var t=r.clone.call(this);return t._hash=this._hash.clone(),t}}),n.SHA256=r._createHelper(e),n.HmacSHA256=r._createHmacHelper(e)}(Math),function(){var t=fa,n=t.lib.WordArray,i=(r=t.algo).SHA256,r=r.SHA224=i.extend({_doReset:function(){this._hash=new n.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var t=i._doFinalize.call(this);return t.sigBytes-=4,t}});t.SHA224=i._createHelper(r),t.HmacSHA224=i._createHmacHelper(r)}(),function(){function t(){return r.create.apply(r,arguments)}for(var n=fa,i=n.lib.Hasher,r=(s=n.x64).Word,e=s.WordArray,s=n.algo,o=[t(1116352408,3609767458),t(1899447441,602891725),t(3049323471,3964484399),t(3921009573,2173295548),t(961987163,4081628472),t(1508970993,3053834265),t(2453635748,2937671579),t(2870763221,3664609560),t(3624381080,2734883394),t(310598401,1164996542),t(607225278,1323610764),t(1426881987,3590304994),t(1925078388,4068182383),t(2162078206,991336113),t(2614888103,633803317),t(3248222580,3479774868),t(3835390401,2666613458),t(4022224774,944711139),t(264347078,2341262773),t(604807628,2007800933),t(770255983,1495990901),t(1249150122,1856431235),t(1555081692,3175218132),t(1996064986,2198950837),t(2554220882,3999719339),t(2821834349,766784016),t(2952996808,2566594879),t(3210313671,3203337956),t(3336571891,1034457026),t(3584528711,2466948901),t(113926993,3758326383),t(338241895,168717936),t(666307205,1188179964),t(773529912,1546045734),t(1294757372,1522805485),t(1396182291,2643833823),t(1695183700,2343527390),t(1986661051,1014477480),t(2177026350,1206759142),t(2456956037,344077627),t(2730485921,1290863460),t(2820302411,3158454273),t(3259730800,3505952657),t(3345764771,106217008),t(3516065817,3606008344),t(3600352804,1432725776),t(4094571909,1467031594),t(275423344,851169720),t(430227734,3100823752),t(506948616,1363258195),t(659060556,3750685593),t(883997877,3785050280),t(958139571,3318307427),t(1322822218,3812723403),t(1537002063,2003034995),t(1747873779,3602036899),t(1955562222,1575990012),t(2024104815,1125592928),t(2227730452,2716904306),t(2361852424,442776044),t(2428436474,593698344),t(2756734187,3733110249),t(3204031479,2999351573),t(3329325298,3815920427),t(3391569614,3928383900),t(3515267271,566280711),t(3940187606,3454069534),t(4118630271,4000239992),t(116418474,1914138554),t(174292421,2731055270),t(289380356,3203993006),t(460393269,320620315),t(685471733,587496836),t(852142971,1086792851),t(1017036298,365543100),t(1126000580,2618297676),t(1288033470,3409855158),t(1501505948,4234509866),t(1607167915,987167468),t(1816402316,1246189591)],u=[],a=0;80>a;a++)u[a]=t();s=s.SHA512=i.extend({_doReset:function(){this._hash=new e.init([new r.init(1779033703,4089235720),new r.init(3144134277,2227873595),new r.init(1013904242,4271175723),new r.init(2773480762,1595750129),new r.init(1359893119,2917565137),new r.init(2600822924,725511199),new r.init(528734635,4215389547),new r.init(1541459225,327033209)])},_doProcessBlock:function(t,n){for(var i,r=(i=this._hash.words)[0],e=i[1],s=i[2],a=i[3],h=i[4],c=i[5],f=i[6],l=r.high,v=r.low,d=e.high,p=e.low,w=s.high,m=s.low,y=a.high,g=a.low,F=h.high,b=h.low,E=c.high,S=c.low,A=f.high,k=f.low,C=(i=i[7]).high,T=i.low,I=l,x=v,O=d,R=p,D=w,N=m,j=y,_=g,P=F,M=b,B=E,L=S,U=A,H=k,z=C,q=T,$=0;80>$;$++){var V=u[$];if(16>$)var K=V.high=0|t[n+2*$],J=V.low=0|t[n+2*$+1];else{K=((J=(K=u[$-15]).high)>>>1|(Y=K.low)<<31)^(J>>>8|Y<<24)^J>>>7;var Y=(Y>>>1|J<<31)^(Y>>>8|J<<24)^(Y>>>7|J<<25),G=((J=(G=u[$-2]).high)>>>19|(W=G.low)<<13)^(J<<3|W>>>29)^J>>>6,W=(W>>>19|J<<13)^(W<<3|J>>>29)^(W>>>6|J<<26);V.high=K=(K=(K=K+(Z=(J=u[$-7]).high)+((J=Y+J.low)>>>0<Y>>>0?1:0))+G+((J+=W)>>>0<W>>>0?1:0))+(it=(Q=u[$-16]).high)+((J+=Q=Q.low)>>>0<Q>>>0?1:0),V.low=J}var Z=P&B^~P&U,Q=M&L^~M&H,X=(V=I&O^I&D^O&D,x&R^x&N^R&N),tt=(W=o[$]).high,nt=W.low,it=z+((P>>>14|M<<18)^(P>>>18|M<<14)^(P<<23|M>>>9))+((W=q+((M>>>14|P<<18)^(M>>>18|P<<14)^(M<<23|P>>>9)))>>>0<q>>>0?1:0);z=U,q=H,U=B,H=L,B=P,L=M,P=j+(it=(it=(it=it+Z+((W+=Q)>>>0<Q>>>0?1:0))+tt+((W+=nt)>>>0<nt>>>0?1:0))+K+((W+=J)>>>0<J>>>0?1:0))+((M=_+W|0)>>>0<_>>>0?1:0)|0,j=D,_=N,D=O,N=R,O=I,R=x,I=it+(V=(Y=(I>>>28|x<<4)^(I<<30|x>>>2)^(I<<25|x>>>7))+V+((J=(G=(x>>>28|I<<4)^(x<<30|I>>>2)^(x<<25|I>>>7))+X)>>>0<G>>>0?1:0))+((x=W+J|0)>>>0<W>>>0?1:0)|0}v=r.low=v+x,r.high=l+I+(v>>>0<x>>>0?1:0),p=e.low=p+R,e.high=d+O+(p>>>0<R>>>0?1:0),m=s.low=m+N,s.high=w+D+(m>>>0<N>>>0?1:0),g=a.low=g+_,a.high=y+j+(g>>>0<_>>>0?1:0),b=h.low=b+M,h.high=F+P+(b>>>0<M>>>0?1:0),S=c.low=S+L,c.high=E+B+(S>>>0<L>>>0?1:0),k=f.low=k+H,f.high=A+U+(k>>>0<H>>>0?1:0),T=i.low=T+q,i.high=C+z+(T>>>0<q>>>0?1:0)},_doFinalize:function(){var t=this._data,n=t.words,i=8*this._nDataBytes,r=8*t.sigBytes;return n[r>>>5]|=128<<24-r%32,n[30+(r+128>>>10<<5)]=Math.floor(i/4294967296),n[31+(r+128>>>10<<5)]=i,t.sigBytes=4*n.length,this._process(),this._hash.toX32()},clone:function(){var t=i.clone.call(this);return t._hash=this._hash.clone(),t},blockSize:32}),n.SHA512=i._createHelper(s),n.HmacSHA512=i._createHmacHelper(s)}(),function(){var t=fa,n=(e=t.x64).Word,i=e.WordArray,r=(e=t.algo).SHA512,e=e.SHA384=r.extend({_doReset:function(){this._hash=new i.init([new n.init(3418070365,3238371032),new n.init(1654270250,914150663),new n.init(2438529370,812702999),new n.init(355462360,4144912697),new n.init(1731405415,4290775857),new n.init(2394180231,1750603025),new n.init(3675008525,1694076839),new n.init(1203062813,3204075428)])},_doFinalize:function(){var t=r._doFinalize.call(this);return t.sigBytes-=16,t}});t.SHA384=r._createHelper(e),t.HmacSHA384=r._createHmacHelper(e)}(),function(){var t=fa,n=(r=t.lib).WordArray,i=r.Hasher,r=t.algo,e=n.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),s=n.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),o=n.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),u=n.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),a=n.create([0,1518500249,1859775393,2400959708,2840853838]),h=n.create([1352829926,1548603684,1836072691,2053994217,0]);r=r.RIPEMD160=i.extend({_doReset:function(){this._hash=n.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(t,n){for(var i=0;16>i;i++)t[r=n+i]=16711935&((b=t[r])<<8|b>>>24)|4278255360&(b<<24|b>>>8);var r,c,f,l,v,d,p,w,m,y,g,F,b=a.words,E=h.words,S=e.words,A=s.words,k=o.words,C=u.words;for(p=c=(r=this._hash.words)[0],w=f=r[1],m=l=r[2],y=v=r[3],g=d=r[4],i=0;80>i;i+=1)F=c+t[n+S[i]]|0,F=16>i?F+((f^l^v)+b[0]):32>i?F+((f&l|~f&v)+b[1]):48>i?F+(((f|~l)^v)+b[2]):64>i?F+((f&v|l&~v)+b[3]):F+((f^(l|~v))+b[4]),F=(F=(F|=0)<<k[i]|F>>>32-k[i])+d|0,c=d,d=v,v=l<<10|l>>>22,l=f,f=F,F=p+t[n+A[i]]|0,F=16>i?F+((w^(m|~y))+E[0]):32>i?F+((w&y|m&~y)+E[1]):48>i?F+(((w|~m)^y)+E[2]):64>i?F+((w&m|~w&y)+E[3]):F+((w^m^y)+E[4]),F=(F=(F|=0)<<C[i]|F>>>32-C[i])+g|0,p=g,g=y,y=m<<10|m>>>22,m=w,w=F;F=r[1]+l+y|0,r[1]=r[2]+v+g|0,r[2]=r[3]+d+p|0,r[3]=r[4]+c+w|0,r[4]=r[0]+f+m|0,r[0]=F},_doFinalize:function(){var t=this._data,n=t.words,i=8*this._nDataBytes,r=8*t.sigBytes;for(n[r>>>5]|=128<<24-r%32,n[14+(r+64>>>9<<4)]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8),t.sigBytes=4*(n.length+1),this._process(),n=(t=this._hash).words,i=0;5>i;i++)n[i]=16711935&((r=n[i])<<8|r>>>24)|4278255360&(r<<24|r>>>8);return t},clone:function(){var t=i.clone.call(this);return t._hash=this._hash.clone(),t}}),t.RIPEMD160=i._createHelper(r),t.HmacRIPEMD160=i._createHmacHelper(r)}(),function(){var t=fa.enc.Utf8;fa.algo.HMAC=fa.lib.Base.extend({init:function(n,i){n=this._hasher=new n.init,"string"==typeof i&&(i=t.parse(i));var r=n.blockSize,e=4*r;i.sigBytes>e&&(i=n.finalize(i)),i.clamp();for(var s=this._oKey=i.clone(),o=this._iKey=i.clone(),u=s.words,a=o.words,h=0;h<r;h++)u[h]^=1549556828,a[h]^=909522486;s.sigBytes=o.sigBytes=e,this.reset()},reset:function(){var t=this._hasher;t.reset(),t.update(this._iKey)},update:function(t){return this._hasher.update(t),this},finalize:function(t){var n=this._hasher;return t=n.finalize(t),n.reset(),n.finalize(this._oKey.clone().concat(t))}})}(),function(){var t,n=fa,i=(t=n.lib).Base,r=t.WordArray,e=(t=n.algo).HMAC,s=t.PBKDF2=i.extend({cfg:i.extend({keySize:4,hasher:t.SHA1,iterations:1}),init:function(t){this.cfg=this.cfg.extend(t)},compute:function(t,n){for(var i=e.create((c=this.cfg).hasher,t),s=r.create(),o=r.create([1]),u=s.words,a=o.words,h=c.keySize,c=c.iterations;u.length<h;){var f=i.update(n).finalize(o);i.reset();for(var l=f.words,v=l.length,d=f,p=1;p<c;p++){d=i.finalize(d),i.reset();for(var w=d.words,m=0;m<v;m++)l[m]^=w[m]}s.concat(f),a[0]++}return s.sigBytes=4*h,s}});n.PBKDF2=function(t,n,i){return s.create(i).compute(t,n)}}();var la="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",va="=";function da(t){var n,i,r="";for(n=0;n+3<=t.length;n+=3)i=parseInt(t.substring(n,n+3),16),r+=la.charAt(i>>6)+la.charAt(63&i);for(n+1==t.length?(i=parseInt(t.substring(n,n+1),16),r+=la.charAt(i<<2)):n+2==t.length&&(i=parseInt(t.substring(n,n+2),16),r+=la.charAt(i>>2)+la.charAt((3&i)<<4));(3&r.length)>0;)r+=va;return r}function pa(t){var n,i,r,e="",s=0;for(n=0;n<t.length&&t.charAt(n)!=va;++n)(r=la.indexOf(t.charAt(n)))<0||(0==s?(e+=Sa(r>>2),i=3&r,s=1):1==s?(e+=Sa(i<<2|r>>4),i=15&r,s=2):2==s?(e+=Sa(i),e+=Sa(r>>2),i=3&r,s=3):(e+=Sa(i<<2|r>>4),e+=Sa(15&r),s=0));return 1==s&&(e+=Sa(i<<2)),e}function wa(t){var n,i=pa(t),r=new Array;for(n=0;2*n<i.length;++n)r[n]=parseInt(i.substring(2*n,2*n+2),16);return r}function ma(t,n,i){null!=t&&("number"==typeof t?this.fromNumber(t,n,i):this.fromString(t,null==n&&"string"!=typeof t?256:n))}function ya(){return new ma(null)}ma.prototype.am=function(t,n,i,r,e,s){for(;--s>=0;){var o=n*this[t++]+i[r]+e;e=Math.floor(o/67108864),i[r++]=67108863&o}return e},ma.prototype.DB=26,ma.prototype.DM=67108863,ma.prototype.DV=1<<26,ma.prototype.FV=Math.pow(2,52),ma.prototype.F1=26,ma.prototype.F2=0;var ga,Fa,ba="0123456789abcdefghijklmnopqrstuvwxyz",Ea=new Array;for(ga="0".charCodeAt(0),Fa=0;Fa<=9;++Fa)Ea[ga++]=Fa;for(ga="a".charCodeAt(0),Fa=10;Fa<36;++Fa)Ea[ga++]=Fa;for(ga="A".charCodeAt(0),Fa=10;Fa<36;++Fa)Ea[ga++]=Fa;function Sa(t){return ba.charAt(t)}function Aa(t,n){var i=Ea[t.charCodeAt(n)];return null==i?-1:i}function ka(t){var n=ya();return n.fromInt(t),n}function Ca(t){var n,i=1;return 0!=(n=t>>>16)&&(t=n,i+=16),0!=(n=t>>8)&&(t=n,i+=8),0!=(n=t>>4)&&(t=n,i+=4),0!=(n=t>>2)&&(t=n,i+=2),0!=(n=t>>1)&&(t=n,i+=1),i}function Ta(t){this.m=t}function Ia(t){this.m=t,this.mp=t.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<t.DB-15)-1,this.mt2=2*t.t}function xa(t,n){return t&n}function Oa(t,n){return t|n}function Ra(t,n){return t^n}function Da(t,n){return t&~n}function Na(t){if(0==t)return-1;var n=0;return 0==(65535&t)&&(t>>=16,n+=16),0==(255&t)&&(t>>=8,n+=8),0==(15&t)&&(t>>=4,n+=4),0==(3&t)&&(t>>=2,n+=2),0==(1&t)&&++n,n}function ja(t){for(var n=0;0!=t;)t&=t-1,++n;return n}function _a(){}function Pa(t){return t}function Ma(t){this.r2=ya(),this.q3=ya(),ma.ONE.dlShiftTo(2*t.t,this.r2),this.mu=this.r2.divide(t),this.m=t}Ta.prototype.convert=function(t){return t.s<0||t.compareTo(this.m)>=0?t.mod(this.m):t},Ta.prototype.revert=function(t){return t},Ta.prototype.reduce=function(t){t.divRemTo(this.m,null,t)},Ta.prototype.mulTo=function(t,n,i){t.multiplyTo(n,i),this.reduce(i)},Ta.prototype.sqrTo=function(t,n){t.squareTo(n),this.reduce(n)},Ia.prototype.convert=function(t){var n=ya();return t.abs().dlShiftTo(this.m.t,n),n.divRemTo(this.m,null,n),t.s<0&&n.compareTo(ma.ZERO)>0&&this.m.subTo(n,n),n},Ia.prototype.revert=function(t){var n=ya();return t.copyTo(n),this.reduce(n),n},Ia.prototype.reduce=function(t){for(;t.t<=this.mt2;)t[t.t++]=0;for(var n=0;n<this.m.t;++n){var i=32767&t[n],r=i*this.mpl+((i*this.mph+(t[n]>>15)*this.mpl&this.um)<<15)&t.DM;for(t[i=n+this.m.t]+=this.m.am(0,r,t,n,0,this.m.t);t[i]>=t.DV;)t[i]-=t.DV,t[++i]++}t.clamp(),t.drShiftTo(this.m.t,t),t.compareTo(this.m)>=0&&t.subTo(this.m,t)},Ia.prototype.mulTo=function(t,n,i){t.multiplyTo(n,i),this.reduce(i)},Ia.prototype.sqrTo=function(t,n){t.squareTo(n),this.reduce(n)},ma.prototype.copyTo=function(t){for(var n=this.t-1;n>=0;--n)t[n]=this[n];t.t=this.t,t.s=this.s},ma.prototype.fromInt=function(t){this.t=1,this.s=t<0?-1:0,t>0?this[0]=t:t<-1?this[0]=t+this.DV:this.t=0},ma.prototype.fromString=function(t,n){var i;if(16==n)i=4;else if(8==n)i=3;else if(256==n)i=8;else if(2==n)i=1;else if(32==n)i=5;else{if(4!=n)return void this.fromRadix(t,n);i=2}this.t=0,this.s=0;for(var r=t.length,e=!1,s=0;--r>=0;){var o=8==i?255&t[r]:Aa(t,r);o<0?"-"==t.charAt(r)&&(e=!0):(e=!1,0==s?this[this.t++]=o:s+i>this.DB?(this[this.t-1]|=(o&(1<<this.DB-s)-1)<<s,this[this.t++]=o>>this.DB-s):this[this.t-1]|=o<<s,(s+=i)>=this.DB&&(s-=this.DB))}8==i&&0!=(128&t[0])&&(this.s=-1,s>0&&(this[this.t-1]|=(1<<this.DB-s)-1<<s)),this.clamp(),e&&ma.ZERO.subTo(this,this)},ma.prototype.clamp=function(){for(var t=this.s&this.DM;this.t>0&&this[this.t-1]==t;)--this.t},ma.prototype.dlShiftTo=function(t,n){var i;for(i=this.t-1;i>=0;--i)n[i+t]=this[i];for(i=t-1;i>=0;--i)n[i]=0;n.t=this.t+t,n.s=this.s},ma.prototype.drShiftTo=function(t,n){for(var i=t;i<this.t;++i)n[i-t]=this[i];n.t=Math.max(this.t-t,0),n.s=this.s},ma.prototype.lShiftTo=function(t,n){var i,r=t%this.DB,e=this.DB-r,s=(1<<e)-1,o=Math.floor(t/this.DB),u=this.s<<r&this.DM;for(i=this.t-1;i>=0;--i)n[i+o+1]=this[i]>>e|u,u=(this[i]&s)<<r;for(i=o-1;i>=0;--i)n[i]=0;n[o]=u,n.t=this.t+o+1,n.s=this.s,n.clamp()},ma.prototype.rShiftTo=function(t,n){n.s=this.s;var i=Math.floor(t/this.DB);if(i>=this.t)n.t=0;else{var r=t%this.DB,e=this.DB-r,s=(1<<r)-1;n[0]=this[i]>>r;for(var o=i+1;o<this.t;++o)n[o-i-1]|=(this[o]&s)<<e,n[o-i]=this[o]>>r;r>0&&(n[this.t-i-1]|=(this.s&s)<<e),n.t=this.t-i,n.clamp()}},ma.prototype.subTo=function(t,n){for(var i=0,r=0,e=Math.min(t.t,this.t);i<e;)r+=this[i]-t[i],n[i++]=r&this.DM,r>>=this.DB;if(t.t<this.t){for(r-=t.s;i<this.t;)r+=this[i],n[i++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;i<t.t;)r-=t[i],n[i++]=r&this.DM,r>>=this.DB;r-=t.s}n.s=r<0?-1:0,r<-1?n[i++]=this.DV+r:r>0&&(n[i++]=r),n.t=i,n.clamp()},ma.prototype.multiplyTo=function(t,n){var i=this.abs(),r=t.abs(),e=i.t;for(n.t=e+r.t;--e>=0;)n[e]=0;for(e=0;e<r.t;++e)n[e+i.t]=i.am(0,r[e],n,e,0,i.t);n.s=0,n.clamp(),this.s!=t.s&&ma.ZERO.subTo(n,n)},ma.prototype.squareTo=function(t){for(var n=this.abs(),i=t.t=2*n.t;--i>=0;)t[i]=0;for(i=0;i<n.t-1;++i){var r=n.am(i,n[i],t,2*i,0,1);(t[i+n.t]+=n.am(i+1,2*n[i],t,2*i+1,r,n.t-i-1))>=n.DV&&(t[i+n.t]-=n.DV,t[i+n.t+1]=1)}t.t>0&&(t[t.t-1]+=n.am(i,n[i],t,2*i,0,1)),t.s=0,t.clamp()},ma.prototype.divRemTo=function(t,n,i){var r=t.abs();if(!(r.t<=0)){var e=this.abs();if(e.t<r.t)return null!=n&&n.fromInt(0),void(null!=i&&this.copyTo(i));null==i&&(i=ya());var s=ya(),o=this.s,u=t.s,a=this.DB-Ca(r[r.t-1]);a>0?(r.lShiftTo(a,s),e.lShiftTo(a,i)):(r.copyTo(s),e.copyTo(i));var h=s.t,c=s[h-1];if(0!=c){var f=c*(1<<this.F1)+(h>1?s[h-2]>>this.F2:0),l=this.FV/f,v=(1<<this.F1)/f,d=1<<this.F2,p=i.t,w=p-h,m=null==n?ya():n;for(s.dlShiftTo(w,m),i.compareTo(m)>=0&&(i[i.t++]=1,i.subTo(m,i)),ma.ONE.dlShiftTo(h,m),m.subTo(s,s);s.t<h;)s[s.t++]=0;for(;--w>=0;){var y=i[--p]==c?this.DM:Math.floor(i[p]*l+(i[p-1]+d)*v);if((i[p]+=s.am(0,y,i,w,0,h))<y)for(s.dlShiftTo(w,m),i.subTo(m,i);i[p]<--y;)i.subTo(m,i)}null!=n&&(i.drShiftTo(h,n),o!=u&&ma.ZERO.subTo(n,n)),i.t=h,i.clamp(),a>0&&i.rShiftTo(a,i),o<0&&ma.ZERO.subTo(i,i)}}},ma.prototype.invDigit=function(){if(this.t<1)return 0;var t=this[0];if(0==(1&t))return 0;var n=3&t;return(n=(n=(n=(n=n*(2-(15&t)*n)&15)*(2-(255&t)*n)&255)*(2-((65535&t)*n&65535))&65535)*(2-t*n%this.DV)%this.DV)>0?this.DV-n:-n},ma.prototype.isEven=function(){return 0==(this.t>0?1&this[0]:this.s)},ma.prototype.exp=function(t,n){if(t>4294967295||t<1)return ma.ONE;var i=ya(),r=ya(),e=n.convert(this),s=Ca(t)-1;for(e.copyTo(i);--s>=0;)if(n.sqrTo(i,r),(t&1<<s)>0)n.mulTo(r,e,i);else{var o=i;i=r,r=o}return n.revert(i)},ma.prototype.toString=function(t){if(this.s<0)return"-"+this.negate().toString(t);var n;if(16==t)n=4;else if(8==t)n=3;else if(2==t)n=1;else if(32==t)n=5;else{if(4!=t)return this.toRadix(t);n=2}var i,r=(1<<n)-1,e=!1,s="",o=this.t,u=this.DB-o*this.DB%n;if(o-- >0)for(u<this.DB&&(i=this[o]>>u)>0&&(e=!0,s=Sa(i));o>=0;)u<n?(i=(this[o]&(1<<u)-1)<<n-u,i|=this[--o]>>(u+=this.DB-n)):(i=this[o]>>(u-=n)&r,u<=0&&(u+=this.DB,--o)),i>0&&(e=!0),e&&(s+=Sa(i));return e?s:"0"},ma.prototype.negate=function(){var t=ya();return ma.ZERO.subTo(this,t),t},ma.prototype.abs=function(){return this.s<0?this.negate():this},ma.prototype.compareTo=function(t){var n=this.s-t.s;if(0!=n)return n;var i=this.t;if(0!=(n=i-t.t))return this.s<0?-n:n;for(;--i>=0;)if(0!=(n=this[i]-t[i]))return n;return 0},ma.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+Ca(this[this.t-1]^this.s&this.DM)},ma.prototype.mod=function(t){var n=ya();return this.abs().divRemTo(t,null,n),this.s<0&&n.compareTo(ma.ZERO)>0&&t.subTo(n,n),n},ma.prototype.modPowInt=function(t,n){var i;return i=t<256||n.isEven()?new Ta(n):new Ia(n),this.exp(t,i)},ma.ZERO=ka(0),ma.ONE=ka(1),_a.prototype.convert=Pa,_a.prototype.revert=Pa,_a.prototype.mulTo=function(t,n,i){t.multiplyTo(n,i)},_a.prototype.sqrTo=function(t,n){t.squareTo(n)},Ma.prototype.convert=function(t){if(t.s<0||t.t>2*this.m.t)return t.mod(this.m);if(t.compareTo(this.m)<0)return t;var n=ya();return t.copyTo(n),this.reduce(n),n},Ma.prototype.revert=function(t){return t},Ma.prototype.reduce=function(t){for(t.drShiftTo(this.m.t-1,this.r2),t.t>this.m.t+1&&(t.t=this.m.t+1,t.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);t.compareTo(this.r2)<0;)t.dAddOffset(1,this.m.t+1);for(t.subTo(this.r2,t);t.compareTo(this.m)>=0;)t.subTo(this.m,t)},Ma.prototype.mulTo=function(t,n,i){t.multiplyTo(n,i),this.reduce(i)},Ma.prototype.sqrTo=function(t,n){t.squareTo(n),this.reduce(n)};var Ba=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],La=(1<<26)/Ba[Ba.length-1];function Ua(){this.i=0,this.j=0,this.S=new Array}ma.prototype.chunkSize=function(t){return Math.floor(Math.LN2*this.DB/Math.log(t))},ma.prototype.toRadix=function(t){if(null==t&&(t=10),0==this.signum()||t<2||t>36)return"0";var n=this.chunkSize(t),i=Math.pow(t,n),r=ka(i),e=ya(),s=ya(),o="";for(this.divRemTo(r,e,s);e.signum()>0;)o=(i+s.intValue()).toString(t).substr(1)+o,e.divRemTo(r,e,s);return s.intValue().toString(t)+o},ma.prototype.fromRadix=function(t,n){this.fromInt(0),null==n&&(n=10);for(var i=this.chunkSize(n),r=Math.pow(n,i),e=!1,s=0,o=0,u=0;u<t.length;++u){var a=Aa(t,u);a<0?"-"==t.charAt(u)&&0==this.signum()&&(e=!0):(o=n*o+a,++s>=i&&(this.dMultiply(r),this.dAddOffset(o,0),s=0,o=0))}s>0&&(this.dMultiply(Math.pow(n,s)),this.dAddOffset(o,0)),e&&ma.ZERO.subTo(this,this)},ma.prototype.fromNumber=function(t,n,i){if("number"==typeof n)if(t<2)this.fromInt(1);else for(this.fromNumber(t,i),this.testBit(t-1)||this.bitwiseTo(ma.ONE.shiftLeft(t-1),Oa,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(n);)this.dAddOffset(2,0),this.bitLength()>t&&this.subTo(ma.ONE.shiftLeft(t-1),this);else{var r=new Array,e=7&t;r.length=1+(t>>3),n.nextBytes(r),e>0?r[0]&=(1<<e)-1:r[0]=0,this.fromString(r,256)}},ma.prototype.bitwiseTo=function(t,n,i){var r,e,s=Math.min(t.t,this.t);for(r=0;r<s;++r)i[r]=n(this[r],t[r]);if(t.t<this.t){for(e=t.s&this.DM,r=s;r<this.t;++r)i[r]=n(this[r],e);i.t=this.t}else{for(e=this.s&this.DM,r=s;r<t.t;++r)i[r]=n(e,t[r]);i.t=t.t}i.s=n(this.s,t.s),i.clamp()},ma.prototype.changeBit=function(t,n){var i=ma.ONE.shiftLeft(t);return this.bitwiseTo(i,n,i),i},ma.prototype.addTo=function(t,n){for(var i=0,r=0,e=Math.min(t.t,this.t);i<e;)r+=this[i]+t[i],n[i++]=r&this.DM,r>>=this.DB;if(t.t<this.t){for(r+=t.s;i<this.t;)r+=this[i],n[i++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;i<t.t;)r+=t[i],n[i++]=r&this.DM,r>>=this.DB;r+=t.s}n.s=r<0?-1:0,r>0?n[i++]=r:r<-1&&(n[i++]=this.DV+r),n.t=i,n.clamp()},ma.prototype.dMultiply=function(t){this[this.t]=this.am(0,t-1,this,0,0,this.t),++this.t,this.clamp()},ma.prototype.dAddOffset=function(t,n){if(0!=t){for(;this.t<=n;)this[this.t++]=0;for(this[n]+=t;this[n]>=this.DV;)this[n]-=this.DV,++n>=this.t&&(this[this.t++]=0),++this[n]}},ma.prototype.multiplyLowerTo=function(t,n,i){var r,e=Math.min(this.t+t.t,n);for(i.s=0,i.t=e;e>0;)i[--e]=0;for(r=i.t-this.t;e<r;++e)i[e+this.t]=this.am(0,t[e],i,e,0,this.t);for(r=Math.min(t.t,n);e<r;++e)this.am(0,t[e],i,e,0,n-e);i.clamp()},ma.prototype.multiplyUpperTo=function(t,n,i){var r=i.t=this.t+t.t- --n;for(i.s=0;--r>=0;)i[r]=0;for(r=Math.max(n-this.t,0);r<t.t;++r)i[this.t+r-n]=this.am(n-r,t[r],i,0,0,this.t+r-n);i.clamp(),i.drShiftTo(1,i)},ma.prototype.modInt=function(t){if(t<=0)return 0;var n=this.DV%t,i=this.s<0?t-1:0;if(this.t>0)if(0==n)i=this[0]%t;else for(var r=this.t-1;r>=0;--r)i=(n*i+this[r])%t;return i},ma.prototype.millerRabin=function(t){var n=this.subtract(ma.ONE),i=n.getLowestSetBit();if(i<=0)return!1;var r=n.shiftRight(i);(t=t+1>>1)>Ba.length&&(t=Ba.length);for(var e=ya(),s=0;s<t;++s){e.fromInt(Ba[Math.floor(Math.random()*Ba.length)]);var o=e.modPow(r,this);if(0!=o.compareTo(ma.ONE)&&0!=o.compareTo(n)){for(var u=1;u++<i&&0!=o.compareTo(n);)if(0==(o=o.modPowInt(2,this)).compareTo(ma.ONE))return!1;if(0!=o.compareTo(n))return!1}}return!0},ma.prototype.clone=function(){var t=ya();return this.copyTo(t),t},ma.prototype.intValue=function(){if(this.s<0){if(1==this.t)return this[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this[0];if(0==this.t)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]},ma.prototype.byteValue=function(){return 0==this.t?this.s:this[0]<<24>>24},ma.prototype.shortValue=function(){return 0==this.t?this.s:this[0]<<16>>16},ma.prototype.signum=function(){return this.s<0?-1:this.t<=0||1==this.t&&this[0]<=0?0:1},ma.prototype.toByteArray=function(){var t=this.t,n=new Array;n[0]=this.s;var i,r=this.DB-t*this.DB%8,e=0;if(t-- >0)for(r<this.DB&&(i=this[t]>>r)!=(this.s&this.DM)>>r&&(n[e++]=i|this.s<<this.DB-r);t>=0;)r<8?(i=(this[t]&(1<<r)-1)<<8-r,i|=this[--t]>>(r+=this.DB-8)):(i=this[t]>>(r-=8)&255,r<=0&&(r+=this.DB,--t)),0!=(128&i)&&(i|=-256),0==e&&(128&this.s)!=(128&i)&&++e,(e>0||i!=this.s)&&(n[e++]=i);return n},ma.prototype.equals=function(t){return 0==this.compareTo(t)},ma.prototype.min=function(t){return this.compareTo(t)<0?this:t},ma.prototype.max=function(t){return this.compareTo(t)>0?this:t},ma.prototype.and=function(t){var n=ya();return this.bitwiseTo(t,xa,n),n},ma.prototype.or=function(t){var n=ya();return this.bitwiseTo(t,Oa,n),n},ma.prototype.xor=function(t){var n=ya();return this.bitwiseTo(t,Ra,n),n},ma.prototype.andNot=function(t){var n=ya();return this.bitwiseTo(t,Da,n),n},ma.prototype.not=function(){for(var t=ya(),n=0;n<this.t;++n)t[n]=this.DM&~this[n];return t.t=this.t,t.s=~this.s,t},ma.prototype.shiftLeft=function(t){var n=ya();return t<0?this.rShiftTo(-t,n):this.lShiftTo(t,n),n},ma.prototype.shiftRight=function(t){var n=ya();return t<0?this.lShiftTo(-t,n):this.rShiftTo(t,n),n},ma.prototype.getLowestSetBit=function(){for(var t=0;t<this.t;++t)if(0!=this[t])return t*this.DB+Na(this[t]);return this.s<0?this.t*this.DB:-1},ma.prototype.bitCount=function(){for(var t=0,n=this.s&this.DM,i=0;i<this.t;++i)t+=ja(this[i]^n);return t},ma.prototype.testBit=function(t){var n=Math.floor(t/this.DB);return n>=this.t?0!=this.s:0!=(this[n]&1<<t%this.DB)},ma.prototype.setBit=function(t){return this.changeBit(t,Oa)},ma.prototype.clearBit=function(t){return this.changeBit(t,Da)},ma.prototype.flipBit=function(t){return this.changeBit(t,Ra)},ma.prototype.add=function(t){var n=ya();return this.addTo(t,n),n},ma.prototype.subtract=function(t){var n=ya();return this.subTo(t,n),n},ma.prototype.multiply=function(t){var n=ya();return this.multiplyTo(t,n),n},ma.prototype.divide=function(t){var n=ya();return this.divRemTo(t,n,null),n},ma.prototype.remainder=function(t){var n=ya();return this.divRemTo(t,null,n),n},ma.prototype.divideAndRemainder=function(t){var n=ya(),i=ya();return this.divRemTo(t,n,i),new Array(n,i)},ma.prototype.modPow=function(t,n){var i,r,e=t.bitLength(),s=ka(1);if(e<=0)return s;i=e<18?1:e<48?3:e<144?4:e<768?5:6,r=e<8?new Ta(n):n.isEven()?new Ma(n):new Ia(n);var o=new Array,u=3,a=i-1,h=(1<<i)-1;if(o[1]=r.convert(this),i>1){var c=ya();for(r.sqrTo(o[1],c);u<=h;)o[u]=ya(),r.mulTo(c,o[u-2],o[u]),u+=2}var f,l,v=t.t-1,d=!0,p=ya();for(e=Ca(t[v])-1;v>=0;){for(e>=a?f=t[v]>>e-a&h:(f=(t[v]&(1<<e+1)-1)<<a-e,v>0&&(f|=t[v-1]>>this.DB+e-a)),u=i;0==(1&f);)f>>=1,--u;if((e-=u)<0&&(e+=this.DB,--v),d)o[f].copyTo(s),d=!1;else{for(;u>1;)r.sqrTo(s,p),r.sqrTo(p,s),u-=2;u>0?r.sqrTo(s,p):(l=s,s=p,p=l),r.mulTo(p,o[f],s)}for(;v>=0&&0==(t[v]&1<<e);)r.sqrTo(s,p),l=s,s=p,p=l,--e<0&&(e=this.DB-1,--v)}return r.revert(s)},ma.prototype.modInverse=function(t){var n=t.isEven();if(this.isEven()&&n||0==t.signum())return ma.ZERO;for(var i=t.clone(),r=this.clone(),e=ka(1),s=ka(0),o=ka(0),u=ka(1);0!=i.signum();){for(;i.isEven();)i.rShiftTo(1,i),n?(e.isEven()&&s.isEven()||(e.addTo(this,e),s.subTo(t,s)),e.rShiftTo(1,e)):s.isEven()||s.subTo(t,s),s.rShiftTo(1,s);for(;r.isEven();)r.rShiftTo(1,r),n?(o.isEven()&&u.isEven()||(o.addTo(this,o),u.subTo(t,u)),o.rShiftTo(1,o)):u.isEven()||u.subTo(t,u),u.rShiftTo(1,u);i.compareTo(r)>=0?(i.subTo(r,i),n&&e.subTo(o,e),s.subTo(u,s)):(r.subTo(i,r),n&&o.subTo(e,o),u.subTo(s,u))}return 0!=r.compareTo(ma.ONE)?ma.ZERO:u.compareTo(t)>=0?u.subtract(t):u.signum()<0?(u.addTo(t,u),u.signum()<0?u.add(t):u):u},ma.prototype.pow=function(t){return this.exp(t,new _a)},ma.prototype.gcd=function(t){var n=this.s<0?this.negate():this.clone(),i=t.s<0?t.negate():t.clone();if(n.compareTo(i)<0){var r=n;n=i,i=r}var e=n.getLowestSetBit(),s=i.getLowestSetBit();if(s<0)return n;for(e<s&&(s=e),s>0&&(n.rShiftTo(s,n),i.rShiftTo(s,i));n.signum()>0;)(e=n.getLowestSetBit())>0&&n.rShiftTo(e,n),(e=i.getLowestSetBit())>0&&i.rShiftTo(e,i),n.compareTo(i)>=0?(n.subTo(i,n),n.rShiftTo(1,n)):(i.subTo(n,i),i.rShiftTo(1,i));return s>0&&i.lShiftTo(s,i),i},ma.prototype.isProbablePrime=function(t){var n,i=this.abs();if(1==i.t&&i[0]<=Ba[Ba.length-1]){for(n=0;n<Ba.length;++n)if(i[0]==Ba[n])return!0;return!1}if(i.isEven())return!1;for(n=1;n<Ba.length;){for(var r=Ba[n],e=n+1;e<Ba.length&&r<La;)r*=Ba[e++];for(r=i.modInt(r);n<e;)if(r%Ba[n++]==0)return!1}return i.millerRabin(t)},ma.prototype.square=function(){var t=ya();return this.squareTo(t),t},Ua.prototype.init=function(t){var n,i,r;for(n=0;n<256;++n)this.S[n]=n;for(i=0,n=0;n<256;++n)r=this.S[n],this.S[n]=this.S[i=i+this.S[n]+t[n%t.length]&255],this.S[i]=r;this.i=0,this.j=0},Ua.prototype.next=function(){var t;return this.i=this.i+1&255,this.j=this.j+this.S[this.i]&255,t=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=t,this.S[t+this.S[this.i]&255]};var Ha,za,qa,$a=256;function Va(){var t;t=(new Date).getTime(),za[qa++]^=255&t,za[qa++]^=t>>8&255,za[qa++]^=t>>16&255,za[qa++]^=t>>24&255,qa>=$a&&(qa-=$a)}if(null==za){var Ka;if(za=new Array,qa=0,void 0!==ra&&void 0!==ra.msCrypto){var Ja=ra.msCrypto;if(Ja.getRandomValues){var Ya=new Uint8Array(32);for(Ja.getRandomValues(Ya),Ka=0;Ka<32;++Ka)za[qa++]=Ya[Ka]}}for(;qa<$a;)Ka=Math.floor(65536*Math.random()),za[qa++]=Ka>>>8,za[qa++]=255&Ka;qa=0,Va()}function Ga(){if(null==Ha){for(Va(),(Ha=new Ua).init(za),qa=0;qa<za.length;++qa)za[qa]=0;qa=0}return Ha.next()}function Wa(){}function Za(t,n){return new ma(t,n)}function Qa(t,n,i){for(var r="",e=0;r.length<n;)r+=i(String.fromCharCode.apply(String,t.concat([(4278190080&e)>>24,(16711680&e)>>16,(65280&e)>>8,255&e]))),e+=1;return r}function Xa(){this.n=null,this.e=0,this.d=null,this.p=null,this.q=null,this.dmp1=null,this.dmq1=null,this.coeff=null}function th(t,n,i){for(var r="",e=0;r.length<n;)r+=i(t+String.fromCharCode.apply(String,[(4278190080&e)>>24,(16711680&e)>>16,(65280&e)>>8,255&e])),e+=1;return r}function nh(t,n){this.x=n,this.q=t}function ih(t,n,i,r){this.curve=t,this.x=n,this.y=i,this.z=null==r?ma.ONE:r,this.zinv=null}function rh(t,n,i){this.q=t,this.a=this.fromBigInteger(n),this.b=this.fromBigInteger(i),this.infinity=new ih(this,null,null)}Wa.prototype.nextBytes=function(t){var n;for(n=0;n<t.length;++n)t[n]=Ga()},Xa.prototype.doPublic=function(t){return t.modPowInt(this.e,this.n)},Xa.prototype.setPublic=function(t,n){if(this.isPublic=!0,this.isPrivate=!1,"string"!=typeof t)this.n=t,this.e=n;else{if(!(null!=t&&null!=n&&t.length>0&&n.length>0))throw"Invalid RSA public key";this.n=Za(t,16),this.e=parseInt(n,16)}},Xa.prototype.encrypt=function(t){var n=function(t,n){if(n<t.length+11)throw"Message too long for RSA";for(var i=new Array,r=t.length-1;r>=0&&n>0;){var e=t.charCodeAt(r--);e<128?i[--n]=e:e>127&&e<2048?(i[--n]=63&e|128,i[--n]=e>>6|192):(i[--n]=63&e|128,i[--n]=e>>6&63|128,i[--n]=e>>12|224)}i[--n]=0;for(var s=new Wa,o=new Array;n>2;){for(o[0]=0;0==o[0];)s.nextBytes(o);i[--n]=o[0]}return i[--n]=2,i[--n]=0,new ma(i)}(t,this.n.bitLength()+7>>3);if(null==n)return null;var i=this.doPublic(n);if(null==i)return null;var r=i.toString(16);return 0==(1&r.length)?r:"0"+r},Xa.prototype.encryptOAEP=function(t,n,i){var r=function(t,n,i,r){var e=sh.crypto.MessageDigest,s=sh.crypto.Util,o=null;if(i||(i="sha1"),"string"==typeof i&&(o=e.getCanonicalAlgName(i),r=e.getHashLength(o),i=function(t){return gh(s.hashHex(Fh(t),o))}),t.length+2*r+2>n)throw"Message too long for RSA";var u,a="";for(u=0;u<n-t.length-2*r-2;u+=1)a+="\0";var h=i("")+a+""+t,c=new Array(r);(new Wa).nextBytes(c);var f=Qa(c,h.length,i),l=[];for(u=0;u<h.length;u+=1)l[u]=h.charCodeAt(u)^f.charCodeAt(u);var v=Qa(l,c.length,i),d=[0];for(u=0;u<c.length;u+=1)d[u+1]=c[u]^v.charCodeAt(u);return new ma(d.concat(l))}(t,this.n.bitLength()+7>>3,n,i);if(null==r)return null;var e=this.doPublic(r);if(null==e)return null;var s=e.toString(16);return 0==(1&s.length)?s:"0"+s},Xa.prototype.type="RSA",Xa.prototype.doPrivate=function(t){if(null==this.p||null==this.q)return t.modPow(this.d,this.n);for(var n=t.mod(this.p).modPow(this.dmp1,this.p),i=t.mod(this.q).modPow(this.dmq1,this.q);n.compareTo(i)<0;)n=n.add(this.p);return n.subtract(i).multiply(this.coeff).mod(this.p).multiply(this.q).add(i)},Xa.prototype.setPrivate=function(t,n,i){if(this.isPrivate=!0,"string"!=typeof t)this.n=t,this.e=n,this.d=i;else{if(!(null!=t&&null!=n&&t.length>0&&n.length>0))throw"Invalid RSA private key";this.n=Za(t,16),this.e=parseInt(n,16),this.d=Za(i,16)}},Xa.prototype.setPrivateEx=function(t,n,i,r,e,s,o,u){if(this.isPrivate=!0,this.isPublic=!1,null==t)throw"RSASetPrivateEx N == null";if(null==n)throw"RSASetPrivateEx E == null";if(0==t.length)throw"RSASetPrivateEx N.length == 0";if(0==n.length)throw"RSASetPrivateEx E.length == 0";if(!(null!=t&&null!=n&&t.length>0&&n.length>0))throw"Invalid RSA private key in RSASetPrivateEx";this.n=Za(t,16),this.e=parseInt(n,16),this.d=Za(i,16),this.p=Za(r,16),this.q=Za(e,16),this.dmp1=Za(s,16),this.dmq1=Za(o,16),this.coeff=Za(u,16)},Xa.prototype.generate=function(t,n){var i=new Wa,r=t>>1;this.e=parseInt(n,16);for(var e=new ma(n,16);;){for(;this.p=new ma(t-r,1,i),0!=this.p.subtract(ma.ONE).gcd(e).compareTo(ma.ONE)||!this.p.isProbablePrime(10););for(;this.q=new ma(r,1,i),0!=this.q.subtract(ma.ONE).gcd(e).compareTo(ma.ONE)||!this.q.isProbablePrime(10););if(this.p.compareTo(this.q)<=0){var s=this.p;this.p=this.q,this.q=s}var o=this.p.subtract(ma.ONE),u=this.q.subtract(ma.ONE),a=o.multiply(u);if(0==a.gcd(e).compareTo(ma.ONE)){this.n=this.p.multiply(this.q),this.d=e.modInverse(a),this.dmp1=this.d.mod(o),this.dmq1=this.d.mod(u),this.coeff=this.q.modInverse(this.p);break}}this.isPrivate=!0},Xa.prototype.decrypt=function(t){var n=Za(t,16),i=this.doPrivate(n);return null==i?null:function(t,n){for(var i=t.toByteArray(),r=0;r<i.length&&0==i[r];)++r;if(i.length-r!=n-1||2!=i[r])return null;for(++r;0!=i[r];)if(++r>=i.length)return null;for(var e="";++r<i.length;){var s=255&i[r];s<128?e+=String.fromCharCode(s):s>191&&s<224?(e+=String.fromCharCode((31&s)<<6|63&i[r+1]),++r):(e+=String.fromCharCode((15&s)<<12|(63&i[r+1])<<6|63&i[r+2]),r+=2)}return e}(i,this.n.bitLength()+7>>3)},Xa.prototype.decryptOAEP=function(t,n,i){var r=Za(t,16),e=this.doPrivate(r);return null==e?null:function(t,n,i,r){var e=sh.crypto.MessageDigest,s=sh.crypto.Util,o=null;for(i||(i="sha1"),"string"==typeof i&&(o=e.getCanonicalAlgName(i),r=e.getHashLength(o),i=function(t){return gh(s.hashHex(Fh(t),o))}),t=t.toByteArray(),u=0;u<t.length;u+=1)t[u]&=255;for(;t.length<n;)t.unshift(0);if((t=String.fromCharCode.apply(String,t)).length<2*r+2)throw"Cipher too short";var u,a=t.substr(1,r),h=t.substr(r+1),c=th(h,r,i),f=[];for(u=0;u<a.length;u+=1)f[u]=a.charCodeAt(u)^c.charCodeAt(u);var l=th(String.fromCharCode.apply(String,f),t.length-r,i),v=[];for(u=0;u<h.length;u+=1)v[u]=h.charCodeAt(u)^l.charCodeAt(u);if((v=String.fromCharCode.apply(String,v)).substr(0,r)!==i(""))throw"Hash mismatch";var d=(v=v.substr(r)).indexOf("");if((-1!=d?v.substr(0,d).lastIndexOf("\0"):-1)+1!=d)throw"Malformed data";return v.substr(d+1)}(e,this.n.bitLength()+7>>3,n,i)},nh.prototype.equals=function(t){return t==this||this.q.equals(t.q)&&this.x.equals(t.x)},nh.prototype.toBigInteger=function(){return this.x},nh.prototype.negate=function(){return new nh(this.q,this.x.negate().mod(this.q))},nh.prototype.add=function(t){return new nh(this.q,this.x.add(t.toBigInteger()).mod(this.q))},nh.prototype.subtract=function(t){return new nh(this.q,this.x.subtract(t.toBigInteger()).mod(this.q))},nh.prototype.multiply=function(t){return new nh(this.q,this.x.multiply(t.toBigInteger()).mod(this.q))},nh.prototype.square=function(){return new nh(this.q,this.x.square().mod(this.q))},nh.prototype.divide=function(t){return new nh(this.q,this.x.multiply(t.toBigInteger().modInverse(this.q)).mod(this.q))},ih.prototype.getX=function(){return null==this.zinv&&(this.zinv=this.z.modInverse(this.curve.q)),this.curve.fromBigInteger(this.x.toBigInteger().multiply(this.zinv).mod(this.curve.q))},ih.prototype.getY=function(){return null==this.zinv&&(this.zinv=this.z.modInverse(this.curve.q)),this.curve.fromBigInteger(this.y.toBigInteger().multiply(this.zinv).mod(this.curve.q))},ih.prototype.equals=function(t){return t==this||(this.isInfinity()?t.isInfinity():t.isInfinity()?this.isInfinity():!!t.y.toBigInteger().multiply(this.z).subtract(this.y.toBigInteger().multiply(t.z)).mod(this.curve.q).equals(ma.ZERO)&&t.x.toBigInteger().multiply(this.z).subtract(this.x.toBigInteger().multiply(t.z)).mod(this.curve.q).equals(ma.ZERO))},ih.prototype.isInfinity=function(){return null==this.x&&null==this.y||this.z.equals(ma.ZERO)&&!this.y.toBigInteger().equals(ma.ZERO)},ih.prototype.negate=function(){return new ih(this.curve,this.x,this.y.negate(),this.z)},ih.prototype.add=function(t){if(this.isInfinity())return t;if(t.isInfinity())return this;var n=t.y.toBigInteger().multiply(this.z).subtract(this.y.toBigInteger().multiply(t.z)).mod(this.curve.q),i=t.x.toBigInteger().multiply(this.z).subtract(this.x.toBigInteger().multiply(t.z)).mod(this.curve.q);if(ma.ZERO.equals(i))return ma.ZERO.equals(n)?this.twice():this.curve.getInfinity();var r=new ma("3"),e=this.x.toBigInteger(),s=this.y.toBigInteger(),o=(t.x.toBigInteger(),t.y.toBigInteger(),i.square()),u=o.multiply(i),a=e.multiply(o),h=n.square().multiply(this.z),c=h.subtract(a.shiftLeft(1)).multiply(t.z).subtract(u).multiply(i).mod(this.curve.q),f=a.multiply(r).multiply(n).subtract(s.multiply(u)).subtract(h.multiply(n)).multiply(t.z).add(n.multiply(u)).mod(this.curve.q),l=u.multiply(this.z).multiply(t.z).mod(this.curve.q);return new ih(this.curve,this.curve.fromBigInteger(c),this.curve.fromBigInteger(f),l)},ih.prototype.twice=function(){if(this.isInfinity())return this;if(0==this.y.toBigInteger().signum())return this.curve.getInfinity();var t=new ma("3"),n=this.x.toBigInteger(),i=this.y.toBigInteger(),r=i.multiply(this.z),e=r.multiply(i).mod(this.curve.q),s=this.curve.a.toBigInteger(),o=n.square().multiply(t);ma.ZERO.equals(s)||(o=o.add(this.z.square().multiply(s)));var u=(o=o.mod(this.curve.q)).square().subtract(n.shiftLeft(3).multiply(e)).shiftLeft(1).multiply(r).mod(this.curve.q),a=o.multiply(t).multiply(n).subtract(e.shiftLeft(1)).shiftLeft(2).multiply(e).subtract(o.square().multiply(o)).mod(this.curve.q),h=r.square().multiply(r).shiftLeft(3).mod(this.curve.q);return new ih(this.curve,this.curve.fromBigInteger(u),this.curve.fromBigInteger(a),h)},ih.prototype.multiply=function(t){if(this.isInfinity())return this;if(0==t.signum())return this.curve.getInfinity();var n,i=t,r=i.multiply(new ma("3")),e=this.negate(),s=this;for(n=r.bitLength()-2;n>0;--n){s=s.twice();var o=r.testBit(n);o!=i.testBit(n)&&(s=s.add(o?this:e))}return s},ih.prototype.multiplyTwo=function(t,n,i){var r;r=t.bitLength()>i.bitLength()?t.bitLength()-1:i.bitLength()-1;for(var e=this.curve.getInfinity(),s=this.add(n);r>=0;)e=e.twice(),t.testBit(r)?e=i.testBit(r)?e.add(s):e.add(this):i.testBit(r)&&(e=e.add(n)),--r;return e},rh.prototype.getQ=function(){return this.q},rh.prototype.getA=function(){return this.a},rh.prototype.getB=function(){return this.b},rh.prototype.equals=function(t){return t==this||this.q.equals(t.q)&&this.a.equals(t.a)&&this.b.equals(t.b)},rh.prototype.getInfinity=function(){return this.infinity},rh.prototype.fromBigInteger=function(t){return new nh(this.q,t)},rh.prototype.decodePointHex=function(t){switch(parseInt(t.substr(0,2),16)){case 0:return this.infinity;case 2:case 3:return null;case 4:case 6:case 7:var n=(t.length-2)/2,i=t.substr(2,n),r=t.substr(n+2,n);return new ih(this,this.fromBigInteger(new ma(i,16)),this.fromBigInteger(new ma(r,16)));default:return null}},nh.prototype.getByteLength=function(){return Math.floor((this.toBigInteger().bitLength()+7)/8)},ih.prototype.getEncoded=function(t){var n=function(t,n){var i=t.toByteArrayUnsigned();if(n<i.length)i=i.slice(i.length-n);else for(;n>i.length;)i.unshift(0);return i},i=this.getX().toBigInteger(),r=this.getY().toBigInteger(),e=n(i,32);return t?r.isEven()?e.unshift(2):e.unshift(3):(e.unshift(4),e=e.concat(n(r,32))),e},ih.decodeFrom=function(t,n){var i=n.length-1,r=n.slice(1,1+i/2),e=n.slice(1+i/2,1+i);r.unshift(0),e.unshift(0);var s=new ma(r),o=new ma(e);return new ih(t,t.fromBigInteger(s),t.fromBigInteger(o))},ih.decodeFromHex=function(t,n){n.substr(0,2);var i=n.length-2,r=n.substr(2,i/2),e=n.substr(2+i/2,i/2),s=new ma(r,16),o=new ma(e,16);return new ih(t,t.fromBigInteger(s),t.fromBigInteger(o))},ih.prototype.add2D=function(t){if(this.isInfinity())return t;if(t.isInfinity())return this;if(this.x.equals(t.x))return this.y.equals(t.y)?this.twice():this.curve.getInfinity();var n=t.x.subtract(this.x),i=t.y.subtract(this.y).divide(n),r=i.square().subtract(this.x).subtract(t.x),e=i.multiply(this.x.subtract(r)).subtract(this.y);return new ih(this.curve,r,e)},ih.prototype.twice2D=function(){if(this.isInfinity())return this;if(0==this.y.toBigInteger().signum())return this.curve.getInfinity();var t=this.curve.fromBigInteger(ma.valueOf(2)),n=this.curve.fromBigInteger(ma.valueOf(3)),i=this.x.square().multiply(n).add(this.curve.a).divide(this.y.multiply(t)),r=i.square().subtract(this.x.multiply(t)),e=i.multiply(this.x.subtract(r)).subtract(this.y);return new ih(this.curve,r,e)},ih.prototype.multiply2D=function(t){if(this.isInfinity())return this;if(0==t.signum())return this.curve.getInfinity();var n,i=t,r=i.multiply(new ma("3")),e=this.negate(),s=this;for(n=r.bitLength()-2;n>0;--n){s=s.twice();var o=r.testBit(n);o!=i.testBit(n)&&(s=s.add2D(o?this:e))}return s},ih.prototype.isOnCurve=function(){var t=this.getX().toBigInteger(),n=this.getY().toBigInteger(),i=this.curve.getA().toBigInteger(),r=this.curve.getB().toBigInteger(),e=this.curve.getQ(),s=n.multiply(n).mod(e),o=t.multiply(t).multiply(t).add(i.multiply(t)).add(r).mod(e);return s.equals(o)},ih.prototype.toString=function(){return"("+this.getX().toBigInteger().toString()+","+this.getY().toBigInteger().toString()+")"},ih.prototype.validate=function(){var t=this.curve.getQ();if(this.isInfinity())throw new Error("Point is at infinity.");var n=this.getX().toBigInteger(),i=this.getY().toBigInteger();if(n.compareTo(ma.ONE)<0||n.compareTo(t.subtract(ma.ONE))>0)throw new Error("x coordinate out of bounds");if(i.compareTo(ma.ONE)<0||i.compareTo(t.subtract(ma.ONE))>0)throw new Error("y coordinate out of bounds");if(!this.isOnCurve())throw new Error("Point is not on the curve.");if(this.multiply(t).isInfinity())throw new Error("Point is not a scalar multiple of G.");return!0};var eh=function(){var t=new RegExp('(?:false|true|null|[\\{\\}\\[\\]]|(?:-?\\b(?:0|[1-9][0-9]*)(?:\\.[0-9]+)?(?:[eE][+-]?[0-9]+)?\\b)|(?:"(?:[^\\0-\\x08\\x0a-\\x1f"\\\\]|\\\\(?:["/\\\\bfnrt]|u[0-9A-Fa-f]{4}))*"))',"g"),n=new RegExp("\\\\(?:([^u])|u(.{4}))","g"),i={'"':'"',"/":"/","\\":"\\",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"};function r(t,n,r){return n?i[n]:String.fromCharCode(parseInt(r,16))}var e=new String(""),s=Object.hasOwnProperty;return function(i,o){var u,a,h=i.match(t),c=h[0],f=!1;"{"===c?u={}:"["===c?u=[]:(u=[],f=!0);for(var l=[u],v=1-f,d=h.length;v<d;++v){var p;switch((c=h[v]).charCodeAt(0)){default:(p=l[0])[a||p.length]=+c,a=void 0;break;case 34:if(-1!==(c=c.substring(1,c.length-1)).indexOf("\\")&&(c=c.replace(n,r)),p=l[0],!a){if(!(p instanceof Array)){a=c||e;break}a=p.length}p[a]=c,a=void 0;break;case 91:l.unshift((p=l[0])[a||p.length]=[]),a=void 0;break;case 93:l.shift();break;case 102:(p=l[0])[a||p.length]=!1,a=void 0;break;case 110:(p=l[0])[a||p.length]=null,a=void 0;break;case 116:(p=l[0])[a||p.length]=!0,a=void 0;break;case 123:l.unshift((p=l[0])[a||p.length]={}),a=void 0;break;case 125:l.shift()}}if(f){if(1!==l.length)throw new Error;u=u[0]}else if(l.length)throw new Error;if(o){var w=function(t,n){var i=t[n];if(i&&"object"==typeof i){var r=null;for(var e in i)if(s.call(i,e)&&i!==t){var u=w(i,e);void 0!==u?i[e]=u:(r||(r=[]),r.push(e))}if(r)for(var a=r.length;--a>=0;)delete i[r[a]]}return o.call(t,n,i)};u=w({"":u},"")}return u}}();void 0!==sh&&sh||(sh={}),void 0!==sh.asn1&&sh.asn1||(sh.asn1={}),sh.asn1.ASN1Util=new function(){this.integerToByteHex=function(t){var n=t.toString(16);return n.length%2==1&&(n="0"+n),n},this.bigIntToMinTwosComplementsHex=function(t){var n=t.toString(16);if("-"!=n.substr(0,1))n.length%2==1?n="0"+n:n.match(/^[0-7]/)||(n="00"+n);else{var i=n.substr(1).length;i%2==1?i+=1:n.match(/^[0-7]/)||(i+=2);for(var r="",e=0;e<i;e++)r+="f";n=new ma(r,16).xor(t).add(ma.ONE).toString(16).replace(/^-/,"")}return n},this.getPEMStringFromHex=function(t,n){return Ah(t,n)},this.newObject=function(t){var n=sh.asn1,i=n.DERBoolean,r=n.DERInteger,e=n.DERBitString,s=n.DEROctetString,o=n.DERNull,u=n.DERObjectIdentifier,a=n.DEREnumerated,h=n.DERUTF8String,c=n.DERNumericString,f=n.DERPrintableString,l=n.DERTeletexString,v=n.DERIA5String,d=n.DERUTCTime,p=n.DERGeneralizedTime,w=n.DERSequence,m=n.DERSet,y=n.DERTaggedObject,g=n.ASN1Util.newObject,F=Object.keys(t);if(1!=F.length)throw"key of param shall be only one.";var b=F[0];if(-1==":bool:int:bitstr:octstr:null:oid:enum:utf8str:numstr:prnstr:telstr:ia5str:utctime:gentime:seq:set:tag:".indexOf(":"+b+":"))throw"undefined key: "+b;if("bool"==b)return new i(t[b]);if("int"==b)return new r(t[b]);if("bitstr"==b)return new e(t[b]);if("octstr"==b)return new s(t[b]);if("null"==b)return new o(t[b]);if("oid"==b)return new u(t[b]);if("enum"==b)return new a(t[b]);if("utf8str"==b)return new h(t[b]);if("numstr"==b)return new c(t[b]);if("prnstr"==b)return new f(t[b]);if("telstr"==b)return new l(t[b]);if("ia5str"==b)return new v(t[b]);if("utctime"==b)return new d(t[b]);if("gentime"==b)return new p(t[b]);if("seq"==b){for(var E=t[b],S=[],A=0;A<E.length;A++){var k=g(E[A]);S.push(k)}return new w({array:S})}if("set"==b){for(E=t[b],S=[],A=0;A<E.length;A++)k=g(E[A]),S.push(k);return new m({array:S})}if("tag"==b){var C=t[b];if("[object Array]"===Object.prototype.toString.call(C)&&3==C.length){var T=g(C[2]);return new y({tag:C[0],explicit:C[1],obj:T})}var I={};if(void 0!==C.explicit&&(I.explicit=C.explicit),void 0!==C.tag&&(I.tag=C.tag),void 0===C.obj)throw"obj shall be specified for 'tag'.";return I.obj=g(C.obj),new y(I)}},this.jsonToASN1HEX=function(t){return this.newObject(t).getEncodedHex()}},sh.asn1.ASN1Util.oidHexToInt=function(t){for(var n="",i=parseInt(t.substr(0,2),16),r=(n=Math.floor(i/40)+"."+i%40,""),e=2;e<t.length;e+=2){var s=("00000000"+parseInt(t.substr(e,2),16).toString(2)).slice(-8);r+=s.substr(1,7),"0"==s.substr(0,1)&&(n=n+"."+new ma(r,2).toString(10),r="")}return n},sh.asn1.ASN1Util.oidIntToHex=function(t){var n=function(t){var n=t.toString(16);return 1==n.length&&(n="0"+n),n},i=function(t){var i="",r=new ma(t,10).toString(2),e=7-r.length%7;7==e&&(e=0);for(var s="",o=0;o<e;o++)s+="0";for(r=s+r,o=0;o<r.length-1;o+=7){var u=r.substr(o,7);o!=r.length-7&&(u="1"+u),i+=n(parseInt(u,2))}return i};if(!t.match(/^[0-9.]+$/))throw"malformed oid string: "+t;var r="",e=t.split("."),s=40*parseInt(e[0])+parseInt(e[1]);r+=n(s),e.splice(0,2);for(var o=0;o<e.length;o++)r+=i(e[o]);return r},sh.asn1.ASN1Object=function(){this.getLengthHexFromValue=function(){if(void 0===this.hV||null==this.hV)throw"this.hV is null or undefined.";if(this.hV.length%2==1)throw"value hex must be even length: n="+"".length+",v="+this.hV;var t=this.hV.length/2,n=t.toString(16);if(n.length%2==1&&(n="0"+n),t<128)return n;var i=n.length/2;if(i>15)throw"ASN.1 length too long to represent by 8x: n = "+t.toString(16);return(128+i).toString(16)+n},this.getEncodedHex=function(){return(null==this.hTLV||this.isModified)&&(this.hV=this.getFreshValueHex(),this.hL=this.getLengthHexFromValue(),this.hTLV=this.hT+this.hL+this.hV,this.isModified=!1),this.hTLV},this.getValueHex=function(){return this.getEncodedHex(),this.hV},this.getFreshValueHex=function(){return""}},sh.asn1.DERAbstractString=function(t){sh.asn1.DERAbstractString.superclass.constructor.call(this),this.getString=function(){return this.s},this.setString=function(t){this.hTLV=null,this.isModified=!0,this.s=t,this.hV=mh(this.s).toLowerCase()},this.setStringHex=function(t){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=t},this.getFreshValueHex=function(){return this.hV},void 0!==t&&("string"==typeof t?this.setString(t):void 0!==t.str?this.setString(t.str):void 0!==t.hex&&this.setStringHex(t.hex))},ea.lang.extend(sh.asn1.DERAbstractString,sh.asn1.ASN1Object),sh.asn1.DERAbstractTime=function(){sh.asn1.DERAbstractTime.superclass.constructor.call(this),this.localDateToUTC=function(t){return utc=t.getTime()+6e4*t.getTimezoneOffset(),new Date(utc)},this.formatDate=function(t,n,i){var r=this.zeroPadding,e=this.localDateToUTC(t),s=String(e.getFullYear());"utc"==n&&(s=s.substr(2,2));var o=s+r(String(e.getMonth()+1),2)+r(String(e.getDate()),2)+r(String(e.getHours()),2)+r(String(e.getMinutes()),2)+r(String(e.getSeconds()),2);if(!0===i){var u=e.getMilliseconds();if(0!=u){var a=r(String(u),3);o=o+"."+(a=a.replace(/[0]+$/,""))}}return o+"Z"},this.zeroPadding=function(t,n){return t.length>=n?t:new Array(n-t.length+1).join("0")+t},this.getString=function(){return this.s},this.setString=function(t){this.hTLV=null,this.isModified=!0,this.s=t,this.hV=lh(t)},this.setByDateValue=function(t,n,i,r,e,s){var o=new Date(Date.UTC(t,n-1,i,r,e,s,0));this.setByDate(o)},this.getFreshValueHex=function(){return this.hV}},ea.lang.extend(sh.asn1.DERAbstractTime,sh.asn1.ASN1Object),sh.asn1.DERAbstractStructured=function(t){sh.asn1.DERAbstractString.superclass.constructor.call(this),this.setByASN1ObjectArray=function(t){this.hTLV=null,this.isModified=!0,this.asn1Array=t},this.appendASN1Object=function(t){this.hTLV=null,this.isModified=!0,this.asn1Array.push(t)},this.asn1Array=new Array,void 0!==t&&void 0!==t.array&&(this.asn1Array=t.array)},ea.lang.extend(sh.asn1.DERAbstractStructured,sh.asn1.ASN1Object),sh.asn1.DERBoolean=function(){sh.asn1.DERBoolean.superclass.constructor.call(this),this.hT="01",this.hTLV="0101ff"},ea.lang.extend(sh.asn1.DERBoolean,sh.asn1.ASN1Object),sh.asn1.DERInteger=function(t){sh.asn1.DERInteger.superclass.constructor.call(this),this.hT="02",this.setByBigInteger=function(t){this.hTLV=null,this.isModified=!0,this.hV=sh.asn1.ASN1Util.bigIntToMinTwosComplementsHex(t)},this.setByInteger=function(t){var n=new ma(String(t),10);this.setByBigInteger(n)},this.setValueHex=function(t){this.hV=t},this.getFreshValueHex=function(){return this.hV},void 0!==t&&(void 0!==t.bigint?this.setByBigInteger(t.bigint):void 0!==t.int?this.setByInteger(t.int):"number"==typeof t?this.setByInteger(t):void 0!==t.hex&&this.setValueHex(t.hex))},ea.lang.extend(sh.asn1.DERInteger,sh.asn1.ASN1Object),sh.asn1.DERBitString=function(t){if(void 0!==t&&void 0!==t.obj){var n=sh.asn1.ASN1Util.newObject(t.obj);t.hex="00"+n.getEncodedHex()}sh.asn1.DERBitString.superclass.constructor.call(this),this.hT="03",this.setHexValueIncludingUnusedBits=function(t){this.hTLV=null,this.isModified=!0,this.hV=t},this.setUnusedBitsAndHexValue=function(t,n){if(t<0||7<t)throw"unused bits shall be from 0 to 7: u = "+t;var i="0"+t;this.hTLV=null,this.isModified=!0,this.hV=i+n},this.setByBinaryString=function(t){var n=8-(t=t.replace(/0+$/,"")).length%8;8==n&&(n=0);for(var i=0;i<=n;i++)t+="0";var r="";for(i=0;i<t.length-1;i+=8){var e=t.substr(i,8),s=parseInt(e,2).toString(16);1==s.length&&(s="0"+s),r+=s}this.hTLV=null,this.isModified=!0,this.hV="0"+n+r},this.setByBooleanArray=function(t){for(var n="",i=0;i<t.length;i++)n+=1==t[i]?"1":"0";this.setByBinaryString(n)},this.newFalseArray=function(t){for(var n=new Array(t),i=0;i<t;i++)n[i]=!1;return n},this.getFreshValueHex=function(){return this.hV},void 0!==t&&("string"==typeof t&&t.toLowerCase().match(/^[0-9a-f]+$/)?this.setHexValueIncludingUnusedBits(t):void 0!==t.hex?this.setHexValueIncludingUnusedBits(t.hex):void 0!==t.bin?this.setByBinaryString(t.bin):void 0!==t.array&&this.setByBooleanArray(t.array))},ea.lang.extend(sh.asn1.DERBitString,sh.asn1.ASN1Object),sh.asn1.DEROctetString=function(t){if(void 0!==t&&void 0!==t.obj){var n=sh.asn1.ASN1Util.newObject(t.obj);t.hex=n.getEncodedHex()}sh.asn1.DEROctetString.superclass.constructor.call(this,t),this.hT="04"},ea.lang.extend(sh.asn1.DEROctetString,sh.asn1.DERAbstractString),sh.asn1.DERNull=function(){sh.asn1.DERNull.superclass.constructor.call(this),this.hT="05",this.hTLV="0500"},ea.lang.extend(sh.asn1.DERNull,sh.asn1.ASN1Object),sh.asn1.DERObjectIdentifier=function(t){var n=function(t){var n=t.toString(16);return 1==n.length&&(n="0"+n),n},i=function(t){var i="",r=new ma(t,10).toString(2),e=7-r.length%7;7==e&&(e=0);for(var s="",o=0;o<e;o++)s+="0";for(r=s+r,o=0;o<r.length-1;o+=7){var u=r.substr(o,7);o!=r.length-7&&(u="1"+u),i+=n(parseInt(u,2))}return i};sh.asn1.DERObjectIdentifier.superclass.constructor.call(this),this.hT="06",this.setValueHex=function(t){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=t},this.setValueOidString=function(t){if(!t.match(/^[0-9.]+$/))throw"malformed oid string: "+t;var r="",e=t.split("."),s=40*parseInt(e[0])+parseInt(e[1]);r+=n(s),e.splice(0,2);for(var o=0;o<e.length;o++)r+=i(e[o]);this.hTLV=null,this.isModified=!0,this.s=null,this.hV=r},this.setValueName=function(t){var n=sh.asn1.x509.OID.name2oid(t);if(""===n)throw"DERObjectIdentifier oidName undefined: "+t;this.setValueOidString(n)},this.getFreshValueHex=function(){return this.hV},void 0!==t&&("string"==typeof t?t.match(/^[0-2].[0-9.]+$/)?this.setValueOidString(t):this.setValueName(t):void 0!==t.oid?this.setValueOidString(t.oid):void 0!==t.hex?this.setValueHex(t.hex):void 0!==t.name&&this.setValueName(t.name))},ea.lang.extend(sh.asn1.DERObjectIdentifier,sh.asn1.ASN1Object),sh.asn1.DEREnumerated=function(t){sh.asn1.DEREnumerated.superclass.constructor.call(this),this.hT="0a",this.setByBigInteger=function(t){this.hTLV=null,this.isModified=!0,this.hV=sh.asn1.ASN1Util.bigIntToMinTwosComplementsHex(t)},this.setByInteger=function(t){var n=new ma(String(t),10);this.setByBigInteger(n)},this.setValueHex=function(t){this.hV=t},this.getFreshValueHex=function(){return this.hV},void 0!==t&&(void 0!==t.int?this.setByInteger(t.int):"number"==typeof t?this.setByInteger(t):void 0!==t.hex&&this.setValueHex(t.hex))},ea.lang.extend(sh.asn1.DEREnumerated,sh.asn1.ASN1Object),sh.asn1.DERUTF8String=function(t){sh.asn1.DERUTF8String.superclass.constructor.call(this,t),this.hT="0c"},ea.lang.extend(sh.asn1.DERUTF8String,sh.asn1.DERAbstractString),sh.asn1.DERNumericString=function(t){sh.asn1.DERNumericString.superclass.constructor.call(this,t),this.hT="12"},ea.lang.extend(sh.asn1.DERNumericString,sh.asn1.DERAbstractString),sh.asn1.DERPrintableString=function(t){sh.asn1.DERPrintableString.superclass.constructor.call(this,t),this.hT="13"},ea.lang.extend(sh.asn1.DERPrintableString,sh.asn1.DERAbstractString),sh.asn1.DERTeletexString=function(t){sh.asn1.DERTeletexString.superclass.constructor.call(this,t),this.hT="14"},ea.lang.extend(sh.asn1.DERTeletexString,sh.asn1.DERAbstractString),sh.asn1.DERIA5String=function(t){sh.asn1.DERIA5String.superclass.constructor.call(this,t),this.hT="16"},ea.lang.extend(sh.asn1.DERIA5String,sh.asn1.DERAbstractString),sh.asn1.DERUTCTime=function(t){sh.asn1.DERUTCTime.superclass.constructor.call(this,t),this.hT="17",this.setByDate=function(t){this.hTLV=null,this.isModified=!0,this.date=t,this.s=this.formatDate(this.date,"utc"),this.hV=lh(this.s)},this.getFreshValueHex=function(){return void 0===this.date&&void 0===this.s&&(this.date=new Date,this.s=this.formatDate(this.date,"utc"),this.hV=lh(this.s)),this.hV},void 0!==t&&(void 0!==t.str?this.setString(t.str):"string"==typeof t&&t.match(/^[0-9]{12}Z$/)?this.setString(t):void 0!==t.hex?this.setStringHex(t.hex):void 0!==t.date&&this.setByDate(t.date))},ea.lang.extend(sh.asn1.DERUTCTime,sh.asn1.DERAbstractTime),sh.asn1.DERGeneralizedTime=function(t){sh.asn1.DERGeneralizedTime.superclass.constructor.call(this,t),this.hT="18",this.withMillis=!1,this.setByDate=function(t){this.hTLV=null,this.isModified=!0,this.date=t,this.s=this.formatDate(this.date,"gen",this.withMillis),this.hV=lh(this.s)},this.getFreshValueHex=function(){return void 0===this.date&&void 0===this.s&&(this.date=new Date,this.s=this.formatDate(this.date,"gen",this.withMillis),this.hV=lh(this.s)),this.hV},void 0!==t&&(void 0!==t.str?this.setString(t.str):"string"==typeof t&&t.match(/^[0-9]{14}Z$/)?this.setString(t):void 0!==t.hex?this.setStringHex(t.hex):void 0!==t.date&&this.setByDate(t.date),!0===t.millis&&(this.withMillis=!0))},ea.lang.extend(sh.asn1.DERGeneralizedTime,sh.asn1.DERAbstractTime),sh.asn1.DERSequence=function(t){sh.asn1.DERSequence.superclass.constructor.call(this,t),this.hT="30",this.getFreshValueHex=function(){for(var t="",n=0;n<this.asn1Array.length;n++)t+=this.asn1Array[n].getEncodedHex();return this.hV=t,this.hV}},ea.lang.extend(sh.asn1.DERSequence,sh.asn1.DERAbstractStructured),sh.asn1.DERSet=function(t){sh.asn1.DERSet.superclass.constructor.call(this,t),this.hT="31",this.sortFlag=!0,this.getFreshValueHex=function(){for(var t=new Array,n=0;n<this.asn1Array.length;n++)t.push(this.asn1Array[n].getEncodedHex());return 1==this.sortFlag&&t.sort(),this.hV=t.join(""),this.hV},void 0!==t&&void 0!==t.sortflag&&0==t.sortflag&&(this.sortFlag=!1)},ea.lang.extend(sh.asn1.DERSet,sh.asn1.DERAbstractStructured),sh.asn1.DERTaggedObject=function(t){sh.asn1.DERTaggedObject.superclass.constructor.call(this),this.hT="a0",this.hV="",this.isExplicit=!0,this.asn1Object=null,this.setASN1Object=function(t,n,i){this.hT=n,this.isExplicit=t,this.asn1Object=i,this.isExplicit?(this.hV=this.asn1Object.getEncodedHex(),this.hTLV=null,this.isModified=!0):(this.hV=null,this.hTLV=i.getEncodedHex(),this.hTLV=this.hTLV.replace(/^../,n),this.isModified=!1)},this.getFreshValueHex=function(){return this.hV},void 0!==t&&(void 0!==t.tag&&(this.hT=t.tag),void 0!==t.explicit&&(this.isExplicit=t.explicit),void 0!==t.obj&&(this.asn1Object=t.obj,this.setASN1Object(this.isExplicit,this.hT,this.asn1Object)))},ea.lang.extend(sh.asn1.DERTaggedObject,sh.asn1.ASN1Object);var sh,oh,uh,ah=new function(){};function hh(t){for(var n=new Array,i=0;i<t.length;i++)n[i]=t.charCodeAt(i);return n}function ch(t){for(var n="",i=0;i<t.length;i++)n+=String.fromCharCode(t[i]);return n}function fh(t){for(var n="",i=0;i<t.length;i++){var r=t[i].toString(16);1==r.length&&(r="0"+r),n+=r}return n}function lh(t){return fh(hh(t))}function vh(t){return(t=(t=t.replace(/\=/g,"")).replace(/\+/g,"-")).replace(/\//g,"_")}function dh(t){return t.length%4==2?t+="==":t.length%4==3&&(t+="="),(t=t.replace(/-/g,"+")).replace(/_/g,"/")}function ph(t){return t.length%2==1&&(t="0"+t),vh(da(t))}function wh(t){return pa(dh(t))}function mh(t){return Ih(Nh(t))}function yh(t){return decodeURIComponent(xh(t))}function gh(t){for(var n="",i=0;i<t.length-1;i+=2)n+=String.fromCharCode(parseInt(t.substr(i,2),16));return n}function Fh(t){for(var n="",i=0;i<t.length;i++)n+=("0"+t.charCodeAt(i).toString(16)).slice(-2);return n}function bh(t){return da(t)}function Eh(t){var n=bh(t).replace(/(.{64})/g,"$1\r\n");return n.replace(/\r\n$/,"")}function Sh(t){return pa(t.replace(/[^0-9A-Za-z\/+=]*/g,""))}function Ah(t,n){return"-----BEGIN "+n+"-----\r\n"+Eh(t)+"\r\n-----END "+n+"-----\r\n"}function kh(t,n){if(-1==t.indexOf("-----BEGIN "))throw"can't find PEM header: "+n;return Sh(t=void 0!==n?(t=t.replace("-----BEGIN "+n+"-----","")).replace("-----END "+n+"-----",""):(t=t.replace(/-----BEGIN [^-]+-----/,"")).replace(/-----END [^-]+-----/,""))}function Ch(t){var n,i,r,e,s,o,u,a,h,c,f;if(f=t.match(/^(\d{2}|\d{4})(\d\d)(\d\d)(\d\d)(\d\d)(\d\d)(|\.\d+)Z$/))return a=f[1],n=parseInt(a),2===a.length&&(50<=n&&n<100?n=1900+n:0<=n&&n<50&&(n=2e3+n)),i=parseInt(f[2])-1,r=parseInt(f[3]),e=parseInt(f[4]),s=parseInt(f[5]),o=parseInt(f[6]),u=0,""!==(h=f[7])&&(c=(h.substr(1)+"00").substr(0,3),u=parseInt(c)),Date.UTC(n,i,r,e,s,o,u);throw"unsupported zulu format: "+t}function Th(t){return~~(Ch(t)/1e3)}function Ih(t){return t.replace(/%/g,"")}function xh(t){return t.replace(/(..)/g,"%$1")}function Oh(t){var n="malformed IPv6 address";if(!t.match(/^[0-9A-Fa-f:]+$/))throw n;var i=(t=t.toLowerCase()).split(":").length-1;if(i<2)throw n;var r=":".repeat(7-i+2),e=(t=t.replace("::",r)).split(":");if(8!=e.length)throw n;for(var s=0;s<8;s++)e[s]=("0000"+e[s]).slice(-4);return e.join("")}function Rh(t){if(!t.match(/^[0-9A-Fa-f]{32}$/))throw"malformed IPv6 address octet";for(var n=(t=t.toLowerCase()).match(/.{1,4}/g),i=0;i<8;i++)n[i]=n[i].replace(/^0+/,""),""==n[i]&&(n[i]="0");var r=(t=":"+n.join(":")+":").match(/:(0:){2,}/g);if(null===r)return t.slice(1,-1);var e="";for(i=0;i<r.length;i++)r[i].length>e.length&&(e=r[i]);return(t=t.replace(e,"::")).slice(1,-1)}function Dh(t){var n="malformed hex value";if(!t.match(/^([0-9A-Fa-f][0-9A-Fa-f]){1,}$/))throw n;if(8!=t.length)return 32==t.length?Rh(t):t;try{return parseInt(t.substr(0,2),16)+"."+parseInt(t.substr(2,2),16)+"."+parseInt(t.substr(4,2),16)+"."+parseInt(t.substr(6,2),16)}catch(t){throw n}}function Nh(t){for(var n=encodeURIComponent(t),i="",r=0;r<n.length;r++)"%"==n[r]?(i+=n.substr(r,3),r+=2):i=i+"%"+lh(n[r]);return i}function jh(t){return t.length%2==1?"0"+t:t.substr(0,1)>"7"?"00"+t:t}function _h(t){t=(t=(t=t.replace(/^\s*\[\s*/,"")).replace(/\s*\]\s*$/,"")).replace(/\s*/g,"");try{return t.split(/,/).map((function(t){var n=parseInt(t);if(n<0||255<n)throw"integer not in range 0-255";return("00"+n.toString(16)).slice(-2)})).join("")}catch(t){throw"malformed integer array string: "+t}}ah.getLblen=function(t,n){if("8"!=t.substr(n+2,1))return 1;var i=parseInt(t.substr(n+3,1));return 0==i?-1:0<i&&i<10?i+1:-2},ah.getL=function(t,n){var i=ah.getLblen(t,n);return i<1?"":t.substr(n+2,2*i)},ah.getVblen=function(t,n){var i;return""==(i=ah.getL(t,n))?-1:("8"===i.substr(0,1)?new ma(i.substr(2),16):new ma(i,16)).intValue()},ah.getVidx=function(t,n){var i=ah.getLblen(t,n);return i<0?i:n+2*(i+1)},ah.getV=function(t,n){var i=ah.getVidx(t,n),r=ah.getVblen(t,n);return t.substr(i,2*r)},ah.getTLV=function(t,n){return t.substr(n,2)+ah.getL(t,n)+ah.getV(t,n)},ah.getNextSiblingIdx=function(t,n){return ah.getVidx(t,n)+2*ah.getVblen(t,n)},ah.getChildIdx=function(t,n){var i=ah,r=new Array,e=i.getVidx(t,n);"03"==t.substr(n,2)?r.push(e+2):r.push(e);for(var s=i.getVblen(t,n),o=e,u=0;;){var a=i.getNextSiblingIdx(t,o);if(null==a||a-e>=2*s)break;if(u>=200)break;r.push(a),o=a,u++}return r},ah.getNthChildIdx=function(t,n,i){return ah.getChildIdx(t,n)[i]},ah.getIdxbyList=function(t,n,i,r){var e,s,o=ah;if(0==i.length){if(void 0!==r&&t.substr(n,2)!==r)throw"checking tag doesn't match: "+t.substr(n,2)+"!="+r;return n}return e=i.shift(),s=o.getChildIdx(t,n),o.getIdxbyList(t,s[e],i,r)},ah.getTLVbyList=function(t,n,i,r){var e=ah,s=e.getIdxbyList(t,n,i);if(void 0===s)throw"can't find nthList object";if(void 0!==r&&t.substr(s,2)!=r)throw"checking tag doesn't match: "+t.substr(s,2)+"!="+r;return e.getTLV(t,s)},ah.getVbyList=function(t,n,i,r,e){var s,o,u=ah;if(void 0===(s=u.getIdxbyList(t,n,i,r)))throw"can't find nthList object";return o=u.getV(t,s),!0===e&&(o=o.substr(2)),o},ah.hextooidstr=function(t){var n=function(t,n){return t.length>=n?t:new Array(n-t.length+1).join("0")+t},i=[],r=t.substr(0,2),e=parseInt(r,16);i[0]=new String(Math.floor(e/40)),i[1]=new String(e%40);for(var s=t.substr(2),o=[],u=0;u<s.length/2;u++)o.push(parseInt(s.substr(2*u,2),16));var a=[],h="";for(u=0;u<o.length;u++)128&o[u]?h+=n((127&o[u]).toString(2),7):(h+=n((127&o[u]).toString(2),7),a.push(new String(parseInt(h,2))),h="");var c=i.join(".");return a.length>0&&(c=c+"."+a.join(".")),c},ah.dump=function(t,n,i,r){var e=ah,s=e.getV,o=e.dump,u=e.getChildIdx,a=t;t instanceof sh.asn1.ASN1Object&&(a=t.getEncodedHex());var h=function(t,n){return t.length<=2*n?t:t.substr(0,n)+"..(total "+t.length/2+"bytes).."+t.substr(t.length-n,n)};void 0===n&&(n={ommit_long_octet:32}),void 0===i&&(i=0),void 0===r&&(r="");var c=n.ommit_long_octet;if("01"==a.substr(i,2))return"00"==(f=s(a,i))?r+"BOOLEAN FALSE\n":r+"BOOLEAN TRUE\n";if("02"==a.substr(i,2))return r+"INTEGER "+h(f=s(a,i),c)+"\n";if("03"==a.substr(i,2))return r+"BITSTRING "+h(f=s(a,i),c)+"\n";if("04"==a.substr(i,2)){var f=s(a,i);return e.isASN1HEX(f)?(E=r+"OCTETSTRING, encapsulates\n")+o(f,n,0,r+"  "):r+"OCTETSTRING "+h(f,c)+"\n"}if("05"==a.substr(i,2))return r+"NULL\n";if("06"==a.substr(i,2)){var l=s(a,i),v=sh.asn1.ASN1Util.oidHexToInt(l),d=sh.asn1.x509.OID.oid2name(v),p=v.replace(/\./g," ");return""!=d?r+"ObjectIdentifier "+d+" ("+p+")\n":r+"ObjectIdentifier ("+p+")\n"}if("0c"==a.substr(i,2))return r+"UTF8String '"+yh(s(a,i))+"'\n";if("13"==a.substr(i,2))return r+"PrintableString '"+yh(s(a,i))+"'\n";if("14"==a.substr(i,2))return r+"TeletexString '"+yh(s(a,i))+"'\n";if("16"==a.substr(i,2))return r+"IA5String '"+yh(s(a,i))+"'\n";if("17"==a.substr(i,2))return r+"UTCTime "+yh(s(a,i))+"\n";if("18"==a.substr(i,2))return r+"GeneralizedTime "+yh(s(a,i))+"\n";if("30"==a.substr(i,2)){if("3000"==a.substr(i,4))return r+"SEQUENCE {}\n";E=r+"SEQUENCE\n";var w=n;if((2==(g=u(a,i)).length||3==g.length)&&"06"==a.substr(g[0],2)&&"04"==a.substr(g[g.length-1],2)){d=e.oidname(s(a,g[0]));var m=JSON.parse(JSON.stringify(n));m.x509ExtName=d,w=m}for(var y=0;y<g.length;y++)E+=o(a,w,g[y],r+"  ");return E}if("31"==a.substr(i,2)){E=r+"SET\n";var g=u(a,i);for(y=0;y<g.length;y++)E+=o(a,n,g[y],r+"  ");return E}var F=parseInt(a.substr(i,2),16);if(0!=(128&F)){var b=31&F;if(0!=(32&F)){var E=r+"["+b+"]\n";for(g=u(a,i),y=0;y<g.length;y++)E+=o(a,n,g[y],r+"  ");return E}return"68747470"==(f=s(a,i)).substr(0,8)&&(f=yh(f)),"subjectAltName"===n.x509ExtName&&2==b&&(f=yh(f)),r+"["+b+"] "+f+"\n"}return r+"UNKNOWN("+a.substr(i,2)+") "+s(a,i)+"\n"},ah.isASN1HEX=function(t){var n=ah;if(t.length%2==1)return!1;var i=n.getVblen(t,0),r=t.substr(0,2),e=n.getL(t,0);return t.length-r.length-e.length==2*i},ah.oidname=function(t){var n=sh.asn1;sh.lang.String.isHex(t)&&(t=n.ASN1Util.oidHexToInt(t));var i=n.x509.OID.oid2name(t);return""===i&&(i=t),i},void 0!==sh&&sh||(sh={}),void 0!==sh.asn1&&sh.asn1||(sh.asn1={}),void 0!==sh.asn1.x509&&sh.asn1.x509||(sh.asn1.x509={}),sh.asn1.x509.Certificate=function(t){sh.asn1.x509.Certificate.superclass.constructor.call(this);var n=sh.asn1,i=n.DERSequence,r=n.DERBitString;this.sign=function(){this.asn1SignatureAlg=this.asn1TBSCert.asn1SignatureAlg;var t=new sh.crypto.Signature({alg:this.asn1SignatureAlg.nameAlg});t.init(this.prvKey),t.updateHex(this.asn1TBSCert.getEncodedHex()),this.hexSig=t.sign(),this.asn1Sig=new r({hex:"00"+this.hexSig});var n=new i({array:[this.asn1TBSCert,this.asn1SignatureAlg,this.asn1Sig]});this.hTLV=n.getEncodedHex(),this.isModified=!1},this.setSignatureHex=function(t){this.asn1SignatureAlg=this.asn1TBSCert.asn1SignatureAlg,this.hexSig=t,this.asn1Sig=new r({hex:"00"+this.hexSig});var n=new i({array:[this.asn1TBSCert,this.asn1SignatureAlg,this.asn1Sig]});this.hTLV=n.getEncodedHex(),this.isModified=!1},this.getEncodedHex=function(){if(0==this.isModified&&null!=this.hTLV)return this.hTLV;throw"not signed yet"},this.getPEMString=function(){return"-----BEGIN CERTIFICATE-----\r\n"+Eh(this.getEncodedHex())+"\r\n-----END CERTIFICATE-----\r\n"},void 0!==t&&(void 0!==t.tbscertobj&&(this.asn1TBSCert=t.tbscertobj),void 0!==t.prvkeyobj&&(this.prvKey=t.prvkeyobj))},ea.lang.extend(sh.asn1.x509.Certificate,sh.asn1.ASN1Object),sh.asn1.x509.TBSCertificate=function(){sh.asn1.x509.TBSCertificate.superclass.constructor.call(this);var t=sh.asn1,n=t.DERSequence,i=t.DERInteger,r=t.DERTaggedObject,e=t.x509,s=e.Time,o=e.X500Name,u=e.SubjectPublicKeyInfo;this._initialize=function(){this.asn1Array=new Array,this.asn1Version=new r({obj:new i({int:2})}),this.asn1SerialNumber=null,this.asn1SignatureAlg=null,this.asn1Issuer=null,this.asn1NotBefore=null,this.asn1NotAfter=null,this.asn1Subject=null,this.asn1SubjPKey=null,this.extensionsArray=new Array},this.setSerialNumberByParam=function(t){this.asn1SerialNumber=new i(t)},this.setSignatureAlgByParam=function(t){this.asn1SignatureAlg=new e.AlgorithmIdentifier(t)},this.setIssuerByParam=function(t){this.asn1Issuer=new o(t)},this.setNotBeforeByParam=function(t){this.asn1NotBefore=new s(t)},this.setNotAfterByParam=function(t){this.asn1NotAfter=new s(t)},this.setSubjectByParam=function(t){this.asn1Subject=new o(t)},this.setSubjectPublicKey=function(t){this.asn1SubjPKey=new u(t)},this.setSubjectPublicKeyByGetKey=function(t){var n=Ph.getKey(t);this.asn1SubjPKey=new u(n)},this.appendExtension=function(t){this.extensionsArray.push(t)},this.appendExtensionByName=function(t,n){sh.asn1.x509.Extension.appendByNameToArray(t,n,this.extensionsArray)},this.getEncodedHex=function(){if(null==this.asn1NotBefore||null==this.asn1NotAfter)throw"notBefore and/or notAfter not set";var t=new n({array:[this.asn1NotBefore,this.asn1NotAfter]});if(this.asn1Array=new Array,this.asn1Array.push(this.asn1Version),this.asn1Array.push(this.asn1SerialNumber),this.asn1Array.push(this.asn1SignatureAlg),this.asn1Array.push(this.asn1Issuer),this.asn1Array.push(t),this.asn1Array.push(this.asn1Subject),this.asn1Array.push(this.asn1SubjPKey),this.extensionsArray.length>0){var i=new n({array:this.extensionsArray}),e=new r({explicit:!0,tag:"a3",obj:i});this.asn1Array.push(e)}var s=new n({array:this.asn1Array});return this.hTLV=s.getEncodedHex(),this.isModified=!1,this.hTLV},this._initialize()},ea.lang.extend(sh.asn1.x509.TBSCertificate,sh.asn1.ASN1Object),sh.asn1.x509.Extension=function(t){sh.asn1.x509.Extension.superclass.constructor.call(this);var n=sh.asn1,i=n.DERObjectIdentifier,r=n.DEROctetString,e=n.DERBoolean,s=n.DERSequence;this.getEncodedHex=function(){var t=new i({oid:this.oid}),n=new r({hex:this.getExtnValueHex()}),o=new Array;return o.push(t),this.critical&&o.push(new e),o.push(n),new s({array:o}).getEncodedHex()},this.critical=!1,void 0!==t&&void 0!==t.critical&&(this.critical=t.critical)},ea.lang.extend(sh.asn1.x509.Extension,sh.asn1.ASN1Object),sh.asn1.x509.Extension.appendByNameToArray=function(t,n,i){var r=t.toLowerCase(),e=sh.asn1.x509;if("basicconstraints"==r){var s=new e.BasicConstraints(n);i.push(s)}else if("keyusage"==r)s=new e.KeyUsage(n),i.push(s);else if("crldistributionpoints"==r)s=new e.CRLDistributionPoints(n),i.push(s);else if("extkeyusage"==r)s=new e.ExtKeyUsage(n),i.push(s);else if("authoritykeyidentifier"==r)s=new e.AuthorityKeyIdentifier(n),i.push(s);else if("authorityinfoaccess"==r)s=new e.AuthorityInfoAccess(n),i.push(s);else if("subjectaltname"==r)s=new e.SubjectAltName(n),i.push(s);else{if("issueraltname"!=r)throw"unsupported extension name: "+t;s=new e.IssuerAltName(n),i.push(s)}},sh.asn1.x509.KeyUsage=function(t){sh.asn1.x509.KeyUsage.superclass.constructor.call(this,t);var n=Hh.KEYUSAGE_NAME;if(this.getExtnValueHex=function(){return this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.15",void 0!==t&&(void 0!==t.bin&&(this.asn1ExtnValue=new sh.asn1.DERBitString(t)),void 0!==t.names&&void 0!==t.names.length)){for(var i=t.names,r="000000000",e=0;e<i.length;e++)for(var s=0;s<n.length;s++)i[e]===n[s]&&(r=r.substring(0,s)+"1"+r.substring(s+1,r.length));this.asn1ExtnValue=new sh.asn1.DERBitString({bin:r})}},ea.lang.extend(sh.asn1.x509.KeyUsage,sh.asn1.x509.Extension),sh.asn1.x509.BasicConstraints=function(t){sh.asn1.x509.BasicConstraints.superclass.constructor.call(this,t),this.getExtnValueHex=function(){var t=new Array;this.cA&&t.push(new sh.asn1.DERBoolean),this.pathLen>-1&&t.push(new sh.asn1.DERInteger({int:this.pathLen}));var n=new sh.asn1.DERSequence({array:t});return this.asn1ExtnValue=n,this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.19",this.cA=!1,this.pathLen=-1,void 0!==t&&(void 0!==t.cA&&(this.cA=t.cA),void 0!==t.pathLen&&(this.pathLen=t.pathLen))},ea.lang.extend(sh.asn1.x509.BasicConstraints,sh.asn1.x509.Extension),sh.asn1.x509.CRLDistributionPoints=function(t){sh.asn1.x509.CRLDistributionPoints.superclass.constructor.call(this,t);var n=sh.asn1,i=n.x509;this.getExtnValueHex=function(){return this.asn1ExtnValue.getEncodedHex()},this.setByDPArray=function(t){this.asn1ExtnValue=new n.DERSequence({array:t})},this.setByOneURI=function(t){var n=new i.GeneralNames([{uri:t}]),r=new i.DistributionPointName(n),e=new i.DistributionPoint({dpobj:r});this.setByDPArray([e])},this.oid="2.5.29.31",void 0!==t&&(void 0!==t.array?this.setByDPArray(t.array):void 0!==t.uri&&this.setByOneURI(t.uri))},ea.lang.extend(sh.asn1.x509.CRLDistributionPoints,sh.asn1.x509.Extension),sh.asn1.x509.ExtKeyUsage=function(t){sh.asn1.x509.ExtKeyUsage.superclass.constructor.call(this,t);var n=sh.asn1;this.setPurposeArray=function(t){this.asn1ExtnValue=new n.DERSequence;for(var i=0;i<t.length;i++){var r=new n.DERObjectIdentifier(t[i]);this.asn1ExtnValue.appendASN1Object(r)}},this.getExtnValueHex=function(){return this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.37",void 0!==t&&void 0!==t.array&&this.setPurposeArray(t.array)},ea.lang.extend(sh.asn1.x509.ExtKeyUsage,sh.asn1.x509.Extension),sh.asn1.x509.AuthorityKeyIdentifier=function(t){sh.asn1.x509.AuthorityKeyIdentifier.superclass.constructor.call(this,t);var n=sh.asn1,i=n.DERTaggedObject;this.asn1KID=null,this.asn1CertIssuer=null,this.asn1CertSN=null,this.getExtnValueHex=function(){var t=new Array;this.asn1KID&&t.push(new i({explicit:!1,tag:"80",obj:this.asn1KID})),this.asn1CertIssuer&&t.push(new i({explicit:!1,tag:"a1",obj:this.asn1CertIssuer})),this.asn1CertSN&&t.push(new i({explicit:!1,tag:"82",obj:this.asn1CertSN}));var r=new n.DERSequence({array:t});return this.asn1ExtnValue=r,this.asn1ExtnValue.getEncodedHex()},this.setKIDByParam=function(t){this.asn1KID=new sh.asn1.DEROctetString(t)},this.setCertIssuerByParam=function(t){this.asn1CertIssuer=new sh.asn1.x509.X500Name(t)},this.setCertSNByParam=function(t){this.asn1CertSN=new sh.asn1.DERInteger(t)},this.oid="2.5.29.35",void 0!==t&&(void 0!==t.kid&&this.setKIDByParam(t.kid),void 0!==t.issuer&&this.setCertIssuerByParam(t.issuer),void 0!==t.sn&&this.setCertSNByParam(t.sn))},ea.lang.extend(sh.asn1.x509.AuthorityKeyIdentifier,sh.asn1.x509.Extension),sh.asn1.x509.AuthorityInfoAccess=function(t){sh.asn1.x509.AuthorityInfoAccess.superclass.constructor.call(this,t),this.setAccessDescriptionArray=function(t){for(var n=new Array,i=sh.asn1,r=i.DERSequence,e=0;e<t.length;e++){var s=new r({array:[new i.DERObjectIdentifier(t[e].accessMethod),new i.x509.GeneralName(t[e].accessLocation)]});n.push(s)}this.asn1ExtnValue=new r({array:n})},this.getExtnValueHex=function(){return this.asn1ExtnValue.getEncodedHex()},this.oid="1.3.6.1.5.5.7.1.1",void 0!==t&&void 0!==t.array&&this.setAccessDescriptionArray(t.array)},ea.lang.extend(sh.asn1.x509.AuthorityInfoAccess,sh.asn1.x509.Extension),sh.asn1.x509.SubjectAltName=function(t){sh.asn1.x509.SubjectAltName.superclass.constructor.call(this,t),this.setNameArray=function(t){this.asn1ExtnValue=new sh.asn1.x509.GeneralNames(t)},this.getExtnValueHex=function(){return this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.17",void 0!==t&&void 0!==t.array&&this.setNameArray(t.array)},ea.lang.extend(sh.asn1.x509.SubjectAltName,sh.asn1.x509.Extension),sh.asn1.x509.IssuerAltName=function(t){sh.asn1.x509.IssuerAltName.superclass.constructor.call(this,t),this.setNameArray=function(t){this.asn1ExtnValue=new sh.asn1.x509.GeneralNames(t)},this.getExtnValueHex=function(){return this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.18",void 0!==t&&void 0!==t.array&&this.setNameArray(t.array)},ea.lang.extend(sh.asn1.x509.IssuerAltName,sh.asn1.x509.Extension),sh.asn1.x509.CRL=function(t){sh.asn1.x509.CRL.superclass.constructor.call(this),this.sign=function(){this.asn1SignatureAlg=this.asn1TBSCertList.asn1SignatureAlg,sig=new sh.crypto.Signature({alg:"SHA1withRSA",prov:"cryptojs/jsrsa"}),sig.init(this.prvKey),sig.updateHex(this.asn1TBSCertList.getEncodedHex()),this.hexSig=sig.sign(),this.asn1Sig=new sh.asn1.DERBitString({hex:"00"+this.hexSig});var t=new sh.asn1.DERSequence({array:[this.asn1TBSCertList,this.asn1SignatureAlg,this.asn1Sig]});this.hTLV=t.getEncodedHex(),this.isModified=!1},this.getEncodedHex=function(){if(0==this.isModified&&null!=this.hTLV)return this.hTLV;throw"not signed yet"},this.getPEMString=function(){return"-----BEGIN X509 CRL-----\r\n"+Eh(this.getEncodedHex())+"\r\n-----END X509 CRL-----\r\n"},void 0!==t&&(void 0!==t.tbsobj&&(this.asn1TBSCertList=t.tbsobj),void 0!==t.prvkeyobj&&(this.prvKey=t.prvkeyobj))},ea.lang.extend(sh.asn1.x509.CRL,sh.asn1.ASN1Object),sh.asn1.x509.TBSCertList=function(){sh.asn1.x509.TBSCertList.superclass.constructor.call(this);var t=sh.asn1,n=t.DERSequence,i=t.x509,r=i.Time;this.setSignatureAlgByParam=function(t){this.asn1SignatureAlg=new i.AlgorithmIdentifier(t)},this.setIssuerByParam=function(t){this.asn1Issuer=new i.X500Name(t)},this.setThisUpdateByParam=function(t){this.asn1ThisUpdate=new r(t)},this.setNextUpdateByParam=function(t){this.asn1NextUpdate=new r(t)},this.addRevokedCert=function(t,n){var r={};null!=t&&null!=t&&(r.sn=t),null!=n&&null!=n&&(r.time=n);var e=new i.CRLEntry(r);this.aRevokedCert.push(e)},this.getEncodedHex=function(){if(this.asn1Array=new Array,null!=this.asn1Version&&this.asn1Array.push(this.asn1Version),this.asn1Array.push(this.asn1SignatureAlg),this.asn1Array.push(this.asn1Issuer),this.asn1Array.push(this.asn1ThisUpdate),null!=this.asn1NextUpdate&&this.asn1Array.push(this.asn1NextUpdate),this.aRevokedCert.length>0){var t=new n({array:this.aRevokedCert});this.asn1Array.push(t)}var i=new n({array:this.asn1Array});return this.hTLV=i.getEncodedHex(),this.isModified=!1,this.hTLV},this._initialize=function(){this.asn1Version=null,this.asn1SignatureAlg=null,this.asn1Issuer=null,this.asn1ThisUpdate=null,this.asn1NextUpdate=null,this.aRevokedCert=new Array},this._initialize()},ea.lang.extend(sh.asn1.x509.TBSCertList,sh.asn1.ASN1Object),sh.asn1.x509.CRLEntry=function(t){sh.asn1.x509.CRLEntry.superclass.constructor.call(this);var n=sh.asn1;this.setCertSerial=function(t){this.sn=new n.DERInteger(t)},this.setRevocationDate=function(t){this.time=new n.x509.Time(t)},this.getEncodedHex=function(){var t=new n.DERSequence({array:[this.sn,this.time]});return this.TLV=t.getEncodedHex(),this.TLV},void 0!==t&&(void 0!==t.time&&this.setRevocationDate(t.time),void 0!==t.sn&&this.setCertSerial(t.sn))},ea.lang.extend(sh.asn1.x509.CRLEntry,sh.asn1.ASN1Object),sh.asn1.x509.X500Name=function(t){sh.asn1.x509.X500Name.superclass.constructor.call(this),this.asn1Array=new Array;var n,i=sh.asn1,r=i.x509,e=kh;(this.setByString=function(t){var n=t.split("/");n.shift();for(var i=[],e=0;e<n.length;e++)if(n[e].match(/^[^=]+=.+$/))i.push(n[e]);else{var s=i.length-1;i[s]=i[s]+"/"+n[e]}for(e=0;e<i.length;e++)this.asn1Array.push(new r.RDN({str:i[e]}))},this.setByLdapString=function(t){var n=r.X500Name.ldapToOneline(t);this.setByString(n)},this.setByObject=function(t){for(var n in t)if(t.hasOwnProperty(n)){var i=new sh.asn1.x509.RDN({str:n+"="+t[n]});this.asn1Array?this.asn1Array.push(i):this.asn1Array=[i]}},this.getEncodedHex=function(){if("string"==typeof this.hTLV)return this.hTLV;var t=new i.DERSequence({array:this.asn1Array});return this.hTLV=t.getEncodedHex(),this.hTLV},void 0!==t)&&(void 0!==t.str?this.setByString(t.str):void 0!==t.ldapstr?this.setByLdapString(t.ldapstr):"object"==typeof t&&this.setByObject(t),void 0!==t.certissuer&&((n=new Hh).hex=e(t.certissuer),this.hTLV=n.getIssuerHex()),void 0!==t.certsubject&&((n=new Hh).hex=e(t.certsubject),this.hTLV=n.getSubjectHex()))},ea.lang.extend(sh.asn1.x509.X500Name,sh.asn1.ASN1Object),sh.asn1.x509.X500Name.onelineToLDAP=function(t){if("/"!==t.substr(0,1))throw"malformed input";var n=(t=t.substr(1)).split("/");return n.reverse(),(n=n.map((function(t){return t.replace(/,/,"\\,")}))).join(",")},sh.asn1.x509.X500Name.ldapToOneline=function(t){for(var n=t.split(","),i=!1,r=[],e=0;n.length>0;e++){var s=n.shift();if(!0===i){var o=(r.pop()+","+s).replace(/\\,/g,",");r.push(o),i=!1}else r.push(s);"\\"===s.substr(-1,1)&&(i=!0)}return(r=r.map((function(t){return t.replace("/","\\/")}))).reverse(),"/"+r.join("/")},sh.asn1.x509.RDN=function(t){sh.asn1.x509.RDN.superclass.constructor.call(this),this.asn1Array=new Array,this.addByString=function(t){this.asn1Array.push(new sh.asn1.x509.AttributeTypeAndValue({str:t}))},this.addByMultiValuedString=function(t){for(var n=sh.asn1.x509.RDN.parseString(t),i=0;i<n.length;i++)this.addByString(n[i])},this.getEncodedHex=function(){var t=new sh.asn1.DERSet({array:this.asn1Array});return this.TLV=t.getEncodedHex(),this.TLV},void 0!==t&&void 0!==t.str&&this.addByMultiValuedString(t.str)},ea.lang.extend(sh.asn1.x509.RDN,sh.asn1.ASN1Object),sh.asn1.x509.RDN.parseString=function(t){for(var n=t.split(/\+/),i=!1,r=[],e=0;n.length>0;e++){var s=n.shift();if(!0===i){var o=(r.pop()+"+"+s).replace(/\\\+/g,"+");r.push(o),i=!1}else r.push(s);"\\"===s.substr(-1,1)&&(i=!0)}var u=!1,a=[];for(e=0;r.length>0;e++){if(s=r.shift(),!0===u){var h=a.pop();s.match(/"$/)?(o=(h+"+"+s).replace(/^([^=]+)="(.*)"$/,"$1=$2"),a.push(o),u=!1):a.push(h+"+"+s)}else a.push(s);s.match(/^[^=]+="/)&&(u=!0)}return a},sh.asn1.x509.AttributeTypeAndValue=function(t){sh.asn1.x509.AttributeTypeAndValue.superclass.constructor.call(this);var n=sh.asn1;this.setByString=function(t){var n=t.match(/^([^=]+)=(.+)$/);if(!n)throw"malformed attrTypeAndValueStr: "+t;this.setByAttrTypeAndValueStr(n[1],n[2])},this.setByAttrTypeAndValueStr=function(t,n){this.typeObj=sh.asn1.x509.OID.atype2obj(t);var i="utf8";"C"==t&&(i="prn"),this.valueObj=this.getValueObj(i,n)},this.getValueObj=function(t,i){if("utf8"==t)return new n.DERUTF8String({str:i});if("prn"==t)return new n.DERPrintableString({str:i});if("tel"==t)return new n.DERTeletexString({str:i});if("ia5"==t)return new n.DERIA5String({str:i});throw"unsupported directory string type: type="+t+" value="+i},this.getEncodedHex=function(){var t=new n.DERSequence({array:[this.typeObj,this.valueObj]});return this.TLV=t.getEncodedHex(),this.TLV},void 0!==t&&void 0!==t.str&&this.setByString(t.str)},ea.lang.extend(sh.asn1.x509.AttributeTypeAndValue,sh.asn1.ASN1Object),sh.asn1.x509.SubjectPublicKeyInfo=function(t){sh.asn1.x509.SubjectPublicKeyInfo.superclass.constructor.call(this);var n=sh.asn1,i=n.DERInteger,r=n.DERBitString,e=n.DERObjectIdentifier,s=n.DERSequence,o=n.ASN1Util.newObject,u=n.x509.AlgorithmIdentifier;this.getASN1Object=function(){if(null==this.asn1AlgId||null==this.asn1SubjPKey)throw"algId and/or subjPubKey not set";return new s({array:[this.asn1AlgId,this.asn1SubjPKey]})},this.getEncodedHex=function(){var t=this.getASN1Object();return this.hTLV=t.getEncodedHex(),this.hTLV},this.setPubKey=function(t){try{if(t instanceof Xa){var n=o({seq:[{int:{bigint:t.n}},{int:{int:t.e}}]}).getEncodedHex();this.asn1AlgId=new u({name:"rsaEncryption"}),this.asn1SubjPKey=new r({hex:"00"+n})}}catch(t){}try{if(t instanceof sh.crypto.ECDSA){var s=new e({name:t.curveName});this.asn1AlgId=new u({name:"ecPublicKey",asn1params:s}),this.asn1SubjPKey=new r({hex:"00"+t.pubKeyHex})}}catch(t){}try{if(t instanceof sh.crypto.DSA){s=new o({seq:[{int:{bigint:t.p}},{int:{bigint:t.q}},{int:{bigint:t.g}}]}),this.asn1AlgId=new u({name:"dsa",asn1params:s});var a=new i({bigint:t.y});this.asn1SubjPKey=new r({hex:"00"+a.getEncodedHex()})}}catch(t){}},void 0!==t&&this.setPubKey(t)},ea.lang.extend(sh.asn1.x509.SubjectPublicKeyInfo,sh.asn1.ASN1Object),sh.asn1.x509.Time=function(t){sh.asn1.x509.Time.superclass.constructor.call(this);var n=sh.asn1,i=n.DERUTCTime,r=n.DERGeneralizedTime;this.setTimeParams=function(t){this.timeParams=t},this.getEncodedHex=function(){var t=null;return t=null!=this.timeParams?"utc"==this.type?new i(this.timeParams):new r(this.timeParams):"utc"==this.type?new i:new r,this.TLV=t.getEncodedHex(),this.TLV},this.type="utc",void 0!==t&&(void 0!==t.type?this.type=t.type:void 0!==t.str&&(t.str.match(/^[0-9]{12}Z$/)&&(this.type="utc"),t.str.match(/^[0-9]{14}Z$/)&&(this.type="gen")),this.timeParams=t)},ea.lang.extend(sh.asn1.x509.Time,sh.asn1.ASN1Object),sh.asn1.x509.AlgorithmIdentifier=function(t){sh.asn1.x509.AlgorithmIdentifier.superclass.constructor.call(this),this.nameAlg=null,this.asn1Alg=null,this.asn1Params=null,this.paramEmpty=!1;var n=sh.asn1;if(this.getEncodedHex=function(){if(null===this.nameAlg&&null===this.asn1Alg)throw"algorithm not specified";null!==this.nameAlg&&null===this.asn1Alg&&(this.asn1Alg=n.x509.OID.name2obj(this.nameAlg));var t=[this.asn1Alg];null!==this.asn1Params&&t.push(this.asn1Params);var i=new n.DERSequence({array:t});return this.hTLV=i.getEncodedHex(),this.hTLV},void 0!==t&&(void 0!==t.name&&(this.nameAlg=t.name),void 0!==t.asn1params&&(this.asn1Params=t.asn1params),void 0!==t.paramempty&&(this.paramEmpty=t.paramempty)),null===this.asn1Params&&!1===this.paramEmpty&&null!==this.nameAlg){var i=this.nameAlg.toLowerCase();"withdsa"!==i.substr(-7,7)&&"withecdsa"!==i.substr(-9,9)&&(this.asn1Params=new n.DERNull)}},ea.lang.extend(sh.asn1.x509.AlgorithmIdentifier,sh.asn1.ASN1Object),sh.asn1.x509.GeneralName=function(t){sh.asn1.x509.GeneralName.superclass.constructor.call(this);var n={rfc822:"81",dns:"82",dn:"a4",uri:"86",ip:"87"},i=sh.asn1,r=i.DEROctetString,e=i.DERIA5String,s=i.DERTaggedObject,o=i.ASN1Object,u=i.x509.X500Name,a=kh;this.explicit=!1,this.setByParam=function(t){var i=null;if(void 0!==t){if(void 0!==t.rfc822&&(this.type="rfc822",i=new e({str:t[this.type]})),void 0!==t.dns&&(this.type="dns",i=new e({str:t[this.type]})),void 0!==t.uri&&(this.type="uri",i=new e({str:t[this.type]})),void 0!==t.dn&&(this.type="dn",this.explicit=!0,i=new u({str:t.dn})),void 0!==t.ldapdn&&(this.type="dn",this.explicit=!0,i=new u({ldapstr:t.ldapdn})),void 0!==t.certissuer){this.type="dn",this.explicit=!0;var h=null;if((f=t.certissuer).match(/^[0-9A-Fa-f]+$/),-1!=f.indexOf("-----BEGIN ")&&(h=a(f)),null==h)throw"certissuer param not cert";(l=new Hh).hex=h;var c=l.getIssuerHex();(i=new o).hTLV=c}if(void 0!==t.certsubj){var f,l;if(this.type="dn",this.explicit=!0,h=null,(f=t.certsubj).match(/^[0-9A-Fa-f]+$/),-1!=f.indexOf("-----BEGIN ")&&(h=a(f)),null==h)throw"certsubj param not cert";(l=new Hh).hex=h,c=l.getSubjectHex(),(i=new o).hTLV=c}if(void 0!==t.ip){this.type="ip",this.explicit=!1;var v,d=t.ip,p="malformed IP address";if(d.match(/^[0-9.]+[.][0-9.]+$/)){if(8!==(v=_h("["+d.split(".").join(",")+"]")).length)throw p}else if(d.match(/^[0-9A-Fa-f:]+:[0-9A-Fa-f:]+$/))v=Oh(d);else{if(!d.match(/^([0-9A-Fa-f][0-9A-Fa-f]){1,}$/))throw p;v=d}i=new r({hex:v})}if(null==this.type)throw"unsupported type in params="+t;this.asn1Obj=new s({explicit:this.explicit,tag:n[this.type],obj:i})}},this.getEncodedHex=function(){return this.asn1Obj.getEncodedHex()},void 0!==t&&this.setByParam(t)},ea.lang.extend(sh.asn1.x509.GeneralName,sh.asn1.ASN1Object),sh.asn1.x509.GeneralNames=function(t){sh.asn1.x509.GeneralNames.superclass.constructor.call(this);var n=sh.asn1;this.setByParamArray=function(t){for(var i=0;i<t.length;i++){var r=new n.x509.GeneralName(t[i]);this.asn1Array.push(r)}},this.getEncodedHex=function(){return new n.DERSequence({array:this.asn1Array}).getEncodedHex()},this.asn1Array=new Array,void 0!==t&&this.setByParamArray(t)},ea.lang.extend(sh.asn1.x509.GeneralNames,sh.asn1.ASN1Object),sh.asn1.x509.DistributionPointName=function(t){sh.asn1.x509.DistributionPointName.superclass.constructor.call(this);var n=sh.asn1,i=n.DERTaggedObject;if(this.getEncodedHex=function(){if("full"!=this.type)throw"currently type shall be 'full': "+this.type;return this.asn1Obj=new i({explicit:!1,tag:this.tag,obj:this.asn1V}),this.hTLV=this.asn1Obj.getEncodedHex(),this.hTLV},void 0!==t){if(!n.x509.GeneralNames.prototype.isPrototypeOf(t))throw"This class supports GeneralNames only as argument";this.type="full",this.tag="a0",this.asn1V=t}},ea.lang.extend(sh.asn1.x509.DistributionPointName,sh.asn1.ASN1Object),sh.asn1.x509.DistributionPoint=function(t){sh.asn1.x509.DistributionPoint.superclass.constructor.call(this);var n=sh.asn1;this.getEncodedHex=function(){var t=new n.DERSequence;if(null!=this.asn1DP){var i=new n.DERTaggedObject({explicit:!0,tag:"a0",obj:this.asn1DP});t.appendASN1Object(i)}return this.hTLV=t.getEncodedHex(),this.hTLV},void 0!==t&&void 0!==t.dpobj&&(this.asn1DP=t.dpobj)},ea.lang.extend(sh.asn1.x509.DistributionPoint,sh.asn1.ASN1Object),sh.asn1.x509.OID=new function(){this.atype2oidList={CN:"2.5.4.3",L:"2.5.4.7",ST:"2.5.4.8",O:"2.5.4.10",OU:"2.5.4.11",C:"2.5.4.6",STREET:"2.5.4.9",DC:"0.9.2342.19200300.100.1.25",UID:"0.9.2342.19200300.100.1.1",SN:"2.5.4.4",T:"2.5.4.12",DN:"2.5.4.49",E:"1.2.840.113549.1.9.1",description:"2.5.4.13",businessCategory:"2.5.4.15",postalCode:"2.5.4.17",serialNumber:"2.5.4.5",uniqueIdentifier:"2.5.4.45",organizationIdentifier:"2.5.4.97",jurisdictionOfIncorporationL:"1.3.6.1.4.1.311.60.2.1.1",jurisdictionOfIncorporationSP:"1.3.6.1.4.1.311.60.2.1.2",jurisdictionOfIncorporationC:"1.3.6.1.4.1.311.60.2.1.3"},this.name2oidList={sha1:"1.3.14.3.2.26",sha256:"2.16.840.1.101.3.4.2.1",sha384:"2.16.840.1.101.3.4.2.2",sha512:"2.16.840.1.101.3.4.2.3",sha224:"2.16.840.1.101.3.4.2.4",md5:"1.2.840.113549.2.5",md2:"1.3.14.7.2.2.1",ripemd160:"1.3.36.3.2.1",MD2withRSA:"1.2.840.113549.1.1.2",MD4withRSA:"1.2.840.113549.1.1.3",MD5withRSA:"1.2.840.113549.1.1.4",SHA1withRSA:"1.2.840.113549.1.1.5",SHA224withRSA:"1.2.840.113549.1.1.14",SHA256withRSA:"1.2.840.113549.1.1.11",SHA384withRSA:"1.2.840.113549.1.1.12",SHA512withRSA:"1.2.840.113549.1.1.13",SHA1withECDSA:"1.2.840.10045.4.1",SHA224withECDSA:"1.2.840.10045.4.3.1",SHA256withECDSA:"1.2.840.10045.4.3.2",SHA384withECDSA:"1.2.840.10045.4.3.3",SHA512withECDSA:"1.2.840.10045.4.3.4",dsa:"1.2.840.10040.4.1",SHA1withDSA:"1.2.840.10040.4.3",SHA224withDSA:"2.16.840.1.101.3.4.3.1",SHA256withDSA:"2.16.840.1.101.3.4.3.2",rsaEncryption:"1.2.840.113549.1.1.1",commonName:"2.5.4.3",countryName:"2.5.4.6",localityName:"2.5.4.7",stateOrProvinceName:"2.5.4.8",streetAddress:"2.5.4.9",organizationName:"2.5.4.10",organizationalUnitName:"2.5.4.11",domainComponent:"0.9.2342.19200300.100.1.25",userId:"0.9.2342.19200300.100.1.1",surname:"2.5.4.4",title:"2.5.4.12",distinguishedName:"2.5.4.49",emailAddress:"1.2.840.113549.1.9.1",description:"2.5.4.13",businessCategory:"2.5.4.15",postalCode:"2.5.4.17",uniqueIdentifier:"2.5.4.45",organizationIdentifier:"2.5.4.97",jurisdictionOfIncorporationL:"1.3.6.1.4.1.311.60.2.1.1",jurisdictionOfIncorporationSP:"1.3.6.1.4.1.311.60.2.1.2",jurisdictionOfIncorporationC:"1.3.6.1.4.1.311.60.2.1.3",subjectKeyIdentifier:"2.5.29.14",keyUsage:"2.5.29.15",subjectAltName:"2.5.29.17",issuerAltName:"2.5.29.18",basicConstraints:"2.5.29.19",nameConstraints:"2.5.29.30",cRLDistributionPoints:"2.5.29.31",certificatePolicies:"2.5.29.32",authorityKeyIdentifier:"2.5.29.35",policyConstraints:"2.5.29.36",extKeyUsage:"2.5.29.37",authorityInfoAccess:"1.3.6.1.5.5.7.1.1",ocsp:"1.3.6.1.5.5.7.48.1",caIssuers:"1.3.6.1.5.5.7.48.2",anyExtendedKeyUsage:"2.5.29.37.0",serverAuth:"1.3.6.1.5.5.7.3.1",clientAuth:"1.3.6.1.5.5.7.3.2",codeSigning:"1.3.6.1.5.5.7.3.3",emailProtection:"1.3.6.1.5.5.7.3.4",timeStamping:"1.3.6.1.5.5.7.3.8",ocspSigning:"1.3.6.1.5.5.7.3.9",ecPublicKey:"1.2.840.10045.2.1",secp256r1:"1.2.840.10045.3.1.7",secp256k1:"1.3.132.0.10",secp384r1:"1.3.132.0.34",pkcs5PBES2:"1.2.840.113549.1.5.13",pkcs5PBKDF2:"1.2.840.113549.1.5.12","des-EDE3-CBC":"1.2.840.113549.3.7",data:"1.2.840.113549.1.7.1","signed-data":"1.2.840.113549.1.7.2","enveloped-data":"1.2.840.113549.1.7.3","digested-data":"1.2.840.113549.1.7.5","encrypted-data":"1.2.840.113549.1.7.6","authenticated-data":"1.2.840.113549.1.9.16.1.2",tstinfo:"1.2.840.113549.1.9.16.1.4",extensionRequest:"1.2.840.113549.1.9.14"},this.objCache={},this.name2obj=function(t){if(void 0!==this.objCache[t])return this.objCache[t];if(void 0===this.name2oidList[t])throw"Name of ObjectIdentifier not defined: "+t;var n=new sh.asn1.DERObjectIdentifier({oid:this.name2oidList[t]});return this.objCache[t]=n,n},this.atype2obj=function(t){if(void 0!==this.objCache[t])return this.objCache[t];if(void 0===this.atype2oidList[t])throw"AttributeType name undefined: "+t;var n=new sh.asn1.DERObjectIdentifier({oid:this.atype2oidList[t]});return this.objCache[t]=n,n}},sh.asn1.x509.OID.oid2name=function(t){var n=sh.asn1.x509.OID.name2oidList;for(var i in n)if(n[i]==t)return i;return""},sh.asn1.x509.OID.oid2atype=function(t){var n=sh.asn1.x509.OID.atype2oidList;for(var i in n)if(n[i]==t)return i;return t},sh.asn1.x509.OID.name2oid=function(t){var n=sh.asn1.x509.OID.name2oidList;return void 0===n[t]?"":n[t]},sh.asn1.x509.X509Util={},sh.asn1.x509.X509Util.newCertPEM=function(t){var n=sh.asn1.x509,i=n.Certificate,r=new(0,n.TBSCertificate);if(void 0===t.serial)throw"serial number undefined.";if(r.setSerialNumberByParam(t.serial),"string"!=typeof t.sigalg.name)throw"unproper signature algorithm name";if(r.setSignatureAlgByParam(t.sigalg),void 0===t.issuer)throw"issuer name undefined.";if(r.setIssuerByParam(t.issuer),void 0===t.notbefore)throw"notbefore undefined.";if(r.setNotBeforeByParam(t.notbefore),void 0===t.notafter)throw"notafter undefined.";if(r.setNotAfterByParam(t.notafter),void 0===t.subject)throw"subject name undefined.";if(r.setSubjectByParam(t.subject),void 0===t.sbjpubkey)throw"subject public key undefined.";if(r.setSubjectPublicKeyByGetKey(t.sbjpubkey),void 0!==t.ext&&void 0!==t.ext.length)for(var e=0;e<t.ext.length;e++)for(key in t.ext[e])r.appendExtensionByName(key,t.ext[e][key]);if(void 0===t.cakey&&void 0===t.sighex)throw"param cakey and sighex undefined.";var s=null;return t.cakey&&(s=new i({tbscertobj:r,prvkeyobj:!0===t.cakey.isPrivate?t.cakey:Ph.getKey.apply(null,t.cakey)})).sign(),t.sighex&&(s=new i({tbscertobj:r})).setSignatureHex(t.sighex),s.getPEMString()},void 0!==sh&&sh||(sh={}),void 0!==sh.asn1&&sh.asn1||(sh.asn1={}),void 0!==sh.asn1.cms&&sh.asn1.cms||(sh.asn1.cms={}),sh.asn1.cms.Attribute=function(){var t=sh.asn1;t.cms.Attribute.superclass.constructor.call(this),this.getEncodedHex=function(){var n,i,r;n=new t.DERObjectIdentifier({oid:this.attrTypeOid}),i=new t.DERSet({array:this.valueList});try{i.getEncodedHex()}catch(t){throw"fail valueSet.getEncodedHex in Attribute(1)/"+t}r=new t.DERSequence({array:[n,i]});try{this.hTLV=r.getEncodedHex()}catch(t){throw"failed seq.getEncodedHex in Attribute(2)/"+t}return this.hTLV}},ea.lang.extend(sh.asn1.cms.Attribute,sh.asn1.ASN1Object),sh.asn1.cms.ContentType=function(t){var n=sh.asn1;n.cms.ContentType.superclass.constructor.call(this),this.attrTypeOid="1.2.840.113549.1.9.3";var i=null;void 0!==t&&(i=new n.DERObjectIdentifier(t),this.valueList=[i])},ea.lang.extend(sh.asn1.cms.ContentType,sh.asn1.cms.Attribute),sh.asn1.cms.MessageDigest=function(t){var n,i=sh,r=i.asn1,e=r.DEROctetString,s=r.cms;s.MessageDigest.superclass.constructor.call(this),this.attrTypeOid="1.2.840.113549.1.9.4",void 0!==t&&(t.eciObj instanceof s.EncapsulatedContentInfo&&"string"==typeof t.hashAlg?((n=new e({hex:i.crypto.Util.hashHex(t.eciObj.eContentValueHex,t.hashAlg)})).getEncodedHex(),this.valueList=[n]):((n=new e(t)).getEncodedHex(),this.valueList=[n]))},ea.lang.extend(sh.asn1.cms.MessageDigest,sh.asn1.cms.Attribute),sh.asn1.cms.SigningTime=function(t){var n=sh.asn1;if(n.cms.SigningTime.superclass.constructor.call(this),this.attrTypeOid="1.2.840.113549.1.9.5",void 0!==t){var i=new n.x509.Time(t);try{i.getEncodedHex()}catch(t){throw"SigningTime.getEncodedHex() failed/"+t}this.valueList=[i]}},ea.lang.extend(sh.asn1.cms.SigningTime,sh.asn1.cms.Attribute),sh.asn1.cms.SigningCertificate=function(t){var n=sh,i=n.asn1,r=i.DERSequence,e=i.cms;e.SigningCertificate.superclass.constructor.call(this),this.attrTypeOid="1.2.840.113549.1.9.16.2.12",this.setCerts=function(t){for(var s=[],o=0;o<t.length;o++){var u=kh(t[o]),a=n.crypto.Util.hashHex(u,"sha1"),h=new i.DEROctetString({hex:a});h.getEncodedHex();var c=new e.IssuerAndSerialNumber({cert:t[o]});c.getEncodedHex();var f=new r({array:[h,c]});f.getEncodedHex(),s.push(f)}var l=new r({array:s});l.getEncodedHex(),this.valueList=[l]},void 0!==t&&"object"==typeof t.array&&this.setCerts(t.array)},ea.lang.extend(sh.asn1.cms.SigningCertificate,sh.asn1.cms.Attribute),sh.asn1.cms.SigningCertificateV2=function(t){var n=sh.asn1,i=n.DERSequence,r=n.x509,e=n.cms,s=sh.crypto;if(e.SigningCertificateV2.superclass.constructor.call(this),this.attrTypeOid="1.2.840.113549.1.9.16.2.47",this.setCerts=function(t,o){for(var u=[],a=0;a<t.length;a++){var h=kh(t[a]),c=[];"sha256"!==o&&c.push(new r.AlgorithmIdentifier({name:o}));var f=s.Util.hashHex(h,o),l=new n.DEROctetString({hex:f});l.getEncodedHex(),c.push(l);var v=new e.IssuerAndSerialNumber({cert:t[a]});v.getEncodedHex(),c.push(v);var d=new i({array:c});d.getEncodedHex(),u.push(d)}var p=new i({array:u});p.getEncodedHex(),this.valueList=[p]},void 0!==t&&"object"==typeof t.array){var o="sha256";"string"==typeof t.hashAlg&&(o=t.hashAlg),this.setCerts(t.array,o)}},ea.lang.extend(sh.asn1.cms.SigningCertificateV2,sh.asn1.cms.Attribute),sh.asn1.cms.IssuerAndSerialNumber=function(t){var n=sh.asn1,i=n.DERInteger,r=n.x509.X500Name,e=Hh;n.cms.IssuerAndSerialNumber.superclass.constructor.call(this),this.setByCertPEM=function(t){var n=kh(t),s=new e;s.hex=n;var o=s.getIssuerHex();this.dIssuer=new r,this.dIssuer.hTLV=o;var u=s.getSerialNumberHex();this.dSerial=new i({hex:u})},this.getEncodedHex=function(){var t=new n.DERSequence({array:[this.dIssuer,this.dSerial]});return this.hTLV=t.getEncodedHex(),this.hTLV},void 0!==t&&("string"==typeof t&&-1!=t.indexOf("-----BEGIN ")&&this.setByCertPEM(t),t.issuer&&t.serial&&(this.dIssuer=t.issuer instanceof r?t.issuer:new r(t.issuer),this.dSerial=t.serial instanceof i?t.serial:new i(t.serial)),"string"==typeof t.cert&&this.setByCertPEM(t.cert))},ea.lang.extend(sh.asn1.cms.IssuerAndSerialNumber,sh.asn1.ASN1Object),sh.asn1.cms.AttributeList=function(t){var n=sh.asn1,i=n.cms;i.AttributeList.superclass.constructor.call(this),this.list=new Array,this.sortFlag=!0,this.add=function(t){t instanceof i.Attribute&&this.list.push(t)},this.length=function(){return this.list.length},this.clear=function(){this.list=new Array,this.hTLV=null,this.hV=null},this.getEncodedHex=function(){if("string"==typeof this.hTLV)return this.hTLV;var t=new n.DERSet({array:this.list,sortflag:this.sortFlag});return this.hTLV=t.getEncodedHex(),this.hTLV},void 0!==t&&void 0!==t.sortflag&&0==t.sortflag&&(this.sortFlag=!1)},ea.lang.extend(sh.asn1.cms.AttributeList,sh.asn1.ASN1Object),sh.asn1.cms.SignerInfo=function(){var t=sh.asn1,n=t.DERTaggedObject,i=t.cms,r=i.AttributeList,e=i.ContentType,s=i.EncapsulatedContentInfo,o=i.MessageDigest,u=i.SignedData,a=t.x509.AlgorithmIdentifier,h=sh.crypto,c=Ph;i.SignerInfo.superclass.constructor.call(this),this.dCMSVersion=new t.DERInteger({int:1}),this.dSignerIdentifier=null,this.dDigestAlgorithm=null,this.dSignedAttrs=new r,this.dSigAlg=null,this.dSig=null,this.dUnsignedAttrs=new r,this.setSignerIdentifier=function(t){"string"==typeof t&&-1!=t.indexOf("CERTIFICATE")&&-1!=t.indexOf("BEGIN")&&-1!=t.indexOf("END")&&(this.dSignerIdentifier=new i.IssuerAndSerialNumber({cert:t}))},this.setForContentAndHash=function(t){void 0!==t&&(t.eciObj instanceof s&&(this.dSignedAttrs.add(new e({oid:"1.2.840.113549.1.7.1"})),this.dSignedAttrs.add(new o({eciObj:t.eciObj,hashAlg:t.hashAlg}))),void 0!==t.sdObj&&t.sdObj instanceof u&&-1==t.sdObj.digestAlgNameList.join(":").indexOf(t.hashAlg)&&t.sdObj.digestAlgNameList.push(t.hashAlg),"string"==typeof t.hashAlg&&(this.dDigestAlgorithm=new a({name:t.hashAlg})))},this.sign=function(n,i){this.dSigAlg=new a({name:i});var r=this.dSignedAttrs.getEncodedHex(),e=c.getKey(n),s=new h.Signature({alg:i});s.init(e),s.updateHex(r);var o=s.sign();this.dSig=new t.DEROctetString({hex:o})},this.addUnsigned=function(t){this.hTLV=null,this.dUnsignedAttrs.hTLV=null,this.dUnsignedAttrs.add(t)},this.getEncodedHex=function(){if(this.dSignedAttrs instanceof r&&0==this.dSignedAttrs.length())throw"SignedAttrs length = 0 (empty)";var i=new n({obj:this.dSignedAttrs,tag:"a0",explicit:!1}),e=null;this.dUnsignedAttrs.length()>0&&(e=new n({obj:this.dUnsignedAttrs,tag:"a1",explicit:!1}));var s=[this.dCMSVersion,this.dSignerIdentifier,this.dDigestAlgorithm,i,this.dSigAlg,this.dSig];null!=e&&s.push(e);var o=new t.DERSequence({array:s});return this.hTLV=o.getEncodedHex(),this.hTLV}},ea.lang.extend(sh.asn1.cms.SignerInfo,sh.asn1.ASN1Object),sh.asn1.cms.EncapsulatedContentInfo=function(){var t=sh.asn1,n=t.DERTaggedObject,i=t.DERSequence,r=t.DERObjectIdentifier,e=t.DEROctetString;t.cms.EncapsulatedContentInfo.superclass.constructor.call(this),this.dEContentType=new r({name:"data"}),this.dEContent=null,this.isDetached=!1,this.eContentValueHex=null,this.setContentType=function(t){this.dEContentType=t.match(/^[0-2][.][0-9.]+$/)?new r({oid:t}):new r({name:t})},this.setContentValue=function(t){void 0!==t&&("string"==typeof t.hex?this.eContentValueHex=t.hex:"string"==typeof t.str&&(this.eContentValueHex=mh(t.str)))},this.setContentValueHex=function(t){this.eContentValueHex=t},this.setContentValueStr=function(t){this.eContentValueHex=mh(t)},this.getEncodedHex=function(){if("string"!=typeof this.eContentValueHex)throw"eContentValue not yet set";var t=new e({hex:this.eContentValueHex});this.dEContent=new n({obj:t,tag:"a0",explicit:!0});var r=[this.dEContentType];this.isDetached||r.push(this.dEContent);var s=new i({array:r});return this.hTLV=s.getEncodedHex(),this.hTLV}},ea.lang.extend(sh.asn1.cms.EncapsulatedContentInfo,sh.asn1.ASN1Object),sh.asn1.cms.ContentInfo=function(t){var n=sh.asn1,i=n.DERTaggedObject,r=n.DERSequence,e=n.x509;sh.asn1.cms.ContentInfo.superclass.constructor.call(this),this.dContentType=null,this.dContent=null,this.setContentType=function(t){"string"==typeof t&&(this.dContentType=e.OID.name2obj(t))},this.getEncodedHex=function(){var t=new i({obj:this.dContent,tag:"a0",explicit:!0}),n=new r({array:[this.dContentType,t]});return this.hTLV=n.getEncodedHex(),this.hTLV},void 0!==t&&(t.type&&this.setContentType(t.type),t.obj&&t.obj instanceof n.ASN1Object&&(this.dContent=t.obj))},ea.lang.extend(sh.asn1.cms.ContentInfo,sh.asn1.ASN1Object),sh.asn1.cms.SignedData=function(){var t=sh.asn1,n=t.ASN1Object,i=t.DERInteger,r=t.DERSet,e=t.DERSequence,s=t.DERTaggedObject,o=t.cms,u=o.EncapsulatedContentInfo,a=o.SignerInfo,h=o.ContentInfo,c=t.x509.AlgorithmIdentifier;sh.asn1.cms.SignedData.superclass.constructor.call(this),this.dCMSVersion=new i({int:1}),this.dDigestAlgs=null,this.digestAlgNameList=[],this.dEncapContentInfo=new u,this.dCerts=null,this.certificateList=[],this.crlList=[],this.signerInfoList=[new a],this.addCertificatesByPEM=function(t){var i=kh(t),r=new n;r.hTLV=i,this.certificateList.push(r)},this.getEncodedHex=function(){if("string"==typeof this.hTLV)return this.hTLV;if(null==this.dDigestAlgs){for(var t=[],n=0;n<this.digestAlgNameList.length;n++){var i=new c({name:this.digestAlgNameList[n]});t.push(i)}this.dDigestAlgs=new r({array:t})}var o=[this.dCMSVersion,this.dDigestAlgs,this.dEncapContentInfo];if(null==this.dCerts&&this.certificateList.length>0){var u=new r({array:this.certificateList});this.dCerts=new s({obj:u,tag:"a0",explicit:!1})}null!=this.dCerts&&o.push(this.dCerts);var a=new r({array:this.signerInfoList});o.push(a);var h=new e({array:o});return this.hTLV=h.getEncodedHex(),this.hTLV},this.getContentInfo=function(){return this.getEncodedHex(),new h({type:"signed-data",obj:this})},this.getContentInfoEncodedHex=function(){return this.getContentInfo().getEncodedHex()},this.getPEM=function(){return Ah(this.getContentInfoEncodedHex(),"CMS")}},ea.lang.extend(sh.asn1.cms.SignedData,sh.asn1.ASN1Object),sh.asn1.cms.CMSUtil=new function(){},sh.asn1.cms.CMSUtil.newSignedData=function(t){var n=sh.asn1,i=n.cms,r=i.SignerInfo,e=i.SigningTime,s=i.SigningCertificate,o=i.SigningCertificateV2,u=n.cades.SignaturePolicyIdentifier,a=new(0,i.SignedData);if(a.dEncapContentInfo.setContentValue(t.content),"object"==typeof t.certs)for(var h=0;h<t.certs.length;h++)a.addCertificatesByPEM(t.certs[h]);for(a.signerInfoList=[],h=0;h<t.signerInfos.length;h++){var c=t.signerInfos[h],f=new r;for(attrName in f.setSignerIdentifier(c.signerCert),f.setForContentAndHash({sdObj:a,eciObj:a.dEncapContentInfo,hashAlg:c.hashAlg}),c.sAttr){var l=c.sAttr[attrName];if("SigningTime"==attrName){var v=new e(l);f.dSignedAttrs.add(v)}"SigningCertificate"==attrName&&(v=new s(l),f.dSignedAttrs.add(v)),"SigningCertificateV2"==attrName&&(v=new o(l),f.dSignedAttrs.add(v)),"SignaturePolicyIdentifier"==attrName&&(v=new u(l),f.dSignedAttrs.add(v))}f.sign(c.signerPrvKey,c.sigAlg),a.signerInfoList.push(f)}return a},sh.asn1.cms.CMSUtil.verifySignedData=function(t){var n=ah.getVbyList,i=ah.getTLVbyList,r=ah.getIdxbyList,e=ah.getChildIdx,s=ah.getTLV,o=ah.oidname,u=sh.crypto.Util.hashHex;void 0===t.cms&&(0,sh.lang.String.isHex)(t.cms);var a=t.cms,h=function(t,s){var u=s.idx;s.signerid_issuer1=i(t,u,[1,0],"30"),s.signerid_serial1=n(t,u,[1,1],"02"),s.hashalg=o(n(t,u,[2,0],"06"));var a=r(t,u,[3],"a0");s.idxSignedAttrs=a,c(t,s,a);var h=e(t,u).length;if(h<6)throw"malformed SignerInfo";s.sigalg=o(n(t,u,[h-2,0],"06")),s.sigval=n(t,u,[h-1],"04")},c=function(t,i,r){var s=e(t,r);i.signedAttrIdxList=s;for(var o=0;o<s.length;o++){var u,a=s[o],h=n(t,a,[0],"06");"2a864886f70d010905"===h?(u=yh(n(t,a,[1,0])),i.saSigningTime=u):"2a864886f70d010904"===h&&(u=n(t,a,[1,0],"04"),i.saMessageDigest=u)}},f=function(t,n,i){i.verifyDetail={};var r=i.verifyDetail,o=n.parse.econtent,a=i.hashalg,h=i.saMessageDigest;r.validMessageDigest=!1,u(o,a)===h&&(r.validMessageDigest=!0),function(t,n,i){var r,o=n.parse.certsIdx;if(void 0===n.certs){r=[],n.certkeys=[];for(var u=e(t,o),a=0;a<u.length;a++){var h=s(t,u[a]),c=new Hh;c.readCertHex(h),r[a]=c,n.certkeys[a]=c.getPublicKey()}n.certs=r}else r=n.certs;for(n.cccc=r.length,n.cccci=u.length,a=0;a<r.length;a++){var f=c.getIssuerHex(),l=c.getSerialNumberHex();i.signerid_issuer1===f&&i.signerid_serial1===l&&(i.certkey_idx=a)}}(t,n,i),r.validSignatureValue=!1;var c=i.sigalg,f="31"+s(t,i.idxSignedAttrs).substr(2);i.signedattrshex=f;var l=n.certs[i.certkey_idx].getPublicKey(),v=new sh.crypto.Signature({alg:c});v.init(l),v.updateHex(f);var d=v.verify(i.sigval);r.validSignatureValue_isValid=d,!0===d&&(r.validSignatureValue=!0),i.isValid=!1,r.validMessageDigest&&r.validSignatureValue&&(i.isValid=!0)},l={isValid:!1,parse:{}};return function(t,i){if("2a864886f70d010702"!==n(t,0,[0],"06"))return i;i.cmsType="signedData",i.econtent=n(t,0,[1,0,2,1,0]),function(t,n){for(var i,e=3;e<6;e++)if(void 0!==(i=r(t,0,[1,0,e]))){var s=t.substr(i,2);"a0"===s&&(n.certsIdx=i),"a1"===s&&(n.revinfosIdx=i),"31"===s&&(n.signerinfosIdx=i)}}(t,i),i.signerInfos=[],function(t,n){var i=n.signerinfosIdx;if(void 0!==i){var r=e(t,i);n.signerInfoIdxList=r;for(var s=0;s<r.length;s++){var o={idx:r[s]};h(t,o),n.signerInfos.push(o)}}}(t,i)}(a,l.parse),function(t,n){for(var i=n.parse.signerInfos,r=i.length,e=!0,s=0;s<r;s++){var o=i[s];f(t,n,o),o.isValid||(e=!1)}n.isValid=e}(a,l),l},void 0!==sh&&sh||(sh={}),void 0!==sh.asn1&&sh.asn1||(sh.asn1={}),void 0!==sh.asn1.tsp&&sh.asn1.tsp||(sh.asn1.tsp={}),sh.asn1.tsp.Accuracy=function(t){var n=sh.asn1,i=n.DERInteger,r=n.DERSequence,e=n.DERTaggedObject;n.tsp.Accuracy.superclass.constructor.call(this),this.seconds=null,this.millis=null,this.micros=null,this.getEncodedHex=function(){var t=null,n=null,s=null,o=[];if(null!=this.seconds&&(t=new i({int:this.seconds}),o.push(t)),null!=this.millis){var u=new i({int:this.millis});n=new e({obj:u,tag:"80",explicit:!1}),o.push(n)}if(null!=this.micros){var a=new i({int:this.micros});s=new e({obj:a,tag:"81",explicit:!1}),o.push(s)}var h=new r({array:o});return this.hTLV=h.getEncodedHex(),this.hTLV},void 0!==t&&("number"==typeof t.seconds&&(this.seconds=t.seconds),"number"==typeof t.millis&&(this.millis=t.millis),"number"==typeof t.micros&&(this.micros=t.micros))},ea.lang.extend(sh.asn1.tsp.Accuracy,sh.asn1.ASN1Object),sh.asn1.tsp.MessageImprint=function(t){var n=sh.asn1,i=n.DERSequence,r=n.DEROctetString,e=n.x509.AlgorithmIdentifier;n.tsp.MessageImprint.superclass.constructor.call(this),this.dHashAlg=null,this.dHashValue=null,this.getEncodedHex=function(){return"string"==typeof this.hTLV?this.hTLV:new i({array:[this.dHashAlg,this.dHashValue]}).getEncodedHex()},void 0!==t&&("string"==typeof t.hashAlg&&(this.dHashAlg=new e({name:t.hashAlg})),"string"==typeof t.hashValue&&(this.dHashValue=new r({hex:t.hashValue})))},ea.lang.extend(sh.asn1.tsp.MessageImprint,sh.asn1.ASN1Object),sh.asn1.tsp.TimeStampReq=function(t){var n=sh.asn1,i=n.DERSequence,r=n.DERInteger,e=n.DERBoolean,s=n.DERObjectIdentifier,o=n.tsp,u=o.MessageImprint;o.TimeStampReq.superclass.constructor.call(this),this.dVersion=new r({int:1}),this.dMessageImprint=null,this.dPolicy=null,this.dNonce=null,this.certReq=!0,this.setMessageImprint=function(t){t instanceof u?this.dMessageImprint=t:"object"==typeof t&&(this.dMessageImprint=new u(t))},this.getEncodedHex=function(){if(null==this.dMessageImprint)throw"messageImprint shall be specified";var t=[this.dVersion,this.dMessageImprint];null!=this.dPolicy&&t.push(this.dPolicy),null!=this.dNonce&&t.push(this.dNonce),this.certReq&&t.push(new e);var n=new i({array:t});return this.hTLV=n.getEncodedHex(),this.hTLV},void 0!==t&&("object"==typeof t.mi&&this.setMessageImprint(t.mi),"object"==typeof t.policy&&(this.dPolicy=new s(t.policy)),"object"==typeof t.nonce&&(this.dNonce=new r(t.nonce)),"boolean"==typeof t.certreq&&(this.certReq=t.certreq))},ea.lang.extend(sh.asn1.tsp.TimeStampReq,sh.asn1.ASN1Object),sh.asn1.tsp.TSTInfo=function(t){var n=sh.asn1,i=n.DERSequence,r=n.DERInteger,e=n.DERBoolean,s=n.DERGeneralizedTime,o=n.DERObjectIdentifier,u=n.tsp,a=u.MessageImprint,h=u.Accuracy,c=n.x509.X500Name;if(u.TSTInfo.superclass.constructor.call(this),this.dVersion=new r({int:1}),this.dPolicy=null,this.dMessageImprint=null,this.dSerialNumber=null,this.dGenTime=null,this.dAccuracy=null,this.dOrdering=null,this.dNonce=null,this.dTsa=null,this.getEncodedHex=function(){var t=[this.dVersion];if(null==this.dPolicy)throw"policy shall be specified.";if(t.push(this.dPolicy),null==this.dMessageImprint)throw"messageImprint shall be specified.";if(t.push(this.dMessageImprint),null==this.dSerialNumber)throw"serialNumber shall be specified.";if(t.push(this.dSerialNumber),null==this.dGenTime)throw"genTime shall be specified.";t.push(this.dGenTime),null!=this.dAccuracy&&t.push(this.dAccuracy),null!=this.dOrdering&&t.push(this.dOrdering),null!=this.dNonce&&t.push(this.dNonce),null!=this.dTsa&&t.push(this.dTsa);var n=new i({array:t});return this.hTLV=n.getEncodedHex(),this.hTLV},void 0!==t){if("string"==typeof t.policy){if(!t.policy.match(/^[0-9.]+$/))throw"policy shall be oid like 0.1.4.134";this.dPolicy=new o({oid:t.policy})}void 0!==t.messageImprint&&(this.dMessageImprint=new a(t.messageImprint)),void 0!==t.serialNumber&&(this.dSerialNumber=new r(t.serialNumber)),void 0!==t.genTime&&(this.dGenTime=new s(t.genTime)),void 0!==t.accuracy&&(this.dAccuracy=new h(t.accuracy)),void 0!==t.ordering&&1==t.ordering&&(this.dOrdering=new e),void 0!==t.nonce&&(this.dNonce=new r(t.nonce)),void 0!==t.tsa&&(this.dTsa=new c(t.tsa))}},ea.lang.extend(sh.asn1.tsp.TSTInfo,sh.asn1.ASN1Object),sh.asn1.tsp.TimeStampResp=function(t){var n=sh.asn1,i=n.DERSequence,r=n.ASN1Object,e=n.tsp,s=e.PKIStatusInfo;e.TimeStampResp.superclass.constructor.call(this),this.dStatus=null,this.dTST=null,this.getEncodedHex=function(){if(null==this.dStatus)throw"status shall be specified";var t=[this.dStatus];null!=this.dTST&&t.push(this.dTST);var n=new i({array:t});return this.hTLV=n.getEncodedHex(),this.hTLV},void 0!==t&&("object"==typeof t.status&&(this.dStatus=new s(t.status)),void 0!==t.tst&&t.tst instanceof r&&(this.dTST=t.tst.getContentInfo()))},ea.lang.extend(sh.asn1.tsp.TimeStampResp,sh.asn1.ASN1Object),sh.asn1.tsp.PKIStatusInfo=function(t){var n=sh.asn1,i=n.DERSequence,r=n.tsp,e=r.PKIStatus,s=r.PKIFreeText,o=r.PKIFailureInfo;r.PKIStatusInfo.superclass.constructor.call(this),this.dStatus=null,this.dStatusString=null,this.dFailureInfo=null,this.getEncodedHex=function(){if(null==this.dStatus)throw"status shall be specified";var t=[this.dStatus];null!=this.dStatusString&&t.push(this.dStatusString),null!=this.dFailureInfo&&t.push(this.dFailureInfo);var n=new i({array:t});return this.hTLV=n.getEncodedHex(),this.hTLV},void 0!==t&&("object"==typeof t.status&&(this.dStatus=new e(t.status)),"object"==typeof t.statstr&&(this.dStatusString=new s({array:t.statstr})),"object"==typeof t.failinfo&&(this.dFailureInfo=new o(t.failinfo)))},ea.lang.extend(sh.asn1.tsp.PKIStatusInfo,sh.asn1.ASN1Object),sh.asn1.tsp.PKIStatus=function(t){var n=sh.asn1,i=n.DERInteger,r=n.tsp,e=r.PKIStatus;if(r.PKIStatus.superclass.constructor.call(this),this.getEncodedHex=function(){return this.hTLV=this.dStatus.getEncodedHex(),this.hTLV},void 0!==t)if(void 0!==t.name){var s=e.valueList;if(void 0===s[t.name])throw"name undefined: "+t.name;this.dStatus=new i({int:s[t.name]})}else this.dStatus=new i(t)},ea.lang.extend(sh.asn1.tsp.PKIStatus,sh.asn1.ASN1Object),sh.asn1.tsp.PKIStatus.valueList={granted:0,grantedWithMods:1,rejection:2,waiting:3,revocationWarning:4,revocationNotification:5},sh.asn1.tsp.PKIFreeText=function(t){var n=sh.asn1,i=n.DERSequence,r=n.DERUTF8String;n.tsp.PKIFreeText.superclass.constructor.call(this),this.textList=[],this.getEncodedHex=function(){for(var t=[],n=0;n<this.textList.length;n++)t.push(new r({str:this.textList[n]}));var e=new i({array:t});return this.hTLV=e.getEncodedHex(),this.hTLV},void 0!==t&&"object"==typeof t.array&&(this.textList=t.array)},ea.lang.extend(sh.asn1.tsp.PKIFreeText,sh.asn1.ASN1Object),sh.asn1.tsp.PKIFailureInfo=function(t){var n=sh.asn1,i=n.DERBitString,r=n.tsp.PKIFailureInfo;if(r.superclass.constructor.call(this),this.value=null,this.getEncodedHex=function(){if(null==this.value)throw"value shall be specified";var t=new Number(this.value).toString(2),n=new i;return n.setByBinaryString(t),this.hTLV=n.getEncodedHex(),this.hTLV},void 0!==t)if("string"==typeof t.name){var e=r.valueList;if(void 0===e[t.name])throw"name undefined: "+t.name;this.value=e[t.name]}else"number"==typeof t.int&&(this.value=t.int)},ea.lang.extend(sh.asn1.tsp.PKIFailureInfo,sh.asn1.ASN1Object),sh.asn1.tsp.PKIFailureInfo.valueList={badAlg:0,badRequest:2,badDataFormat:5,timeNotAvailable:14,unacceptedPolicy:15,unacceptedExtension:16,addInfoNotAvailable:17,systemFailure:25},sh.asn1.tsp.AbstractTSAAdapter=function(){this.getTSTHex=function(){throw"not implemented yet"}},sh.asn1.tsp.SimpleTSAAdapter=function(t){var n=sh.asn1.tsp,i=sh.crypto.Util.hashHex;n.SimpleTSAAdapter.superclass.constructor.call(this),this.params=null,this.serial=0,this.getTSTHex=function(t,r){var e=i(t,r);this.params.tstInfo.messageImprint={hashAlg:r,hashValue:e},this.params.tstInfo.serialNumber={int:this.serial++};var s=Math.floor(1e9*Math.random());return this.params.tstInfo.nonce={int:s},n.TSPUtil.newTimeStampToken(this.params).getContentInfoEncodedHex()},void 0!==t&&(this.params=t)},ea.lang.extend(sh.asn1.tsp.SimpleTSAAdapter,sh.asn1.tsp.AbstractTSAAdapter),sh.asn1.tsp.FixedTSAAdapter=function(t){var n=sh.asn1.tsp,i=sh.crypto.Util.hashHex;n.FixedTSAAdapter.superclass.constructor.call(this),this.params=null,this.getTSTHex=function(t,r){var e=i(t,r);return this.params.tstInfo.messageImprint={hashAlg:r,hashValue:e},n.TSPUtil.newTimeStampToken(this.params).getContentInfoEncodedHex()},void 0!==t&&(this.params=t)},ea.lang.extend(sh.asn1.tsp.FixedTSAAdapter,sh.asn1.tsp.AbstractTSAAdapter),sh.asn1.tsp.TSPUtil=new function(){},sh.asn1.tsp.TSPUtil.newTimeStampToken=function(t){var n=sh.asn1,i=n.cms,r=n.tsp.TSTInfo,e=new i.SignedData,s=new r(t.tstInfo).getEncodedHex();if(e.dEncapContentInfo.setContentValue({hex:s}),e.dEncapContentInfo.setContentType("tstinfo"),"object"==typeof t.certs)for(var o=0;o<t.certs.length;o++)e.addCertificatesByPEM(t.certs[o]);var u=e.signerInfoList[0];u.setSignerIdentifier(t.signerCert),u.setForContentAndHash({sdObj:e,eciObj:e.dEncapContentInfo,hashAlg:t.hashAlg});var a=new i.SigningCertificate({array:[t.signerCert]});return u.dSignedAttrs.add(a),u.sign(t.signerPrvKey,t.sigAlg),e},sh.asn1.tsp.TSPUtil.parseTimeStampReq=function(t){var n=ah,i=n.getV,r=n.getTLV,e={certreq:!1},s=(0,n.getChildIdx)(t,0);if(s.length<2)throw"TimeStampReq must have at least 2 items";var o=r(t,s[1]);e.mi=sh.asn1.tsp.TSPUtil.parseMessageImprint(o);for(var u=2;u<s.length;u++){var a=s[u],h=t.substr(a,2);if("06"==h){var c=i(t,a);e.policy=n.hextooidstr(c)}"02"==h&&(e.nonce=i(t,a)),"01"==h&&(e.certreq=!0)}return e},sh.asn1.tsp.TSPUtil.parseMessageImprint=function(t){var n=ah,i=n.getChildIdx,r=n.getV,e=n.getIdxbyList,s={};if("30"!=t.substr(0,2))throw"head of messageImprint hex shall be '30'";i(t,0);var o=r(t,e(t,0,[0,0])),u=n.hextooidstr(o),a=sh.asn1.x509.OID.oid2name(u);if(""==a)throw"hashAlg name undefined: "+u;var h=a,c=e(t,0,[1]);return s.hashAlg=h,s.hashValue=r(t,c),s},void 0!==sh&&sh||(sh={}),void 0!==sh.asn1&&sh.asn1||(sh.asn1={}),void 0!==sh.asn1.cades&&sh.asn1.cades||(sh.asn1.cades={}),sh.asn1.cades.SignaturePolicyIdentifier=function(t){var n=sh.asn1,i=n.DERObjectIdentifier,r=n.DERSequence,e=n.cades,s=e.OtherHashAlgAndValue;if(e.SignaturePolicyIdentifier.superclass.constructor.call(this),this.attrTypeOid="1.2.840.113549.1.9.16.2.15",void 0!==t&&"string"==typeof t.oid&&"object"==typeof t.hash){var o=new r({array:[new i({oid:t.oid}),new s(t.hash)]});this.valueList=[o]}},ea.lang.extend(sh.asn1.cades.SignaturePolicyIdentifier,sh.asn1.cms.Attribute),sh.asn1.cades.OtherHashAlgAndValue=function(t){var n=sh.asn1,i=n.DERSequence,r=n.DEROctetString,e=n.x509.AlgorithmIdentifier;n.cades.OtherHashAlgAndValue.superclass.constructor.call(this),this.dAlg=null,this.dHash=null,this.getEncodedHex=function(){var t=new i({array:[this.dAlg,this.dHash]});return this.hTLV=t.getEncodedHex(),this.hTLV},void 0!==t&&"string"==typeof t.alg&&"string"==typeof t.hash&&(this.dAlg=new e({name:t.alg}),this.dHash=new r({hex:t.hash}))},ea.lang.extend(sh.asn1.cades.OtherHashAlgAndValue,sh.asn1.ASN1Object),sh.asn1.cades.SignatureTimeStamp=function(t){var n=sh.asn1,i=n.ASN1Object;if(n.cades.SignatureTimeStamp.superclass.constructor.call(this),this.attrTypeOid="1.2.840.113549.1.9.16.2.14",this.tstHex=null,void 0!==t){if(void 0!==t.res)if("string"==typeof t.res&&t.res.match(/^[0-9A-Fa-f]+$/));else if(!(t.res instanceof i))throw"res param shall be ASN1Object or hex string";if(void 0!==t.tst)if("string"==typeof t.tst&&t.tst.match(/^[0-9A-Fa-f]+$/)){var r=new i;this.tstHex=t.tst,r.hTLV=this.tstHex,r.getEncodedHex(),this.valueList=[r]}else if(!(t.tst instanceof i))throw"tst param shall be ASN1Object or hex string"}},ea.lang.extend(sh.asn1.cades.SignatureTimeStamp,sh.asn1.cms.Attribute),sh.asn1.cades.CompleteCertificateRefs=function(t){var n=sh.asn1.cades;n.CompleteCertificateRefs.superclass.constructor.call(this),this.attrTypeOid="1.2.840.113549.1.9.16.2.21",this.setByArray=function(t){this.valueList=[];for(var i=0;i<t.length;i++){var r=new n.OtherCertID(t[i]);this.valueList.push(r)}},void 0!==t&&"object"==typeof t&&"number"==typeof t.length&&this.setByArray(t)},ea.lang.extend(sh.asn1.cades.CompleteCertificateRefs,sh.asn1.cms.Attribute),sh.asn1.cades.OtherCertID=function(t){var n=sh.asn1,i=n.cms,r=n.cades;r.OtherCertID.superclass.constructor.call(this),this.hasIssuerSerial=!0,this.dOtherCertHash=null,this.dIssuerSerial=null,this.setByCertPEM=function(t){this.dOtherCertHash=new r.OtherHash(t),this.hasIssuerSerial&&(this.dIssuerSerial=new i.IssuerAndSerialNumber(t))},this.getEncodedHex=function(){if(null!=this.hTLV)return this.hTLV;if(null==this.dOtherCertHash)throw"otherCertHash not set";var t=[this.dOtherCertHash];null!=this.dIssuerSerial&&t.push(this.dIssuerSerial);var i=new n.DERSequence({array:t});return this.hTLV=i.getEncodedHex(),this.hTLV},void 0!==t&&("string"==typeof t&&-1!=t.indexOf("-----BEGIN ")&&this.setByCertPEM(t),"object"==typeof t&&(!1===t.hasis&&(this.hasIssuerSerial=!1),"string"==typeof t.cert&&this.setByCertPEM(t.cert)))},ea.lang.extend(sh.asn1.cades.OtherCertID,sh.asn1.ASN1Object),sh.asn1.cades.OtherHash=function(t){var n=sh.asn1,i=n.cades,r=i.OtherHashAlgAndValue,e=sh.crypto.Util.hashHex;if(i.OtherHash.superclass.constructor.call(this),this.alg="sha256",this.dOtherHash=null,this.setByCertPEM=function(t){if(-1==t.indexOf("-----BEGIN "))throw"certPEM not to seem PEM format";var n=kh(t),i=e(n,this.alg);this.dOtherHash=new r({alg:this.alg,hash:i})},this.getEncodedHex=function(){if(null==this.dOtherHash)throw"OtherHash not set";return this.dOtherHash.getEncodedHex()},void 0!==t)if("string"==typeof t)if(-1!=t.indexOf("-----BEGIN "))this.setByCertPEM(t);else{if(!t.match(/^[0-9A-Fa-f]+$/))throw"unsupported string value for params";this.dOtherHash=new n.DEROctetString({hex:t})}else"object"==typeof t&&("string"==typeof t.cert?("string"==typeof t.alg&&(this.alg=t.alg),this.setByCertPEM(t.cert)):this.dOtherHash=new r(t))},ea.lang.extend(sh.asn1.cades.OtherHash,sh.asn1.ASN1Object),sh.asn1.cades.CAdESUtil=new function(){},sh.asn1.cades.CAdESUtil.addSigTS=function(){},sh.asn1.cades.CAdESUtil.parseSignedDataForAddingUnsigned=function(t){var n=ah.getChildIdx,i=ah.getTLV,r=ah.getIdxbyList,e=sh.asn1,s=e.ASN1Object,o=e.cms.SignedData,u=e.cades.CAdESUtil,a={};if("06092a864886f70d010702"!=(0,ah.getTLVbyList)(t,0,[0]))throw"hex is not CMS SignedData";var h=n(t,r(t,0,[1,0]));if(h.length<4)throw"num of SignedData elem shall be 4 at least";var c=h.shift();a.version=i(t,c);var f=h.shift();a.algs=i(t,f);var l=h.shift();a.encapcontent=i(t,l),a.certs=null,a.revs=null,a.si=[];var v=h.shift();"a0"==t.substr(v,2)&&(a.certs=i(t,v),v=h.shift()),"a1"==t.substr(v,2)&&(a.revs=i(t,v),v=h.shift());var d=v;if("31"!=t.substr(d,2))throw"Can't find signerInfos";for(var p=n(t,d),w=0;w<p.length;w++){var m=u.parseSignerInfoForAddingUnsigned(t,p[w],w);a.si[w]=m}var y=null;for(a.obj=new o,(y=new s).hTLV=a.version,a.obj.dCMSVersion=y,(y=new s).hTLV=a.algs,a.obj.dDigestAlgs=y,(y=new s).hTLV=a.encapcontent,a.obj.dEncapContentInfo=y,(y=new s).hTLV=a.certs,a.obj.dCerts=y,a.obj.signerInfoList=[],w=0;w<a.si.length;w++)a.obj.signerInfoList.push(a.si[w].obj);return a},sh.asn1.cades.CAdESUtil.parseSignerInfoForAddingUnsigned=function(t,n){var i=ah.getTLV,r=ah.getV,e=sh.asn1,s=e.ASN1Object,o=e.cms,u=o.AttributeList,a=o.SignerInfo,h={},c=(0,ah.getChildIdx)(t,n);if(6!=c.length)throw"not supported items for SignerInfo (!=6)";var f=c.shift();h.version=i(t,f);var l=c.shift();h.si=i(t,l);var v=c.shift();h.digalg=i(t,v);var d=c.shift();h.sattrs=i(t,d);var p=c.shift();h.sigalg=i(t,p);var w=c.shift();h.sig=i(t,w),h.sigval=r(t,w);var m=null;return h.obj=new a,(m=new s).hTLV=h.version,h.obj.dCMSVersion=m,(m=new s).hTLV=h.si,h.obj.dSignerIdentifier=m,(m=new s).hTLV=h.digalg,h.obj.dDigestAlgorithm=m,(m=new s).hTLV=h.sattrs,h.obj.dSignedAttrs=m,(m=new s).hTLV=h.sigalg,h.obj.dSigAlg=m,(m=new s).hTLV=h.sig,h.obj.dSig=m,h.obj.dUnsignedAttrs=new u,h},void 0!==sh.asn1.csr&&sh.asn1.csr||(sh.asn1.csr={}),sh.asn1.csr.CertificationRequest=function(t){var n=sh,i=n.asn1,r=i.DERBitString,e=i.DERSequence,s=i.x509;i.csr.CertificationRequest.superclass.constructor.call(this),this.sign=function(t,i){null==this.prvKey&&(this.prvKey=i),this.asn1SignatureAlg=new s.AlgorithmIdentifier({name:t}),sig=new n.crypto.Signature({alg:t}),sig.init(this.prvKey),sig.updateHex(this.asn1CSRInfo.getEncodedHex()),this.hexSig=sig.sign(),this.asn1Sig=new r({hex:"00"+this.hexSig});var o=new e({array:[this.asn1CSRInfo,this.asn1SignatureAlg,this.asn1Sig]});this.hTLV=o.getEncodedHex(),this.isModified=!1},this.getPEMString=function(){return Ah(this.getEncodedHex(),"CERTIFICATE REQUEST")},this.getEncodedHex=function(){if(0==this.isModified&&null!=this.hTLV)return this.hTLV;throw"not signed yet"},void 0!==t&&void 0!==t.csrinfo&&(this.asn1CSRInfo=t.csrinfo)},ea.lang.extend(sh.asn1.csr.CertificationRequest,sh.asn1.ASN1Object),sh.asn1.csr.CertificationRequestInfo=function(){var t=sh.asn1,n=t.DERInteger,i=t.DERSequence,r=t.DERSet,e=t.DERNull,s=t.DERTaggedObject,o=t.DERObjectIdentifier,u=t.x509,a=u.X500Name,h=u.Extension,c=Ph;t.csr.CertificationRequestInfo.superclass.constructor.call(this),this._initialize=function(){this.asn1Array=new Array,this.asn1Version=new n({int:0}),this.asn1Subject=null,this.asn1SubjPKey=null,this.extensionsArray=new Array},this.setSubjectByParam=function(t){this.asn1Subject=new a(t)},this.setSubjectPublicKeyByGetKey=function(t){var n=c.getKey(t);this.asn1SubjPKey=new u.SubjectPublicKeyInfo(n)},this.appendExtensionByName=function(t,n){h.appendByNameToArray(t,n,this.extensionsArray)},this.getEncodedHex=function(){if(this.asn1Array=new Array,this.asn1Array.push(this.asn1Version),this.asn1Array.push(this.asn1Subject),this.asn1Array.push(this.asn1SubjPKey),this.extensionsArray.length>0){var t=new i({array:this.extensionsArray}),n=new r({array:[t]}),u=new i({array:[new o({oid:"1.2.840.113549.1.9.14"}),n]}),a=new s({explicit:!0,tag:"a0",obj:u});this.asn1Array.push(a)}else a=new s({explicit:!1,tag:"a0",obj:new e}),this.asn1Array.push(a);var h=new i({array:this.asn1Array});return this.hTLV=h.getEncodedHex(),this.isModified=!1,this.hTLV},this._initialize()},ea.lang.extend(sh.asn1.csr.CertificationRequestInfo,sh.asn1.ASN1Object),sh.asn1.csr.CSRUtil=new function(){},sh.asn1.csr.CSRUtil.newCSRPEM=function(t){var n=Ph,i=sh.asn1.csr;if(void 0===t.subject)throw"parameter subject undefined";if(void 0===t.sbjpubkey)throw"parameter sbjpubkey undefined";if(void 0===t.sigalg)throw"parameter sigalg undefined";if(void 0===t.sbjprvkey)throw"parameter sbjpubkey undefined";var r=new i.CertificationRequestInfo;if(r.setSubjectByParam(t.subject),r.setSubjectPublicKeyByGetKey(t.sbjpubkey),void 0!==t.ext&&void 0!==t.ext.length)for(var e=0;e<t.ext.length;e++)for(key in t.ext[e])r.appendExtensionByName(key,t.ext[e][key]);var s=new i.CertificationRequest({csrinfo:r}),o=n.getKey(t.sbjprvkey);return s.sign(t.sigalg,o),s.getPEMString()},sh.asn1.csr.CSRUtil.getInfo=function(t){var n=ah.getTLVbyList,i={subject:{},pubkey:{}};if(-1==t.indexOf("-----BEGIN CERTIFICATE REQUEST"))throw"argument is not PEM file";var r=kh(t,"CERTIFICATE REQUEST");return i.subject.hex=n(r,0,[0,1]),i.subject.name=Hh.hex2dn(i.subject.hex),i.pubkey.hex=n(r,0,[0,2]),i.pubkey.obj=Ph.getKey(i.pubkey.hex,null,"pkcs8pub"),i},void 0!==sh&&sh||(sh={}),void 0!==sh.asn1&&sh.asn1||(sh.asn1={}),void 0!==sh.asn1.ocsp&&sh.asn1.ocsp||(sh.asn1.ocsp={}),sh.asn1.ocsp.DEFAULT_HASH="sha1",sh.asn1.ocsp.CertID=function(t){var n=sh.asn1,i=n.DEROctetString,r=n.DERInteger,e=n.DERSequence,s=n.x509.AlgorithmIdentifier,o=n.ocsp,u=o.DEFAULT_HASH,a=sh.crypto.Util.hashHex,h=Hh,c=ah;if(o.CertID.superclass.constructor.call(this),this.dHashAlg=null,this.dIssuerNameHash=null,this.dIssuerKeyHash=null,this.dSerialNumber=null,this.setByValue=function(t,n,e,o){void 0===o&&(o=u),this.dHashAlg=new s({name:o}),this.dIssuerNameHash=new i({hex:t}),this.dIssuerKeyHash=new i({hex:n}),this.dSerialNumber=new r({hex:e})},this.setByCert=function(t,n,i){void 0===i&&(i=u);var r=new h;r.readCertPEM(n);var e=new h;e.readCertPEM(t);var s=e.getPublicKeyHex(),o=c.getTLVbyList(s,0,[1,0],"30"),f=r.getSerialNumberHex(),l=a(e.getSubjectHex(),i),v=a(o,i);this.setByValue(l,v,f,i),this.hoge=r.getSerialNumberHex()},this.getEncodedHex=function(){if(null===this.dHashAlg&&null===this.dIssuerNameHash&&null===this.dIssuerKeyHash&&null===this.dSerialNumber)throw"not yet set values";var t=new e({array:[this.dHashAlg,this.dIssuerNameHash,this.dIssuerKeyHash,this.dSerialNumber]});return this.hTLV=t.getEncodedHex(),this.hTLV},void 0!==t){var f=t;if(void 0!==f.issuerCert&&void 0!==f.subjectCert){var l=u;void 0===f.alg&&(l=void 0),this.setByCert(f.issuerCert,f.subjectCert,l)}else{if(void 0===f.namehash||void 0===f.keyhash||void 0===f.serial)throw"invalid constructor arguments";l=u,void 0===f.alg&&(l=void 0),this.setByValue(f.namehash,f.keyhash,f.serial,l)}}},ea.lang.extend(sh.asn1.ocsp.CertID,sh.asn1.ASN1Object),sh.asn1.ocsp.Request=function(t){var n=sh.asn1,i=n.DERSequence,r=n.ocsp;if(r.Request.superclass.constructor.call(this),this.dReqCert=null,this.dExt=null,this.getEncodedHex=function(){var t=[];if(null===this.dReqCert)throw"reqCert not set";t.push(this.dReqCert);var n=new i({array:t});return this.hTLV=n.getEncodedHex(),this.hTLV},void 0!==t){var e=new r.CertID(t);this.dReqCert=e}},ea.lang.extend(sh.asn1.ocsp.Request,sh.asn1.ASN1Object),sh.asn1.ocsp.TBSRequest=function(t){var n=sh.asn1,i=n.DERSequence,r=n.ocsp;r.TBSRequest.superclass.constructor.call(this),this.version=0,this.dRequestorName=null,this.dRequestList=[],this.dRequestExt=null,this.setRequestListByParam=function(t){for(var n=[],i=0;i<t.length;i++){var e=new r.Request(t[0]);n.push(e)}this.dRequestList=n},this.getEncodedHex=function(){var t=[];if(0!==this.version)throw"not supported version: "+this.version;if(null!==this.dRequestorName)throw"requestorName not supported";var n=new i({array:this.dRequestList});if(t.push(n),null!==this.dRequestExt)throw"requestExtensions not supported";var r=new i({array:t});return this.hTLV=r.getEncodedHex(),this.hTLV},void 0!==t&&void 0!==t.reqList&&this.setRequestListByParam(t.reqList)},ea.lang.extend(sh.asn1.ocsp.TBSRequest,sh.asn1.ASN1Object),sh.asn1.ocsp.OCSPRequest=function(t){var n=sh.asn1,i=n.DERSequence,r=n.ocsp;if(r.OCSPRequest.superclass.constructor.call(this),this.dTbsRequest=null,this.dOptionalSignature=null,this.getEncodedHex=function(){var t=[];if(null===this.dTbsRequest)throw"tbsRequest not set";if(t.push(this.dTbsRequest),null!==this.dOptionalSignature)throw"optionalSignature not supported";var n=new i({array:t});return this.hTLV=n.getEncodedHex(),this.hTLV},void 0!==t&&void 0!==t.reqList){var e=new r.TBSRequest(t);this.dTbsRequest=e}},ea.lang.extend(sh.asn1.ocsp.OCSPRequest,sh.asn1.ASN1Object),sh.asn1.ocsp.OCSPUtil={},sh.asn1.ocsp.OCSPUtil.getRequestHex=function(t,n,i){var r=sh.asn1.ocsp;return void 0===i&&(i=r.DEFAULT_HASH),new r.OCSPRequest({reqList:[{alg:i,issuerCert:t,subjectCert:n}]}).getEncodedHex()},sh.asn1.ocsp.OCSPUtil.getOCSPResponseInfo=function(t){var n=ah.getVbyList,i=ah.getIdxbyList,r=(n=ah.getVbyList,ah.getV),e={};try{var s=n(t,0,[0],"0a");e.responseStatus=parseInt(s,16)}catch(t){}if(0!==e.responseStatus)return e;try{var o=i(t,0,[1,0,1,0,0,2,0,1]);"80"===t.substr(o,2)?e.certStatus="good":"a1"===t.substr(o,2)?(e.certStatus="revoked",e.revocationTime=yh(n(t,o,[0]))):"82"===t.substr(o,2)&&(e.certStatus="unknown")}catch(t){}try{var u=i(t,0,[1,0,1,0,0,2,0,2]);e.thisUpdate=yh(r(t,u))}catch(t){}try{var a=i(t,0,[1,0,1,0,0,2,0,3]);"a0"===t.substr(a,2)&&(e.nextUpdate=yh(n(t,a,[0])))}catch(t){}return e},void 0!==sh&&sh||(sh={}),void 0!==sh.lang&&sh.lang||(sh.lang={}),sh.lang.String=function(){},oh=function(t){return vh(new ks(t,"utf8").toString("base64"))},uh=function(t){return new ks(dh(t),"base64").toString("utf8")},sh.lang.String.isInteger=function(t){return!!t.match(/^[0-9]+$/)||!!t.match(/^-[0-9]+$/)},sh.lang.String.isHex=function(t){return!(t.length%2!=0||!t.match(/^[0-9a-f]+$/)&&!t.match(/^[0-9A-F]+$/))},sh.lang.String.isBase64=function(t){return!(!(t=t.replace(/\s+/g,"")).match(/^[0-9A-Za-z+\/]+={0,3}$/)||t.length%4!=0)},sh.lang.String.isBase64URL=function(t){return!t.match(/[+\/=]/)&&(t=dh(t),sh.lang.String.isBase64(t))},sh.lang.String.isIntegerArray=function(t){return!!(t=t.replace(/\s+/g,"")).match(/^\[[0-9,]+\]$/)},void 0!==sh&&sh||(sh={}),void 0!==sh.crypto&&sh.crypto||(sh.crypto={}),sh.crypto.Util=new function(){this.DIGESTINFOHEAD={sha1:"3021300906052b0e03021a05000414",sha224:"302d300d06096086480165030402040500041c",sha256:"3031300d060960864801650304020105000420",sha384:"3041300d060960864801650304020205000430",sha512:"3051300d060960864801650304020305000440",md2:"3020300c06082a864886f70d020205000410",md5:"3020300c06082a864886f70d020505000410",ripemd160:"3021300906052b2403020105000414"},this.DEFAULTPROVIDER={md5:"cryptojs",sha1:"cryptojs",sha224:"cryptojs",sha256:"cryptojs",sha384:"cryptojs",sha512:"cryptojs",ripemd160:"cryptojs",hmacmd5:"cryptojs",hmacsha1:"cryptojs",hmacsha224:"cryptojs",hmacsha256:"cryptojs",hmacsha384:"cryptojs",hmacsha512:"cryptojs",hmacripemd160:"cryptojs",MD5withRSA:"cryptojs/jsrsa",SHA1withRSA:"cryptojs/jsrsa",SHA224withRSA:"cryptojs/jsrsa",SHA256withRSA:"cryptojs/jsrsa",SHA384withRSA:"cryptojs/jsrsa",SHA512withRSA:"cryptojs/jsrsa",RIPEMD160withRSA:"cryptojs/jsrsa",MD5withECDSA:"cryptojs/jsrsa",SHA1withECDSA:"cryptojs/jsrsa",SHA224withECDSA:"cryptojs/jsrsa",SHA256withECDSA:"cryptojs/jsrsa",SHA384withECDSA:"cryptojs/jsrsa",SHA512withECDSA:"cryptojs/jsrsa",RIPEMD160withECDSA:"cryptojs/jsrsa",SHA1withDSA:"cryptojs/jsrsa",SHA224withDSA:"cryptojs/jsrsa",SHA256withDSA:"cryptojs/jsrsa",MD5withRSAandMGF1:"cryptojs/jsrsa",SHA1withRSAandMGF1:"cryptojs/jsrsa",SHA224withRSAandMGF1:"cryptojs/jsrsa",SHA256withRSAandMGF1:"cryptojs/jsrsa",SHA384withRSAandMGF1:"cryptojs/jsrsa",SHA512withRSAandMGF1:"cryptojs/jsrsa",RIPEMD160withRSAandMGF1:"cryptojs/jsrsa"},this.CRYPTOJSMESSAGEDIGESTNAME={md5:fa.algo.MD5,sha1:fa.algo.SHA1,sha224:fa.algo.SHA224,sha256:fa.algo.SHA256,sha384:fa.algo.SHA384,sha512:fa.algo.SHA512,ripemd160:fa.algo.RIPEMD160},this.getDigestInfoHex=function(t,n){if(void 0===this.DIGESTINFOHEAD[n])throw"alg not supported in Util.DIGESTINFOHEAD: "+n;return this.DIGESTINFOHEAD[n]+t},this.getPaddedDigestInfoHex=function(t,n,i){var r=this.getDigestInfoHex(t,n),e=i/4;if(r.length+22>e)throw"key is too short for SigAlg: keylen="+i+","+n;for(var s="0001",o="00"+r,u="",a=e-s.length-o.length,h=0;h<a;h+=2)u+="ff";return s+u+o},this.hashString=function(t,n){return new sh.crypto.MessageDigest({alg:n}).digestString(t)},this.hashHex=function(t,n){return new sh.crypto.MessageDigest({alg:n}).digestHex(t)},this.sha1=function(t){return new sh.crypto.MessageDigest({alg:"sha1",prov:"cryptojs"}).digestString(t)},this.sha256=function(t){return new sh.crypto.MessageDigest({alg:"sha256",prov:"cryptojs"}).digestString(t)},this.sha256Hex=function(t){return new sh.crypto.MessageDigest({alg:"sha256",prov:"cryptojs"}).digestHex(t)},this.sha512=function(t){return new sh.crypto.MessageDigest({alg:"sha512",prov:"cryptojs"}).digestString(t)},this.sha512Hex=function(t){return new sh.crypto.MessageDigest({alg:"sha512",prov:"cryptojs"}).digestHex(t)}},sh.crypto.Util.md5=function(t){return new sh.crypto.MessageDigest({alg:"md5",prov:"cryptojs"}).digestString(t)},sh.crypto.Util.ripemd160=function(t){return new sh.crypto.MessageDigest({alg:"ripemd160",prov:"cryptojs"}).digestString(t)},sh.crypto.Util.SECURERANDOMGEN=new Wa,sh.crypto.Util.getRandomHexOfNbytes=function(t){var n=new Array(t);return sh.crypto.Util.SECURERANDOMGEN.nextBytes(n),fh(n)},sh.crypto.Util.getRandomBigIntegerOfNbytes=function(t){return new ma(sh.crypto.Util.getRandomHexOfNbytes(t),16)},sh.crypto.Util.getRandomHexOfNbits=function(t){var n=t%8,i=new Array((t-n)/8+1);return sh.crypto.Util.SECURERANDOMGEN.nextBytes(i),i[0]=(255<<n&255^255)&i[0],fh(i)},sh.crypto.Util.getRandomBigIntegerOfNbits=function(t){return new ma(sh.crypto.Util.getRandomHexOfNbits(t),16)},sh.crypto.Util.getRandomBigIntegerZeroToMax=function(t){for(var n=t.bitLength();;){var i=sh.crypto.Util.getRandomBigIntegerOfNbits(n);if(-1!=t.compareTo(i))return i}},sh.crypto.Util.getRandomBigIntegerMinToMax=function(t,n){var i=t.compareTo(n);if(1==i)throw"biMin is greater than biMax";if(0==i)return t;var r=n.subtract(t);return sh.crypto.Util.getRandomBigIntegerZeroToMax(r).add(t)},sh.crypto.MessageDigest=function(t){this.setAlgAndProvider=function(t,n){if(null!==(t=sh.crypto.MessageDigest.getCanonicalAlgName(t))&&void 0===n&&(n=sh.crypto.Util.DEFAULTPROVIDER[t]),-1!=":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(t)&&"cryptojs"==n){try{this.md=sh.crypto.Util.CRYPTOJSMESSAGEDIGESTNAME[t].create()}catch(n){throw"setAlgAndProvider hash alg set fail alg="+t+"/"+n}this.updateString=function(t){this.md.update(t)},this.updateHex=function(t){var n=fa.enc.Hex.parse(t);this.md.update(n)},this.digest=function(){return this.md.finalize().toString(fa.enc.Hex)},this.digestString=function(t){return this.updateString(t),this.digest()},this.digestHex=function(t){return this.updateHex(t),this.digest()}}if(-1!=":sha256:".indexOf(t)&&"sjcl"==n){try{this.md=new sjcl.hash.sha256}catch(n){throw"setAlgAndProvider hash alg set fail alg="+t+"/"+n}this.updateString=function(t){this.md.update(t)},this.updateHex=function(t){var n=sjcl.codec.hex.toBits(t);this.md.update(n)},this.digest=function(){var t=this.md.finalize();return sjcl.codec.hex.fromBits(t)},this.digestString=function(t){return this.updateString(t),this.digest()},this.digestHex=function(t){return this.updateHex(t),this.digest()}}},this.updateString=function(){throw"updateString(str) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.updateHex=function(){throw"updateHex(hex) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digest=function(){throw"digest() not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digestString=function(){throw"digestString(str) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digestHex=function(){throw"digestHex(hex) not supported for this alg/prov: "+this.algName+"/"+this.provName},void 0!==t&&void 0!==t.alg&&(this.algName=t.alg,void 0===t.prov&&(this.provName=sh.crypto.Util.DEFAULTPROVIDER[this.algName]),this.setAlgAndProvider(this.algName,this.provName))},sh.crypto.MessageDigest.getCanonicalAlgName=function(t){return"string"==typeof t&&(t=(t=t.toLowerCase()).replace(/-/,"")),t},sh.crypto.MessageDigest.getHashLength=function(t){var n=sh.crypto.MessageDigest,i=n.getCanonicalAlgName(t);if(void 0===n.HASHLENGTH[i])throw"not supported algorithm: "+t;return n.HASHLENGTH[i]},sh.crypto.MessageDigest.HASHLENGTH={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,ripemd160:20},sh.crypto.Mac=function(t){this.setAlgAndProvider=function(t,n){if(null==(t=t.toLowerCase())&&(t="hmacsha1"),"hmac"!=(t=t.toLowerCase()).substr(0,4))throw"setAlgAndProvider unsupported HMAC alg: "+t;void 0===n&&(n=sh.crypto.Util.DEFAULTPROVIDER[t]),this.algProv=t+"/"+n;var i=t.substr(4);if(-1!=":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(i)&&"cryptojs"==n){try{this.mac=fa.algo.HMAC.create(sh.crypto.Util.CRYPTOJSMESSAGEDIGESTNAME[i],this.pass)}catch(t){throw"setAlgAndProvider hash alg set fail hashAlg="+i+"/"+t}this.updateString=function(t){this.mac.update(t)},this.updateHex=function(t){var n=fa.enc.Hex.parse(t);this.mac.update(n)},this.doFinal=function(){return this.mac.finalize().toString(fa.enc.Hex)},this.doFinalString=function(t){return this.updateString(t),this.doFinal()},this.doFinalHex=function(t){return this.updateHex(t),this.doFinal()}}},this.updateString=function(){throw"updateString(str) not supported for this alg/prov: "+this.algProv},this.updateHex=function(){throw"updateHex(hex) not supported for this alg/prov: "+this.algProv},this.doFinal=function(){throw"digest() not supported for this alg/prov: "+this.algProv},this.doFinalString=function(){throw"digestString(str) not supported for this alg/prov: "+this.algProv},this.doFinalHex=function(){throw"digestHex(hex) not supported for this alg/prov: "+this.algProv},this.setPassword=function(t){if("string"==typeof t){var n=t;return t.length%2!=1&&t.match(/^[0-9A-Fa-f]+$/)||(n=Fh(t)),void(this.pass=fa.enc.Hex.parse(n))}if("object"!=typeof t)throw"KJUR.crypto.Mac unsupported password type: "+t;if(n=null,void 0!==t.hex){if(t.hex.length%2!=0||!t.hex.match(/^[0-9A-Fa-f]+$/))throw"Mac: wrong hex password: "+t.hex;n=t.hex}if(void 0!==t.utf8&&(n=mh(t.utf8)),void 0!==t.rstr&&(n=Fh(t.rstr)),void 0!==t.b64&&(n=pa(t.b64)),void 0!==t.b64u&&(n=wh(t.b64u)),null==n)throw"KJUR.crypto.Mac unsupported password type: "+t;this.pass=fa.enc.Hex.parse(n)},void 0!==t&&(void 0!==t.pass&&this.setPassword(t.pass),void 0!==t.alg&&(this.algName=t.alg,void 0===t.prov&&(this.provName=sh.crypto.Util.DEFAULTPROVIDER[this.algName]),this.setAlgAndProvider(this.algName,this.provName)))},sh.crypto.Signature=function(t){var n=null;if(this._setAlgNames=function(){var t=this.algName.match(/^(.+)with(.+)$/);t&&(this.mdAlgName=t[1].toLowerCase(),this.pubkeyAlgName=t[2].toLowerCase())},this._zeroPaddingOfSignature=function(t,n){for(var i="",r=n/4-t.length,e=0;e<r;e++)i+="0";return i+t},this.setAlgAndProvider=function(t,n){if(this._setAlgNames(),"cryptojs/jsrsa"!=n)throw"provider not supported: "+n;if(-1!=":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(this.mdAlgName)){try{this.md=new sh.crypto.MessageDigest({alg:this.mdAlgName})}catch(t){throw"setAlgAndProvider hash alg set fail alg="+this.mdAlgName+"/"+t}this.init=function(t,n){var i=null;try{i=void 0===n?Ph.getKey(t):Ph.getKey(t,n)}catch(t){throw"init failed:"+t}if(!0===i.isPrivate)this.prvKey=i,this.state="SIGN";else{if(!0!==i.isPublic)throw"init failed.:"+i;this.pubKey=i,this.state="VERIFY"}},this.updateString=function(t){this.md.updateString(t)},this.updateHex=function(t){this.md.updateHex(t)},this.sign=function(){if(this.sHashHex=this.md.digest(),void 0!==this.ecprvhex&&void 0!==this.eccurvename){var t=new sh.crypto.ECDSA({curve:this.eccurvename});this.hSign=t.signHex(this.sHashHex,this.ecprvhex)}else if(this.prvKey instanceof Xa&&"rsaandmgf1"===this.pubkeyAlgName)this.hSign=this.prvKey.signWithMessageHashPSS(this.sHashHex,this.mdAlgName,this.pssSaltLen);else if(this.prvKey instanceof Xa&&"rsa"===this.pubkeyAlgName)this.hSign=this.prvKey.signWithMessageHash(this.sHashHex,this.mdAlgName);else if(this.prvKey instanceof sh.crypto.ECDSA)this.hSign=this.prvKey.signWithMessageHash(this.sHashHex);else{if(!(this.prvKey instanceof sh.crypto.DSA))throw"Signature: unsupported private key alg: "+this.pubkeyAlgName;this.hSign=this.prvKey.signWithMessageHash(this.sHashHex)}return this.hSign},this.signString=function(t){return this.updateString(t),this.sign()},this.signHex=function(t){return this.updateHex(t),this.sign()},this.verify=function(t){if(this.sHashHex=this.md.digest(),void 0!==this.ecpubhex&&void 0!==this.eccurvename)return new sh.crypto.ECDSA({curve:this.eccurvename}).verifyHex(this.sHashHex,t,this.ecpubhex);if(this.pubKey instanceof Xa&&"rsaandmgf1"===this.pubkeyAlgName)return this.pubKey.verifyWithMessageHashPSS(this.sHashHex,t,this.mdAlgName,this.pssSaltLen);if(this.pubKey instanceof Xa&&"rsa"===this.pubkeyAlgName)return this.pubKey.verifyWithMessageHash(this.sHashHex,t);if(void 0!==sh.crypto.ECDSA&&this.pubKey instanceof sh.crypto.ECDSA)return this.pubKey.verifyWithMessageHash(this.sHashHex,t);if(void 0!==sh.crypto.DSA&&this.pubKey instanceof sh.crypto.DSA)return this.pubKey.verifyWithMessageHash(this.sHashHex,t);throw"Signature: unsupported public key alg: "+this.pubkeyAlgName}}},this.init=function(){throw"init(key, pass) not supported for this alg:prov="+this.algProvName},this.updateString=function(){throw"updateString(str) not supported for this alg:prov="+this.algProvName},this.updateHex=function(){throw"updateHex(hex) not supported for this alg:prov="+this.algProvName},this.sign=function(){throw"sign() not supported for this alg:prov="+this.algProvName},this.signString=function(){throw"digestString(str) not supported for this alg:prov="+this.algProvName},this.signHex=function(){throw"digestHex(hex) not supported for this alg:prov="+this.algProvName},this.verify=function(){throw"verify(hSigVal) not supported for this alg:prov="+this.algProvName},this.initParams=t,void 0!==t&&(void 0!==t.alg&&(this.algName=t.alg,this.provName=void 0===t.prov?sh.crypto.Util.DEFAULTPROVIDER[this.algName]:t.prov,this.algProvName=this.algName+":"+this.provName,this.setAlgAndProvider(this.algName,this.provName),this._setAlgNames()),void 0!==t.psssaltlen&&(this.pssSaltLen=t.psssaltlen),void 0!==t.prvkeypem)){if(void 0!==t.prvkeypas)throw"both prvkeypem and prvkeypas parameters not supported";try{n=Ph.getKey(t.prvkeypem),this.init(n)}catch(t){throw"fatal error to load pem private key: "+t}}},sh.crypto.Cipher=function(){},sh.crypto.Cipher.encrypt=function(t,n,i){if(n instanceof Xa&&n.isPublic){var r=sh.crypto.Cipher.getAlgByKeyAndName(n,i);if("RSA"===r)return n.encrypt(t);if("RSAOAEP"===r)return n.encryptOAEP(t,"sha1");var e=r.match(/^RSAOAEP(\d+)$/);if(null!==e)return n.encryptOAEP(t,"sha"+e[1]);throw"Cipher.encrypt: unsupported algorithm for RSAKey: "+i}throw"Cipher.encrypt: unsupported key or algorithm"},sh.crypto.Cipher.decrypt=function(t,n,i){if(n instanceof Xa&&n.isPrivate){var r=sh.crypto.Cipher.getAlgByKeyAndName(n,i);if("RSA"===r)return n.decrypt(t);if("RSAOAEP"===r)return n.decryptOAEP(t,"sha1");var e=r.match(/^RSAOAEP(\d+)$/);if(null!==e)return n.decryptOAEP(t,"sha"+e[1]);throw"Cipher.decrypt: unsupported algorithm for RSAKey: "+i}throw"Cipher.decrypt: unsupported key or algorithm"},sh.crypto.Cipher.getAlgByKeyAndName=function(t,n){if(t instanceof Xa){if(-1!=":RSA:RSAOAEP:RSAOAEP224:RSAOAEP256:RSAOAEP384:RSAOAEP512:".indexOf(n))return n;if(null==n)return"RSA";throw"getAlgByKeyAndName: not supported algorithm name for RSAKey: "+n}throw"getAlgByKeyAndName: not supported algorithm name: "+n},sh.crypto.OID=new function(){this.oidhex2name={"2a864886f70d010101":"rsaEncryption","2a8648ce3d0201":"ecPublicKey","2a8648ce380401":"dsa","2a8648ce3d030107":"secp256r1","2b8104001f":"secp192k1","2b81040021":"secp224r1","2b8104000a":"secp256k1","2b81040023":"secp521r1","2b81040022":"secp384r1","2a8648ce380403":"SHA1withDSA","608648016503040301":"SHA224withDSA","608648016503040302":"SHA256withDSA"}},void 0!==sh&&sh||(sh={}),void 0!==sh.crypto&&sh.crypto||(sh.crypto={}),sh.crypto.ECDSA=function(t){var n=new Wa;this.type="EC",this.isPrivate=!1,this.isPublic=!1,this.getBigRandom=function(t){return new ma(t.bitLength(),n).mod(t.subtract(ma.ONE)).add(ma.ONE)},this.setNamedCurve=function(t){this.ecparams=sh.crypto.ECParameterDB.getByName(t),this.prvKeyHex=null,this.pubKeyHex=null,this.curveName=t},this.setPrivateKeyHex=function(t){this.isPrivate=!0,this.prvKeyHex=t},this.setPublicKeyHex=function(t){this.isPublic=!0,this.pubKeyHex=t},this.getPublicKeyXYHex=function(){var t=this.pubKeyHex;if("04"!==t.substr(0,2))throw"this method supports uncompressed format(04) only";var n=this.ecparams.keylen/4;if(t.length!==2+2*n)throw"malformed public key hex length";var i={};return i.x=t.substr(2,n),i.y=t.substr(2+n),i},this.getShortNISTPCurveName=function(){var t=this.curveName;return"secp256r1"===t||"NIST P-256"===t||"P-256"===t||"prime256v1"===t?"P-256":"secp384r1"===t||"NIST P-384"===t||"P-384"===t?"P-384":null},this.generateKeyPairHex=function(){var t=this.getBigRandom(this.ecparams.n),n=this.ecparams.G.multiply(t),i=n.getX().toBigInteger(),r=n.getY().toBigInteger(),e=this.ecparams.keylen/4,s=("0000000000"+t.toString(16)).slice(-e),o="04"+("0000000000"+i.toString(16)).slice(-e)+("0000000000"+r.toString(16)).slice(-e);return this.setPrivateKeyHex(s),this.setPublicKeyHex(o),{ecprvhex:s,ecpubhex:o}},this.signWithMessageHash=function(t){return this.signHex(t,this.prvKeyHex)},this.signHex=function(t,n){var i=new ma(n,16),r=this.ecparams.n,e=new ma(t,16);do{var s=this.getBigRandom(r),o=this.ecparams.G.multiply(s).getX().toBigInteger().mod(r)}while(o.compareTo(ma.ZERO)<=0);var u=s.modInverse(r).multiply(e.add(i.multiply(o))).mod(r);return sh.crypto.ECDSA.biRSSigToASN1Sig(o,u)},this.sign=function(t,n){var i=n,r=this.ecparams.n,e=ma.fromByteArrayUnsigned(t);do{var s=this.getBigRandom(r),o=this.ecparams.G.multiply(s).getX().toBigInteger().mod(r)}while(o.compareTo(ma.ZERO)<=0);var u=s.modInverse(r).multiply(e.add(i.multiply(o))).mod(r);return this.serializeSig(o,u)},this.verifyWithMessageHash=function(t,n){return this.verifyHex(t,n,this.pubKeyHex)},this.verifyHex=function(t,n,i){var r,e,s,o=sh.crypto.ECDSA.parseSigHex(n);r=o.r,e=o.s,s=ih.decodeFromHex(this.ecparams.curve,i);var u=new ma(t,16);return this.verifyRaw(u,r,e,s)},this.verify=function(t,n,i){var r,e,s;if(Bitcoin.Util.isArray(n)){var o=this.parseSig(n);r=o.r,e=o.s}else{if("object"!=typeof n||!n.r||!n.s)throw"Invalid value for signature";r=n.r,e=n.s}if(i instanceof ih)s=i;else{if(!Bitcoin.Util.isArray(i))throw"Invalid format for pubkey value, must be byte array or ECPointFp";s=ih.decodeFrom(this.ecparams.curve,i)}var u=ma.fromByteArrayUnsigned(t);return this.verifyRaw(u,r,e,s)},this.verifyRaw=function(t,n,i,r){var e=this.ecparams.n,s=this.ecparams.G;if(n.compareTo(ma.ONE)<0||n.compareTo(e)>=0)return!1;if(i.compareTo(ma.ONE)<0||i.compareTo(e)>=0)return!1;var o=i.modInverse(e),u=t.multiply(o).mod(e),a=n.multiply(o).mod(e);return s.multiply(u).add(r.multiply(a)).getX().toBigInteger().mod(e).equals(n)},this.serializeSig=function(t,n){var i=t.toByteArraySigned(),r=n.toByteArraySigned(),e=[];return e.push(2),e.push(i.length),(e=e.concat(i)).push(2),e.push(r.length),(e=e.concat(r)).unshift(e.length),e.unshift(48),e},this.parseSig=function(t){var n;if(48!=t[0])throw new Error("Signature not a valid DERSequence");if(2!=t[n=2])throw new Error("First element in signature must be a DERInteger");var i=t.slice(n+2,n+2+t[n+1]);if(2!=t[n+=2+t[n+1]])throw new Error("Second element in signature must be a DERInteger");var r=t.slice(n+2,n+2+t[n+1]);return n+=2+t[n+1],{r:ma.fromByteArrayUnsigned(i),s:ma.fromByteArrayUnsigned(r)}},this.parseSigCompact=function(t){if(65!==t.length)throw"Signature has the wrong length";var n=t[0]-27;if(n<0||n>7)throw"Invalid signature type";var i=this.ecparams.n;return{r:ma.fromByteArrayUnsigned(t.slice(1,33)).mod(i),s:ma.fromByteArrayUnsigned(t.slice(33,65)).mod(i),i:n}},this.readPKCS5PrvKeyHex=function(t){var n,i,r,e=sh.crypto.ECDSA.getName,s=ah.getVbyList;if(!1===ah.isASN1HEX(t))throw"not ASN.1 hex string";try{n=s(t,0,[2,0],"06"),i=s(t,0,[1],"04");try{r=s(t,0,[3,0],"03").substr(2)}catch(t){}}catch(t){throw"malformed PKCS#1/5 plain ECC private key"}if(this.curveName=e(n),void 0===this.curveName)throw"unsupported curve name";this.setNamedCurve(this.curveName),this.setPublicKeyHex(r),this.setPrivateKeyHex(i),this.isPublic=!1},this.readPKCS8PrvKeyHex=function(t){var n,i,r,e=sh.crypto.ECDSA.getName,s=ah.getVbyList;if(!1===ah.isASN1HEX(t))throw"not ASN.1 hex string";try{s(t,0,[1,0],"06"),n=s(t,0,[1,1],"06"),i=s(t,0,[2,0,1],"04");try{r=s(t,0,[2,0,2,0],"03").substr(2)}catch(t){}}catch(t){throw"malformed PKCS#8 plain ECC private key"}if(this.curveName=e(n),void 0===this.curveName)throw"unsupported curve name";this.setNamedCurve(this.curveName),this.setPublicKeyHex(r),this.setPrivateKeyHex(i),this.isPublic=!1},this.readPKCS8PubKeyHex=function(t){var n,i,r=sh.crypto.ECDSA.getName,e=ah.getVbyList;if(!1===ah.isASN1HEX(t))throw"not ASN.1 hex string";try{e(t,0,[0,0],"06"),n=e(t,0,[0,1],"06"),i=e(t,0,[1],"03").substr(2)}catch(t){throw"malformed PKCS#8 ECC public key"}if(this.curveName=r(n),null===this.curveName)throw"unsupported curve name";this.setNamedCurve(this.curveName),this.setPublicKeyHex(i)},this.readCertPubKeyHex=function(t,n){5!==n&&(n=6);var i,r,e=sh.crypto.ECDSA.getName,s=ah.getVbyList;if(!1===ah.isASN1HEX(t))throw"not ASN.1 hex string";try{i=s(t,0,[0,n,0,1],"06"),r=s(t,0,[0,n,1],"03").substr(2)}catch(t){throw"malformed X.509 certificate ECC public key"}if(this.curveName=e(i),null===this.curveName)throw"unsupported curve name";this.setNamedCurve(this.curveName),this.setPublicKeyHex(r)},void 0!==t&&void 0!==t.curve&&(this.curveName=t.curve),void 0===this.curveName&&(this.curveName="secp256r1"),this.setNamedCurve(this.curveName),void 0!==t&&(void 0!==t.prv&&this.setPrivateKeyHex(t.prv),void 0!==t.pub&&this.setPublicKeyHex(t.pub))},sh.crypto.ECDSA.parseSigHex=function(t){var n=sh.crypto.ECDSA.parseSigHexInHexRS(t);return{r:new ma(n.r,16),s:new ma(n.s,16)}},sh.crypto.ECDSA.parseSigHexInHexRS=function(t){var n=ah.getChildIdx,i=ah.getV;if("30"!=t.substr(0,2))throw"signature is not a ASN.1 sequence";var r=n(t,0);if(2!=r.length)throw"number of signature ASN.1 sequence elements seem wrong";var e=r[0],s=r[1];if("02"!=t.substr(e,2))throw"1st item of sequene of signature is not ASN.1 integer";if("02"!=t.substr(s,2))throw"2nd item of sequene of signature is not ASN.1 integer";return{r:i(t,e),s:i(t,s)}},sh.crypto.ECDSA.asn1SigToConcatSig=function(t){var n=sh.crypto.ECDSA.parseSigHexInHexRS(t),i=n.r,r=n.s;if("00"==i.substr(0,2)&&i.length%32==2&&(i=i.substr(2)),"00"==r.substr(0,2)&&r.length%32==2&&(r=r.substr(2)),i.length%32==30&&(i="00"+i),r.length%32==30&&(r="00"+r),i.length%32!=0)throw"unknown ECDSA sig r length error";if(r.length%32!=0)throw"unknown ECDSA sig s length error";return i+r},sh.crypto.ECDSA.concatSigToASN1Sig=function(t){if(t.length/2*8%128!=0)throw"unknown ECDSA concatinated r-s sig  length error";var n=t.substr(0,t.length/2),i=t.substr(t.length/2);return sh.crypto.ECDSA.hexRSSigToASN1Sig(n,i)},sh.crypto.ECDSA.hexRSSigToASN1Sig=function(t,n){var i=new ma(t,16),r=new ma(n,16);return sh.crypto.ECDSA.biRSSigToASN1Sig(i,r)},sh.crypto.ECDSA.biRSSigToASN1Sig=function(t,n){var i=sh.asn1,r=new i.DERInteger({bigint:t}),e=new i.DERInteger({bigint:n});return new i.DERSequence({array:[r,e]}).getEncodedHex()},sh.crypto.ECDSA.getName=function(t){return"2a8648ce3d030107"===t?"secp256r1":"2b8104000a"===t?"secp256k1":"2b81040022"===t?"secp384r1":-1!=="|secp256r1|NIST P-256|P-256|prime256v1|".indexOf(t)?"secp256r1":-1!=="|secp256k1|".indexOf(t)?"secp256k1":-1!=="|secp384r1|NIST P-384|P-384|".indexOf(t)?"secp384r1":null},void 0!==sh&&sh||(sh={}),void 0!==sh.crypto&&sh.crypto||(sh.crypto={}),sh.crypto.ECParameterDB=new function(){var t={},n={};function i(t){return new ma(t,16)}this.getByName=function(i){var r=i;if(void 0!==n[r]&&(r=n[i]),void 0!==t[r])return t[r];throw"unregistered EC curve name: "+r},this.regist=function(r,e,s,o,u,a,h,c,f,l,v,d){t[r]={};var p=i(s),w=i(o),m=i(u),y=i(a),g=i(h),F=new rh(p,w,m),b=F.decodePointHex("04"+c+f);t[r].name=r,t[r].keylen=e,t[r].curve=F,t[r].G=b,t[r].n=y,t[r].h=g,t[r].oid=v,t[r].info=d;for(var E=0;E<l.length;E++)n[l[E]]=r}},sh.crypto.ECParameterDB.regist("secp128r1",128,"FFFFFFFDFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFDFFFFFFFFFFFFFFFFFFFFFFFC","E87579C11079F43DD824993C2CEE5ED3","FFFFFFFE0000000075A30D1B9038A115","1","161FF7528B899B2D0C28607CA52C5B86","CF5AC8395BAFEB13C02DA292DDED7A83",[],"","secp128r1 : SECG curve over a 128 bit prime field"),sh.crypto.ECParameterDB.regist("secp160k1",160,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFAC73","0","7","0100000000000000000001B8FA16DFAB9ACA16B6B3","1","3B4C382CE37AA192A4019E763036F4F5DD4D7EBB","938CF935318FDCED6BC28286531733C3F03C4FEE",[],"","secp160k1 : SECG curve over a 160 bit prime field"),sh.crypto.ECParameterDB.regist("secp160r1",160,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF7FFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF7FFFFFFC","1C97BEFC54BD7A8B65ACF89F81D4D4ADC565FA45","0100000000000000000001F4C8F927AED3CA752257","1","4A96B5688EF573284664698968C38BB913CBFC82","23A628553168947D59DCC912042351377AC5FB32",[],"","secp160r1 : SECG curve over a 160 bit prime field"),sh.crypto.ECParameterDB.regist("secp192k1",192,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFEE37","0","3","FFFFFFFFFFFFFFFFFFFFFFFE26F2FC170F69466A74DEFD8D","1","DB4FF10EC057E9AE26B07D0280B7F4341DA5D1B1EAE06C7D","9B2F2F6D9C5628A7844163D015BE86344082AA88D95E2F9D",[]),sh.crypto.ECParameterDB.regist("secp192r1",192,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFC","64210519E59C80E70FA7E9AB72243049FEB8DEECC146B9B1","FFFFFFFFFFFFFFFFFFFFFFFF99DEF836146BC9B1B4D22831","1","188DA80EB03090F67CBF20EB43A18800F4FF0AFD82FF1012","07192B95FFC8DA78631011ED6B24CDD573F977A11E794811",[]),sh.crypto.ECParameterDB.regist("secp224r1",224,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF000000000000000000000001","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFFFFFFFFFE","B4050A850C04B3ABF54132565044B0B7D7BFD8BA270B39432355FFB4","FFFFFFFFFFFFFFFFFFFFFFFFFFFF16A2E0B8F03E13DD29455C5C2A3D","1","B70E0CBD6BB4BF7F321390B94A03C1D356C21122343280D6115C1D21","BD376388B5F723FB4C22DFE6CD4375A05A07476444D5819985007E34",[]),sh.crypto.ECParameterDB.regist("secp256k1",256,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFC2F","0","7","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEBAAEDCE6AF48A03BBFD25E8CD0364141","1","79BE667EF9DCBBAC55A06295CE870B07029BFCDB2DCE28D959F2815B16F81798","483ADA7726A3C4655DA4FBFC0E1108A8FD17B448A68554199C47D08FFB10D4B8",[]),sh.crypto.ECParameterDB.regist("secp256r1",256,"FFFFFFFF00000001000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFF00000001000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFC","5AC635D8AA3A93E7B3EBBD55769886BC651D06B0CC53B0F63BCE3C3E27D2604B","FFFFFFFF00000000FFFFFFFFFFFFFFFFBCE6FAADA7179E84F3B9CAC2FC632551","1","6B17D1F2E12C4247F8BCE6E563A440F277037D812DEB33A0F4A13945D898C296","4FE342E2FE1A7F9B8EE7EB4A7C0F9E162BCE33576B315ECECBB6406837BF51F5",["NIST P-256","P-256","prime256v1"]),sh.crypto.ECParameterDB.regist("secp384r1",384,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFF0000000000000000FFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFF0000000000000000FFFFFFFC","B3312FA7E23EE7E4988E056BE3F82D19181D9C6EFE8141120314088F5013875AC656398D8A2ED19D2A85C8EDD3EC2AEF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFC7634D81F4372DDF581A0DB248B0A77AECEC196ACCC52973","1","AA87CA22BE8B05378EB1C71EF320AD746E1D3B628BA79B9859F741E082542A385502F25DBF55296C3A545E3872760AB7","3617de4a96262c6f5d9e98bf9292dc29f8f41dbd289a147ce9da3113b5f0b8c00a60b1ce1d7e819d7a431d7c90ea0e5f",["NIST P-384","P-384"]),sh.crypto.ECParameterDB.regist("secp521r1",521,"1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFC","051953EB9618E1C9A1F929A21A0B68540EEA2DA725B99B315F3B8B489918EF109E156193951EC7E937B1652C0BD3BB1BF073573DF883D2C34F1EF451FD46B503F00","1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFA51868783BF2F966B7FCC0148F709A5D03BB5C9B8899C47AEBB6FB71E91386409","1","C6858E06B70404E9CD9E3ECB662395B4429C648139053FB521F828AF606B4D3DBAA14B5E77EFE75928FE1DC127A2FFA8DE3348B3C1856A429BF97E7E31C2E5BD66","011839296a789a3bc0045c8a5fb42c7d1bd998f54449579b446817afbd17273e662c97ee72995ef42640c550b9013fad0761353c7086a272c24088be94769fd16650",["NIST P-521","P-521"]),void 0!==sh&&sh||(sh={}),void 0!==sh.crypto&&sh.crypto||(sh.crypto={}),sh.crypto.DSA=function(){this.p=null,this.q=null,this.g=null,this.y=null,this.x=null,this.type="DSA",this.isPrivate=!1,this.isPublic=!1,this.setPrivate=function(t,n,i,r,e){this.isPrivate=!0,this.p=t,this.q=n,this.g=i,this.y=r,this.x=e},this.setPrivateHex=function(t,n,i,r,e){var s,o,u,a,h;s=new ma(t,16),o=new ma(n,16),u=new ma(i,16),a="string"==typeof r&&r.length>1?new ma(r,16):null,h=new ma(e,16),this.setPrivate(s,o,u,a,h)},this.setPublic=function(t,n,i,r){this.isPublic=!0,this.p=t,this.q=n,this.g=i,this.y=r,this.x=null},this.setPublicHex=function(t,n,i,r){var e,s,o,u;e=new ma(t,16),s=new ma(n,16),o=new ma(i,16),u=new ma(r,16),this.setPublic(e,s,o,u)},this.signWithMessageHash=function(t){var n=this.p,i=this.q,r=this.g,e=this.x,s=sh.crypto.Util.getRandomBigIntegerMinToMax(ma.ONE.add(ma.ONE),i.subtract(ma.ONE)),o=new ma(t.substr(0,i.bitLength()/4),16),u=r.modPow(s,n).mod(i),a=s.modInverse(i).multiply(o.add(e.multiply(u))).mod(i);return sh.asn1.ASN1Util.jsonToASN1HEX({seq:[{int:{bigint:u}},{int:{bigint:a}}]})},this.verifyWithMessageHash=function(t,n){var i=this.p,r=this.q,e=this.g,s=this.y,o=this.parseASN1Signature(n),u=o[0],a=o[1],h=new ma(t.substr(0,r.bitLength()/4),16);if(ma.ZERO.compareTo(u)>0||u.compareTo(r)>0)throw"invalid DSA signature";if(ma.ZERO.compareTo(a)>=0||a.compareTo(r)>0)throw"invalid DSA signature";var c=a.modInverse(r),f=h.multiply(c).mod(r),l=u.multiply(c).mod(r);return 0==e.modPow(f,i).multiply(s.modPow(l,i)).mod(i).mod(r).compareTo(u)},this.parseASN1Signature=function(t){try{return[new ma(ah.getVbyList(t,0,[0],"02"),16),new ma(ah.getVbyList(t,0,[1],"02"),16)]}catch(t){throw"malformed ASN.1 DSA signature"}},this.readPKCS5PrvKeyHex=function(t){var n,i,r,e,s,o=ah.getVbyList;if(!1===ah.isASN1HEX(t))throw"not ASN.1 hex string";try{n=o(t,0,[1],"02"),i=o(t,0,[2],"02"),r=o(t,0,[3],"02"),e=o(t,0,[4],"02"),s=o(t,0,[5],"02")}catch(t){throw console.log("EXCEPTION:"+t),"malformed PKCS#1/5 plain DSA private key"}this.setPrivateHex(n,i,r,e,s)},this.readPKCS8PrvKeyHex=function(t){var n,i,r,e,s=ah.getVbyList;if(!1===ah.isASN1HEX(t))throw"not ASN.1 hex string";try{n=s(t,0,[1,1,0],"02"),i=s(t,0,[1,1,1],"02"),r=s(t,0,[1,1,2],"02"),e=s(t,0,[2,0],"02")}catch(t){throw console.log("EXCEPTION:"+t),"malformed PKCS#8 plain DSA private key"}this.setPrivateHex(n,i,r,null,e)},this.readPKCS8PubKeyHex=function(t){var n,i,r,e,s=ah.getVbyList;if(!1===ah.isASN1HEX(t))throw"not ASN.1 hex string";try{n=s(t,0,[0,1,0],"02"),i=s(t,0,[0,1,1],"02"),r=s(t,0,[0,1,2],"02"),e=s(t,0,[1,0],"02")}catch(t){throw console.log("EXCEPTION:"+t),"malformed PKCS#8 DSA public key"}this.setPublicHex(n,i,r,e)},this.readCertPubKeyHex=function(t,n){var i,r,e,s;5!==n&&(n=6);var o=ah.getVbyList;if(!1===ah.isASN1HEX(t))throw"not ASN.1 hex string";try{i=o(t,0,[0,n,0,1,0],"02"),r=o(t,0,[0,n,0,1,1],"02"),e=o(t,0,[0,n,0,1,2],"02"),s=o(t,0,[0,n,1,0],"02")}catch(t){throw console.log("EXCEPTION:"+t),"malformed X.509 certificate DSA public key"}this.setPublicHex(i,r,e,s)}};var Ph=function(){var t=function(t,i,r){return n(fa.AES,t,i,r)},n=function(t,n,i,r){var e=fa.enc.Hex.parse(n),s=fa.enc.Hex.parse(i),o=fa.enc.Hex.parse(r),u={};u.key=s,u.iv=o,u.ciphertext=e;var a=t.decrypt(u,s,{iv:o});return fa.enc.Hex.stringify(a)},i=function(t,n,i){return r(fa.AES,t,n,i)},r=function(t,n,i,r){var e=fa.enc.Hex.parse(n),s=fa.enc.Hex.parse(i),o=fa.enc.Hex.parse(r),u=t.encrypt(e,s,{iv:o}),a=fa.enc.Hex.parse(u.toString());return fa.enc.Base64.stringify(a)},e={"AES-256-CBC":{proc:t,eproc:i,keylen:32,ivlen:16},"AES-192-CBC":{proc:t,eproc:i,keylen:24,ivlen:16},"AES-128-CBC":{proc:t,eproc:i,keylen:16,ivlen:16},"DES-EDE3-CBC":{proc:function(t,i,r){return n(fa.TripleDES,t,i,r)},eproc:function(t,n,i){return r(fa.TripleDES,t,n,i)},keylen:24,ivlen:8},"DES-CBC":{proc:function(t,i,r){return n(fa.DES,t,i,r)},eproc:function(t,n,i){return r(fa.DES,t,n,i)},keylen:8,ivlen:8}},s=function(t){var n={},i=t.match(new RegExp("DEK-Info: ([^,]+),([0-9A-Fa-f]+)","m"));i&&(n.cipher=i[1],n.ivsalt=i[2]);var r=t.match(new RegExp("-----BEGIN ([A-Z]+) PRIVATE KEY-----"));r&&(n.type=r[1]);var e=-1,s=0;-1!=t.indexOf("\r\n\r\n")&&(e=t.indexOf("\r\n\r\n"),s=2),-1!=t.indexOf("\n\n")&&(e=t.indexOf("\n\n"),s=1);var o=t.indexOf("-----END");if(-1!=e&&-1!=o){var u=t.substring(e+2*s,o-s);u=u.replace(/\s+/g,""),n.data=u}return n},o=function(t,n,i){for(var r=i.substring(0,16),s=fa.enc.Hex.parse(r),o=fa.enc.Utf8.parse(n),u=e[t].keylen+e[t].ivlen,a="",h=null;;){var c=fa.algo.MD5.create();if(null!=h&&c.update(h),c.update(o),c.update(s),h=c.finalize(),(a+=fa.enc.Hex.stringify(h)).length>=2*u)break}var f={};return f.keyhex=a.substr(0,2*e[t].keylen),f.ivhex=a.substr(2*e[t].keylen,2*e[t].ivlen),f},u=function(t,n,i,r){var s=fa.enc.Base64.parse(t),o=fa.enc.Hex.stringify(s);return(0,e[n].proc)(o,i,r)};return{version:"1.0.0",parsePKCS5PEM:function(t){return s(t)},getKeyAndUnusedIvByPasscodeAndIvsalt:function(t,n,i){return o(t,n,i)},decryptKeyB64:function(t,n,i,r){return u(t,n,i,r)},getDecryptedKeyHex:function(t,n){var i=s(t),r=i.cipher,e=i.ivsalt,a=i.data,h=o(r,n,e);return u(a,r,h.keyhex,e)},getEncryptedPKCS5PEMFromPrvKeyHex:function(t,n,i,r,s){var u="";if(void 0!==r&&null!=r||(r="AES-256-CBC"),void 0===e[r])throw"KEYUTIL unsupported algorithm: "+r;void 0!==s&&null!=s||(s=function(t){var n=fa.lib.WordArray.random(t);return fa.enc.Hex.stringify(n)}(e[r].ivlen).toUpperCase());var a=function(t,n,i,r){return(0,e[n].eproc)(t,i,r)}(n,r,o(r,i,s).keyhex,s);return u="-----BEGIN "+t+" PRIVATE KEY-----\r\n",u+="Proc-Type: 4,ENCRYPTED\r\n",u+="DEK-Info: "+r+","+s+"\r\n",u+="\r\n",(u+=a.replace(/(.{64})/g,"$1\r\n"))+"\r\n-----END "+t+" PRIVATE KEY-----\r\n"},parseHexOfEncryptedPKCS8:function(t){var n=ah.getChildIdx,i=ah.getV,r={},e=n(t,0);if(2!=e.length)throw"malformed format: SEQUENCE(0).items != 2: "+e.length;r.ciphertext=i(t,e[1]);var s=n(t,e[0]);if(2!=s.length)throw"malformed format: SEQUENCE(0.0).items != 2: "+s.length;if("2a864886f70d01050d"!=i(t,s[0]))throw"this only supports pkcs5PBES2";var o=n(t,s[1]);if(2!=s.length)throw"malformed format: SEQUENCE(0.0.1).items != 2: "+o.length;var u=n(t,o[1]);if(2!=u.length)throw"malformed format: SEQUENCE(0.0.1.1).items != 2: "+u.length;if("2a864886f70d0307"!=i(t,u[0]))throw"this only supports TripleDES";r.encryptionSchemeAlg="TripleDES",r.encryptionSchemeIV=i(t,u[1]);var a=n(t,o[0]);if(2!=a.length)throw"malformed format: SEQUENCE(0.0.1.0).items != 2: "+a.length;if("2a864886f70d01050c"!=i(t,a[0]))throw"this only supports pkcs5PBKDF2";var h=n(t,a[1]);if(h.length<2)throw"malformed format: SEQUENCE(0.0.1.0.1).items < 2: "+h.length;r.pbkdf2Salt=i(t,h[0]);var c=i(t,h[1]);try{r.pbkdf2Iter=parseInt(c,16)}catch(t){throw"malformed format pbkdf2Iter: "+c}return r},getPBKDF2KeyHexFromParam:function(t,n){var i=fa.enc.Hex.parse(t.pbkdf2Salt),r=fa.PBKDF2(n,i,{keySize:6,iterations:t.pbkdf2Iter});return fa.enc.Hex.stringify(r)},_getPlainPKCS8HexFromEncryptedPKCS8PEM:function(t,n){var i=kh(t,"ENCRYPTED PRIVATE KEY"),r=this.parseHexOfEncryptedPKCS8(i),e=Ph.getPBKDF2KeyHexFromParam(r,n),s={};s.ciphertext=fa.enc.Hex.parse(r.ciphertext);var o=fa.enc.Hex.parse(e),u=fa.enc.Hex.parse(r.encryptionSchemeIV),a=fa.TripleDES.decrypt(s,o,{iv:u});return fa.enc.Hex.stringify(a)},getKeyFromEncryptedPKCS8PEM:function(t,n){var i=this._getPlainPKCS8HexFromEncryptedPKCS8PEM(t,n);return this.getKeyFromPlainPrivatePKCS8Hex(i)},parsePlainPrivatePKCS8Hex:function(t){var n=ah,i=n.getChildIdx,r=n.getV,e={algparam:null};if("30"!=t.substr(0,2))throw"malformed plain PKCS8 private key(code:001)";var s=i(t,0);if(3!=s.length)throw"malformed plain PKCS8 private key(code:002)";if("30"!=t.substr(s[1],2))throw"malformed PKCS8 private key(code:003)";var o=i(t,s[1]);if(2!=o.length)throw"malformed PKCS8 private key(code:004)";if("06"!=t.substr(o[0],2))throw"malformed PKCS8 private key(code:005)";if(e.algoid=r(t,o[0]),"06"==t.substr(o[1],2)&&(e.algparam=r(t,o[1])),"04"!=t.substr(s[2],2))throw"malformed PKCS8 private key(code:006)";return e.keyidx=n.getVidx(t,s[2]),e},getKeyFromPlainPrivatePKCS8PEM:function(t){var n=kh(t,"PRIVATE KEY");return this.getKeyFromPlainPrivatePKCS8Hex(n)},getKeyFromPlainPrivatePKCS8Hex:function(t){var n,i=this.parsePlainPrivatePKCS8Hex(t);if("2a864886f70d010101"==i.algoid)n=new Xa;else if("2a8648ce380401"==i.algoid)n=new sh.crypto.DSA;else{if("2a8648ce3d0201"!=i.algoid)throw"unsupported private key algorithm";n=new sh.crypto.ECDSA}return n.readPKCS8PrvKeyHex(t),n},_getKeyFromPublicPKCS8Hex:function(t){var n,i=ah.getVbyList(t,0,[0,0],"06");if("2a864886f70d010101"===i)n=new Xa;else if("2a8648ce380401"===i)n=new sh.crypto.DSA;else{if("2a8648ce3d0201"!==i)throw"unsupported PKCS#8 public key hex";n=new sh.crypto.ECDSA}return n.readPKCS8PubKeyHex(t),n},parsePublicRawRSAKeyHex:function(t){var n=ah.getChildIdx,i=ah.getV,r={};if("30"!=t.substr(0,2))throw"malformed RSA key(code:001)";var e=n(t,0);if(2!=e.length)throw"malformed RSA key(code:002)";if("02"!=t.substr(e[0],2))throw"malformed RSA key(code:003)";if(r.n=i(t,e[0]),"02"!=t.substr(e[1],2))throw"malformed RSA key(code:004)";return r.e=i(t,e[1]),r},parsePublicPKCS8Hex:function(t){var n=ah,i=n.getChildIdx,r=n.getV,e={algparam:null},s=i(t,0);if(2!=s.length)throw"outer DERSequence shall have 2 elements: "+s.length;var o=s[0];if("30"!=t.substr(o,2))throw"malformed PKCS8 public key(code:001)";var u=i(t,o);if(2!=u.length)throw"malformed PKCS8 public key(code:002)";if("06"!=t.substr(u[0],2))throw"malformed PKCS8 public key(code:003)";if(e.algoid=r(t,u[0]),"06"==t.substr(u[1],2)?e.algparam=r(t,u[1]):"30"==t.substr(u[1],2)&&(e.algparam={},e.algparam.p=n.getVbyList(t,u[1],[0],"02"),e.algparam.q=n.getVbyList(t,u[1],[1],"02"),e.algparam.g=n.getVbyList(t,u[1],[2],"02")),"03"!=t.substr(s[1],2))throw"malformed PKCS8 public key(code:004)";return e.key=r(t,s[1]).substr(2),e}}}();Ph.getKey=function(t,n,i){var r,e=(g=ah).getChildIdx,s=g.getVbyList,o=sh.crypto,u=o.ECDSA,a=o.DSA,h=Xa,c=kh,f=Ph;if(void 0!==h&&t instanceof h)return t;if(void 0!==u&&t instanceof u)return t;if(void 0!==a&&t instanceof a)return t;if(void 0!==t.curve&&void 0!==t.xy&&void 0===t.d)return new u({pub:t.xy,curve:t.curve});if(void 0!==t.curve&&void 0!==t.d)return new u({prv:t.d,curve:t.curve});if(void 0===t.kty&&void 0!==t.n&&void 0!==t.e&&void 0===t.d)return(O=new h).setPublic(t.n,t.e),O;if(void 0===t.kty&&void 0!==t.n&&void 0!==t.e&&void 0!==t.d&&void 0!==t.p&&void 0!==t.q&&void 0!==t.dp&&void 0!==t.dq&&void 0!==t.co&&void 0===t.qi)return(O=new h).setPrivateEx(t.n,t.e,t.d,t.p,t.q,t.dp,t.dq,t.co),O;if(void 0===t.kty&&void 0!==t.n&&void 0!==t.e&&void 0!==t.d&&void 0===t.p)return(O=new h).setPrivate(t.n,t.e,t.d),O;if(void 0!==t.p&&void 0!==t.q&&void 0!==t.g&&void 0!==t.y&&void 0===t.x)return(O=new a).setPublic(t.p,t.q,t.g,t.y),O;if(void 0!==t.p&&void 0!==t.q&&void 0!==t.g&&void 0!==t.y&&void 0!==t.x)return(O=new a).setPrivate(t.p,t.q,t.g,t.y,t.x),O;if("RSA"===t.kty&&void 0!==t.n&&void 0!==t.e&&void 0===t.d)return(O=new h).setPublic(wh(t.n),wh(t.e)),O;if("RSA"===t.kty&&void 0!==t.n&&void 0!==t.e&&void 0!==t.d&&void 0!==t.p&&void 0!==t.q&&void 0!==t.dp&&void 0!==t.dq&&void 0!==t.qi)return(O=new h).setPrivateEx(wh(t.n),wh(t.e),wh(t.d),wh(t.p),wh(t.q),wh(t.dp),wh(t.dq),wh(t.qi)),O;if("RSA"===t.kty&&void 0!==t.n&&void 0!==t.e&&void 0!==t.d)return(O=new h).setPrivate(wh(t.n),wh(t.e),wh(t.d)),O;if("EC"===t.kty&&void 0!==t.crv&&void 0!==t.x&&void 0!==t.y&&void 0===t.d){var l=(x=new u({curve:t.crv})).ecparams.keylen/4,v=("0000000000"+wh(t.x)).slice(-l),d=("0000000000"+wh(t.y)).slice(-l);return x.setPublicKeyHex(p="04"+v+d),x}if("EC"===t.kty&&void 0!==t.crv&&void 0!==t.x&&void 0!==t.y&&void 0!==t.d){l=(x=new u({curve:t.crv})).ecparams.keylen/4;var p="04"+(v=("0000000000"+wh(t.x)).slice(-l))+(d=("0000000000"+wh(t.y)).slice(-l)),w=("0000000000"+wh(t.d)).slice(-l);return x.setPublicKeyHex(p),x.setPrivateKeyHex(w),x}if("pkcs5prv"===i){var m,y=t,g=ah;if(9===(m=e(y,0)).length)(O=new h).readPKCS5PrvKeyHex(y);else if(6===m.length)(O=new a).readPKCS5PrvKeyHex(y);else{if(!(m.length>2&&"04"===y.substr(m[1],2)))throw"unsupported PKCS#1/5 hexadecimal key";(O=new u).readPKCS5PrvKeyHex(y)}return O}if("pkcs8prv"===i)return f.getKeyFromPlainPrivatePKCS8Hex(t);if("pkcs8pub"===i)return f._getKeyFromPublicPKCS8Hex(t);if("x509pub"===i)return Hh.getPublicKeyFromCertHex(t);if(-1!=t.indexOf("-END CERTIFICATE-",0)||-1!=t.indexOf("-END X509 CERTIFICATE-",0)||-1!=t.indexOf("-END TRUSTED CERTIFICATE-",0))return Hh.getPublicKeyFromCertPEM(t);if(-1!=t.indexOf("-END PUBLIC KEY-")){var F=kh(t,"PUBLIC KEY");return f._getKeyFromPublicPKCS8Hex(F)}if(-1!=t.indexOf("-END RSA PRIVATE KEY-")&&-1==t.indexOf("4,ENCRYPTED")){var b=c(t,"RSA PRIVATE KEY");return f.getKey(b,null,"pkcs5prv")}if(-1!=t.indexOf("-END DSA PRIVATE KEY-")&&-1==t.indexOf("4,ENCRYPTED")){var E=s(r=c(t,"DSA PRIVATE KEY"),0,[1],"02"),S=s(r,0,[2],"02"),A=s(r,0,[3],"02"),k=s(r,0,[4],"02"),C=s(r,0,[5],"02");return(O=new a).setPrivate(new ma(E,16),new ma(S,16),new ma(A,16),new ma(k,16),new ma(C,16)),O}if(-1!=t.indexOf("-END PRIVATE KEY-"))return f.getKeyFromPlainPrivatePKCS8PEM(t);if(-1!=t.indexOf("-END RSA PRIVATE KEY-")&&-1!=t.indexOf("4,ENCRYPTED")){var T=f.getDecryptedKeyHex(t,n),I=new Xa;return I.readPKCS5PrvKeyHex(T),I}if(-1!=t.indexOf("-END EC PRIVATE KEY-")&&-1!=t.indexOf("4,ENCRYPTED")){var x,O=s(r=f.getDecryptedKeyHex(t,n),0,[1],"04"),R=s(r,0,[2,0],"06"),D=s(r,0,[3,0],"03").substr(2);if(void 0===sh.crypto.OID.oidhex2name[R])throw"undefined OID(hex) in KJUR.crypto.OID: "+R;return(x=new u({curve:sh.crypto.OID.oidhex2name[R]})).setPublicKeyHex(D),x.setPrivateKeyHex(O),x.isPublic=!1,x}if(-1!=t.indexOf("-END DSA PRIVATE KEY-")&&-1!=t.indexOf("4,ENCRYPTED"))return E=s(r=f.getDecryptedKeyHex(t,n),0,[1],"02"),S=s(r,0,[2],"02"),A=s(r,0,[3],"02"),k=s(r,0,[4],"02"),C=s(r,0,[5],"02"),(O=new a).setPrivate(new ma(E,16),new ma(S,16),new ma(A,16),new ma(k,16),new ma(C,16)),O;if(-1!=t.indexOf("-END ENCRYPTED PRIVATE KEY-"))return f.getKeyFromEncryptedPKCS8PEM(t,n);throw"not supported argument"},Ph.generateKeypair=function(t,n){if("RSA"==t){var i=n;(o=new Xa).generate(i,"10001"),o.isPrivate=!0,o.isPublic=!0;var r=new Xa,e=o.n.toString(16),s=o.e.toString(16);return r.setPublic(e,s),r.isPrivate=!1,r.isPublic=!0,(u={}).prvKeyObj=o,u.pubKeyObj=r,u}if("EC"==t){var o,u,a=n,h=new sh.crypto.ECDSA({curve:a}).generateKeyPairHex();return(o=new sh.crypto.ECDSA({curve:a})).setPublicKeyHex(h.ecpubhex),o.setPrivateKeyHex(h.ecprvhex),o.isPrivate=!0,o.isPublic=!1,(r=new sh.crypto.ECDSA({curve:a})).setPublicKeyHex(h.ecpubhex),r.isPrivate=!1,r.isPublic=!0,(u={}).prvKeyObj=o,u.pubKeyObj=r,u}throw"unknown algorithm: "+t},Ph.getPEM=function(t,n,i,r,e,s){var o=sh.asn1,u=o.DERObjectIdentifier,a=o.DERInteger,h=o.ASN1Util.newObject,c=sh.crypto,f=c.DSA,l=c.ECDSA,v=Xa;function d(t){return h({seq:[{int:0},{int:{bigint:t.n}},{int:t.e},{int:{bigint:t.d}},{int:{bigint:t.p}},{int:{bigint:t.q}},{int:{bigint:t.dmp1}},{int:{bigint:t.dmq1}},{int:{bigint:t.coeff}}]})}function p(t){return h({seq:[{int:1},{octstr:{hex:t.prvKeyHex}},{tag:["a0",!0,{oid:{name:t.curveName}}]},{tag:["a1",!0,{bitstr:{hex:"00"+t.pubKeyHex}}]}]})}function w(t){return h({seq:[{int:0},{int:{bigint:t.p}},{int:{bigint:t.q}},{int:{bigint:t.g}},{int:{bigint:t.y}},{int:{bigint:t.x}}]})}if((void 0!==v&&t instanceof v||void 0!==f&&t instanceof f||void 0!==l&&t instanceof l)&&1==t.isPublic&&(void 0===n||"PKCS8PUB"==n))return Ah(F=new(0,o.x509.SubjectPublicKeyInfo)(t).getEncodedHex(),"PUBLIC KEY");if("PKCS1PRV"==n&&void 0!==v&&t instanceof v&&(void 0===i||null==i)&&1==t.isPrivate)return Ah(F=d(t).getEncodedHex(),"RSA PRIVATE KEY");if("PKCS1PRV"==n&&void 0!==l&&t instanceof l&&(void 0===i||null==i)&&1==t.isPrivate){var m=new u({name:t.curveName}).getEncodedHex(),y=p(t).getEncodedHex(),g="";return(g+=Ah(m,"EC PARAMETERS"))+Ah(y,"EC PRIVATE KEY")}if("PKCS1PRV"==n&&void 0!==f&&t instanceof f&&(void 0===i||null==i)&&1==t.isPrivate)return Ah(F=w(t).getEncodedHex(),"DSA PRIVATE KEY");if("PKCS5PRV"==n&&void 0!==v&&t instanceof v&&void 0!==i&&null!=i&&1==t.isPrivate){var F=d(t).getEncodedHex();return void 0===r&&(r="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("RSA",F,i,r,s)}if("PKCS5PRV"==n&&void 0!==l&&t instanceof l&&void 0!==i&&null!=i&&1==t.isPrivate)return F=p(t).getEncodedHex(),void 0===r&&(r="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("EC",F,i,r,s);if("PKCS5PRV"==n&&void 0!==f&&t instanceof f&&void 0!==i&&null!=i&&1==t.isPrivate)return F=w(t).getEncodedHex(),void 0===r&&(r="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("DSA",F,i,r,s);var b=function(t,n){var i=E(t,n);return new h({seq:[{seq:[{oid:{name:"pkcs5PBES2"}},{seq:[{seq:[{oid:{name:"pkcs5PBKDF2"}},{seq:[{octstr:{hex:i.pbkdf2Salt}},{int:i.pbkdf2Iter}]}]},{seq:[{oid:{name:"des-EDE3-CBC"}},{octstr:{hex:i.encryptionSchemeIV}}]}]}]},{octstr:{hex:i.ciphertext}}]}).getEncodedHex()},E=function(t,n){var i=fa.lib.WordArray.random(8),r=fa.lib.WordArray.random(8),e=fa.PBKDF2(n,i,{keySize:6,iterations:100}),s=fa.enc.Hex.parse(t),o=fa.TripleDES.encrypt(s,e,{iv:r})+"",u={};return u.ciphertext=o,u.pbkdf2Salt=fa.enc.Hex.stringify(i),u.pbkdf2Iter=100,u.encryptionSchemeAlg="DES-EDE3-CBC",u.encryptionSchemeIV=fa.enc.Hex.stringify(r),u};if("PKCS8PRV"==n&&null!=v&&t instanceof v&&1==t.isPrivate){var S=d(t).getEncodedHex();return F=h({seq:[{int:0},{seq:[{oid:{name:"rsaEncryption"}},{null:!0}]},{octstr:{hex:S}}]}).getEncodedHex(),void 0===i||null==i?Ah(F,"PRIVATE KEY"):Ah(y=b(F,i),"ENCRYPTED PRIVATE KEY")}if("PKCS8PRV"==n&&void 0!==l&&t instanceof l&&1==t.isPrivate)return S=new h({seq:[{int:1},{octstr:{hex:t.prvKeyHex}},{tag:["a1",!0,{bitstr:{hex:"00"+t.pubKeyHex}}]}]}).getEncodedHex(),F=h({seq:[{int:0},{seq:[{oid:{name:"ecPublicKey"}},{oid:{name:t.curveName}}]},{octstr:{hex:S}}]}).getEncodedHex(),void 0===i||null==i?Ah(F,"PRIVATE KEY"):Ah(y=b(F,i),"ENCRYPTED PRIVATE KEY");if("PKCS8PRV"==n&&void 0!==f&&t instanceof f&&1==t.isPrivate)return S=new a({bigint:t.x}).getEncodedHex(),F=h({seq:[{int:0},{seq:[{oid:{name:"dsa"}},{seq:[{int:{bigint:t.p}},{int:{bigint:t.q}},{int:{bigint:t.g}}]}]},{octstr:{hex:S}}]}).getEncodedHex(),void 0===i||null==i?Ah(F,"PRIVATE KEY"):Ah(y=b(F,i),"ENCRYPTED PRIVATE KEY");throw"unsupported object nor format"},Ph.getKeyFromCSRPEM=function(t){var n=kh(t,"CERTIFICATE REQUEST");return Ph.getKeyFromCSRHex(n)},Ph.getKeyFromCSRHex=function(t){var n=Ph.parseCSRHex(t);return Ph.getKey(n.p8pubkeyhex,null,"pkcs8pub")},Ph.parseCSRHex=function(t){var n=ah.getChildIdx,i=ah.getTLV,r={},e=t;if("30"!=e.substr(0,2))throw"malformed CSR(code:001)";var s=n(e,0);if(s.length<1)throw"malformed CSR(code:002)";if("30"!=e.substr(s[0],2))throw"malformed CSR(code:003)";var o=n(e,s[0]);if(o.length<3)throw"malformed CSR(code:004)";return r.p8pubkeyhex=i(e,o[2]),r},Ph.getJWKFromKey=function(t){var n={};if(t instanceof Xa&&t.isPrivate)return n.kty="RSA",n.n=ph(t.n.toString(16)),n.e=ph(t.e.toString(16)),n.d=ph(t.d.toString(16)),n.p=ph(t.p.toString(16)),n.q=ph(t.q.toString(16)),n.dp=ph(t.dmp1.toString(16)),n.dq=ph(t.dmq1.toString(16)),n.qi=ph(t.coeff.toString(16)),n;if(t instanceof Xa&&t.isPublic)return n.kty="RSA",n.n=ph(t.n.toString(16)),n.e=ph(t.e.toString(16)),n;if(t instanceof sh.crypto.ECDSA&&t.isPrivate){if("P-256"!==(r=t.getShortNISTPCurveName())&&"P-384"!==r)throw"unsupported curve name for JWT: "+r;var i=t.getPublicKeyXYHex();return n.kty="EC",n.crv=r,n.x=ph(i.x),n.y=ph(i.y),n.d=ph(t.prvKeyHex),n}if(t instanceof sh.crypto.ECDSA&&t.isPublic){var r;if("P-256"!==(r=t.getShortNISTPCurveName())&&"P-384"!==r)throw"unsupported curve name for JWT: "+r;return i=t.getPublicKeyXYHex(),n.kty="EC",n.crv=r,n.x=ph(i.x),n.y=ph(i.y),n}throw"not supported key object"},Xa.getPosArrayOfChildrenFromHex=function(t){return ah.getChildIdx(t,0)},Xa.getHexValueArrayOfChildrenFromHex=function(t){var n,i=ah.getV,r=i(t,(n=Xa.getPosArrayOfChildrenFromHex(t))[0]),e=i(t,n[1]),s=i(t,n[2]),o=i(t,n[3]),u=i(t,n[4]),a=i(t,n[5]),h=i(t,n[6]),c=i(t,n[7]),f=i(t,n[8]);return(n=new Array).push(r,e,s,o,u,a,h,c,f),n},Xa.prototype.readPrivateKeyFromPEMString=function(t){var n=kh(t),i=Xa.getHexValueArrayOfChildrenFromHex(n);this.setPrivateEx(i[1],i[2],i[3],i[4],i[5],i[6],i[7],i[8])},Xa.prototype.readPKCS5PrvKeyHex=function(t){var n=Xa.getHexValueArrayOfChildrenFromHex(t);this.setPrivateEx(n[1],n[2],n[3],n[4],n[5],n[6],n[7],n[8])},Xa.prototype.readPKCS8PrvKeyHex=function(t){var n,i,r,e,s,o,u,a,h=ah.getVbyList;if(!1===ah.isASN1HEX(t))throw"not ASN.1 hex string";try{n=h(t,0,[2,0,1],"02"),i=h(t,0,[2,0,2],"02"),r=h(t,0,[2,0,3],"02"),e=h(t,0,[2,0,4],"02"),s=h(t,0,[2,0,5],"02"),o=h(t,0,[2,0,6],"02"),u=h(t,0,[2,0,7],"02"),a=h(t,0,[2,0,8],"02")}catch(t){throw"malformed PKCS#8 plain RSA private key"}this.setPrivateEx(n,i,r,e,s,o,u,a)},Xa.prototype.readPKCS5PubKeyHex=function(t){var n=ah,i=n.getV;if(!1===n.isASN1HEX(t))throw"keyHex is not ASN.1 hex string";var r=n.getChildIdx(t,0);if(2!==r.length||"02"!==t.substr(r[0],2)||"02"!==t.substr(r[1],2))throw"wrong hex for PKCS#5 public key";var e=i(t,r[0]),s=i(t,r[1]);this.setPublic(e,s)},Xa.prototype.readPKCS8PubKeyHex=function(t){var n=ah;if(!1===n.isASN1HEX(t))throw"not ASN.1 hex string";if("06092a864886f70d010101"!==n.getTLVbyList(t,0,[0,0]))throw"not PKCS8 RSA public key";var i=n.getTLVbyList(t,0,[1,0]);this.readPKCS5PubKeyHex(i)},Xa.prototype.readCertPubKeyHex=function(t){var n,i;(n=new Hh).readCertHex(t),i=n.getPublicKeyHex(),this.readPKCS8PubKeyHex(i)};var Mh=new RegExp("");function Bh(t,n){for(var i="",r=n/4-t.length,e=0;e<r;e++)i+="0";return i+t}function Lh(t,n,i){for(var r="",e=0;r.length<n;)r+=gh(i(Fh(t+String.fromCharCode.apply(String,[(4278190080&e)>>24,(16711680&e)>>16,(65280&e)>>8,255&e])))),e+=1;return r}function Uh(t){for(var n in sh.crypto.Util.DIGESTINFOHEAD){var i=sh.crypto.Util.DIGESTINFOHEAD[n],r=i.length;if(t.substring(0,r)==i)return[n,t.substring(r)]}return[]}function Hh(){var t=ah,n=t.getChildIdx,i=t.getV,r=t.getTLV,e=t.getVbyList,s=t.getTLVbyList,o=t.getIdxbyList,u=t.getVidx,a=t.oidname,h=Hh,c=kh;this.hex=null,this.version=0,this.foffset=0,this.aExtInfo=null,this.getVersion=function(){return null===this.hex||0!==this.version?this.version:"a003020102"!==s(this.hex,0,[0,0])?(this.version=1,this.foffset=-1,1):(this.version=3,3)},this.getSerialNumberHex=function(){return e(this.hex,0,[0,1+this.foffset],"02")},this.getSignatureAlgorithmField=function(){return a(e(this.hex,0,[0,2+this.foffset,0],"06"))},this.getIssuerHex=function(){return s(this.hex,0,[0,3+this.foffset],"30")},this.getIssuerString=function(){return h.hex2dn(this.getIssuerHex())},this.getSubjectHex=function(){return s(this.hex,0,[0,5+this.foffset],"30")},this.getSubjectString=function(){return h.hex2dn(this.getSubjectHex())},this.getNotBefore=function(){var t=e(this.hex,0,[0,4+this.foffset,0]);return t=t.replace(/(..)/g,"%$1"),decodeURIComponent(t)},this.getNotAfter=function(){var t=e(this.hex,0,[0,4+this.foffset,1]);return t=t.replace(/(..)/g,"%$1"),decodeURIComponent(t)},this.getPublicKeyHex=function(){return t.getTLVbyList(this.hex,0,[0,6+this.foffset],"30")},this.getPublicKeyIdx=function(){return o(this.hex,0,[0,6+this.foffset],"30")},this.getPublicKeyContentIdx=function(){var t=this.getPublicKeyIdx();return o(this.hex,t,[1,0],"30")},this.getPublicKey=function(){return Ph.getKey(this.getPublicKeyHex(),null,"pkcs8pub")},this.getSignatureAlgorithmName=function(){return a(e(this.hex,0,[1,0],"06"))},this.getSignatureValueHex=function(){return e(this.hex,0,[2],"03",!0)},this.verifySignature=function(t){var n=this.getSignatureAlgorithmName(),i=this.getSignatureValueHex(),r=s(this.hex,0,[0],"30"),e=new sh.crypto.Signature({alg:n});return e.init(t),e.updateHex(r),e.verify(i)},this.parseExt=function(){if(3!==this.version)return-1;var i=o(this.hex,0,[0,7,0],"30"),r=n(this.hex,i);this.aExtInfo=new Array;for(var s=0;s<r.length;s++){var a={critical:!1},h=0;3===n(this.hex,r[s]).length&&(a.critical=!0,h=1),a.oid=t.hextooidstr(e(this.hex,r[s],[0],"06"));var c=o(this.hex,r[s],[1+h]);a.vidx=u(this.hex,c),this.aExtInfo.push(a)}},this.getExtInfo=function(t){var n=this.aExtInfo,i=t;if(t.match(/^[0-9.]+$/)||(i=sh.asn1.x509.OID.name2oid(t)),""!==i)for(var r=0;r<n.length;r++)if(n[r].oid===i)return n[r]},this.getExtBasicConstraints=function(){var t=this.getExtInfo("basicConstraints");if(void 0===t)return t;var n=i(this.hex,t.vidx);if(""===n)return{};if("0101ff"===n)return{cA:!0};if("0101ff02"===n.substr(0,8)){var r=i(n,6);return{cA:!0,pathLen:parseInt(r,16)}}throw"basicConstraints parse error"},this.getExtKeyUsageBin=function(){var t=this.getExtInfo("keyUsage");if(void 0===t)return"";var n=i(this.hex,t.vidx);if(n.length%2!=0||n.length<=2)throw"malformed key usage value";var r=parseInt(n.substr(0,2)),e=parseInt(n.substr(2),16).toString(2);return e.substr(0,e.length-r)},this.getExtKeyUsageString=function(){for(var t=this.getExtKeyUsageBin(),n=new Array,i=0;i<t.length;i++)"1"==t.substr(i,1)&&n.push(Hh.KEYUSAGE_NAME[i]);return n.join(",")},this.getExtSubjectKeyIdentifier=function(){var t=this.getExtInfo("subjectKeyIdentifier");return void 0===t?t:i(this.hex,t.vidx)},this.getExtAuthorityKeyIdentifier=function(){var t=this.getExtInfo("authorityKeyIdentifier");if(void 0===t)return t;for(var e={},s=r(this.hex,t.vidx),o=n(s,0),u=0;u<o.length;u++)"80"===s.substr(o[u],2)&&(e.kid=i(s,o[u]));return e},this.getExtExtKeyUsageName=function(){var t=this.getExtInfo("extKeyUsage");if(void 0===t)return t;var e=new Array,s=r(this.hex,t.vidx);if(""===s)return e;for(var o=n(s,0),u=0;u<o.length;u++)e.push(a(i(s,o[u])));return e},this.getExtSubjectAltName=function(){for(var t=this.getExtSubjectAltName2(),n=new Array,i=0;i<t.length;i++)"DNS"===t[i][0]&&n.push(t[i][1]);return n},this.getExtSubjectAltName2=function(){var t,e,s,o=this.getExtInfo("subjectAltName");if(void 0===o)return o;for(var u=new Array,a=r(this.hex,o.vidx),h=n(a,0),c=0;c<h.length;c++)s=a.substr(h[c],2),t=i(a,h[c]),"81"===s&&(e=yh(t),u.push(["MAIL",e])),"82"===s&&(e=yh(t),u.push(["DNS",e])),"84"===s&&(e=Hh.hex2dn(t,0),u.push(["DN",e])),"86"===s&&(e=yh(t),u.push(["URI",e])),"87"===s&&(e=Dh(t),u.push(["IP",e]));return u},this.getExtCRLDistributionPointsURI=function(){var t=this.getExtInfo("cRLDistributionPoints");if(void 0===t)return t;for(var i=new Array,r=n(this.hex,t.vidx),s=0;s<r.length;s++)try{var o=yh(e(this.hex,r[s],[0,0,0],"86"));i.push(o)}catch(t){}return i},this.getExtAIAInfo=function(){var t=this.getExtInfo("authorityInfoAccess");if(void 0===t)return t;for(var i={ocsp:[],caissuer:[]},r=n(this.hex,t.vidx),s=0;s<r.length;s++){var o=e(this.hex,r[s],[0],"06"),u=e(this.hex,r[s],[1],"86");"2b06010505073001"===o&&i.ocsp.push(yh(u)),"2b06010505073002"===o&&i.caissuer.push(yh(u))}return i},this.getExtCertificatePolicies=function(){var t=this.getExtInfo("certificatePolicies");if(void 0===t)return t;for(var s=r(this.hex,t.vidx),o=[],u=n(s,0),h=0;h<u.length;h++){var c={},f=n(s,u[h]);if(c.id=a(i(s,f[0])),2===f.length)for(var l=n(s,f[1]),v=0;v<l.length;v++){var d=e(s,l[v],[0],"06");"2b06010505070201"===d?c.cps=yh(e(s,l[v],[1])):"2b06010505070202"===d&&(c.unotice=yh(e(s,l[v],[1,0])))}o.push(c)}return o},this.readCertPEM=function(t){this.readCertHex(c(t))},this.readCertHex=function(t){this.hex=t,this.getVersion();try{o(this.hex,0,[0,7],"a3"),this.parseExt()}catch(t){}},this.getInfo=function(){var t,n,i;if(t="Basic Fields\n",t+="  serial number: "+this.getSerialNumberHex()+"\n",t+="  signature algorithm: "+this.getSignatureAlgorithmField()+"\n",t+="  issuer: "+this.getIssuerString()+"\n",t+="  notBefore: "+this.getNotBefore()+"\n",t+="  notAfter: "+this.getNotAfter()+"\n",t+="  subject: "+this.getSubjectString()+"\n",t+="  subject public key info: \n",t+="    key algorithm: "+(n=this.getPublicKey()).type+"\n","RSA"===n.type&&(t+="    n="+jh(n.n.toString(16)).substr(0,16)+"...\n",t+="    e="+jh(n.e.toString(16))+"\n"),null!=(i=this.aExtInfo)){t+="X509v3 Extensions:\n";for(var r=0;r<i.length;r++){var e=i[r],s=sh.asn1.x509.OID.oid2name(e.oid);""===s&&(s=e.oid);var o="";if(!0===e.critical&&(o="CRITICAL"),t+="  "+s+" "+o+":\n","basicConstraints"===s){var u=this.getExtBasicConstraints();void 0===u.cA?t+="    {}\n":(t+="    cA=true",void 0!==u.pathLen&&(t+=", pathLen="+u.pathLen),t+="\n")}else if("keyUsage"===s)t+="    "+this.getExtKeyUsageString()+"\n";else if("subjectKeyIdentifier"===s)t+="    "+this.getExtSubjectKeyIdentifier()+"\n";else if("authorityKeyIdentifier"===s){var a=this.getExtAuthorityKeyIdentifier();void 0!==a.kid&&(t+="    kid="+a.kid+"\n")}else if("extKeyUsage"===s)t+="    "+this.getExtExtKeyUsageName().join(", ")+"\n";else if("subjectAltName"===s)t+="    "+this.getExtSubjectAltName2()+"\n";else if("cRLDistributionPoints"===s)t+="    "+this.getExtCRLDistributionPointsURI()+"\n";else if("authorityInfoAccess"===s){var h=this.getExtAIAInfo();void 0!==h.ocsp&&(t+="    ocsp: "+h.ocsp.join(",")+"\n"),void 0!==h.caissuer&&(t+="    caissuer: "+h.caissuer.join(",")+"\n")}else if("certificatePolicies"===s)for(var c=this.getExtCertificatePolicies(),f=0;f<c.length;f++)void 0!==c[f].id&&(t+="    policy oid: "+c[f].id+"\n"),void 0!==c[f].cps&&(t+="    cps: "+c[f].cps+"\n")}}return(t+="signature algorithm: "+this.getSignatureAlgorithmName()+"\n")+"signature: "+this.getSignatureValueHex().substr(0,16)+"...\n"}}Mh.compile("[^0-9a-f]","gi"),Xa.prototype.sign=function(t,n){var i=sh.crypto.Util.hashString(t,n);return this.signWithMessageHash(i,n)},Xa.prototype.signWithMessageHash=function(t,n){var i=Za(sh.crypto.Util.getPaddedDigestInfoHex(t,n,this.n.bitLength()),16);return Bh(this.doPrivate(i).toString(16),this.n.bitLength())},Xa.prototype.signPSS=function(t,n,i){var r,e=(r=Fh(t),sh.crypto.Util.hashHex(r,n));return void 0===i&&(i=-1),this.signWithMessageHashPSS(e,n,i)},Xa.prototype.signWithMessageHashPSS=function(t,n,i){var r,e=gh(t),s=e.length,o=this.n.bitLength()-1,u=Math.ceil(o/8),a=function(t){return sh.crypto.Util.hashHex(t,n)};if(-1===i||void 0===i)i=s;else if(-2===i)i=u-s-2;else if(i<-2)throw"invalid salt length";if(u<s+i+2)throw"data too long";var h="";i>0&&(h=new Array(i),(new Wa).nextBytes(h),h=String.fromCharCode.apply(String,h));var c=gh(a(Fh("\0\0\0\0\0\0\0\0"+e+h))),f=[];for(r=0;r<u-i-s-2;r+=1)f[r]=0;var l=String.fromCharCode.apply(String,f)+""+h,v=Lh(c,l.length,a),d=[];for(r=0;r<l.length;r+=1)d[r]=l.charCodeAt(r)^v.charCodeAt(r);for(d[0]&=~(65280>>8*u-o&255),r=0;r<s;r++)d.push(c.charCodeAt(r));return d.push(188),Bh(this.doPrivate(new ma(d)).toString(16),this.n.bitLength())},Xa.prototype.verify=function(t,n){var i=Za(n=(n=n.replace(Mh,"")).replace(/[ \n]+/g,""),16);if(i.bitLength()>this.n.bitLength())return 0;var r=Uh(this.doPublic(i).toString(16).replace(/^1f+00/,""));if(0==r.length)return!1;var e=r[0];return r[1]==function(t){return sh.crypto.Util.hashString(t,e)}(t)},Xa.prototype.verifyWithMessageHash=function(t,n){var i=Za(n=(n=n.replace(Mh,"")).replace(/[ \n]+/g,""),16);if(i.bitLength()>this.n.bitLength())return 0;var r=Uh(this.doPublic(i).toString(16).replace(/^1f+00/,""));return 0!=r.length&&r[1]==t},Xa.prototype.verifyPSS=function(t,n,i,r){var e,s=(e=Fh(t),sh.crypto.Util.hashHex(e,i));return void 0===r&&(r=-1),this.verifyWithMessageHashPSS(s,n,i,r)},Xa.prototype.verifyWithMessageHashPSS=function(t,n,i,r){var e=new ma(n,16);if(e.bitLength()>this.n.bitLength())return!1;var s,o=function(t){return sh.crypto.Util.hashHex(t,i)},u=gh(t),a=u.length,h=this.n.bitLength()-1,c=Math.ceil(h/8);if(-1===r||void 0===r)r=a;else if(-2===r)r=c-a-2;else if(r<-2)throw"invalid salt length";if(c<a+r+2)throw"data too long";var f=this.doPublic(e).toByteArray();for(s=0;s<f.length;s+=1)f[s]&=255;for(;f.length<c;)f.unshift(0);if(188!==f[c-1])throw"encoded message does not end in 0xbc";var l=(f=String.fromCharCode.apply(String,f)).substr(0,c-a-1),v=f.substr(l.length,a),d=65280>>8*c-h&255;if(0!=(l.charCodeAt(0)&d))throw"bits beyond keysize not zero";var p=Lh(v,l.length,o),w=[];for(s=0;s<l.length;s+=1)w[s]=l.charCodeAt(s)^p.charCodeAt(s);w[0]&=~d;var m=c-a-r-2;for(s=0;s<m;s+=1)if(0!==w[s])throw"leftmost octets not zero";if(1!==w[m])throw"0x01 marker not found";return v===gh(o(Fh("\0\0\0\0\0\0\0\0"+u+String.fromCharCode.apply(String,w.slice(-r)))))},Xa.SALT_LEN_HLEN=-1,Xa.SALT_LEN_MAX=-2,Xa.SALT_LEN_RECOVER=-2,Hh.hex2dn=function(t,n){if(void 0===n&&(n=0),"30"!==t.substr(n,2))throw"malformed DN";for(var i=new Array,r=ah.getChildIdx(t,n),e=0;e<r.length;e++)i.push(Hh.hex2rdn(t,r[e]));return"/"+(i=i.map((function(t){return t.replace("/","\\/")}))).join("/")},Hh.hex2rdn=function(t,n){if(void 0===n&&(n=0),"31"!==t.substr(n,2))throw"malformed RDN";for(var i=new Array,r=ah.getChildIdx(t,n),e=0;e<r.length;e++)i.push(Hh.hex2attrTypeValue(t,r[e]));return(i=i.map((function(t){return t.replace("+","\\+")}))).join("+")},Hh.hex2attrTypeValue=function(t,n){var i=ah,r=i.getV;if(void 0===n&&(n=0),"30"!==t.substr(n,2))throw"malformed attribute type and value";var e=i.getChildIdx(t,n);2!==e.length||t.substr(e[0],2);var s=r(t,e[0]),o=sh.asn1.ASN1Util.oidHexToInt(s);return sh.asn1.x509.OID.oid2atype(o)+"="+gh(r(t,e[1]))},Hh.getPublicKeyFromCertHex=function(t){var n=new Hh;return n.readCertHex(t),n.getPublicKey()},Hh.getPublicKeyFromCertPEM=function(t){var n=new Hh;return n.readCertPEM(t),n.getPublicKey()},Hh.getPublicKeyInfoPropOfCertPEM=function(t){var n,i,r=ah.getVbyList,e={algparam:null};return(n=new Hh).readCertPEM(t),i=n.getPublicKeyHex(),e.keyhex=r(i,0,[1],"03").substr(2),e.algoid=r(i,0,[0,0],"06"),"2a8648ce3d0201"===e.algoid&&(e.algparam=r(i,0,[0,1],"06")),e},Hh.KEYUSAGE_NAME=["digitalSignature","nonRepudiation","keyEncipherment","dataEncipherment","keyAgreement","keyCertSign","cRLSign","encipherOnly","decipherOnly"],void 0!==sh&&sh||(sh={}),void 0!==sh.jws&&sh.jws||(sh.jws={}),sh.jws.JWS=function(){var t=sh.jws.JWS.isSafeJSONString;this.parseJWS=function(n,i){if(void 0===this.parsedJWS||!i&&void 0===this.parsedJWS.sigvalH){var r=n.match(/^([^.]+)\.([^.]+)\.([^.]+)$/);if(null==r)throw"JWS signature is not a form of 'Head.Payload.SigValue'.";var e=r[1],s=r[2],o=r[3],u=e+"."+s;if(this.parsedJWS={},this.parsedJWS.headB64U=e,this.parsedJWS.payloadB64U=s,this.parsedJWS.sigvalB64U=o,this.parsedJWS.si=u,!i){var a=wh(o),h=Za(a,16);this.parsedJWS.sigvalH=a,this.parsedJWS.sigvalBI=h}var c=uh(e),f=uh(s);if(this.parsedJWS.headS=c,this.parsedJWS.payloadS=f,!t(c,this.parsedJWS,"headP"))throw"malformed JSON string for JWS Head: "+c}}},sh.jws.JWS.sign=function(t,n,i,r,e){var s,o,u,a=sh.jws.JWS,h=a.readSafeJSONString,c=a.isSafeJSONString,f=sh.crypto,l=f.Mac,v=f.Signature,d=JSON;if("string"!=typeof n&&"object"!=typeof n)throw"spHeader must be JSON string or object: "+n;if("object"==typeof n&&(s=d.stringify(o=n)),"string"==typeof n){if(!c(s=n))throw"JWS Head is not safe JSON string: "+s;o=h(s)}if(u=i,"object"==typeof i&&(u=d.stringify(i)),""!=t&&null!=t||void 0===o.alg||(t=o.alg),""!=t&&null!=t&&void 0===o.alg&&(o.alg=t,s=d.stringify(o)),t!==o.alg)throw"alg and sHeader.alg doesn't match: "+t+"!="+o.alg;var p=null;if(void 0===a.jwsalg2sigalg[t])throw"unsupported alg name: "+t;p=a.jwsalg2sigalg[t];var w=oh(s)+"."+oh(u),m="";if("Hmac"==p.substr(0,4)){if(void 0===r)throw"mac key shall be specified for HS* alg";var y=new l({alg:p,prov:"cryptojs",pass:r});y.updateString(w),m=y.doFinal()}else{var g;-1!=p.indexOf("withECDSA")?((g=new v({alg:p})).init(r,e),g.updateString(w),hASN1Sig=g.sign(),m=sh.crypto.ECDSA.asn1SigToConcatSig(hASN1Sig)):"none"!=p&&((g=new v({alg:p})).init(r,e),g.updateString(w),m=g.sign())}return w+"."+ph(m)},sh.jws.JWS.verify=function(t,n,i){var r,e=sh.jws.JWS,s=e.readSafeJSONString,o=sh.crypto,u=o.ECDSA,a=o.Mac,h=o.Signature;r=Xa;var c=t.split(".");if(3!==c.length)return!1;var f,l=c[0]+"."+c[1],v=wh(c[2]),d=s(uh(c[0])),p=null;if(void 0===d.alg)throw"algorithm not specified in header";if(f=(p=d.alg).substr(0,2),null!=i&&"[object Array]"===Object.prototype.toString.call(i)&&i.length>0&&-1==(":"+i.join(":")+":").indexOf(":"+p+":"))throw"algorithm '"+p+"' not accepted in the list";if("none"!=p&&null===n)throw"key shall be specified to verify.";if("string"==typeof n&&-1!=n.indexOf("-----BEGIN ")&&(n=Ph.getKey(n)),!("RS"!=f&&"PS"!=f||n instanceof r))throw"key shall be a RSAKey obj for RS* and PS* algs";if("ES"==f&&!(n instanceof u))throw"key shall be a ECDSA obj for ES* algs";var w=null;if(void 0===e.jwsalg2sigalg[d.alg])throw"unsupported alg name: "+p;if("none"==(w=e.jwsalg2sigalg[p]))throw"not supported";if("Hmac"==w.substr(0,4)){if(void 0===n)throw"hexadecimal key shall be specified for HMAC";var m=new a({alg:w,pass:n});return m.updateString(l),v==m.doFinal()}if(-1!=w.indexOf("withECDSA")){var y,g=null;try{g=u.concatSigToASN1Sig(v)}catch(t){return!1}return(y=new h({alg:w})).init(n),y.updateString(l),y.verify(g)}return(y=new h({alg:w})).init(n),y.updateString(l),y.verify(v)},sh.jws.JWS.parse=function(t){var n,i,r=t.split("."),e={};if(2!=r.length&&3!=r.length)throw"malformed sJWS: wrong number of '.' splitted elements";return n=r[1],3==r.length&&(i=r[2]),e.headerObj=sh.jws.JWS.readSafeJSONString(uh(r[0])),e.payloadObj=sh.jws.JWS.readSafeJSONString(uh(n)),e.headerPP=JSON.stringify(e.headerObj,null,"  "),e.payloadPP=null==e.payloadObj?uh(n):JSON.stringify(e.payloadObj,null,"  "),void 0!==i&&(e.sigHex=wh(i)),e},sh.jws.JWS.verifyJWT=function(t,n,i){var r=sh.jws,e=r.JWS,s=e.readSafeJSONString,o=e.inArray,u=e.includedArray,a=t.split("."),h=a[0],c=a[1],f=(wh(a[2]),s(uh(h))),l=s(uh(c));if(void 0===f.alg)return!1;if(void 0===i.alg)throw"acceptField.alg shall be specified";if(!o(f.alg,i.alg))return!1;if(void 0!==l.iss&&"object"==typeof i.iss&&!o(l.iss,i.iss))return!1;if(void 0!==l.sub&&"object"==typeof i.sub&&!o(l.sub,i.sub))return!1;if(void 0!==l.aud&&"object"==typeof i.aud)if("string"==typeof l.aud){if(!o(l.aud,i.aud))return!1}else if("object"==typeof l.aud&&!u(l.aud,i.aud))return!1;var v=r.IntDate.getNow();return void 0!==i.verifyAt&&"number"==typeof i.verifyAt&&(v=i.verifyAt),void 0!==i.gracePeriod&&"number"==typeof i.gracePeriod||(i.gracePeriod=0),!(void 0!==l.exp&&"number"==typeof l.exp&&l.exp+i.gracePeriod<v||void 0!==l.nbf&&"number"==typeof l.nbf&&v<l.nbf-i.gracePeriod||void 0!==l.iat&&"number"==typeof l.iat&&v<l.iat-i.gracePeriod||void 0!==l.jti&&void 0!==i.jti&&l.jti!==i.jti||!e.verify(t,n,i.alg))},sh.jws.JWS.includedArray=function(t,n){var i=sh.jws.JWS.inArray;if(null===t)return!1;if("object"!=typeof t)return!1;if("number"!=typeof t.length)return!1;for(var r=0;r<t.length;r++)if(!i(t[r],n))return!1;return!0},sh.jws.JWS.inArray=function(t,n){if(null===n)return!1;if("object"!=typeof n)return!1;if("number"!=typeof n.length)return!1;for(var i=0;i<n.length;i++)if(n[i]==t)return!0;return!1},sh.jws.JWS.jwsalg2sigalg={HS256:"HmacSHA256",HS384:"HmacSHA384",HS512:"HmacSHA512",RS256:"SHA256withRSA",RS384:"SHA384withRSA",RS512:"SHA512withRSA",ES256:"SHA256withECDSA",ES384:"SHA384withECDSA",PS256:"SHA256withRSAandMGF1",PS384:"SHA384withRSAandMGF1",PS512:"SHA512withRSAandMGF1",none:"none"},sh.jws.JWS.isSafeJSONString=function(t,n,i){var r=null;try{return"object"!=typeof(r=eh(t))?0:r.constructor===Array?0:(n&&(n[i]=r),1)}catch(t){return 0}},sh.jws.JWS.readSafeJSONString=function(t){var n=null;try{return"object"!=typeof(n=eh(t))?null:n.constructor===Array?null:n}catch(t){return null}},sh.jws.JWS.getEncodedSignatureValueFromJWS=function(t){var n=t.match(/^[^.]+\.[^.]+\.([^.]+)$/);if(null==n)throw"JWS signature is not a form of 'Head.Payload.SigValue'.";return n[1]},sh.jws.JWS.getJWKthumbprint=function(t){if("RSA"!==t.kty&&"EC"!==t.kty&&"oct"!==t.kty)throw"unsupported algorithm for JWK Thumprint";var n="{";if("RSA"===t.kty){if("string"!=typeof t.n||"string"!=typeof t.e)throw"wrong n and e value for RSA key";n+='"e":"'+t.e+'",',n+='"kty":"'+t.kty+'",',n+='"n":"'+t.n+'"}'}else if("EC"===t.kty){if("string"!=typeof t.crv||"string"!=typeof t.x||"string"!=typeof t.y)throw"wrong crv, x and y value for EC key";n+='"crv":"'+t.crv+'",',n+='"kty":"'+t.kty+'",',n+='"x":"'+t.x+'",',n+='"y":"'+t.y+'"}'}else if("oct"===t.kty){if("string"!=typeof t.k)throw"wrong k value for oct(symmetric) key";n+='"kty":"'+t.kty+'",',n+='"k":"'+t.k+'"}'}var i=Fh(n);return ph(sh.crypto.Util.hashHex(i,"sha256"))},sh.jws.IntDate={},sh.jws.IntDate.get=function(t){var n=sh.jws.IntDate,i=n.getNow,r=n.getZulu;if("now"==t)return i();if("now + 1hour"==t)return i()+3600;if("now + 1day"==t)return i()+86400;if("now + 1month"==t)return i()+2592e3;if("now + 1year"==t)return i()+31536e3;if(t.match(/Z$/))return r(t);if(t.match(/^[0-9]+$/))return parseInt(t);throw"unsupported format: "+t},sh.jws.IntDate.getZulu=function(t){return Th(t)},sh.jws.IntDate.getNow=function(){return~~(new Date/1e3)},sh.jws.IntDate.intDate2UTCString=function(t){return new Date(1e3*t).toUTCString()},sh.jws.IntDate.intDate2Zulu=function(t){var n=new Date(1e3*t);return("0000"+n.getUTCFullYear()).slice(-4)+("00"+(n.getUTCMonth()+1)).slice(-2)+("00"+n.getUTCDate()).slice(-2)+("00"+n.getUTCHours()).slice(-2)+("00"+n.getUTCMinutes()).slice(-2)+("00"+n.getUTCSeconds()).slice(-2)+"Z"},void 0!==sh&&sh||(sh={}),void 0!==sh.jws&&sh.jws||(sh.jws={}),sh.jws.JWSJS=function(){var t=sh.jws.JWS,n=t.readSafeJSONString;this.aHeader=[],this.sPayload="",this.aSignature=[],this.init=function(){this.aHeader=[],this.sPayload=void 0,this.aSignature=[]},this.initWithJWS=function(t){this.init();var n=t.split(".");if(3!=n.length)throw"malformed input JWS";this.aHeader.push(n[0]),this.sPayload=n[1],this.aSignature.push(n[2])},this.addSignature=function(t,n,i,r){if(null==this.sPayload)throw"there's no JSON-JS signature to add.";var e=this.aHeader.length;if(this.aHeader.length!=this.aSignature.length)throw"aHeader.length != aSignature.length";try{var s=sh.jws.JWS.sign(t,n,this.sPayload,i,r).split(".");this.aHeader.push(s[0]),this.aSignature.push(s[2])}catch(t){throw this.aHeader.length>e&&this.aHeader.pop(),this.aSignature.length>e&&this.aSignature.pop(),"addSignature failed: "+t}},this.verifyAll=function(t){if(this.aHeader.length!==t.length||this.aSignature.length!==t.length)return!1;for(var n=0;n<t.length;n++){var i=t[n];if(2!==i.length)return!1;if(!1===this.verifyNth(n,i[0],i[1]))return!1}return!0},this.verifyNth=function(n,i,r){if(this.aHeader.length<=n||this.aSignature.length<=n)return!1;var e=this.aHeader[n]+"."+this.sPayload+"."+this.aSignature[n],s=!1;try{s=t.verify(e,i,r)}catch(t){return!1}return s},this.readJWSJS=function(t){if("string"==typeof t){var i=n(t);if(null==i)throw"argument is not safe JSON object string";this.aHeader=i.headers,this.sPayload=i.payload,this.aSignature=i.signatures}else try{if(!(t.headers.length>0))throw"malformed header";if(this.aHeader=t.headers,"string"!=typeof t.payload)throw"malformed signatures";if(this.sPayload=t.payload,!(t.signatures.length>0))throw"malformed signatures";this.aSignatures=t.signatures}catch(t){throw"malformed JWS-JS JSON object: "+t}},this.getJSON=function(){return{headers:this.aHeader,payload:this.sPayload,signatures:this.aSignature}},this.isEmpty=function(){return 0==this.aHeader.length?1:0}};var zh,qh={SecureRandom:Wa,rng_seed_time:Va,BigInteger:ma,RSAKey:Xa,ECDSA:sh.crypto.ECDSA,DSA:sh.crypto.DSA,Signature:sh.crypto.Signature,MessageDigest:sh.crypto.MessageDigest,Mac:sh.crypto.Mac,Cipher:sh.crypto.Cipher,KEYUTIL:Ph,ASN1HEX:ah,X509:Hh,CryptoJS:fa,b64tohex:pa,b64toBA:wa,stoBA:hh,BAtos:ch,BAtohex:fh,stohex:lh,stob64:function(t){return da(lh(t))},stob64u:function(t){return vh(da(lh(t)))},b64utos:function(t){return ch(wa(dh(t)))},b64tob64u:vh,b64utob64:dh,hex2b64:da,hextob64u:ph,b64utohex:wh,utf8tob64u:oh,b64utoutf8:uh,utf8tob64:function(t){return da(Ih(Nh(t)))},b64toutf8:function(t){return decodeURIComponent(xh(pa(t)))},utf8tohex:mh,hextoutf8:yh,hextorstr:gh,rstrtohex:Fh,hextob64:bh,hextob64nl:Eh,b64nltohex:Sh,hextopem:Ah,pemtohex:kh,hextoArrayBuffer:function(t){if(t.length%2!=0)throw"input is not even length";if(null==t.match(/^[0-9A-Fa-f]+$/))throw"input is not hexadecimal";for(var n=new ArrayBuffer(t.length/2),i=new DataView(n),r=0;r<t.length/2;r++)i.setUint8(r,parseInt(t.substr(2*r,2),16));return n},ArrayBuffertohex:function(t){for(var n="",i=new DataView(t),r=0;r<t.byteLength;r++)n+=("00"+i.getUint8(r).toString(16)).slice(-2);return n},zulutomsec:Ch,zulutosec:Th,zulutodate:function(t){return new Date(Ch(t))},datetozulu:function(t,n,i){var r,e=t.getUTCFullYear();if(n){if(e<1950||2049<e)throw"not proper year for UTCTime: "+e;r=(""+e).slice(-2)}else r=("000"+e).slice(-4);if(r+=("0"+(t.getUTCMonth()+1)).slice(-2),r+=("0"+t.getUTCDate()).slice(-2),r+=("0"+t.getUTCHours()).slice(-2),r+=("0"+t.getUTCMinutes()).slice(-2),r+=("0"+t.getUTCSeconds()).slice(-2),i){var s=t.getUTCMilliseconds();0!==s&&(r+="."+(s=(s=("00"+s).slice(-3)).replace(/0+$/g,"")))}return r+"Z"},uricmptohex:Ih,hextouricmp:xh,ipv6tohex:Oh,hextoipv6:Rh,hextoip:Dh,iptohex:function(t){var n="malformed IP address";if(!(t=t.toLowerCase(t)).match(/^[0-9.]+$/)){if(t.match(/^[0-9a-f:]+$/)&&-1!==t.indexOf(":"))return Oh(t);throw n}var i=t.split(".");if(4!==i.length)throw n;var r="";try{for(var e=0;e<4;e++)r+=("0"+parseInt(i[e]).toString(16)).slice(-2);return r}catch(t){throw n}},encodeURIComponentAll:Nh,newline_toUnix:function(t){return t.replace(/\r\n/gm,"\n")},newline_toDos:function(t){return(t=t.replace(/\r\n/gm,"\n")).replace(/\n/gm,"\r\n")},hextoposhex:jh,intarystrtohex:_h,strdiffidx:function(t,n){var i=t.length;t.length>n.length&&(i=n.length);for(var r=0;r<i;r++)if(t.charCodeAt(r)!=n.charCodeAt(r))return r;return t.length!=n.length?i:-1},KJUR:sh,crypto:sh.crypto,asn1:sh.asn1,jws:sh.jws,lang:sh.lang};!function(t){function n(t,n){na.set(t,n,{expires:24,path:"/",domain:".crossroads.net"})}t.getCookie=function(t){return na.get(t)},t.deleteCookie=function(t){return na.remove(t,{path:"/",domain:".crossroads.net"})},t.setCookie=n,t.setNetlifyJWT=function(){const t=JSON.stringify({alg:"HS256",typ:"JWT"});var i=new Date;i.setHours(i.getHours()+24);const r=JSON.stringify({app_metadata:{authorization:{roles:["user"]}},exp:Math.floor(i.getTime()/1e3)});n("nf_jwt",qh.jws.JWS.sign("HS256",t,r,"netlifySecretThatsNotASecret"))}}(zh||(zh={}));function $h(t){this.message=t}($h.prototype=new Error).name="InvalidCharacterError";var Vh="undefined"!=typeof window&&window.atob&&window.atob.bind(window)||function(t){var n=String(t).replace(/=+$/,"");if(n.length%4==1)throw new $h("'atob' failed: The string to be decoded is not correctly encoded.");for(var i,r,e=0,s=0,o="";r=n.charAt(s++);~r&&(i=e%4?64*i+r:r,e++%4)?o+=String.fromCharCode(255&i>>(-2*e&6)):0)r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(r);return o};function Kh(t){this.message=t}(Kh.prototype=new Error).name="InvalidTokenError";var Jh=function(t,n){if("string"!=typeof t)throw new Kh("Invalid token specified");var i=!0===(n=n||{}).header?0:1;try{return JSON.parse(function(t){var n=t.replace(/-/g,"+").replace(/_/g,"/");switch(n.length%4){case 0:break;case 2:n+="==";break;case 3:n+="=";break;default:throw"Illegal base64url string!"}try{return function(t){return decodeURIComponent(Vh(t).replace(/(.)/g,(function(t,n){var i=n.charCodeAt(0).toString(16).toUpperCase();return i.length<2&&(i="0"+i),"%"+i})))}(n)}catch(t){return Vh(n)}}(t.split(".")[i]))}catch(t){throw new Kh("Invalid token specified: "+t.message)}};Jh.InvalidTokenError=Kh;class Yh{constructor(t,n,i){this.accessTokenCookie=t,this.refreshTokenCookie=n,this.issuer=i}authenticated(){let t=zh.getCookie(this.accessTokenCookie),n=zh.getCookie(this.refreshTokenCookie);if(t){var i=Jh(t);return Date.now()<=1e3*i.exp?vu(ta.From({access_token:{accessToken:t},refresh_token:n})):xu(this.authenticate(t,n))}return vu(null)}async authenticate(t,n){try{var i=await Ie.get(this.issuer,{headers:{Authorization:t,RefreshToken:n}});return(t=i.headers.sessionid)?(zh.setCookie(this.refreshTokenCookie,n=i.headers.refreshtoken),zh.setCookie(this.accessTokenCookie,t),ta.From({access_token:{accessToken:t},refresh_token:n})):null}catch(t){return null}}signOut(){return zh.getCookie(this.accessTokenCookie)?(zh.deleteCookie(this.accessTokenCookie),zh.deleteCookie(this.refreshTokenCookie),vu(!0)):vu(!1)}}class Gh{constructor(t){this.on=t}Error(t,n){this.on&&(null!=n?console.error(`CRDS-OKTA-AUTH: ${t}`,n):console.error(`CRDS-OKTA-AUTH: ${t}`))}Warn(t,n){this.on&&(null!=n?console.warn(`CRDS-OKTA-AUTH: ${t}`,n):console.warn(`CRDS-OKTA-AUTH: ${t}`))}Info(t,n){this.on&&(null!=n?console.info(`CRDS-OKTA-AUTH: ${t}`,n):console.info(`CRDS-OKTA-AUTH: ${t}`))}Log(t,n){this.on&&(null!=n?console.log(`CRDS-OKTA-AUTH: ${t}`,n):console.log(`CRDS-OKTA-AUTH: ${t}`))}}var Wh=L((function(t,n){var i=function(t){function n(){this.fetch=!1,this.DOMException=t.DOMException}return n.prototype=t,new n}("undefined"!=typeof self?self:B);!function(t){!function(n){var i={searchParams:"URLSearchParams"in t,iterable:"Symbol"in t&&"iterator"in Symbol,blob:"FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch(t){return!1}}(),formData:"FormData"in t,arrayBuffer:"ArrayBuffer"in t};if(i.arrayBuffer)var r=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],e=ArrayBuffer.isView||function(t){return t&&r.indexOf(Object.prototype.toString.call(t))>-1};function s(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function o(t){return"string"!=typeof t&&(t=String(t)),t}function u(t){var n={next:function(){var n=t.shift();return{done:void 0===n,value:n}}};return i.iterable&&(n[Symbol.iterator]=function(){return n}),n}function a(t){this.map={},t instanceof a?t.forEach((function(t,n){this.append(n,t)}),this):Array.isArray(t)?t.forEach((function(t){this.append(t[0],t[1])}),this):t&&Object.getOwnPropertyNames(t).forEach((function(n){this.append(n,t[n])}),this)}function h(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function c(t){return new Promise((function(n,i){t.onload=function(){n(t.result)},t.onerror=function(){i(t.error)}}))}function f(t){var n=new FileReader,i=c(n);return n.readAsArrayBuffer(t),i}function l(t){if(t.slice)return t.slice(0);var n=new Uint8Array(t.byteLength);return n.set(new Uint8Array(t)),n.buffer}function v(){return this.bodyUsed=!1,this._initBody=function(t){var n;this._bodyInit=t,t?"string"==typeof t?this._bodyText=t:i.blob&&Blob.prototype.isPrototypeOf(t)?this._bodyBlob=t:i.formData&&FormData.prototype.isPrototypeOf(t)?this._bodyFormData=t:i.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)?this._bodyText=t.toString():i.arrayBuffer&&i.blob&&(n=t)&&DataView.prototype.isPrototypeOf(n)?(this._bodyArrayBuffer=l(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):i.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(t)||e(t))?this._bodyArrayBuffer=l(t):this._bodyText=t=Object.prototype.toString.call(t):this._bodyText="",this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):i.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},i.blob&&(this.blob=function(){var t=h(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?h(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(f)}),this.text=function(){var t,n,i,r=h(this);if(r)return r;if(this._bodyBlob)return t=this._bodyBlob,i=c(n=new FileReader),n.readAsText(t),i;if(this._bodyArrayBuffer)return Promise.resolve(function(t){for(var n=new Uint8Array(t),i=new Array(n.length),r=0;r<n.length;r++)i[r]=String.fromCharCode(n[r]);return i.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},i.formData&&(this.formData=function(){return this.text().then(w)}),this.json=function(){return this.text().then(JSON.parse)},this}a.prototype.append=function(t,n){t=s(t),n=o(n);var i=this.map[t];this.map[t]=i?i+", "+n:n},a.prototype.delete=function(t){delete this.map[s(t)]},a.prototype.get=function(t){return t=s(t),this.has(t)?this.map[t]:null},a.prototype.has=function(t){return this.map.hasOwnProperty(s(t))},a.prototype.set=function(t,n){this.map[s(t)]=o(n)},a.prototype.forEach=function(t,n){for(var i in this.map)this.map.hasOwnProperty(i)&&t.call(n,this.map[i],i,this)},a.prototype.keys=function(){var t=[];return this.forEach((function(n,i){t.push(i)})),u(t)},a.prototype.values=function(){var t=[];return this.forEach((function(n){t.push(n)})),u(t)},a.prototype.entries=function(){var t=[];return this.forEach((function(n,i){t.push([i,n])})),u(t)},i.iterable&&(a.prototype[Symbol.iterator]=a.prototype.entries);var d=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function p(t,n){var i,r,e=(n=n||{}).body;if(t instanceof p){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,n.headers||(this.headers=new a(t.headers)),this.method=t.method,this.mode=t.mode,this.signal=t.signal,e||null==t._bodyInit||(e=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=n.credentials||this.credentials||"same-origin",!n.headers&&this.headers||(this.headers=new a(n.headers)),this.method=(r=(i=n.method||this.method||"GET").toUpperCase(),d.indexOf(r)>-1?r:i),this.mode=n.mode||this.mode||null,this.signal=n.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&e)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(e)}function w(t){var n=new FormData;return t.trim().split("&").forEach((function(t){if(t){var i=t.split("="),r=i.shift().replace(/\+/g," "),e=i.join("=").replace(/\+/g," ");n.append(decodeURIComponent(r),decodeURIComponent(e))}})),n}function m(t,n){n||(n={}),this.type="default",this.status=void 0===n.status?200:n.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in n?n.statusText:"OK",this.headers=new a(n.headers),this.url=n.url||"",this._initBody(t)}p.prototype.clone=function(){return new p(this,{body:this._bodyInit})},v.call(p.prototype),v.call(m.prototype),m.prototype.clone=function(){return new m(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new a(this.headers),url:this.url})},m.error=function(){var t=new m(null,{status:0,statusText:""});return t.type="error",t};var y=[301,302,303,307,308];m.redirect=function(t,n){if(-1===y.indexOf(n))throw new RangeError("Invalid status code");return new m(null,{status:n,headers:{location:t}})},n.DOMException=t.DOMException;try{new n.DOMException}catch(t){n.DOMException=function(t,n){this.message=t,this.name=n;var i=Error(t);this.stack=i.stack},n.DOMException.prototype=Object.create(Error.prototype),n.DOMException.prototype.constructor=n.DOMException}function g(t,r){return new Promise((function(e,s){var o=new p(t,r);if(o.signal&&o.signal.aborted)return s(new n.DOMException("Aborted","AbortError"));var u=new XMLHttpRequest;function h(){u.abort()}u.onload=function(){var t,n,i={status:u.status,statusText:u.statusText,headers:(t=u.getAllResponseHeaders()||"",n=new a,t.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach((function(t){var i=t.split(":"),r=i.shift().trim();if(r){var e=i.join(":").trim();n.append(r,e)}})),n)};i.url="responseURL"in u?u.responseURL:i.headers.get("X-Request-URL"),e(new m("response"in u?u.response:u.responseText,i))},u.onerror=function(){s(new TypeError("Network request failed"))},u.ontimeout=function(){s(new TypeError("Network request failed"))},u.onabort=function(){s(new n.DOMException("Aborted","AbortError"))},u.open(o.method,o.url,!0),"include"===o.credentials?u.withCredentials=!0:"omit"===o.credentials&&(u.withCredentials=!1),"responseType"in u&&i.blob&&(u.responseType="blob"),o.headers.forEach((function(t,n){u.setRequestHeader(n,t)})),o.signal&&(o.signal.addEventListener("abort",h),u.onreadystatechange=function(){4===u.readyState&&o.signal.removeEventListener("abort",h)}),u.send(void 0===o._bodyInit?null:o._bodyInit)}))}g.polyfill=!0,t.fetch||(t.fetch=g,t.Headers=a,t.Request=p,t.Response=m),n.Headers=a,n.Request=p,n.Response=m,n.fetch=g}({})}(i),delete i.fetch.polyfill,(n=i.fetch).default=i.fetch,n.fetch=i.fetch,n.Headers=i.Headers,n.Request=i.Request,n.Response=i.Response,t.exports=n})),Zh=L((function(t){t.exports=function(){function t(){for(var t=0,n={};t<arguments.length;t++){var i=arguments[t];for(var r in i)n[r]=i[r]}return n}return function n(i){function r(n,e,s){var o;if("undefined"!=typeof document){if(arguments.length>1){if("number"==typeof(s=t({path:"/"},r.defaults,s)).expires){var u=new Date;u.setMilliseconds(u.getMilliseconds()+864e5*s.expires),s.expires=u}s.expires=s.expires?s.expires.toUTCString():"";try{o=JSON.stringify(e),/^[\{\[]/.test(o)&&(e=o)}catch(t){}e=i.write?i.write(e,n):encodeURIComponent(String(e)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),n=(n=(n=encodeURIComponent(String(n))).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent)).replace(/[\(\)]/g,escape);var a="";for(var h in s)s[h]&&(a+="; "+h,!0!==s[h]&&(a+="="+s[h]));return document.cookie=n+"="+e+a}n||(o={});for(var c=document.cookie?document.cookie.split("; "):[],f=/(%[0-9A-Z]{2})+/g,l=0;l<c.length;l++){var v=c[l].split("="),d=v.slice(1).join("=");this.json||'"'!==d.charAt(0)||(d=d.slice(1,-1));try{var p=v[0].replace(f,decodeURIComponent);if(d=i.read?i.read(d,p):i(d,p)||d.replace(f,decodeURIComponent),this.json)try{d=JSON.parse(d)}catch(t){}if(n===p){o=d;break}n||(o[p]=d)}catch(t){}}return o}}return r.set=r,r.get=function(t){return r.call(r,t)},r.getJSON=function(){return r.apply({json:!0},[].slice.call(arguments))},r.defaults={},r.remove=function(n,i){r(n,"",t(i,{expires:-1}))},r.withConverter=n,r}((function(){}))}()}));function Qh(t,n){this.name="AuthSdkError",this.message=t,this.errorCode="INTERNAL",this.errorSummary=t,this.errorLink="INTERNAL",this.errorId="INTERNAL",this.errorCauses=[],n&&(this.xhr=n)}Qh.prototype=new Error;var Xh=Qh,tc=function(t,n){if("string"!=typeof n||!n.length)throw new Xh('"storageName" is required');function i(){var i=t.getItem(n);i=i||"{}";try{return JSON.parse(i)}catch(t){throw new Xh("Unable to parse storage string: "+n)}}function r(i){try{var r=JSON.stringify(i);t.setItem(n,r)}catch(t){throw new Xh("Unable to set storage: "+n)}}return{getStorage:i,setStorage:r,clearStorage:function(t){t||r({});var n=i();delete n[t],r(n)},updateStorage:function(t,n){var e=i();e[t]=n,r(e)}}},nc={STATE_TOKEN_KEY_NAME:"oktaStateToken",DEFAULT_POLLING_DELAY:500,DEFAULT_MAX_CLOCK_SKEW:300,DEFAULT_CACHE_DURATION:86400,FRAME_ID:"okta-oauth-helper-frame",REDIRECT_OAUTH_PARAMS_COOKIE_NAME:"okta-oauth-redirect-params",REDIRECT_STATE_COOKIE_NAME:"okta-oauth-state",REDIRECT_NONCE_COOKIE_NAME:"okta-oauth-nonce",TOKEN_STORAGE_NAME:"okta-token-storage",CACHE_STORAGE_NAME:"okta-cache-storage",PKCE_STORAGE_NAME:"okta-pkce-storage",SDK_VERSION:"2.8.0"},ic={browserHasLocalStorage:function(){try{var t=ic.getLocalStorage();return ic.testStorage(t)}catch(t){return!1}},browserHasSessionStorage:function(){try{var t=ic.getSessionStorage();return ic.testStorage(t)}catch(t){return!1}},getPKCEStorage:function(){return ic.browserHasLocalStorage()?tc(ic.getLocalStorage(),nc.PKCE_STORAGE_NAME):ic.browserHasSessionStorage()?tc(ic.getSessionStorage(),nc.PKCE_STORAGE_NAME):tc(ic.getCookieStorage(),nc.PKCE_STORAGE_NAME)},getHttpCache:function(){return ic.browserHasLocalStorage()?tc(ic.getLocalStorage(),nc.CACHE_STORAGE_NAME):ic.browserHasSessionStorage()?tc(ic.getSessionStorage(),nc.CACHE_STORAGE_NAME):tc(ic.getCookieStorage(),nc.CACHE_STORAGE_NAME)},getLocalStorage:function(){return localStorage},getSessionStorage:function(){return sessionStorage},getCookieStorage:function(t){return t=t||{},{getItem:ic.storage.get,setItem:function(n,i){ic.storage.set(n,i,"2200-01-01T00:00:00.000Z",t.secure)}}},testStorage:function(t){var n="okta-test-storage";try{return t.setItem(n,n),t.removeItem(n),!0}catch(t){return!1}}};ic.storage={set:function(t,n,i,r){var e={path:"/",secure:r};return Date.parse(i)&&(e.expires=new Date(i)),Zh.set(t,n,e),ic.storage.get(t)},get:function(t){return Zh.get(t)},delete:function(t){return Zh.remove(t,{path:"/"})}};var rc=ic;L((function(t,n){!function(){var t=n,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function r(t){this.message=t}(r.prototype=new Error).name="InvalidCharacterError",t.btoa||(t.btoa=function(t){for(var n,e,s=String(t),o=0,u=i,a="";s.charAt(0|o)||(u="=",o%1);a+=u.charAt(63&n>>8-o%1*8)){if((e=s.charCodeAt(o+=.75))>255)throw new r("'btoa' failed: The string to be encoded contains characters outside of the Latin1 range.");n=n<<8|e}return a}),t.atob||(t.atob=function(t){var n=String(t).replace(/=+$/,"");if(n.length%4==1)throw new r("'atob' failed: The string to be decoded is not correctly encoded.");for(var e,s,o=0,u=0,a="";s=n.charAt(u++);~s&&(e=o%4?64*e+s:s,o++%4)?a+=String.fromCharCode(255&e>>(-2*o&6)):0)s=i.indexOf(s);return a})}()})),Array.prototype.indexOf||(Array.prototype.indexOf=function(t,n){var i;if(null==this)throw new TypeError('"this" is null or not defined');var r=Object(this),e=r.length>>>0;if(0===e)return-1;var s=+n||0;if(Math.abs(s)===1/0&&(s=0),s>=e)return-1;for(i=Math.max(s>=0?s:e-Math.abs(s),0);i<e;){if(i in r&&r[i]===t)return i;i++}return-1}),Array.isArray||(Array.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)});var ec=L((function(t){var n=t.exports;n.stringToBase64Url=function(t){var i=btoa(t);return n.base64ToBase64Url(i)},n.base64ToBase64Url=function(t){return t.replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")},n.base64UrlToBase64=function(t){return t.replace(/-/g,"+").replace(/_/g,"/")},n.base64UrlToString=function(t){var i=n.base64UrlToBase64(t);switch(i.length%4){case 0:break;case 2:i+="==";break;case 3:i+="=";break;default:throw"Not a valid Base64Url"}var r=atob(i);try{return decodeURIComponent(escape(r))}catch(t){return r}},n.stringToBuffer=function(t){for(var n=new Uint8Array(t.length),i=0;i<t.length;i++)n[i]=t.charCodeAt(i);return n},n.base64UrlDecode=function(t){return atob(n.base64UrlToBase64(t))},n.bind=function(t,n){var i=Array.prototype.slice.call(arguments,2);return function(){var r=Array.prototype.slice.call(arguments);return r=i.concat(r),t.apply(n,r)}},n.isAbsoluteUrl=function(t){return/^(?:[a-z]+:)?\/\//i.test(t)},n.isString=function(t){return"[object String]"===Object.prototype.toString.call(t)},n.isObject=function(t){return"[object Object]"===Object.prototype.toString.call(t)},n.isNumber=function(t){return"[object Number]"===Object.prototype.toString.call(t)},n.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)},n.isoToUTCString=function(t){var n=t.match(/\d+/g),i=Date.UTC(n[0],n[1]-1,n[2],n[3],n[4],n[5]);return new Date(i).toUTCString()},n.toQueryParams=function(t){var n=[];if(null!==t)for(var i in t)t.hasOwnProperty(i)&&null!=t[i]&&n.push(i+"="+encodeURIComponent(t[i]));return n.length?"?"+n.join("&"):""},n.genRandomString=function(t){for(var n="abcdefghijklnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",i="",r=0,e=n.length;r<t;++r)i+=n[Math.floor(Math.random()*e)];return i},n.extend=function(){var t=arguments[0],n=[].slice.call(arguments,1);return n.forEach((function(n){for(var i in n)n.hasOwnProperty(i)&&void 0!==n[i]&&(t[i]=n[i])})),t},n.removeNils=function(t){var n={};for(var i in t)if(t.hasOwnProperty(i)){var r=t[i];null!=r&&(n[i]=r)}return n},n.clone=function(t){if(t){var n=JSON.stringify(t);if(n)return JSON.parse(n)}return t},n.omit=function(t){var i=Array.prototype.slice.call(arguments,1),r={};for(var e in t)t.hasOwnProperty(e)&&-1==i.indexOf(e)&&(r[e]=t[e]);return n.clone(r)},n.find=function(t,n){for(var i=t.length;i--;){var r=t[i],e=!0;for(var s in n)if(n.hasOwnProperty(s)&&r[s]!==n[s]){e=!1;break}if(e)return r}},n.getLink=function(t,i,r){if(t&&t._links){var e=n.clone(t._links[i]);return e&&e.name&&r?e.name===r?e:void 0:e}},n.getNativeConsole=function(){return"undefined"!=typeof window?window.console:"undefined"!=typeof console?console:void 0},n.getConsole=function(){var t=n.getNativeConsole();return t&&t.log?t:{log:function(){}}},n.warn=function(t){n.getConsole().log("[okta-auth-sdk] WARN: "+t)},n.deprecate=function(t){n.getConsole().log("[okta-auth-sdk] DEPRECATION: "+t)},n.deprecateWrap=function(t,i){return function(){return n.deprecate(t),i.apply(null,arguments)}},n.removeTrailingSlash=function(t){if(t){var n=t.replace(/^\s+|\s+$/gm,"");return"/"===n.slice(-1)?n.slice(0,-1):n}},n.isIE11OrLess=function(){return!!document.documentMode&&document.documentMode<=11},n.isFunction=function(t){return!!t&&"[object Function]"==={}.toString.call(t)}})),sc=L((function(t){var n;n=function(){var t=!1;try{throw new Error}catch(n){t=!!n.stack}var n,i=b(),r=function(){},e=function(){var t={task:void 0,next:null},n=t,i=!1,r=void 0,s=!1,o=[];function u(){for(var n,r;t.next;)n=(t=t.next).task,t.task=void 0,(r=t.domain)&&(t.domain=void 0,r.enter()),a(n,r);for(;o.length;)a(n=o.pop());i=!1}function a(t,n){try{t()}catch(t){if(s)throw n&&n.exit(),setTimeout(u,0),n&&n.enter(),t;setTimeout((function(){throw t}),0)}n&&n.exit()}if(e=function(t){n=n.next={task:t,domain:s&&bt.domain,next:null},i||(i=!0,r())},"object"==typeof bt&&"[object process]"===bt.toString()&&at)s=!0,r=function(){at(u)};else if("function"==typeof setImmediate)r="undefined"!=typeof window?setImmediate.bind(window,u):function(){setImmediate(u)};else if("undefined"!=typeof MessageChannel){var h=new MessageChannel;h.port1.onmessage=function(){r=c,h.port1.onmessage=u,u()};var c=function(){h.port2.postMessage(0)};r=function(){setTimeout(u,0),c()}}else r=function(){setTimeout(u,0)};return e.runAfter=function(t){o.push(t),i||(i=!0,r())},e}(),s=Function.call;function o(t){return function(){return s.apply(t,arguments)}}var u,a=o(Array.prototype.slice),h=o(Array.prototype.reduce||function(t,n){var i=0,r=this.length;if(1===arguments.length)for(;;){if(i in this){n=this[i++];break}if(++i>=r)throw new TypeError}for(;i<r;i++)i in this&&(n=t(n,this[i],i));return n}),c=o(Array.prototype.indexOf||function(t){for(var n=0;n<this.length;n++)if(this[n]===t)return n;return-1}),f=o(Array.prototype.map||function(t,n){var i=this,r=[];return h(i,(function(e,s,o){r.push(t.call(n,s,o,i))}),void 0),r}),l=Object.create||function(t){function n(){}return n.prototype=t,new n},v=o(Object.prototype.hasOwnProperty),d=Object.keys||function(t){var n=[];for(var i in t)v(t,i)&&n.push(i);return n},p=o(Object.prototype.toString);function w(t){return"[object StopIteration]"===p(t)||t instanceof u}u="undefined"!=typeof ReturnValue?ReturnValue:function(t){this.value=t};var m="From previous event:";function y(n,i){if(t&&i.stack&&"object"==typeof n&&null!==n&&n.stack&&-1===n.stack.indexOf(m)){for(var r=[],e=i;e;e=e.source)e.stack&&r.unshift(e.stack);r.unshift(n.stack);var s=r.join("\n"+m+"\n");n.stack=function(t){for(var n=t.split("\n"),i=[],r=0;r<n.length;++r){var e=n[r];!F(e)&&-1===(s=e).indexOf("(module.js:")&&-1===s.indexOf("(node.js:")&&e&&i.push(e)}var s;return i.join("\n")}(s)}}function g(t){var n=/at .+ \((.+):(\d+):(?:\d+)\)$/.exec(t);if(n)return[n[1],Number(n[2])];var i=/at ([^ ]+):(\d+):(?:\d+)$/.exec(t);if(i)return[i[1],Number(i[2])];var r=/.*@(.+):(\d+)$/.exec(t);return r?[r[1],Number(r[2])]:void 0}function F(t){var r=g(t);if(!r)return!1;var e=r[1];return r[0]===n&&e>=i&&e<=$}function b(){if(t)try{throw new Error}catch(t){var i=t.stack.split("\n"),r=g(i[0].indexOf("@")>0?i[1]:i[2]);if(!r)return;return n=r[0],r[1]}}function E(t){return t instanceof C?t:O(t)?function(t){var n=S();return E.nextTick((function(){try{t.then(n.resolve,n.reject,n.notify)}catch(t){n.reject(t)}})),n.promise}(t):B(t)}function S(){var n,i=[],r=[],e=l(S.prototype),s=l(C.prototype);if(s.promiseDispatch=function(t,e,s){var o=a(arguments);i?(i.push(o),"when"===e&&s[1]&&r.push(s[1])):E.nextTick((function(){n.promiseDispatch.apply(n,o)}))},s.valueOf=function(){if(i)return s;var t=I(n);return x(t)&&(n=t),t},s.inspect=function(){return n?n.inspect():{state:"pending"}},E.longStackSupport&&t)try{throw new Error}catch(t){s.stack=t.stack.substring(t.stack.indexOf("\n")+1)}function o(t){n=t,s.source=t,h(i,(function(n,i){E.nextTick((function(){t.promiseDispatch.apply(t,i)}))}),void 0),i=void 0,r=void 0}return e.promise=s,e.resolve=function(t){n||o(E(t))},e.fulfill=function(t){n||o(B(t))},e.reject=function(t){n||o(M(t))},e.notify=function(t){n||h(r,(function(n,i){E.nextTick((function(){i(t)}))}),void 0)},e}function A(t){if("function"!=typeof t)throw new TypeError("resolver must be a function.");var n=S();try{t(n.resolve,n.reject,n.notify)}catch(t){n.reject(t)}return n.promise}function k(t){return A((function(n,i){for(var r=0,e=t.length;r<e;r++)E(t[r]).then(n,i)}))}function C(t,n,i){void 0===n&&(n=function(t){return M(new Error("Promise does not support operation: "+t))}),void 0===i&&(i=function(){return{state:"unknown"}});var r=l(C.prototype);if(r.promiseDispatch=function(i,e,s){var o;try{o=t[e]?t[e].apply(r,s):n.call(r,e,s)}catch(t){o=M(t)}i&&i(o)},r.inspect=i,i){var e=i();"rejected"===e.state&&(r.exception=e.reason),r.valueOf=function(){var t=i();return"pending"===t.state||"rejected"===t.state?r:t.value}}return r}function T(t,n,i,r){return E(t).then(n,i,r)}function I(t){if(x(t)){var n=t.inspect();if("fulfilled"===n.state)return n.value}return t}function x(t){return t instanceof C}function O(t){return(n=t)===Object(n)&&"function"==typeof t.then;var n}E.resolve=E,E.nextTick=e,E.longStackSupport=!1,"object"==typeof bt&&bt&&bt.env&&bt.env.Q_DEBUG&&(E.longStackSupport=!0),E.defer=S,S.prototype.makeNodeResolver=function(){var t=this;return function(n,i){n?t.reject(n):t.resolve(arguments.length>2?a(arguments,1):i)}},E.Promise=A,E.promise=A,A.race=k,A.all=H,A.reject=M,A.resolve=E,E.passByCopy=function(t){return t},C.prototype.passByCopy=function(){return this},E.join=function(t,n){return E(t).join(n)},C.prototype.join=function(t){return E([this,t]).spread((function(t,n){if(t===n)return t;throw new Error("Can't join: not the same: "+t+" "+n)}))},E.race=k,C.prototype.race=function(){return this.then(E.race)},E.makePromise=C,C.prototype.toString=function(){return"[object Promise]"},C.prototype.then=function(t,n,i){var r=this,e=S(),s=!1;return E.nextTick((function(){r.promiseDispatch((function(n){s||(s=!0,e.resolve(function(n){try{return"function"==typeof t?t(n):n}catch(t){return M(t)}}(n)))}),"when",[function(t){s||(s=!0,e.resolve(function(t){if("function"==typeof n){y(t,r);try{return n(t)}catch(t){return M(t)}}return M(t)}(t)))}])})),r.promiseDispatch(void 0,"when",[void 0,function(t){var n,r=!1;try{n=function(t){return"function"==typeof i?i(t):t}(t)}catch(t){if(r=!0,!E.onerror)throw t;E.onerror(t)}r||e.notify(n)}]),e.promise},E.tap=function(t,n){return E(t).tap(n)},C.prototype.tap=function(t){return t=E(t),this.then((function(n){return t.fcall(n).thenResolve(n)}))},E.when=T,C.prototype.thenResolve=function(t){return this.then((function(){return t}))},E.thenResolve=function(t,n){return E(t).thenResolve(n)},C.prototype.thenReject=function(t){return this.then((function(){throw t}))},E.thenReject=function(t,n){return E(t).thenReject(n)},E.nearer=I,E.isPromise=x,E.isPromiseAlike=O,E.isPending=function(t){return x(t)&&"pending"===t.inspect().state},C.prototype.isPending=function(){return"pending"===this.inspect().state},E.isFulfilled=function(t){return!x(t)||"fulfilled"===t.inspect().state},C.prototype.isFulfilled=function(){return"fulfilled"===this.inspect().state},E.isRejected=function(t){return x(t)&&"rejected"===t.inspect().state},C.prototype.isRejected=function(){return"rejected"===this.inspect().state};var R,D=[],N=[],j=[],_=!0;function P(){D.length=0,N.length=0,_||(_=!0)}function M(t){var n=C({when:function(n){return n&&function(t){if(_){var n=c(N,t);-1!==n&&("object"==typeof bt&&"function"==typeof bt.emit&&E.nextTick.runAfter((function(){var i=c(j,t);-1!==i&&(bt.emit("rejectionHandled",D[n],t),j.splice(i,1))})),N.splice(n,1),D.splice(n,1))}}(this),n?n(t):this}},(function(){return this}),(function(){return{state:"rejected",reason:t}}));return function(t,n){_&&("object"==typeof bt&&"function"==typeof bt.emit&&E.nextTick.runAfter((function(){-1!==c(N,t)&&(bt.emit("unhandledRejection",n,t),j.push(t))})),N.push(t),D.push(n&&void 0!==n.stack?n.stack:"(no stack) "+n))}(n,t),n}function B(t){return C({when:function(){return t},get:function(n){return t[n]},set:function(n,i){t[n]=i},delete:function(n){delete t[n]},post:function(n,i){return null==n?t.apply(void 0,i):t[n].apply(t,i)},apply:function(n,i){return t.apply(n,i)},keys:function(){return d(t)}},void 0,(function(){return{state:"fulfilled",value:t}}))}function L(t,n,i){return E(t).spread(n,i)}function U(t,n,i){return E(t).dispatch(n,i)}function H(t){return T(t,(function(t){var n=0,i=S();return h(t,(function(r,e,s){var o;x(e)&&"fulfilled"===(o=e.inspect()).state?t[s]=o.value:(++n,T(e,(function(r){t[s]=r,0==--n&&i.resolve(t)}),i.reject,(function(t){i.notify({index:s,value:t})})))}),void 0),0===n&&i.resolve(t),i.promise}))}function z(t){if(0===t.length)return E.resolve();var n=E.defer(),i=0;return h(t,(function(r,e,s){i++,T(t[s],(function(t){n.resolve(t)}),(function(){0==--i&&n.reject(new Error("Can't get fulfillment value from any promise, all promises were rejected."))}),(function(t){n.notify({index:s,value:t})}))}),void 0),n.promise}function q(t){return T(t,(function(t){return t=f(t,E),T(H(f(t,(function(t){return T(t,r,r)}))),(function(){return t}))}))}E.resetUnhandledRejections=P,E.getUnhandledReasons=function(){return D.slice()},E.stopUnhandledRejectionTracking=function(){P(),_=!1},P(),E.reject=M,E.fulfill=B,E.master=function(t){return C({isDef:function(){}},(function(n,i){return U(t,n,i)}),(function(){return E(t).inspect()}))},E.spread=L,C.prototype.spread=function(t,n){return this.all().then((function(n){return t.apply(void 0,n)}),n)},E.async=function(t){return function(){function n(t,n){var s;if("undefined"==typeof StopIteration){try{s=i[t](n)}catch(t){return M(t)}return s.done?E(s.value):T(s.value,r,e)}try{s=i[t](n)}catch(t){return w(t)?E(t.value):M(t)}return T(s,r,e)}var i=t.apply(this,arguments),r=n.bind(n,"next"),e=n.bind(n,"throw");return r()}},E.spawn=function(t){E.done(E.async(t)())},E.return=function(t){throw new u(t)},E.promised=function(t){return function(){return L([this,H(arguments)],(function(n,i){return t.apply(n,i)}))}},E.dispatch=U,C.prototype.dispatch=function(t,n){var i=this,r=S();return E.nextTick((function(){i.promiseDispatch(r.resolve,t,n)})),r.promise},E.get=function(t,n){return E(t).dispatch("get",[n])},C.prototype.get=function(t){return this.dispatch("get",[t])},E.set=function(t,n,i){return E(t).dispatch("set",[n,i])},C.prototype.set=function(t,n){return this.dispatch("set",[t,n])},E.del=E.delete=function(t,n){return E(t).dispatch("delete",[n])},C.prototype.del=C.prototype.delete=function(t){return this.dispatch("delete",[t])},E.mapply=E.post=function(t,n,i){return E(t).dispatch("post",[n,i])},C.prototype.mapply=C.prototype.post=function(t,n){return this.dispatch("post",[t,n])},E.send=E.mcall=E.invoke=function(t,n){return E(t).dispatch("post",[n,a(arguments,2)])},C.prototype.send=C.prototype.mcall=C.prototype.invoke=function(t){return this.dispatch("post",[t,a(arguments,1)])},E.fapply=function(t,n){return E(t).dispatch("apply",[void 0,n])},C.prototype.fapply=function(t){return this.dispatch("apply",[void 0,t])},E.try=E.fcall=function(t){return E(t).dispatch("apply",[void 0,a(arguments,1)])},C.prototype.fcall=function(){return this.dispatch("apply",[void 0,a(arguments)])},E.fbind=function(t){var n=E(t),i=a(arguments,1);return function(){return n.dispatch("apply",[this,i.concat(a(arguments))])}},C.prototype.fbind=function(){var t=this,n=a(arguments);return function(){return t.dispatch("apply",[this,n.concat(a(arguments))])}},E.keys=function(t){return E(t).dispatch("keys",[])},C.prototype.keys=function(){return this.dispatch("keys",[])},E.all=H,C.prototype.all=function(){return H(this)},E.any=z,C.prototype.any=function(){return z(this)},E.allResolved=(R=q,"allResolved","allSettled",function(){return"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn("allResolved is deprecated, use allSettled instead.",new Error("").stack),R.apply(R,arguments)}),C.prototype.allResolved=function(){return q(this)},E.allSettled=function(t){return E(t).allSettled()},C.prototype.allSettled=function(){return this.then((function(t){return H(f(t,(function(t){function n(){return t.inspect()}return(t=E(t)).then(n,n)})))}))},E.fail=E.catch=function(t,n){return E(t).then(void 0,n)},C.prototype.fail=C.prototype.catch=function(t){return this.then(void 0,t)},E.progress=function(t,n){return E(t).then(void 0,void 0,n)},C.prototype.progress=function(t){return this.then(void 0,void 0,t)},E.fin=E.finally=function(t,n){return E(t).finally(n)},C.prototype.fin=C.prototype.finally=function(t){return t=E(t),this.then((function(n){return t.fcall().then((function(){return n}))}),(function(n){return t.fcall().then((function(){throw n}))}))},E.done=function(t,n,i,r){return E(t).done(n,i,r)},C.prototype.done=function(t,n,i){var r=function(t){E.nextTick((function(){if(y(t,e),!E.onerror)throw t;E.onerror(t)}))},e=t||n||i?this.then(t,n,i):this;"object"==typeof bt&&bt&&bt.domain&&(r=bt.domain.bind(r)),e.then(void 0,r)},E.timeout=function(t,n,i){return E(t).timeout(n,i)},C.prototype.timeout=function(t,n){var i=S(),r=setTimeout((function(){n&&"string"!=typeof n||((n=new Error(n||"Timed out after "+t+" ms")).code="ETIMEDOUT"),i.reject(n)}),t);return this.then((function(t){clearTimeout(r),i.resolve(t)}),(function(t){clearTimeout(r),i.reject(t)}),i.notify),i.promise},E.delay=function(t,n){return void 0===n&&(n=t,t=void 0),E(t).delay(n)},C.prototype.delay=function(t){return this.then((function(n){var i=S();return setTimeout((function(){i.resolve(n)}),t),i.promise}))},E.nfapply=function(t,n){return E(t).nfapply(n)},C.prototype.nfapply=function(t){var n=S(),i=a(t);return i.push(n.makeNodeResolver()),this.fapply(i).fail(n.reject),n.promise},E.nfcall=function(t){var n=a(arguments,1);return E(t).nfapply(n)},C.prototype.nfcall=function(){var t=a(arguments),n=S();return t.push(n.makeNodeResolver()),this.fapply(t).fail(n.reject),n.promise},E.nfbind=E.denodeify=function(t){var n=a(arguments,1);return function(){var i=n.concat(a(arguments)),r=S();return i.push(r.makeNodeResolver()),E(t).fapply(i).fail(r.reject),r.promise}},C.prototype.nfbind=C.prototype.denodeify=function(){var t=a(arguments);return t.unshift(this),E.denodeify.apply(void 0,t)},E.nbind=function(t,n){var i=a(arguments,2);return function(){var r=i.concat(a(arguments)),e=S();function s(){return t.apply(n,arguments)}return r.push(e.makeNodeResolver()),E(s).fapply(r).fail(e.reject),e.promise}},C.prototype.nbind=function(){var t=a(arguments,0);return t.unshift(this),E.nbind.apply(void 0,t)},E.nmapply=E.npost=function(t,n,i){return E(t).npost(n,i)},C.prototype.nmapply=C.prototype.npost=function(t,n){var i=a(n||[]),r=S();return i.push(r.makeNodeResolver()),this.dispatch("post",[t,i]).fail(r.reject),r.promise},E.nsend=E.nmcall=E.ninvoke=function(t,n){var i=a(arguments,2),r=S();return i.push(r.makeNodeResolver()),E(t).dispatch("post",[n,i]).fail(r.reject),r.promise},C.prototype.nsend=C.prototype.nmcall=C.prototype.ninvoke=function(t){var n=a(arguments,1),i=S();return n.push(i.makeNodeResolver()),this.dispatch("post",[t,n]).fail(i.reject),i.promise},E.nodeify=function(t,n){return E(t).nodeify(n)},C.prototype.nodeify=function(t){if(!t)return this;this.then((function(n){E.nextTick((function(){t(null,n)}))}),(function(n){E.nextTick((function(){t(n)}))}))},E.noConflict=function(){throw new Error("Q.noConflict only works when Q is used as a global")};var $=b();return E},"function"==typeof bootstrap?bootstrap("promise",n):t.exports=n()}));function oc(t,n){this.name="AuthApiError",this.message=t.errorSummary,this.errorSummary=t.errorSummary,this.errorCode=t.errorCode,this.errorLink=t.errorLink,this.errorId=t.errorId,this.errorCauses=t.errorCauses,n&&(this.xhr=n)}oc.prototype=new Error;var uc=oc;function ac(t,n){var i=(n=n||{}).url,r=n.method,e=n.args,s=n.saveAuthnState,o=n.accessToken,u=!1!==n.withCredentials,a=t.options.storageUtil,h=a.storage,c=a.getHttpCache();if(n.cacheResponse){var f=c.getStorage()[i];if(f&&Date.now()/1e3<f.expiresAt)return sc.resolve(f.response)}var l,v,d={Accept:"application/json","Content-Type":"application/json","X-Okta-User-Agent-Extended":t.userAgent};return ec.extend(d,t.options.headers,n.headers),o&&ec.isString(o)&&(d.Authorization="Bearer "+o),new sc(t.options.httpRequestClient(r,i,{headers:d,data:e||void 0,withCredentials:u})).then((function(t){return(v=t.responseText)&&ec.isString(v)&&(v=JSON.parse(v)),s&&(v.stateToken||h.delete(nc.STATE_TOKEN_KEY_NAME)),v&&v.stateToken&&v.expiresAt&&h.set(nc.STATE_TOKEN_KEY_NAME,v.stateToken,v.expiresAt),v&&n.cacheResponse&&c.updateStorage(i,{expiresAt:Math.floor(Date.now()/1e3)+nc.DEFAULT_CACHE_DURATION,response:v}),v})).fail((function(n){var i=n.responseText||{};if(ec.isString(i))try{i=JSON.parse(i)}catch(t){i={errorSummary:"Unknown error"}}throw n.status>=500&&(i.errorSummary="Unknown error"),t.options.transformErrorXHR&&(n=t.options.transformErrorXHR(ec.clone(n))),"E0000011"===(l=new uc(i,n)).errorCode&&h.delete(nc.STATE_TOKEN_KEY_NAME),l}))}var hc={get:function(t,n,i){var r={url:n=ec.isAbsoluteUrl(n)?n:t.options.url+n,method:"GET"};return ec.extend(r,i),ac(t,r)},post:function(t,n,i,r){var e={url:n=ec.isAbsoluteUrl(n)?n:t.options.url+n,method:"POST",args:i,saveAuthnState:!0};return ec.extend(e,r),ac(t,e)},httpRequest:ac};function cc(){this.name="AuthPollStopError",this.message="The poll was stopped by the sdk"}cc.prototype=new Error;var fc=cc;function lc(t,n){var i={};return ec.extend(i,n),!i.stateToken&&t.stateToken&&(i.stateToken=t.stateToken),i}function vc(t,n,i,r){return hc.post(t,n,i,r).then((function(n){return new wc(t,n)}))}function dc(t,n,i){return function(r){var e,s,o;ec.isNumber(r)?e=r:ec.isObject(r)&&(e=r.delay,s=r.rememberDevice,o=r.autoPush),e||0===e||(e=nc.DEFAULT_POLLING_DELAY);var u=ec.getLink(n,"next","poll");i.isPolling=!0;var a=0,h=function(){return i.isPolling?function(){var i={};if("function"==typeof o)try{i.autoPush=!!o()}catch(t){return sc.reject(new Xh("AutoPush resulted in an error."))}else null!=o&&(i.autoPush=!!o);if("function"==typeof s)try{i.rememberDevice=!!s()}catch(t){return sc.reject(new Xh("RememberDevice resulted in an error."))}else null!=s&&(i.rememberDevice=!!s);var r=u.href+ec.toQueryParams(i);return hc.post(t,r,function(t){return lc(t)}(n),{saveAuthnState:!1})}().then((function(n){if(a=0,n.factorResult&&"WAITING"===n.factorResult){if(!i.isPolling)throw new fc;return sc.delay(e).then(h)}return i.isPolling=!1,new wc(t,n)})).fail((function(t){if(t.xhr&&(0===t.xhr.status||429===t.xhr.status)&&a<=4){var n=1e3*Math.pow(2,a);return a++,sc.delay(n).then(h)}throw t})):sc.reject(new fc)};return h().fail((function(t){throw i.isPolling=!1,t}))}}function pc(t,n,i,r,e){if(Array.isArray(r))return function(s,o){if(!s)throw new Xh("Must provide a link name");var u=ec.find(r,{name:s});if(!u)throw new Xh("No link found for that name");return pc(t,n,i,u,e)(o)};if(r.hints&&r.hints.allow&&1===r.hints.allow.length)switch(r.hints.allow[0]){case"GET":return function(){return hc.get(t,r.href)};case"POST":return function(s){e&&e.isPolling&&(e.isPolling=!1);var o=lc(n,s);"MFA_ENROLL"!==n.status&&"FACTOR_ENROLL"!==n.status||ec.extend(o,{factorType:i.factorType,provider:i.provider});var u={},a=o.autoPush;if(void 0!==a){if("function"==typeof a)try{u.autoPush=!!a()}catch(t){return sc.reject(new Xh("AutoPush resulted in an error."))}else null!==a&&(u.autoPush=!!a);o=ec.omit(o,"autoPush")}var h=o.rememberDevice;if(void 0!==h){if("function"==typeof h)try{u.rememberDevice=!!h()}catch(t){return sc.reject(new Xh("RememberDevice resulted in an error."))}else null!==h&&(u.rememberDevice=!!h);o=ec.omit(o,"rememberDevice")}else o.profile&&void 0!==o.profile.updatePhone&&(o.profile.updatePhone&&(u.updatePhone=!0),o.profile=ec.omit(o.profile,"updatePhone"));var c=r.href+ec.toQueryParams(u);return vc(t,c,o)}}}function wc(t,n){n&&(this.data=n,ec.extend(this,function t(n,i,r,e){if(r=ec.clone(r=r||i),Array.isArray(r)){for(var s=[],o=0,u=r.length;o<u;o++)s.push(t(n,i,r[o],e));return s}var a=r._embedded||{};for(var h in a)a.hasOwnProperty(h)&&(ec.isObject(a[h])||Array.isArray(a[h]))&&(a[h]=t(n,i,a[h],e));var c=function(t,n,i,r){var e={};for(var s in i._links)if(i._links.hasOwnProperty(s)){var o=i._links[s];if("next"===s&&(s=o.name),o.type)e[s]=o;else switch(s){case"poll":e.poll=dc(t,n,r);break;default:var u=pc(t,n,i,o,r);u&&(e[s]=u)}}return e}(n,i,r,e);return ec.extend(a,c),r=ec.omit(r,"_embedded","_links"),ec.extend(r,a),r}(t,n,n,{})),delete this.stateToken,"RECOVERY_CHALLENGE"!==n.status||n._links||(this.cancel=function(){return new sc(new wc(t))}))}var mc={transactionStatus:function(t,n){return n=lc(t,n),hc.post(t,t.options.url+"/api/v1/authn",n)},resumeTransaction:function(t,n){if(!n||!n.stateToken){var i=t.tx.exists._get(nc.STATE_TOKEN_KEY_NAME);if(!i)return sc.reject(new Xh("No transaction to resume"));n={stateToken:i}}return t.tx.status(n).then((function(n){return new wc(t,n)}))},transactionExists:function(t){return!!t.tx.exists._get(nc.STATE_TOKEN_KEY_NAME)},postToTransaction:vc,introspect:function(t,n){if(!n||!n.stateToken){var i=t.tx.exists._get(nc.STATE_TOKEN_KEY_NAME);if(!i)return sc.reject(new Xh("No transaction to evaluate"));n={stateToken:i}}return function(t,n){return n=lc(t,n),hc.post(t,t.options.url+"/idp/idx/introspect",n)}(t,n).then((function(n){return new wc(t,n)}))}},yc={addSharedPrototypes:function(t){t.forgotPassword=function(t){return mc.postToTransaction(this,"/api/v1/authn/recovery/password",t)},t.unlockAccount=function(t){return mc.postToTransaction(this,"/api/v1/authn/recovery/unlock",t)},t.verifyRecoveryToken=function(t){return mc.postToTransaction(this,"/api/v1/authn/recovery/token",t)}},buildOktaAuth:function(t){return function(n,i){function r(e){if(!(this instanceof r))return new r(e);e&&(e.storageUtil=n,e.ajaxRequest?(ec.deprecate("ajaxRequest is being deprecated, use httpRequestClient attribute instead."),e.httpRequestClient=e.ajaxRequest):e.httpRequestClient||(e.httpRequestClient=i)),ec.bind(t,this)(e)}return(r.prototype=t.prototype).constructor=r,r.features=t.prototype.features,r}},getValidUrl:function(t){if(!t)throw new Xh("No arguments passed to constructor. Required usage: new OktaAuth(args)");var n=t.url;if(!n){var i=new RegExp("^http?s?://.+");if(!t.issuer||!i.test(t.issuer))throw new Xh('No url passed to constructor. Required usage: new OktaAuth({url: "https://{yourOktaDomain}.com"})');n=t.issuer.split("/oauth2/")[0]}if(-1!==n.indexOf("-admin."))throw new Xh('URL passed to constructor contains "-admin" in subdomain. Required usage: new OktaAuth({url: "https://{yourOktaDomain}.com})');return n}},gc=rc.getHttpCache();function Fc(t,n){return hc.get(t,(n||t.options.url)+"/.well-known/openid-configuration",{cacheResponse:!0})}var bc={generateState:function(){return ec.genRandomString(64)},generateNonce:function(){return ec.genRandomString(64)},getWellKnown:Fc,getKey:function(t,n,i){return Fc(t,n).then((function(n){var r=n.jwks_uri,e=gc.getStorage()[r];if(e&&Date.now()/1e3<e.expiresAt){var s=ec.find(e.response.keys,{kid:i});if(s)return s}return gc.clearStorage(r),hc.get(t,r,{cacheResponse:!0}).then((function(t){var n=ec.find(t.keys,{kid:i});if(n)return n;throw new Xh("The key id, "+i+", was not found in the server's keys")}))}))},validateClaims:function(t,n,i){var r=i.clientId,e=i.issuer,s=i.nonce;if(!n||!e||!r)throw new Xh("The jwt, iss, and aud arguments are all required");if(s&&n.nonce!==s)throw new Xh("OAuth flow response nonce doesn't match request nonce");var o=Math.floor(Date.now()/1e3);if(n.iss!==e)throw new Xh("The issuer ["+n.iss+"] does not match ["+e+"]");if(n.aud!==r)throw new Xh("The audience ["+n.aud+"] does not match ["+r+"]");if(n.iat>n.exp)throw new Xh("The JWT expired before it was issued");if(o-t.options.maxClockSkew>n.exp)throw new Xh("The JWT expired and is no longer valid");if(n.iat>o+t.options.maxClockSkew)throw new Xh("The JWT was issued in the future")},getOAuthUrls:function(t,n,i){var r=ec.removeTrailingSlash((i=i||{}).authorizeUrl)||t.options.authorizeUrl,e=ec.removeTrailingSlash(i.issuer)||t.options.issuer,s=ec.removeTrailingSlash(i.userinfoUrl)||t.options.userinfoUrl,o=ec.removeTrailingSlash(i.tokenUrl)||t.options.tokenUrl;if(e&&!/^https?:/.test(e)&&(e=t.options.url+"/oauth2/"+e),!e&&r&&-1!==n.responseType.indexOf("id_token"))throw new Xh("Cannot request idToken with an authorizeUrl without an issuer");if(!e&&-1!==n.responseType.indexOf("token")){if(r&&!s)throw new Xh("Cannot request accessToken with an authorizeUrl without an issuer or userinfoUrl");if(s&&!r)throw new Xh("Cannot request token with an userinfoUrl without an issuer or authorizeUrl")}return new RegExp("^https?://.*?/oauth2/.+").test(e=e||t.options.url)?(r=r||e+"/v1/authorize",s=s||e+"/v1/userinfo",o=o||e+"/v1/token"):(r=r||e+"/oauth2/v1/authorize",s=s||e+"/oauth2/v1/userinfo",o=o||e+"/oauth2/v1/token"),{issuer:e,authorizeUrl:r,userinfoUrl:s,tokenUrl:o}},loadFrame:function(t){var n=document.createElement("iframe");return n.style.display="none",n.src=t,document.body.appendChild(n)},loadPopup:function(t,n){var i=n.popupTitle||"External Identity Provider User Authentication",r="toolbar=no, scrollbars=yes, resizable=yes, top=100, left=500, width=600, height=600";if(ec.isIE11OrLess()){var e=window.open("/",i,r);return e.location.href=t,e}return window.open(t,i,r)},hashToObject:function(t){for(var n,i=/\+/g,r=/([^&=]+)=?([^&]*)/g,e=t.substring(1),s={};n=r.exec(e);){var o=n[1],u=n[2];s[o]="id_token"===o||"access_token"===o||"code"===o?u:decodeURIComponent(u.replace(i," "))}return s},isToken:function(t){return!(!t||!t.accessToken&&!t.idToken||!Array.isArray(t.scopes))},addListener:function(t,n,i){t.addEventListener?t.addEventListener(n,i):t.attachEvent("on"+n,i)},removeListener:function(t,n,i){t.removeEventListener?t.removeEventListener(n,i):t.detachEvent("on"+n,i)}},Ec={sessionExists:function(t){return t.session.get().then((function(t){return"ACTIVE"===t.status})).fail((function(){return!1}))},getSession:function(t){return hc.get(t,"/api/v1/sessions/me").then((function(n){var i=ec.omit(n,"_links");return i.refresh=function(){return hc.post(t,ec.getLink(n,"refresh").href)},i.user=function(){return hc.get(t,ec.getLink(n,"user").href)},i})).fail((function(){return{status:"INACTIVE"}}))},closeSession:function(t){return hc.httpRequest(t,{url:t.options.url+"/api/v1/sessions/me",method:"DELETE"})},refreshSession:function(t){return hc.post(t,"/api/v1/sessions/me/lifecycle/refresh")},setCookieAndRedirect:function(t,n,i){i=i||window.location.href,window.location=t.options.url+"/login/sessionCookieRedirect"+ec.toQueryParams({checkAccountSetupComplete:!0,token:n,redirectUrl:i})}},Sc={verifyToken:function(t,n){n=ec.clone(n);var i={name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};return delete n.use,crypto.subtle.importKey("jwk",n,i,!0,["verify"]).then((function(n){var r=t.split("."),e=ec.stringToBuffer(r[0]+"."+r[1]),s=ec.base64UrlDecode(r[2]),o=ec.stringToBuffer(s);return crypto.subtle.verify(i,n,o,e)}))}};function Ac(t,n){this.name="OAuthError",this.message=n,this.errorCode=t,this.errorSummary=n}Ac.prototype=new Error;var kc=Ac;function Cc(t){return("0"+t.toString(16)).substr(-2)}var Tc={DEFAULT_CODE_CHALLENGE_METHOD:"S256",generateVerifier:function(t){var n,i,r=t||"";return r.length<43&&(r+=(n=43-r.length,i=new Uint8Array(Math.ceil(n/2)),crypto.getRandomValues(i),Array.from(i,Cc).join("").slice(0,n))),encodeURIComponent(r).slice(0,128)},clearMeta:function(t){t.options.storageUtil.getPKCEStorage().clearStorage()},saveMeta:function(t,n){t.options.storageUtil.getPKCEStorage().setStorage(n)},loadMeta:function(t){return t.options.storageUtil.getPKCEStorage().getStorage()},computeChallenge:function(t){var n=(new TextEncoder).encode(t);return crypto.subtle.digest("SHA-256",n).then((function(t){var n=String.fromCharCode.apply(null,new Uint8Array(t));return ec.stringToBase64Url(n)}))},getToken:function(t,n,i){!function(t){if(!t.clientId)throw new Xh("A clientId must be specified in the OktaAuth constructor to get a token");if(!t.redirectUri)throw new Xh("The redirectUri passed to /authorize must also be passed to /token");if(!t.authorizationCode)throw new Xh("An authorization code (returned from /authorize) must be passed to /token");if(!t.codeVerifier)throw new Xh('The "codeVerifier" (generated and saved by your app) must be passed to /token')}(n);var r,e,s=(e=ec.removeNils({client_id:(r=n).clientId,redirect_uri:r.redirectUri,grant_type:"authorization_code",code:r.authorizationCode,code_verifier:r.codeVerifier}),ec.toQueryParams(e).slice(1));return hc.httpRequest(t,{url:i.tokenUrl,method:"POST",args:s,withCredentials:!1,headers:{"Content-Type":"application/x-www-form-urlencoded"}})}},Ic=rc.storage;function xc(t){var n,i=t.split(".");try{n={header:JSON.parse(ec.base64UrlToString(i[0])),payload:JSON.parse(ec.base64UrlToString(i[1])),signature:i[2]}}catch(t){throw new Xh("Malformed token")}return n}function Oc(t,n,i){return(new sc).then((function(){if(!n||!n.idToken)throw new Xh("Only idTokens may be verified");var r=xc(n.idToken),e={clientId:t.options.clientId,issuer:t.options.issuer||t.options.url,ignoreSignature:t.options.ignoreSignature};return ec.extend(e,i),bc.validateClaims(t,r.payload,e),1!=e.ignoreSignature&&t.features.isTokenVerifySupported()?bc.getKey(t,n.issuer,r.header.kid).then((function(t){return Sc.verifyToken(n.idToken,t)})).then((function(t){if(!t)throw new Xh("The token signature is not valid");return n})):n}))}function Rc(t,n,i){var r=sc.defer();function e(n){!n.data||n.origin!==t.options.url||n.data&&ec.isString(i)&&n.data.state!==i||r.resolve(n.data)}return bc.addListener(window,"message",e),r.promise.timeout(n||12e4,new Xh("OAuth flow timed out")).fin((function(){bc.removeListener(window,"message",e)}))}function Dc(t,n){if(t.error||t.error_description)throw new kc(t.error,t.error_description);if(t.state!==n.state)throw new Xh("OAuth flow response state doesn't match request state")}function Nc(t,n,i,r){r=r||{};var e=n.responseType,s=ec.clone(n.scopes),o=n.clientId||t.options.clientId;return(new sc).then((function(){return Dc(i,n),i.code?(e=["token","id_token"],function(t,n,i,r){var e=Tc.loadMeta(t),s={clientId:n.clientId,authorizationCode:i,codeVerifier:e.codeVerifier,redirectUri:e.redirectUri};return Tc.getToken(t,s,r).then((function(t){return Dc(t,s),t})).fin((function(){Tc.clearMeta(t)}))}(t,n,i.code,r)):i})).then((function(i){var e={};if(i.access_token&&(e.token={accessToken:i.access_token,expiresAt:Number(i.expires_in)+Math.floor(Date.now()/1e3),tokenType:i.token_type,scopes:s,authorizeUrl:r.authorizeUrl,userinfoUrl:r.userinfoUrl}),i.id_token){var u=t.token.decode(i.id_token),a={idToken:i.id_token,claims:u.payload,expiresAt:u.payload.exp,scopes:s,authorizeUrl:r.authorizeUrl,issuer:r.issuer,clientId:o},h={clientId:o,issuer:r.issuer,nonce:n.nonce};return void 0!==n.ignoreSignature&&(h.ignoreSignature=n.ignoreSignature),Oc(t,a,h).then((function(){return e.id_token=a,e}))}return e})).then((function(t){return Array.isArray(e)?(["token","id_token"].filter((function(t){return-1!==e.indexOf(t)})).forEach((function(n){if(!t[n])throw new Xh("Unable to parse OAuth flow response: "+n+" was not returned.")})),e.map((function(n){return t[n]}))):t[e]}))}function jc(t){var n=function(t){if(!t.clientId)throw new Xh("A clientId must be specified in the OktaAuth constructor to get a token");if(ec.isString(t.responseType)&&-1!==t.responseType.indexOf(" "))throw new Xh("Multiple OAuth responseTypes must be defined as an array");var n=ec.removeNils({client_id:t.clientId,code_challenge:t.codeChallenge,code_challenge_method:t.codeChallengeMethod,display:t.display,idp:t.idp,idp_scope:t.idpScope,login_hint:t.loginHint,max_age:t.maxAge,nonce:t.nonce,prompt:t.prompt,redirect_uri:t.redirectUri,response_mode:t.responseMode,response_type:t.responseType,sessionToken:t.sessionToken,state:t.state});if(["idp_scope","response_type"].forEach((function(t){Array.isArray(n[t])&&(n[t]=n[t].join(" "))})),-1!==t.responseType.indexOf("id_token")&&-1===t.scopes.indexOf("openid"))throw new Xh("openid scope must be specified in the scopes argument when requesting an id_token");return n.scope=t.scopes.join(" "),n}(t);return ec.toQueryParams(n)}function _c(t,n,i){return i=i||{},Pc(t,n=n||{}).then((function(r){var e,s;n.sessionToken?ec.extend(r,{prompt:"none",responseMode:"okta_post_message",display:null}):n.idp&&ec.extend(r,{display:"popup"});try{s=bc.getOAuthUrls(t,r,i),e=(n.codeVerifier?s.tokenUrl:s.authorizeUrl)+jc(r)}catch(t){return sc.reject(t)}function o(t){return/^(https?\:\/\/)?([^:\/?#]*(?:\:[0-9]+)?)/.exec(t)[0]}switch(r.sessionToken||null===r.display?"IFRAME":"popup"===r.display?"POPUP":"IMPLICIT"){case"IFRAME":var u=Rc(t,i.timeout,r.state),a=bc.loadFrame(e);return u.then((function(n){return Nc(t,r,n,s)})).fin((function(){document.body.contains(a)&&a.parentElement.removeChild(a)}));case"POPUP":var h;if("okta_post_message"===r.responseMode){if(!t.features.isPopupPostMessageSupported())return sc.reject(new Xh("This browser doesn't have full postMessage support"));h=Rc(t,i.timeout,r.state)}var c=bc.loadPopup(e,{popupTitle:i.popupTitle});if("fragment"===r.responseMode){var f=o(t.idToken.authorize._getLocationHref()),l=o(r.redirectUri);if(f!==l)return sc.reject(new Xh("Using fragment, the redirectUri origin ("+l+") must match the origin of this page ("+f+")"));h=function(t,n,i){var r=sc.defer();return function t(){try{n&&n.location&&n.location.hash?r.resolve(bc.hashToObject(n.location.hash)):n&&!n.closed&&setTimeout(t,500)}catch(n){setTimeout(t,500)}}(),r.promise.timeout(i||12e4,new Xh("OAuth flow timed out"))}(0,c,i.timeout)}var v=sc.defer(),d=setInterval((function(){c.closed&&v.reject(new Xh("Unable to parse OAuth flow response"))}),500);return h.then((function(t){v.resolve(t)})).fail((function(t){v.reject(t)})),v.promise.then((function(n){return Nc(t,r,n,s)})).fin((function(){c.closed||(clearInterval(d),c.close())}));default:return sc.reject(new Xh("The full page redirect flow is not supported"))}}))}function Pc(t,n){"authorization_code"===(n=ec.clone(n)||{}).grantType&&(n.pkce=!0);var i=function(t){return{pkce:t.options.pkce||!1,clientId:t.options.clientId,redirectUri:t.options.redirectUri||window.location.href,responseType:"id_token",responseMode:"okta_post_message",state:bc.generateState(),nonce:bc.generateNonce(),scopes:["openid","email"],ignoreSignature:t.options.ignoreSignature}}(t);return ec.extend(i,n),!0!==i.pkce?sc.resolve(i):t.features.isPKCESupported()?(i.codeChallengeMethod||(i.codeChallengeMethod=Tc.DEFAULT_CODE_CHALLENGE_METHOD),i.responseType="code",bc.getWellKnown(t,null).then((function(t){if(-1===(t.code_challenge_methods_supported||[]).indexOf(i.codeChallengeMethod))throw new Xh("Invalid code_challenge_method")})).then((function(){var n=Tc.generateVerifier(i.codeVerifier);return Tc.saveMeta(t,{codeVerifier:n,redirectUri:i.redirectUri}),Tc.computeChallenge(n)})).then((function(t){var n=ec.clone(i)||{};return ec.extend(n,i,{codeChallenge:t}),n}))):sc.reject(new Xh("This browser doesn't support PKCE"))}var Mc={getToken:_c,getWithoutPrompt:function(t,n,i){var r=ec.clone(n)||{};return ec.extend(r,{prompt:"none",responseMode:"okta_post_message",display:null}),_c(t,r,i)},getWithPopup:function(t,n,i){var r=ec.clone(n)||{};return ec.extend(r,{display:"popup",responseMode:"okta_post_message"}),_c(t,r,i)},getWithRedirect:function(t,n,i){return n=ec.clone(n)||{},Pc(t,n).then((function(r){n.responseMode||(r.responseMode=r.responseType.includes("code")&&!r.pkce?"query":"fragment");var e=bc.getOAuthUrls(t,r,i),s=e.authorizeUrl+jc(r);Ic.set(nc.REDIRECT_OAUTH_PARAMS_COOKIE_NAME,JSON.stringify({responseType:r.responseType,state:r.state,nonce:r.nonce,scopes:r.scopes,clientId:r.clientId,urls:e,ignoreSignature:r.ignoreSignature})),Ic.set(nc.REDIRECT_NONCE_COOKIE_NAME,r.nonce),Ic.set(nc.REDIRECT_STATE_COOKIE_NAME,r.state),t.token.getWithRedirect._setLocation(s)}))},parseFromUrl:function(t,n){var i=t.token.parseFromUrl._getLocation().hash;if(n&&(i=n.substring(n.indexOf("#"))),!i)return sc.reject(new Xh("Unable to parse a token from the url"));var r=Ic.get(nc.REDIRECT_OAUTH_PARAMS_COOKIE_NAME);if(!r)return sc.reject(new Xh("Unable to retrieve OAuth redirect params cookie"));try{var e=JSON.parse(r),s=e.urls;delete e.urls,Ic.delete(nc.REDIRECT_OAUTH_PARAMS_COOKIE_NAME)}catch(t){return sc.reject(new Xh("Unable to parse the "+nc.REDIRECT_OAUTH_PARAMS_COOKIE_NAME+" cookie: "+t.message))}return sc.resolve(bc.hashToObject(i)).then((function(i){return n||function(t){var n=t.token.parseFromUrl._getHistory(),i=t.token.parseFromUrl._getDocument(),r=t.token.parseFromUrl._getLocation();n&&n.replaceState?n.replaceState(null,i.title,r.pathname+r.search):r.hash=""}(t),Nc(t,e,i,s)}))},decodeToken:xc,renewToken:function(t,n){return bc.isToken(n)?t.token.getWithoutPrompt({responseType:t.options.pkce?"code":n.accessToken?"token":"id_token",scopes:n.scopes},{authorizeUrl:n.authorizeUrl,userinfoUrl:n.userinfoUrl,issuer:n.issuer}):sc.reject(new Xh("Renew must be passed a token with an array of scopes and an accessToken or idToken"))},getUserInfo:function(t,n){return n&&(bc.isToken(n)||n.accessToken||n.userinfoUrl)?hc.httpRequest(t,{url:n.userinfoUrl,method:"GET",accessToken:n.accessToken}).fail((function(t){var n;if(t.xhr&&(401===t.xhr.status||403===t.xhr.status)&&(t.xhr.headers&&ec.isFunction(t.xhr.headers.get)&&t.xhr.headers.get("WWW-Authenticate")?n=t.xhr.headers.get("WWW-Authenticate"):ec.isFunction(t.xhr.getResponseHeader)&&(n=t.xhr.getResponseHeader("WWW-Authenticate")),n)){var i=n.match(/error="(.*?)"/)||[],r=n.match(/error_description="(.*?)"/)||[],e=i[1],s=r[1];e&&s&&(t=new kc(e,s))}throw t})):sc.reject(new Xh("getUserInfo requires an access token object"))},verifyToken:Oc,handleOAuthResponse:Nc,prepareOauthParams:Pc};function Bc(){}Bc.prototype={on:function(t,n,i){var r=this.e||(this.e={});return(r[t]||(r[t]=[])).push({fn:n,ctx:i}),this},once:function(t,n,i){var r=this;function e(){r.off(t,e),n.apply(i,arguments)}return e._=n,this.on(t,e,i)},emit:function(t){for(var n=[].slice.call(arguments,1),i=((this.e||(this.e={}))[t]||[]).slice(),r=0,e=i.length;r<e;r++)i[r].fn.apply(i[r].ctx,n);return this},off:function(t,n){var i=this.e||(this.e={}),r=i[t],e=[];if(r&&n)for(var s=0,o=r.length;s<o;s++)r[s].fn!==n&&r[s].fn._!==n&&e.push(r[s]);return e.length?i[t]=e:delete i[t],this}};var Lc=Bc;function Uc(t){this.localOffset=parseInt(t||0)}ec.extend(Uc.prototype,{now:function(){return(Date.now()+this.localOffset)/1e3}}),Uc.create=function(){return new Uc(0)};var Hc=Uc,zc={autoRenew:!0,storage:"localStorage",expireEarlySeconds:30};function qc(t,n){return n.expiresAt-t.options.expireEarlySeconds}function $c(t,n){t.emitter.emit("error",n)}function Vc(t,n){clearTimeout(t.expireTimeouts[n]),delete t.expireTimeouts[n],delete t.renewPromise[n]}function Kc(t,n,i,r){var e=qc(n,r),s=1e3*Math.max(e-n.clock.now(),0);Vc(n,i);var o=setTimeout((function(){!function(t,n,i){t.emitter.emit("expired",n,i)}(n,i,r)}),s);n.expireTimeouts[i]=o}function Jc(t,n,i,r,e){var s=i.getStorage();if(!ec.isObject(e)||!e.scopes||!e.expiresAt&&0!==e.expiresAt||!e.idToken&&!e.accessToken)throw new Xh("Token must be an Object with scopes, expiresAt, and an idToken or accessToken properties");s[r]=e,i.setStorage(s),Kc(0,n,r,e)}function Yc(t,n){return t.getStorage()[n]}function Gc(t,n,i,r){return sc.Promise((function(e){var s=Yc(i,r);return s&&function(t,n){return qc(t,n)<=t.clock.now()}(n,s)?e(n.options.autoRenew?Zc(t,n,i,r):Wc(n,i,r)):e(s)}))}function Wc(t,n,i){Vc(t,i);var r=n.getStorage();delete r[i],n.setStorage(r)}function Zc(t,n,i,r){try{var e=Yc(i,r);if(!e)throw new Xh("The tokenManager has no token for the key: "+r)}catch(t){return sc.reject(t)}return Vc(n,r),n.renewPromise[r]||(n.renewPromise[r]=t.token.renew(e).then((function(t){var s=t;t instanceof Array&&(s=t.find((function(t){return t.idToken&&e.idToken||t.accessToken&&e.accessToken})));var o=Yc(i,r);if(o)return Jc(0,n,i,r,s),n.emitter.emit("renewed",r,s,o),delete n.renewPromise[r],s})).fail((function(t){throw"OAuthError"===t.name&&(Wc(n,i,r),$c(n,t)),t}))),n.renewPromise[r]}function Qc(t,n){!function(t){var n=t.expireTimeouts;for(var i in n)n.hasOwnProperty(i)&&Vc(t,i)}(t),n.clearStorage()}var Xc=function(t,n){var i;switch("localStorage"!==(n=ec.extend({},zc,ec.removeNils(n))).storage||rc.browserHasLocalStorage()||(ec.warn("This browser doesn't support localStorage. Switching to sessionStorage."),n.storage="sessionStorage"),"sessionStorage"!==n.storage||rc.browserHasSessionStorage()||(ec.warn("This browser doesn't support sessionStorage. Switching to cookie-based storage."),n.storage="cookie"),n.storage){case"localStorage":i=tc(localStorage,nc.TOKEN_STORAGE_NAME);break;case"sessionStorage":i=tc(sessionStorage,nc.TOKEN_STORAGE_NAME);break;case"cookie":i=tc(rc.getCookieStorage(n),nc.TOKEN_STORAGE_NAME);break;default:throw new Xh("Unrecognized storage option")}var r={clock:Hc.create(t,n),options:n,emitter:new Lc,expireTimeouts:{},renewPromise:{}};this.add=ec.bind(Jc,this,t,r,i),this.get=ec.bind(Gc,this,t,r,i),this.remove=ec.bind(Wc,this,r,i),this.clear=ec.bind(Qc,this,r,i),this.renew=ec.bind(Zc,this,t,r,i),this.on=ec.bind(r.emitter.on,r.emitter),this.off=ec.bind(r.emitter.off,r.emitter),function(t,n,i){try{var r=i.getStorage()}catch(t){return void $c(n,t)}for(var e in r)r.hasOwnProperty(e)&&Kc(0,n,e,r[e])}(0,r,i)},tf=rc.storage;function nf(t){var n=this,i=yc.getValidUrl(t),r=t.pkce||"authorization_code"===t.grantType;if(this.options={url:ec.removeTrailingSlash(i),clientId:t.clientId,issuer:ec.removeTrailingSlash(t.issuer),authorizeUrl:ec.removeTrailingSlash(t.authorizeUrl),userinfoUrl:ec.removeTrailingSlash(t.userinfoUrl),tokenUrl:ec.removeTrailingSlash(t.tokenUrl),pkce:r,redirectUri:t.redirectUri,httpRequestClient:t.httpRequestClient,storageUtil:t.storageUtil,transformErrorXHR:t.transformErrorXHR,headers:t.headers},this.options.pkce&&!n.features.isPKCESupported())throw new Xh("This browser doesn't support PKCE");this.userAgent="okta-auth-js-"+nc.SDK_VERSION,this.options.maxClockSkew=t.maxClockSkew||0===t.maxClockSkew?t.maxClockSkew:nc.DEFAULT_MAX_CLOCK_SKEW,this.options.ignoreSignature=!!t.ignoreSignature,n.session={close:ec.bind(Ec.closeSession,null,n),exists:ec.bind(Ec.sessionExists,null,n),get:ec.bind(Ec.getSession,null,n),refresh:ec.bind(Ec.refreshSession,null,n),setCookieAndRedirect:ec.bind(Ec.setCookieAndRedirect,null,n)},n.tx={status:ec.bind(mc.transactionStatus,null,n),resume:ec.bind(mc.resumeTransaction,null,n),exists:ec.bind(mc.transactionExists,null,n),introspect:ec.bind(mc.introspect,null,n)},n.tx.exists._get=function(t){return tf.get(t)},n.idToken={authorize:{_getLocationHref:function(){return window.location.href}}},n.token={getWithoutPrompt:ec.bind(Mc.getWithoutPrompt,null,n),getWithPopup:ec.bind(Mc.getWithPopup,null,n),getWithRedirect:ec.bind(Mc.getWithRedirect,null,n),parseFromUrl:ec.bind(Mc.parseFromUrl,null,n),decode:Mc.decodeToken,renew:ec.bind(Mc.renewToken,null,n),getUserInfo:ec.bind(Mc.getUserInfo,null,n),verify:ec.bind(Mc.verifyToken,null,n)},n.token.getWithRedirect._setLocation=function(t){window.location=t},n.token.parseFromUrl._getHistory=function(){return window.history},n.token.parseFromUrl._getLocation=function(){return window.location},n.token.parseFromUrl._getDocument=function(){return window.document},n.fingerprint._getUserAgent=function(){return navigator.userAgent};var e=/windows phone|iemobile|wpdesktop/i;n.features.isFingerprintSupported=function(){var t=n.fingerprint._getUserAgent();return t&&!e.test(t)},n.tokenManager=new Xc(n,t.tokenManager)}var rf=nf.prototype;rf.features={},rf.features.isPopupPostMessageSupported=function(){var t=document.documentMode&&document.documentMode<10;return!(!window.postMessage||t)},rf.features.isTokenVerifySupported=function(){return"undefined"!=typeof crypto&&crypto.subtle&&"undefined"!=typeof Uint8Array},rf.features.isPKCESupported=function(){return rf.features.isTokenVerifySupported()},rf.signIn=function(t){var n=this;function i(i){return delete t.sendFingerprint,mc.postToTransaction(n,"/api/v1/authn",t,i)}return(t=ec.clone(t||{})).sendFingerprint?n.fingerprint().then((function(t){return i({headers:{"X-Device-Fingerprint":t}})})):i()},rf.signOut=function(){return this.session.close()},yc.addSharedPrototypes(rf),rf.webfinger=function(t){var n="/.well-known/webfinger"+ec.toQueryParams(t);return hc.get(this,n,{headers:{Accept:"application/jrd+json"}})},rf.fingerprint=function(t){t=t||{};var n=this;if(!n.features.isFingerprintSupported())return sc.reject(new Xh("Fingerprinting is not supported on this device"));var i=sc.defer(),r=document.createElement("iframe");function e(t){if(t&&t.data&&t.origin===n.options.url){try{var r=JSON.parse(t.data)}catch(t){return i.reject(new Xh("Unable to parse iframe response"))}if(r)return"FingerprintAvailable"===r.type?i.resolve(r.fingerprint):void("FingerprintServiceReady"===r.type&&t.source.postMessage(JSON.stringify({type:"GetFingerprint"}),t.origin))}}r.style.display="none",bc.addListener(window,"message",e),r.src=n.options.url+"/auth/services/devicefingerprint",document.body.appendChild(r);var s=setTimeout((function(){i.reject(new Xh("Fingerprinting timed out"))}),t.timeout||15e3);return i.promise.fin((function(){clearTimeout(s),bc.removeListener(window,"message",e),document.body.contains(r)&&r.parentElement.removeChild(r)}))};var ef=yc.buildOktaAuth(nf)(rc,(function(t,n,i){var r=i.data,e=i.headers||{};return"application/json"===(e["Content-Type"]||e["content-type"]||"")&&r&&"string"!=typeof r&&(r=JSON.stringify(r)),Wh(n,{method:t,headers:i.headers,body:r,credentials:!1===i.withCredentials?"omit":"include"}).then((function(t){var n=!t.ok,i=t.status,r=function(t){var r={responseText:t,status:i};if(n)throw r;return r};return t.headers.get("Content-Type")&&t.headers.get("Content-Type").toLowerCase().indexOf("application/json")>=0?t.json().then(r):t.text().then(r)}))}));class sf{constructor(t){this.crdsAuthConfig=t,this.providerServiceKVP={},this.authenticationStatus$=new cu(null),this.logService=new Gh(t.logging);let n=new ef(this.crdsAuthConfig.oktaConfig),i=new Xu(n,this.logService);i.subscribeToTokenExpiration(()=>{this.authenticate().pipe(Vu()).subscribe()}),i.subscribeToTokenRenewed(()=>{this.logService.Info("Token Renewed")}),i.subscribeToTokenError(()=>{this.authenticationStatus$.next(null)});let r=this.getVisibilityChange();document.addEventListener(r,()=>{"visible"===document.visibilityState&&this.authenticate().pipe(Vu()).subscribe()}),this.providerServiceKVP[Nu.Okta]=i,this.providerServiceKVP[Nu.Mp]=new Yh(t.mpConfig.accessTokenCookie,t.mpConfig.refreshTokenCookie,t.mpConfig.issuer)}getVisibilityChange(){let t;return void 0!==document.hidden?t="visibilitychange":void 0!==document.mozHidden?t="mozvisibilitychange":void 0!==document.msHidden?t="msvisibilitychange":void 0!==document.webkitHidden&&(t="webkitvisibilitychange"),t}authenticated(){return this.authenticationStatus$.value?this.authenticationStatus$.asObservable():this.authenticate().pipe(Vu(),Gu(t=>{this.authenticationStatus$.next(t)}),Ku(()=>this.authenticationStatus$.asObservable()))}authenticate(){return this.AuthenticateByProvider(0).pipe(Vu(),Gu(t=>{this.authenticationStatus$.next(t)}),gu(t=>(t&&zh.setNetlifyJWT(),t)))}AuthenticateByProvider(t){return t>=Object.keys(this.providerServiceKVP).length?vu(null):this.providerServiceKVP[this.crdsAuthConfig.providerPreference[t]].authenticated().pipe(Vu(),Ku(n=>null!=n?vu(n):this.AuthenticateByProvider(++t)))}signOut(){return this.SignOutByProvider(0)}SignOutByProvider(t){return t>=Object.keys(this.providerServiceKVP).length?vu(!1):this.providerServiceKVP[this.crdsAuthConfig.providerPreference[t]].signOut().pipe(Vu(),Ku(n=>n?(zh.deleteCookie("nf_jwt"),this.authenticationStatus$.next(null),vu(n)):this.SignOutByProvider(++t)))}}class of{constructor(t={}){this.authenticated=!1,this.subdomainMap={prod:"www"},this.config=t;const n={clientId:t.okta_client_id,issuer:t.okta_issuer,tokenManager:{storage:"cookie"}},i={accessTokenCookie:t.mp_access_token_cookie,refreshTokenCookie:t.mp_refresh_token_cookie,issuer:of.getMPIssuerEndpoint(this.config.env)};this.authService=new sf({oktaConfig:n,mpConfig:i,logging:t.logging||!1,providerPreference:[Nu.Okta,Nu.Mp]})}listen(t){this.authService.authenticated().subscribe(n=>{if(!n)return this.authenticated=!1;this.authenticated=!0,this.token=n,this.isMp=n.provider==Nu.Mp,this.isOkta=n.provider==Nu.Okta,this.updateCurrentUser(),t(this)})}signOut(t){this.authService.signOut().subscribe(n=>{n?(this.authenticated=!1,this.updateCurrentUser(),t(this)):console.log("log out failed")})}updateCurrentUser(){return this.currentUser=this.authenticated?{id:this.getUserId(),name:this.getUser(),avatarUrl:this.getUserImageUrl()}:null}getUserId(){return this.authenticated?this.isOkta?this.token.id_token.claims.mpContactId:this.isMp?s.getCookie("userId"):void 0:null}getUser(){return this.authenticated?this.isOkta?this.token.id_token.claims.name:this.isMp?s.getCookie("username"):void 0:null}getUserImageUrl(){if(!this.authenticated)return null;const t=this.getUserId();return t?`https://${s.getSubdomain(this.config.env)}.crossroads.net/proxy/gateway/api/image/profile/${t}`:null}static getMPIssuerEndpoint(t){return`https://gateway${"int"==t||"demo"==t?t:""}.crossroads.net/gateway/api/login`}}const uf=class{constructor(n){t(this,n),this.giveNavIsShowing=!1,this.mainNavIsShowing=!1,this.profileNavIsShowing=!1,this.authenticated=!1,this.auth={}}initAuth(){this.config&&!this.auth.config&&(this.auth=new of(Object.assign(this.config,{env:this.env})),this.auth.listen(this.authChangeCallback.bind(this)))}componentDidLoad(){this.offset=this.element.getBoundingClientRect().top+window.scrollY}authChangeCallback(){this.authenticated=this.auth.authenticated,this.authenticated||this.redirectToRoot()}handleSignOut(){this.auth.signOut(this.authChangeCallback.bind(this))}redirectToRoot(){window.location.replace(this.rootURL())}handleProfileClick(t){return this.auth.authenticated?this.navClickHandler(t,"profile-nav"):t.stopPropagation()}menuClasses(){let t=["menu-container"];return this.mainNavIsShowing&&t.push("nav-is-showing"),t.join(" ")}profileClasses(){let t=["profile-container"];return this.profileNavIsShowing&&this.authenticated&&t.push("nav-is-showing"),t.join(" ")}giveClasses(){let t=["give-container"];return this.giveNavIsShowing&&t.push("nav-is-showing"),t.join(" ")}rootURL(){return`https://${s.getSubdomain(this.env)}.crossroads.net`}render(){this.initAuth();let t='<svg aria-hidden="true" focusable="false" data-prefix="fal" data-icon="times" class="svg-inline--fa fa-times fa-w-10" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path fill="" d="M193.94 256L296.5 153.44l21.15-21.15c3.12-3.12 3.12-8.19 0-11.31l-22.63-22.63c-3.12-3.12-8.19-3.12-11.31 0L160 222.06 36.29 98.34c-3.12-3.12-8.19-3.12-11.31 0L2.34 120.97c-3.12 3.12-3.12 8.19 0 11.31L126.06 256 2.34 379.71c-3.12 3.12-3.12 8.19 0 11.31l22.63 22.63c3.12 3.12 8.19 3.12 11.31 0L160 289.94 262.56 392.5l21.15 21.15c3.12 3.12 8.19 3.12 11.31 0l22.63-22.63c3.12-3.12 3.12-8.19 0-11.31L193.94 256z"></path></svg>';return n(Pe,null,n("header",{ref:t=>this.element=t,class:this.mainNavIsShowing||this.profileNavIsShowing||this.giveNavIsShowing?"nav-is-showing":"",style:{top:`${this.profileNavIsShowing||this.giveNavIsShowing?this.offset:0}px`}},n("div",null,n("div",{class:"global-nav-items"},n("div",{class:"global-actions"},n("a",{href:"","data-automation-id":"sh-menu","data-label":"menu",class:this.menuClasses(),onClick:t=>this.navClickHandler(t,"main-nav")},n("div",{class:"menu",innerHTML:'<svg id="menu-thin" width="256" height="256" viewBox="0 0 256 256"><g><path d="M242.852679,47.6875 L14.1473214,47.6875 C12.4091038,47.6875 11,46.5915304 11,45.2395833 L11,35.4479167 C11,34.0959696 12.4091038,33 14.1473214,33 L242.852679,33 C244.590896,33 246,34.0959696 246,35.4479167 L246,45.2395833 C246,46.5915304 244.590896,47.6875 242.852679,47.6875 Z M242.852679,135.8125 L14.1473214,135.8125 C12.4091038,135.8125 11,134.71653 11,133.364583 L11,123.572917 C11,122.22097 12.4091038,121.125 14.1473214,121.125 L242.852679,121.125 C244.590896,121.125 246,122.22097 246,123.572917 L246,133.364583 C246,134.71653 244.590896,135.8125 242.852679,135.8125 Z M242.852679,223.9375 L14.1473214,223.9375 C12.4091038,223.9375 11,222.84153 11,221.489583 L11,211.697917 C11,210.34597 12.4091038,209.25 14.1473214,209.25 L242.852679,209.25 C244.590896,209.25 246,210.34597 246,211.697917 L246,221.489583 C246,222.84153 244.590896,223.9375 242.852679,223.9375 Z"/></g></svg>'}),n("div",{class:"close",innerHTML:t})),n("a",{href:`${this.rootURL()}/search`,class:"search-container","data-automation-id":"sh-search","data-label":"search"},n("div",{class:"search",innerHTML:'<svg id="search-thin" width="256" height="256" viewBox="0 0 256 256"><g><path d="M244.375275,231.976661 L184.91724,172.518627 C183.857136,171.458523 182.474391,170.905425 180.999463,170.905425 L176.252038,170.905425 C192.061423,153.805478 201.740638,130.990186 201.740638,105.870319 C201.740638,52.911186 158.829452,10 105.870319,10 C52.911186,10 10,52.911186 10,105.870319 C10,158.829452 52.911186,201.740638 105.870319,201.740638 C130.990186,201.740638 153.805478,192.061423 170.905425,176.29813 L170.905425,180.999463 C170.905425,182.474391 171.504614,183.857136 172.518627,184.91724 L231.976661,244.375275 C234.142962,246.541575 237.645916,246.541575 239.812216,244.375275 L244.375275,239.812216 C246.541575,237.645916 246.541575,234.142962 244.375275,231.976661 Z M105.870319,186.991358 C61.0232899,186.991358 24.7492798,150.717348 24.7492798,105.870319 C24.7492798,61.0232899 61.0232899,24.7492798 105.870319,24.7492798 C150.717348,24.7492798 186.991358,61.0232899 186.991358,105.870319 C186.991358,150.717348 150.717348,186.991358 105.870319,186.991358 Z"/></g></svg>'}))),n("a",{href:this.rootURL(),"data-automation-id":"sh-logo",class:"logo",innerHTML:'<svg width="308" height="81" viewBox="0 0 308 81" xmlns="http://www.w3.org/2000/svg"><path id="crossroads-church-logo" d="M211.9 52.2h3.3v10.5h.1c1.1-2.4 3.9-3.4 6.3-3.4 5.2 0 6.8 3 6.8 7.3v13H225V66.2c0-2.4-1.5-4-4-4-4 0-5.9 2.6-5.9 6.2v11.2h-3.3V52.2h.1zm-7.2 14c-.5-2.5-2.2-4-4.9-4-4.7 0-6.2 3.7-6.2 7.8 0 3.6 1.7 7.3 5.8 7.3 3.1 0 5-1.8 5.4-4.8h3.3c-.7 4.8-3.8 7.7-8.7 7.7-6.1 0-9.3-4.2-9.3-10.1 0-5.9 3.1-10.6 9.4-10.6 4.5 0 8.1 2.1 8.6 6.8h-3.4v-.1zm49.5-6.4h3.1V64h.1c1.6-3.2 3.8-4.8 7.3-4.6v3.5c-5.3 0-7.2 3-7.2 8v8.8h-3.3V59.8zm-4.8 19.8h-3.1v-3.1h-.1c-1.4 2.5-3.6 3.6-6.4 3.6-5.2 0-6.8-3-6.8-7.3v-13h3.3v13.4c0 2.4 1.5 4 4 4 4 0 5.9-2.6 5.9-6.2V59.8h3.3v19.8h-.1zm38.2-27.4h3.3v10.5h.1c1.1-2.4 3.9-3.4 6.3-3.4 5.2 0 6.8 3 6.8 7.3v13h-3.3V66.2c0-2.4-1.5-4-4-4-4 0-5.9 2.6-5.9 6.2v11.2h-3.3V52.2zm-7.2 14c-.5-2.5-2.2-4-4.9-4-4.7 0-6.2 3.7-6.2 7.8 0 3.6 1.7 7.3 5.8 7.3 3.1 0 5-1.8 5.4-4.8h3.3c-.7 4.8-3.8 7.7-8.7 7.7-6.1 0-9.3-4.2-9.3-10.1 0-5.9 3.1-10.6 9.4-10.6 4.5 0 8.1 2.1 8.6 6.8h-3.4v-.1zm7.6-45.7c0-1.6 1.4-2.2 3.6-2.2 1 0 1.9.2 2.5.8.7.5 1.1 1.3 1.2 2.3h11.4c-.7-8.4-8.8-10-15.7-10-6 0-13.6 2-14.8 8.6V.5h-12.6v15c-2.7-3.1-5.4-4.1-9.4-4.1-6.5 0-11.7 5-13 13 0-7.5-1-13-15.9-13-12.5 0-17.3 3.9-17.3 10.6h12.1c.3-2.7 2.7-3.1 4.4-3.1 1.3 0 4.1.3 4.1 2.6 0 4.7-14.5 1.5-20.2 7.4v-1.2c0-9.8-6.9-16.4-18-16.4-6.5 0-11.7 2.3-14.8 6.5v-6.3c-.5-.1-1.1-.2-1.6-.2-4.9 0-8 2.4-9.7 7.3l-.1-6.4h-11.4v17.6c-3.9-7.3-19.1-5.6-19.1-9.4 0-1.6 1.4-2.2 3.6-2.2 1 0 1.9.2 2.5.8.7.5 1.1 1.3 1.2 2.3h11.4c-.7-8.4-8.8-10-15.7-10-6.6 0-14.9 2.4-14.9 10.4 0 12.3 19.4 8.2 19.4 13.3 0 2.2-2.1 2.8-4 2.8-1.2 0-2.3-.3-3.1-1-.8-.7-1.3-1.6-1.3-2.9H123v-.3c0-11.8-20-8.9-20-13.3 0-1.6 1.4-2.2 3.6-2.2 1 0 1.9.2 2.5.8.7.5 1.1 1.3 1.2 2.3h11.4c-.7-8.4-8.8-10-15.7-10-6.6 0-15 2.4-15 10.4v.3c-2.2-6.6-8.3-10.7-17.1-10.7-6.5 0-11.7 2.3-14.8 6.5v-6.3c-.5-.1-1.1-.2-1.6-.2-4.9 0-8 2.4-9.7 7.3l-.1-6.4H36.3v19.4H23.8c-.4 2.5-1.6 4.7-4.9 4.7-3.7 0-5.5-3.1-5.5-7.9 0-3.7.8-8.6 5.5-8.6 1.4 0 2.5.4 3.2 1.3.8.8 1.3 1.9 1.3 3.3h12.7c-.9-9.4-8.9-13-17.3-13-10.4 0-18 6.2-18 17 0 10.7 7.8 16.4 18 16.4 8.4 0 15.8-3.3 17.4-12v11.1h12.5V33c0-6.8 2.6-9.2 7.7-9.2-.3 1.5-.5 3-.5 4.7 0 10.8 7.8 16.3 18 16.3 7.4 0 13.6-2.9 16.4-9 1.5 7.1 8.9 9 15.6 9 8.7 0 14-2.5 16-6.6 2.5 5.1 8.9 6.6 14.8 6.6 8.9 0 14.1-2.6 16.1-6.8v5.9h12.6V33c0-6.8 2.6-9.2 7.7-9.2-.3 1.5-.5 3-.5 4.7 0 10.8 7.8 16.3 18 16.3 6.9 0 12.8-2.5 15.8-7.8.9 5.4 5.7 7.8 11.1 7.8 4.7 0 8.3-1 11.9-4.3l.6 3.4h13v-.6c-1.6-1.3-1.7-2.2-1.7-4v-6.5c1.3 7 6 12.1 14 12.1 4 0 6.7-1.3 9.7-5.1V44h11.3v-5.6c2.6 5 8.9 6.5 14.7 6.5 11.6 0 17-4.5 17-11 0-11.9-20-9-20-13.4zM74 36.4c-3.2 0-5.4-2.6-5.4-8.6 0-3.5 1.3-8 5.6-8 3.3-.2 5.3 3.3 5.3 8-.1 6-2.1 8.6-5.5 8.6zm32.5 1.6c-1.2 0-2.3-.3-3.1-1-.8-.7-1.3-1.6-1.3-2.9h-11c.6-1.8.9-3.9.9-6.3 0-.8-.1-1.5-.1-2.2 3.6 7.7 18.6 5.1 18.6 9.6-.1 2.1-2.1 2.8-4 2.8zm84.1-1.6c-3.2 0-5.4-2.6-5.4-8.6 0-3.5 1.3-8 5.5-8 3.3-.2 5.3 3.3 5.3 8 0 6-2 8.6-5.4 8.6zm32.6 1.3c-2.5 0-4-1.1-4-2.7 0-4.1 5.4-3.1 9.5-5.1.3 4.4-1.1 7.8-5.5 7.8zm35.2-1.9c-4.1 0-4.9-3.9-4.9-7.2 0-3.5 1.1-7.5 5.3-7.5 4.2 0 5.4 3.8 5.4 7.3-.1 3.7-1.4 7.4-5.8 7.4zm33.1 2.2c-1.2 0-2.3-.3-3.1-1-.9-.7-1.3-1.6-1.3-2.9h-10.8V23.8c1.9 9.9 19.2 6.6 19.2 11.4 0 2.1-2.1 2.8-4 2.8z" fill-rule="nonzero" fill=""/></svg>'}),n("div",{class:"user-actions"},n("a",{href:"","data-automation-id":"sh-give","data-label":"give",class:this.giveClasses(),onClick:t=>this.navClickHandler(t,"give-nav")},n("div",{class:"donate",innerHTML:'<svg viewBox="0 0 244.36 244.36"><defs><mask id="a" x="-6" y="-6" width="256" height="256" maskUnits="userSpaceOnUse"><g transform="translate(-6 -6)"><rect width="256" height="256" style="fill:#fff"/></g></mask></defs><g style="mask:url(#a)"><path d="M113.39,109.09A27.82,27.82,0,0,1,100,100.74a25.23,25.23,0,0,1-6.2-14.08,24.08,24.08,0,0,1,6.44-19.09,24.39,24.39,0,0,1,18.85-8.12h1.44V48a4.09,4.09,0,0,1,3.81-3.82H132A4.11,4.11,0,0,1,135.82,48V59.45h.48a33.71,33.71,0,0,1,20.52,6.69,5.46,5.46,0,0,1,1.67,3.1,3.56,3.56,0,0,1-1.19,3.1l-5.25,5.25a4.29,4.29,0,0,1-2.39,1.19,2.6,2.6,0,0,1-2.39-.71,17.88,17.88,0,0,0-10.5-3.34H119.11A9.72,9.72,0,0,0,112,77.59,8.94,8.94,0,0,0,109.09,84,10.29,10.29,0,0,0,111,90.24a9.5,9.5,0,0,0,5.25,3.58l28.16,8.11a24.66,24.66,0,0,1,15.27,12.41,23.29,23.29,0,0,1,1.43,20,22.1,22.1,0,0,1-9.3,12.17,27.73,27.73,0,0,1-15.51,4.53h-.48v11.46a4.11,4.11,0,0,1-3.82,3.81h-7.64a4.09,4.09,0,0,1-3.81-3.81V151.09h-.48a32.24,32.24,0,0,1-20.52-7.16,3.64,3.64,0,0,1-1.68-2.62,3.58,3.58,0,0,1,1.2-3.11l5.25-5.25a4.29,4.29,0,0,1,2.38-1.19,2.58,2.58,0,0,1,2.39.72,18.71,18.71,0,0,0,11,3.34h17.18a9.72,9.72,0,0,0,7.16-2.87,8.87,8.87,0,0,0,2.86-6.44,10.2,10.2,0,0,0-1.91-6.2,9.45,9.45,0,0,0-5.25-3.58Zm121.7,34.36a15.49,15.49,0,0,1,15.27,15.28v76.36a15.47,15.47,0,0,1-15.27,15.27H21.27a14.71,14.71,0,0,1-10.74-4.53A14.68,14.68,0,0,1,6,235.09V158.73A14.68,14.68,0,0,1,10.53,148a14.72,14.72,0,0,1,10.74-4.54H36.55a97.2,97.2,0,0,1-7.64-38.18A96.4,96.4,0,0,1,42.27,55.4a100.25,100.25,0,0,1,36-36A96.4,96.4,0,0,1,128.18,6a96.43,96.43,0,0,1,49.88,13.36,100.3,100.3,0,0,1,36,36,96.4,96.4,0,0,1,13.36,49.87,97.37,97.37,0,0,1-7.63,38.18ZM128.18,21.27a83.6,83.6,0,0,0-84,84,83.57,83.57,0,0,0,84,84,83.57,83.57,0,0,0,84-84,83.6,83.6,0,0,0-84-84ZM235.09,235.09V158.73H211.7a99.76,99.76,0,0,1-30.54,30.54h19.57a4.11,4.11,0,0,1,3.81,3.82v7.64a4.09,4.09,0,0,1-3.81,3.81H55.64a4.09,4.09,0,0,1-3.82-3.81v-7.64a4.11,4.11,0,0,1,3.82-3.82h20a97.93,97.93,0,0,1-31-30.54H21.27v76.36Z" transform="translate(-6 -6)"/></g></svg>'}),n("div",{class:"close",innerHTML:t})),n("a",{href:`${this.rootURL()}/signin`,class:this.profileClasses(),onClick:t=>this.handleProfileClick(t),"data-automation-id":"sh-profile","data-label":this.authenticated?"my account":"sign in"},this.authenticated?n("div",{class:"account"},n("div",{class:"account-authenticated",style:{backgroundImage:`url('${this.auth.currentUser.avatarUrl}')`}})):n("div",{class:"account",innerHTML:'<svg id="account-thin" width="256" height="256" viewBox="0 0 256 256"><g><path d="M128,10 C62.8145161,10 10,62.8145161 10,128 C10,193.185484 62.8145161,246 128,246 C193.185484,246 246,193.185484 246,128 C246,62.8145161 193.185484,10 128,10 Z M188.903226,210.6 C171.821774,223.208871 150.791129,230.774194 128,230.774194 C105.208871,230.774194 84.1782258,223.208871 67.0967742,210.6 L67.0967742,204.129032 C67.0967742,187.333065 80.7524194,173.677419 97.5483871,173.677419 C102.829839,173.677419 110.633065,179.101613 128,179.101613 C145.414516,179.101613 153.122581,173.677419 158.451613,173.677419 C175.247581,173.677419 188.903226,187.333065 188.903226,204.129032 L188.903226,210.6 Z M203.462903,197.515323 C200.227419,175.437903 181.433065,158.451613 158.451613,158.451613 C148.697581,158.451613 143.987097,163.875806 128,163.875806 C112.012903,163.875806 107.35,158.451613 97.5483871,158.451613 C74.5669355,158.451613 55.7725806,175.437903 52.5370968,197.515323 C35.6459677,179.196774 25.2258065,154.835484 25.2258065,128 C25.2258065,71.3314516 71.3314516,25.2258065 128,25.2258065 C184.668548,25.2258065 230.774194,71.3314516 230.774194,128 C230.774194,154.835484 220.354032,179.196774 203.462903,197.515323 Z M128,63.2903226 C104.875806,63.2903226 86.1290323,82.0370968 86.1290323,105.16129 C86.1290323,128.285484 104.875806,147.032258 128,147.032258 C151.124194,147.032258 169.870968,128.285484 169.870968,105.16129 C169.870968,82.0370968 151.124194,63.2903226 128,63.2903226 Z M128,131.806452 C113.297581,131.806452 101.354839,119.86371 101.354839,105.16129 C101.354839,90.458871 113.297581,78.516129 128,78.516129 C142.702419,78.516129 154.645161,90.458871 154.645161,105.16129 C154.645161,119.86371 142.702419,131.806452 128,131.806452 Z"/></g></svg>'}),n("div",{class:"close",innerHTML:t})))),n("profile-nav",{profileNavIsShowing:this.profileNavIsShowing&&this.authenticated,handleSignOut:this.handleSignOut.bind(this),currentUser:this.auth.currentUser,data:this.profileData}),n("give-nav",{data:this.giveData,giveNavIsShowing:this.giveNavIsShowing}))))}static get style(){return"header{background-color:#0095d9;position:relative;top:0;width:100%;z-index:2}\@supports ((position:-webkit-sticky) or (position:sticky)){header{position:-webkit-sticky;position:sticky}}header.nav-is-showing{position:fixed}\@supports ((position:-webkit-sticky) or (position:sticky)){header.nav-is-showing{position:-webkit-sticky;position:sticky}}header>div{margin:0 auto;max-width:1170px;padding:0 15px;position:relative}.global-nav-items{-ms-flex-pack:justify;justify-content:space-between}.global-actions,.global-nav-items,.user-actions{display:-ms-flexbox;display:flex}.global-actions a:first-of-type,.user-actions a:first-of-type{margin-right:18px}.logo{padding:7px}.logo svg{fill:#fff;height:29px;width:111px}.account,.donate,.menu,.search{height:22px;padding:12px 0;width:22px}.account svg,.donate svg,.menu svg,.search svg{height:22px;width:22px}.account .account-authenticated{background-color:#fff;background-position:50%;background-repeat:no-repeat;background-size:22px;border:1.5px solid #fff;border-radius:50%;-webkit-box-sizing:border-box;box-sizing:border-box;height:22px;width:22px}\@media (hover){.account .account-authenticated:hover{-webkit-filter:brightness(90%);filter:brightness(90%)}}.close{padding:9px 0}.close,.close svg{height:26px;width:26px}.account,.close,.donate,.menu,.search{display:block}.give-container,.menu-container,.profile-container,.search-container{color:#fff;display:-ms-flexbox;display:flex;text-decoration:none}\@media (min-width:768px){.give-container:after,.menu-container:after,.profile-container:after,.search-container:after{-ms-flex-item-align:center;align-self:center;bottom:2px;content:attr(data-label);display:inline-block;font-size:13px;margin-left:7px;position:relative;text-transform:capitalize}}.give-container svg,.menu-container svg,.profile-container svg,.search-container svg{fill:#fff}\@media (hover){.give-container:hover,.menu-container:hover,.profile-container:hover,.search-container:hover{color:#ccc}.give-container:hover svg,.menu-container:hover svg,.profile-container:hover svg,.search-container:hover svg{fill:#ccc}}.menu-container .close{display:none;margin-right:-4px}\@media (min-width:992px){.menu-container.nav-is-showing .menu{display:none}.menu-container.nav-is-showing .close{display:block}}.profile-container .close{display:none;margin-right:-4px}\@media (min-width:992px){.profile-container.nav-is-showing .account{display:none}.profile-container.nav-is-showing .close{display:block}}.give-container .close{display:none;margin-right:-4px}\@media (min-width:992px){.give-container.nav-is-showing .donate{display:none}.give-container.nav-is-showing .close{display:block}}"}};var af=function(t){return null!=t&&("object"==typeof t||"function"==typeof t)};function hf(t,n){for(var i in n)cf(n,i)&&(t[i]=n[i])}function cf(t,n){return Object.prototype.hasOwnProperty.call(t,n)}var ff,lf={},vf={default:{"&quot;":'"',"&#34;":'"',"&apos;":"'","&#39;":"'","&amp;":"&","&#38;":"&","&gt;":">","&#62;":">","&lt;":"<","&#60;":"<"},extras:{"&cent;":"","&#162;":"","&copy;":"","&#169;":"","&euro;":"","&#8364;":"","&pound;":"","&#163;":"","&reg;":"","&#174;":"","&yen;":"","&#165;":""}};function df(t,n){if(!function(t){return t&&"string"==typeof t}(t))return"";var i=vf[n||"default"],r=function(t,n){if(lf[t])return lf[t];var i=Object.keys(n).join("|"),r=new RegExp("(?=("+i+"))\\1","g");return lf[t]=r,r}(n,i);return t.replace(r,(function(t){return i[t]}))}Object.defineProperty(vf,"all",{get:function(){return ff||(ff=function(t){af(t)||(t={});for(var n=arguments.length,i=1;i<n;i++){var r=arguments[i];af(r)&&hf(t,r)}return t}({},vf.default,vf.extras))}}),df.chars=vf.default,df.extras=vf.extras,Object.defineProperty(df,"all",{get:function(){return vf.all}});var pf=df;const wf=class{constructor(n){t(this,n)}decodedData(){return pf(this.data||"")}render(){return this.active?null:n("div",{class:"ctas",innerHTML:this.decodedData()})}static get style(){return".ctas{font-family:acumin-pro,helvetica,arial,sans-serif!important;font-weight:300!important;padding:40px 20px 0}\@media (max-width:992px){.ctas{width:calc(100vw - 40px)}}\@media (min-width:992px){.ctas{padding:70px 0 0}}.ctas h3{font-size:11px;margin-top:0;opacity:.5;text-transform:uppercase}.cta{background-color:rgba(21,21,21,.8);display:-ms-flexbox;display:flex;margin-bottom:10px;text-decoration:none}.cta-image{height:75px}.cta-image img{height:75px;width:100px}.cta-content{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;-ms-flex-pack:center;justify-content:center;padding:0 20px;width:100%}.cta-content h4{color:#fff;font-size:14px;font-weight:600;text-transform:uppercase}.cta-content h4,.cta-content p{margin:0}.cta-content p{color:#979797;font-size:12px;font-weight:300;line-height:18px}.cta:hover-content h4{color:#ccc}.more-updates{color:#0095d9;font-size:12px;text-decoration:none;text-transform:capitalize}"}},mf=class{constructor(n){t(this,n),this.isActive=!1,this.debug=!0}componentWillLoad(){this.console=new r(this.debug),this.config=new e}render(){return n("li",null,n("a",{onClick:t=>this.onActivate(t,this.slug),"data-automation-id":`sh-section-${this.slug}`,class:this.isActive?"is-active":""},n("slot",null)))}static get style(){return"nav-section a{cursor:pointer;display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;margin-bottom:10px;padding:15px 20px}\@media (min-width:992px){nav-section a{height:96px;-ms-flex-pack:center;justify-content:center;margin-bottom:0;position:relative;width:86%}}nav-section a:after{border-color:transparent transparent transparent #0095d9;border-style:solid;border-width:63px 0 63px 50px;content:\"\";height:0;left:0;position:absolute;top:0;visibility:hidden;width:0}nav-section a:before{background-color:#0095d9;content:\"\";display:inline-block;height:100%;left:0;position:absolute}\@media (min-width:992px){nav-section a:hover:before{width:4px}}\@media (min-width:992px){nav-section a.is-active:after{left:100%;-webkit-transition:left .4s ease;transition:left .4s ease;visibility:visible}nav-section a.is-active:before{-webkit-transition:width .4s ease;transition:width .4s ease;width:100%}}nav-section a h2{font-family:acumin-pro-extra-condensed,sans-serif!important;font-weight:500!important;display:-ms-flexbox;display:flex;font-size:48px;-ms-flex-pack:justify;justify-content:space-between;line-height:.6;margin:0;position:relative;text-transform:uppercase}\@media (max-width:992px){nav-section a h2:after{background-image:url(/assets/images/chevron-right-light.svg);background-size:12px 22px;content:\"\";display:-ms-flexbox;display:flex;height:22px;position:absolute;right:0;top:20%;width:12px}}nav-section a p{font-size:14px;margin:12px 0 0;opacity:.7}"}},yf=class{constructor(n){t(this,n)}render(){return n("div",{class:this.active==this.slug?"":" hidden"},n("a",{href:"","data-automation-id":`sh-section-subnav-${this.slug}`,class:"back",onClick:t=>this.onBack(t)},n("span",{innerHTML:'<svg aria-hidden="true" focusable="false" data-prefix="fal" data-icon="chevron-left" class="svg-inline--fa fa-chevron-left fa-w-8" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 256 512"><path fill="currentColor" d="M238.475 475.535l7.071-7.07c4.686-4.686 4.686-12.284 0-16.971L50.053 256 245.546 60.506c4.686-4.686 4.686-12.284 0-16.971l-7.071-7.07c-4.686-4.686-12.284-4.686-16.97 0L10.454 247.515c-4.686 4.686-4.686 12.284 0 16.971l211.051 211.05c4.686 4.686 12.284 4.686 16.97-.001z"></path></svg>'}),"Back"),n("slot",null))}static get style(){return".hidden{display:none}nav-section-subnav{font-family:acumin-pro,helvetica,arial,sans-serif!important;font-weight:300!important;color:#fff}nav-section-subnav div{padding:30px 20px 0}nav-section-subnav a{color:#fff;display:inline-block;font-size:19px;margin-bottom:10px;padding-left:10px;text-decoration:none;text-transform:capitalize}nav-section-subnav a.all{margin-bottom:30px}nav-section-subnav a:hover{color:#ccc}nav-section-subnav h2{font-family:acumin-pro-extra-condensed,sans-serif!important;font-weight:500!important;font-size:48px;line-height:48px;margin:0;text-transform:uppercase;margin-bottom:10px}nav-section-subnav h4{font-size:11px;margin:0 0 10px;opacity:.5;text-transform:uppercase}nav-section-subnav ul{padding-left:0;margin-top:0}nav-section-subnav ul li{list-style:none}nav-section-subnav ul li.top-level a{padding-left:0}\@media (min-width:992px){nav-section-subnav h2{display:none}}nav-section-subnav .back{font-size:14px;padding-left:0;position:relative}\@media (min-width:992px){nav-section-subnav .back{display:none}}nav-section-subnav .back span{display:inline-block;height:13px;margin-right:8px;padding:12px 0;position:relative;top:1px;width:7px}nav-section-subnav .back svg{fill:#fff;height:13px;width:7px}"}},gf=class{constructor(n){t(this,n),this.profileNavIsShowing=!0,this.simpleNav=new Bo(this.handleSignOut)}navTitle(){const t=this.data;return unescape((t&&t.title||"").replace("%user_name%",this.currentUser.name||""))}backgroundImageURL(){return this.currentUser&&this.currentUser.avatarUrl||""}render(){return this.profileNavIsShowing&&this.simpleNav.isObjectTruthyNonArray(this.data)?n("div",{class:"profile-nav"},n("div",{class:"profile-nav-img",style:{backgroundImage:`linear-gradient(0deg, rgba(2,0,36,1) 0%, rgba(0,0,0,1) 30%, rgba(0,0,0,0) 100%),url('${this.backgroundImageURL()}')`}}),n("div",null,this.simpleNav.renderSections(this.data,this.navTitle()))):null}static get style(){return".give-nav,.profile-nav{font-family:acumin-pro,helvetica,arial,sans-serif!important;font-weight:300!important;color:#fff;background-color:#000;background-repeat:no-repeat;background-size:100%;height:100vh;left:0;margin-left:-15px;max-height:100vh;overflow-y:scroll;position:-webkit-sticky;position:sticky;top:48px;width:100vw;z-index:2}.give-nav div,.profile-nav div{height:auto;padding:30px 20px 90px}.give-nav a,.profile-nav a{color:#fff;display:inline-block;font-size:19px;margin-bottom:10px;padding-left:10px;text-decoration:none;text-transform:capitalize}.give-nav a.all,.profile-nav a.all{margin-bottom:30px}.give-nav a:hover,.profile-nav a:hover{color:#ccc}.give-nav h2,.profile-nav h2{font-family:acumin-pro-extra-condensed,sans-serif!important;font-weight:500!important;font-size:48px;line-height:48px;margin:0;text-transform:uppercase;margin-bottom:20px}.give-nav h4,.profile-nav h4{font-size:11px;margin:0 0 10px;opacity:.5;text-transform:uppercase}.give-nav ul,.profile-nav ul{padding-left:0;margin-top:0}.give-nav ul li,.profile-nav ul li{list-style:none}.give-nav ul li.top-level a,.profile-nav ul li.top-level a{padding-left:0}\@media (min-width:992px){.give-nav,.profile-nav{height:auto;left:auto;margin-right:-15px;position:absolute;right:15px;width:375px}}\@media (min-width:1170px){.give-nav,.profile-nav{margin-right:0}}.give-nav::-webkit-scrollbar,.profile-nav::-webkit-scrollbar{width:0}.give-nav ul:last-of-type,.profile-nav ul:last-of-type{padding-bottom:30px}.give-nav{background-image:url(https://crds-media.imgix.net/6sNxa1MWhMOfjhAB47yTCa/0acf1af4109f23abc0199b1e34abeb7a/give-bg_2x.jpg?auto=format%2Ccompress)}.profile-nav:after{background-color:rgba(0,0,0,.75);content:\" \";z-index:-1}.profile-nav .profile-nav-img,.profile-nav:after{height:100%;left:0;position:absolute;top:0;width:100%}.profile-nav .profile-nav-img{background-position:top;background-repeat:no-repeat;background-size:contain;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-filter:blur(2px);filter:blur(2px);z-index:-2}\@media (min-width:992px){.profile-nav div{padding-bottom:0}}"}};export{Vr as crds_greeting,xe as crds_heart_button,Oe as crds_modal,_e as crds_recommended_content,Me as crds_shared_footer,Be as crds_shared_header,Ke as crds_site_happenings,Je as crds_snail_trail,_o as crds_snail_trail_link,Mo as crds_subscribe,Lo as give_nav,uf as global_nav,wf as nav_ctas,mf as nav_section,yf as nav_section_subnav,gf as profile_nav};